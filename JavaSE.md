[JavaçŸ¥è¯†ç‚¹æ€»ç»“.md](https://github.com/user-attachments/files/25073051/Java.md)

# 0.Javaç®€ä»‹
Java æ˜¯ä¸€ç§é«˜çº§ã€**é¢å‘å¯¹è±¡** çš„ç¼–ç¨‹è¯­è¨€,ç›¸æ¯”äºC/C++,å®ƒä¼˜åŒ–äº†åœ¨å¼€å‘è¿‡ç¨‹ä¸­å®¹æ˜“çŠ¯çš„é”™,å¦‚å†…å­˜ç®¡ç†,æŒ‡é’ˆæ‚¬ç©ºç­‰; ç›¸æ¯”äºPython,æ€§èƒ½æ›´å¥½.å› æ­¤åœ¨å¼€å‘æ–¹é¢,Javaæˆä¸ºäº†ä¼—å¤šç¨‹åºå‘˜çš„é€‰æ‹©
### 1. Java çš„æ ¸å¿ƒç‰¹ç‚¹

- â€‹**è·¨å¹³å°æ€§**â€‹ï¼š"Write Once, Run Anywhere"ï¼ˆä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œï¼‰æ˜¯ Java çš„æ ¸å¿ƒç†å¿µï¼Œé€šè¿‡ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰å®ç°
- â€‹**é¢å‘å¯¹è±¡**â€‹ï¼šå®Œå…¨é¢å‘å¯¹è±¡ï¼Œæ”¯æŒå°è£…ã€ç»§æ‰¿å’Œå¤šæ€
- â€‹**å¥å£®æ€§**â€‹ï¼šå¼ºç±»å‹æ£€æŸ¥ã€è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼ˆåƒåœ¾å›æ”¶ï¼‰ã€å¼‚å¸¸å¤„ç†æœºåˆ¶
- â€‹**å®‰å…¨æ€§**â€‹ï¼šæä¾›å®‰å…¨ç®¡ç†æœºåˆ¶ï¼Œé€‚åˆç½‘ç»œç¯å¢ƒ
- â€‹**å¤šçº¿ç¨‹**â€‹ï¼šå†…ç½®å¤šçº¿ç¨‹æ”¯æŒ
- â€‹**åŠ¨æ€æ€§**â€‹ï¼šæ”¯æŒè¿è¡Œæ—¶åŠ è½½ç±»å’Œåå°„æœºåˆ¶
### 2. Java æŠ€æœ¯ä½“ç³»

- â€‹**Java SE**â€‹ (Standard Edition)ï¼šæ ‡å‡†ç‰ˆï¼Œæ ¸å¿ƒ Java å¹³å°
- â€‹**Java EE**â€‹ (Enterprise Edition)ï¼šä¼ä¸šç‰ˆï¼Œç°æ”¹åä¸º Jakarta EE
- â€‹**Java ME**â€‹ (Micro Edition)ï¼šå¾®å‹ç‰ˆï¼Œç”¨äºåµŒå…¥å¼è®¾å¤‡
- â€‹**JavaFX**â€‹ï¼šå¯Œå®¢æˆ·ç«¯åº”ç”¨å¼€å‘å¹³å°
### 3. Java å¼€å‘ç¯å¢ƒ

- â€‹**JDK**â€‹ (Java Development Kit)ï¼šJava å¼€å‘å·¥å…·åŒ…ï¼ŒåŒ…å«ç¼–è¯‘å™¨ã€è°ƒè¯•å™¨ç­‰
- â€‹**JRE**â€‹ (Java Runtime Environment)ï¼šJava è¿è¡Œç¯å¢ƒ
- â€‹**JVM**â€‹ (Java Virtual Machine)ï¼šJava è™šæ‹Ÿæœºï¼Œæ‰§è¡Œå­—èŠ‚ç 

---

# 1.åŸºæœ¬è¯­æ³•
## 1.1.Javaçš„æ‰€æœ‰å…³é”®å­—

|    å…³é”®å­—     |         è¯´æ˜         |     å…³é”®å­—      |        è¯´æ˜         |
| :--------: | :----------------: | :----------: | :---------------: |
|  abstract  |   è¡¨æ˜ç±»æˆ–è€…æˆå‘˜æ–¹æ³•æœ‰æŠ½è±¡å±æ€§   |    class     |        ç±»å£°æ˜        |
|   assert   |     æ–­è¨€,ç”¨æ¥è°ƒè¯•ç¨‹åº      |    const     |    ä¿ç•™å…³é”®å­—,æ— å…·ä½“å«ä¹‰    |
|  boolean   |      å¸ƒå°”ç±»å‹å…³é”®å­—       |   continue   |     å›åˆ°ä¸€ä¸ªå—çš„å¼€å§‹å¤„     |
|   break    |   è·³å‡ºè¯­å¥,æå‰è·³å‡ºä¸€ä¸ªä»£ç å—   |   default    |       é»˜è®¤é€‰é¡¹        |
|    byte    |        å­—èŠ‚ç±»å‹        |      do      |  do...whileå¾ªç¯å…³é”®å­—  |
|    case    |   åœ¨switchè¯­å¥ä¸­è¡¨ç¤ºåˆ†æ”¯   |    double    |      åŒç²¾åº¦æµ®ç‚¹ç±»å‹      |
|   catch    |        æ•æ‰å¼‚å¸¸        |     else     | åˆ†æ”¯ç»“æ„ä¸­è¡¨ç¤ºæ¡ä»¶ä¸æˆç«‹æ—¶çš„åˆ†æ”¯  |
|    char    |        å­—ç¬¦ç±»å‹        |     enum     |        æšä¸¾         |
|  extends   |       ç±»çš„ç»§æ‰¿å…³ç³»       |    public    |       å…¬æœ‰æƒé™        |
|   final    |    å¸¸é‡(ä¸å¯æ”¹å˜çš„å±æ€§)     |    return    |       è¿”å›è¯­å¥        |
|  finally   |  å£°æ˜å¼‚å¸¸å¤„ç†ä¸­å§‹ç»ˆä¼šè¢«å¤„ç†çš„å†…å®¹  |    short     |       çŸ­æ•´æ•°ç±»å‹       |
|   float    |        æµ®ç‚¹ç±»å‹        |    static    |     é™æ€å˜é‡/æ–¹æ³•å£°æ˜     |
|    for     |      forå¾ªç¯å…³é”®å­—      |   strictfp   |   ç”¨äºå£°æ˜FP_strict   |
|    goto    |    ä¿ç•™å…³é”®å­—,æ²¡æœ‰å…·ä½“å«ä¹‰    |    super     |       çˆ¶ç±»å¯¹è±¡        |
|     if     |   åˆ†æ”¯ç»“æ„(ifè¯­å¥)å…³é”®å­—    |    switch    |  switchç±»å‹åˆ†æ”¯ç»“æ„å…³é”®å­—  |
| implements |    åˆ›å»ºç±»å’Œæ¥å£çš„å®ç°å…³ç³»     | synchronized |      çº¿ç¨‹åŒæ­¥å…³é”®å­—      |
|   import   |        å¯¼å…¥è¯­å¥        |     this     |       æœ¬ç±»å¯¹è±¡        |
| instanceof |     åˆ¤æ–­ä¸¤ä¸ªç±»çš„ç»§æ‰¿å…³ç³»     |    throw     |       æŠ›å‡ºå¼‚å¸¸        |
|    int     |        æ•´æ•°ç±»å‹        |    throws    |    æ–¹æ³•å°†å¼‚å¸¸æŠ›å‘å¤–éƒ¨æ–¹æ³•    |
| interface  |        å£°æ˜æ¥å£        |  transient   |    å£°æ˜ä¸ç”¨åºåˆ—åŒ–çš„æˆå‘˜åŸŸ    |
|    long    |       é•¿æ•´æ•°ç±»å‹        |     try      |  å°è¯•ç›‘æ§å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç å—   |
|   native   | å£°æ˜ä¸€ä¸ªæ–¹æ³•æ˜¯æœ‰è®¡ç®—æœºç›¸å…³è¯­è¨€å®ç°çš„ |     var      |      å£°æ˜å±€éƒ¨å˜é‡       |
|    new     |      åˆ›å»ºæ–°çš„å®ä¾‹å¯¹è±¡      |     void     |     è¡¨ç¤ºæ–¹æ³•æ— è¿”å›å€¼      |
|  package   |        åŒ…è¯­å¥         |   volatile   | è¡¨æ˜ä¸¤ä¸ªæˆ–å¤šä¸ªå˜é‡å¿…é¡»åŒæ­¥å‘ç”Ÿå˜åŒ– |
|  private   |        ç§æœ‰æƒé™        |    while     |    whileå¾ªç¯å…³é”®å­—     |
| protected  |       è¢«ä¿æŠ¤æƒé™        |              |                   |
> [!tip] æ€»ç»“
>å¯ä»¥çœ‹å‡º,Javaä¸­çš„å…³é”®å­—å’ŒC/C++ä¸­çš„å¾ˆå¤šå…³é”®å­—å¾ˆåƒ(å…¶å®ç”¨æ³•ä¹Ÿå·®ä¸å¤š),å› æ­¤,Javaå¯¹äºæœ‰Cå°¤å…¶æ˜¯C++çš„åŸºç¡€çš„å¼€å‘è€…è¿˜æ˜¯éå¸¸å¥½ä¸Šæ‰‹çš„,æ²¡æœ‰åŸºç¡€çš„æ™®é€šç©å®¶,åœ¨ç†è§£äº†é¢å‘å¯¹è±¡çš„æ€æƒ³å,ä¹Ÿèƒ½å¤Ÿç†è§£è¿™äº›å…³é”®å­—!

## 1.2.è¾“å‡º
> [!note] å®ç°
> System.out.println(); -->(IDEAä¸­ä½¿ç”¨soutç›´æ¥ç”Ÿæˆ)
> printlnè¡¨ç¤ºè¾“å‡ºçš„å†…å®¹å ä¸€è¡Œ (lnä¸æ˜¯æ•°å­¦ä¸­çš„è‡ªç„¶å¯¹æ•°,è€Œæ˜¯lineçš„ç¼©å†™,è¡¨ç¤ºè¾“å‡ºçš„å†…å®¹ç‹¬å ä¸€è¡Œ)

ä¾‹: ç¼–å†™ç¬¬ä¸€ä¸ªç¨‹åº,åœ¨æ§åˆ¶å°æ‰“å°"Hello World"
```Java
public class Helloworld{  
       public static void main(String[] args){  
             System.out.println("Hello world\nGood Night World!");  
       }  
}
```
---
## 1.3.è¾“å…¥
ç›¸æ¯”äºCçš„scanfæˆ–C++çš„cin>>,Javaçš„è¾“å…¥æ¡†æ˜¯ä¸€ä¸ªJavaçš„å¸¸ç”¨ç±»åº“==Scanner==, åœ¨æ¯æ¬¡å‡†å¤‡è¾“å…¥æ—¶,æˆ‘ä»¬éƒ½éœ€è¦åˆ›å»ºä¸€ä¸ªè¾“å…¥æ¡†**å¯¹è±¡**, ä¹Ÿå°±æ˜¯å¸¸è¯´çš„newä¸€ä¸ªå¯¹è±¡,ç„¶åä½¿ç”¨è¿™ä¸ªnewå‡ºæ¥çš„è¾“å…¥æ¡†è¿›è¡Œè¾“å…¥
==æ³¨æ„,æˆ‘ä»¬åœ¨ä½¿ç”¨Scannerä¹‹å‰,éœ€è¦åœ¨è¿™ä¸ªç±»çš„æœ€å‰é¢æ¥å¼•å…¥è¿™ä¸ªç±»==

> [!example] ä¾‹: ä¸€å°çƒçš„åˆå§‹é«˜åº¦ä¸º10,è¦æ±‚ç”¨æˆ·è¾“å…¥åå¼¹æ¬¡æ•°æ±‚å‡ºåå¼¹ç»“æŸåçš„é«˜åº¦
```Java
import java.util.Scanner;
public class FreeFall {  
    public static void main(String[] args) {  
        double height = 10;  
        System.out.println("è¯·è¾“å…¥åå¼¹æ¬¡æ•°:");  
        /*Scannerå£°æ˜è¿™ä¸ªå¯¹è±¡æ˜¯Scannerç±»å‹,å¯¹è±¡åä¸ºsc,
        newè¡¨ç¤ºæ–°å»ºä¸€ä¸ªScannerçš„ç¤ºä¾‹å¯¹è±¡*/
        Scanner sc = new Scanner(System.in);  
        //sc.nextIntè¡¨ç¤ºä¸‹ä¸€ä¸ªæ¥æ”¶çš„å†…å®¹ä¸ºä¸€ä¸ªæ•´æ•°
        double n = sc.nextInt();  
        for (int i =1;i<=n;i++)  
        {  
            height/=2;  
            if(height==0)  
            {  
                break;  
            }  
            else  
                continue;  
        }  
        //åœ¨Javaçš„è¾“å‡ºè¯­å¥ä¸­,åŠ å·åœ¨å­—ç¬¦ä¸²ä¹‹é—´è¡¨ç¤ºå­—ç¬¦ä¸²çš„æ‹¼æ¥
        System.out.println("ç¬¬"+n+"æ¬¡åå¼¹å,é«˜åº¦ä¸º"+height);  
    }  
}
```
---
## 1.4.åˆ†æ”¯ç»“æ„
> [!note] è¯´æ˜
> åˆ†æ”¯ç»“æ„åˆ†ä¸ºä¸¤ç§,ä¸€ç§æ˜¯if-(else if)-else, å¦å¤–ä¸€ç§æ˜¯switch-case-default. äºŒè€…çš„ä½¿ç”¨åœºæ™¯å¾€å¾€ä¸åŒ,å‰è€…åå‘äºåˆ¤æ–­æ¡ä»¶å¾ˆå¤šçš„æƒ…å†µ , è€Œåè€…çš„æ¡ä»¶æ˜¯å¯ä»¥åˆ—ä¸¾å‡ºæ¥çš„. ä¸‹é¢æˆ‘ä»¬ä¸¾ä¾‹è¯´æ˜

### if-(else if)-else    
ä¾‹:è¾“å…¥ä¸€ä¸ªæ•°å­—,åˆ¤æ–­å¹³é—°å¹´
```Java
import java.util.Scanner;  
public class LeapYear {  
    public static void main(String[] args) {  
        Scanner year = new Scanner(System.in);  
        System.out.println("è¯·è¾“å…¥æœ‰æ•ˆå¹´ä»½:");  
        int Y = year.nextInt();  
        if ((Y%4==0 & Y%100!=0) | Y%400==0)  
        {  
            System.out.println(Y+"æ˜¯é—°å¹´");  
        }  
        else {  
            System.out.println(Y + "ä¸æ˜¯é—°å¹´");  
        }  
        year.close();  
    }  
}
```

### switch-case-default 
 ä¾‹: è¾“å…¥ä¸€ä¸ªæ•´æ•°ç±»å‹çš„æˆç»©(0~90,æ­¥è¿›ä¸º10),åˆ¤æ–­æˆç»©æƒ…å†µ
```Java
import java.util.Scanner;  
  
public class Grade {  
    public static void main(String[] args) {  
        Scanner sc = new Scanner(System.in);  
        System.out.println("è¯·è¾“å…¥ä¸€ä¸ªæˆç»©:");  
        int grade = sc.nextInt();  
        switch (grade){  
            case 90:  
                System.out.println("ä¼˜ç§€");  
                break;  
            case 80:  
                System.out.println("è‰¯å¥½");  
                break;  
            case 70:  
                System.out.println("åŠæ ¼");  
                break;  
            case 60:  
                System.out.println("ä¸åŠæ ¼");  
                break;  
            case 50:  
            case 40:  
            case 30:  
            case 20:  
            case 10:  
            case 0:  
                System.out.println("ä¸åŠæ ¼");  
                break;  
            default:  
                System.out.println("è¾“å…¥é”™è¯¯");  
                break;  
        }  
        //å…³é—­æ‰«æå™¨,é˜²æ­¢èµ„æºæ³„éœ²  
        sc.close();  
    }  
}
```

---
## 1.5.å¾ªç¯ç»“æ„
> [!note] è¯´æ˜
> å¾ªç¯ç»“æ„åˆ†ä¸º**while, do...while , for ,foreach**å››ç§æ–¹å¼.ä¸‰è€…çš„ç»ˆæ­¢å¾ªç¯æ¨¡å¼ç•¥æœ‰å·®è·

### while  -->æ»¡è¶³å¾ªç¯ä¸å˜å¼æ—¶ä¿æŒå¾ªç¯,ä¸æ»¡è¶³æ—¶ç»ˆæ­¢å¾ªç¯
ä¾‹:é¡ºåºè¾“å‡ºä»1åˆ°100çš„æ•°å­—
```Java
public class whileTest {  
    public static void main(String[] args) {  
        int i = 1;  
        while (i <= 100) {  
            System.out.println(i);  
            i++;  
        }  
    }  
}
```
### do...while -->ä¸whileç±»ä¼¼,ä½†æ˜¯æ˜¯åœ¨å…ˆæ‰§è¡Œä¸€éå†…å®¹,å†æ‰§è¡Œå¯¹å¾ªç¯ä¸å˜å¼çš„åˆ¤æ–­
```Java
public class dowhileTest {  
    public static void main(String[] args){  
        int i = 1;  
        do{  
            System.out.println("hello world");  
            i++;  
        }while(i<=5);  
    }  
}
```
### for --> å¾ªç¯åˆ¤æ–­å¤šä¸ºå¯¹æ‰§è¡Œæ¬¡æ•°çš„åˆ¤å®š
```Java
public class ForTest {  
    public static void main(String[] args) {  
        for (int i = 0; i < 5; i++) {  
            System.out.println( i);  
        }  
    }  
}
```
### foreach -->æ˜¯forçš„ç®€åŒ–ç‰ˆæœ¬,æ ¼å¼ä¸ºfor(å…ƒç´ ç±»å‹ x : éå†å¯¹è±¡obj)
```Java
public class ArrTest {  
    public static void main(String[] args) {  
        int[]arr={1,2,3,4,5};  
        for (int i = 0; i < arr.length; i++) {  
            if (arr[i]%2==0)  
            {  
                arr[i]/=2;  
            }  
            else  
            {  
                arr[i]*=2;  
            }  
        }  
        //éå†æ•°ç»„arrä¸­çš„æ¯ä¸ªæ•´æ•°å…ƒç´ j
        for (int j : arr) {  
            System.out.println(j);  
        }  
    }  
}
```

åµŒå¥—å¾ªç¯å…·ä½“çš„å®ç°æ ¹æ®éœ€æ±‚çµæ´»åº”ç”¨

---
## 1.6.æ•°ç»„
> [!note] è¯´æ˜
> åœ¨Javaä¸­, æ•°ç»„çš„**é•¿åº¦æ˜¯ç¡®å®š**çš„,ä¸€æ—¦è¢«åˆ›å»º,å¤§å°å°±é”æ­»,ä¸å¯æ”¹å˜

### ä¸€ç»´æ•°ç»„
Javaä¸­çš„æ•°ç»„å®šä¹‰æ–¹å¼ä¸Cæœ‰æ‰€ä¸åŒ,æ ¼å¼ä¸º: å…ƒç´ ç±»å‹ æ•°ç»„å = new å…ƒç´ ç±»å‹ `[ å…ƒç´ ä¸ªæ•° ]`
æˆ–è€…ç›´æ¥æŒ‡å®šæ•°ç»„çš„å†…å®¹
```Java
//ç›´æ¥æŒ‡å®š
int[]arr={1,2,3,4,5};
//å£°æ˜+åˆ†é…
int month[] = new int[12]
```
### äºŒç»´æ•°ç»„
äºŒç»´æ•°ç»„æœ¬è´¨æ˜¯æ•°ç»„å…ƒç´ ä¸ºä¸€ç»´æ•°ç»„çš„ä¸€ç»´æ•°ç»„.å£°æ˜æ–¹å¼å¦‚ä¸‹
```Java
int arr[][] = new int [3][4];
```

éå†äºŒç»´æ•°ç»„é€šå¸¸ä½¿ç”¨åµŒå¥—å¾ªç¯.

---
## 1.7.æ–¹æ³•(é‡è¦)
æ–¹æ³•å°±æ˜¯ç±»ä¸­çš„æˆå‘˜å‡½æ•°,ç”±ä¿®é¥°ç¬¦,è¿”å›å€¼ç±»å‹,æ–¹æ³•å,å‚æ•°ç»„æˆ
åœ¨ä½¿ç”¨æ–¹æ³•è§£å†³é—®é¢˜ä¹‹å‰,æˆ‘ä»¬éœ€è¦è€ƒè™‘å¦‚ä¸‹é—®é¢˜:
- è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨èŒƒå›´æ˜¯ä»€ä¹ˆ?(ç±»å†…å¤–å‡å¯è°ƒç”¨ä¸ºpublic,ç±»å†…å¯è°ƒç”¨å¤–ä¸å¯è°ƒç”¨ä¸ºprivate)
- è¿™ä¸ªæ–¹æ³•**è¦ä¸è¦è¿”å›å€¼**?
- å¦‚æœè¦è¿”å›å€¼,éœ€è¦è¿”å›ä¸ª**ä»€ä¹ˆç±»å‹**çš„å€¼?
- æˆ‘è¿™ä¸ªæ–¹æ³•çš„**å‚æ•°**æ˜¯ä»€ä¹ˆ?(æˆ‘**è¦æ“ä½œçš„ç›®æ ‡**æ˜¯ä»€ä¹ˆ?)

é¢˜ç›®: æ‹Ÿå®šæ•°ç»„,å®Œæˆä¸¤ä¸ªæ–¹æ³•: è¾“å‡ºæ•°ç»„ , ä¸ºæ•°ç»„æ’åº

å…ˆå®Œæˆä»¥ä¸Šæ€è€ƒ,æˆ‘ä»¬å‘ç°,åœ¨æ’åºçš„æ–¹æ³•é‡Œ,ä¸éœ€è¦è¿”å›å€¼(è¿™ä¸ªæ–¹æ³•æ˜¯ä¸ªçº¯ç²¹çš„æ“ä½œçš„è¿‡ç¨‹), æ“ä½œçš„ç›®æ ‡æ˜¯ä¸€ä¸ªæ•´å‹çš„æ•°ç»„. è¾“å‡ºæ•°ç»„çš„æ–¹æ³•ç»è¿‡åˆ†æ,å‘ç°ä¹Ÿä¸éœ€è¦è¿”å›å€¼(å› ä¸ºåœ¨æ–¹æ³•å†…å°±ä½¿ç”¨äº†è¾“å‡ºè¯­å¥),æ“ä½œå¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªæ•´å‹æ•°ç»„.äºæ˜¯,æˆ‘ä»¬å¼€å§‹ç¼–å†™ä»£ç 

æœ‰äººä¼šé—®è¿™ä¸ªæƒé™çš„é—®é¢˜,ç”±äºæ˜¯åœ¨åŒä¸€ä¸ªç±»ä¸­ç¼–å†™çš„æ–¹æ³•,å°†æ’åºå’Œè¾“å‡ºçš„æƒé™æ”¹ä¸ºç§æœ‰ä»ç„¶å¯ä»¥è¿è¡Œ(ç±»å†…è°ƒç”¨).ä»¥è¿™ä¸ªè¾“å‡ºæ•°ç»„ä¸ºä¾‹,å¦‚æœæˆ‘åœ¨å¦å¤–ä¸€ä¸ªç±»ä¸­ä¹Ÿè¦è°ƒç”¨è¿™ä¸ªè¾“å‡ºçš„æ–¹æ³•,æˆ‘è¿™ä¸ªæ–¹æ³•çš„æƒé™å°±åªèƒ½æ˜¯publicäº†

ä¾‹:æ„å»ºæ•°ç»„å¹¶å®ç°å†’æ³¡æ’åº
```Java
import java.util.Scanner;  
  
public class BubbleSort  
{  
    public static void main(String[] args)  
    {  
        Scanner sc = new Scanner(System.in);  
        int[] arr = new int[10];  
        System.out.println("ä¸ºæ•°ç»„å…ƒç´ èµ‹å€¼:");  
        for (int i = 0; i < 10; i++)  
        {  
            arr[i] = sc.nextInt();  
        }  
        BubbleSort.sort(arr);  
    }  
  
  
    public static void sort(int[] arr)  
    {  
        {  
            for (int i = 1; i <10; i++) {  
                for (int j = 0; j < 10-i; j++) {  
                    if (arr[j]>arr[j+1])  
                    {  
                        int tmp=arr[j];  
                        arr[j]=arr[j+1];  
                        arr[j+1]=tmp;  
                    }  
                }  
            }  
            ShowArray(arr);  
        }  
    }  
  
  
  
  
    public static void ShowArray(int[]arr)  
    {  
        for (int i : arr)  
        {  
            System.out.print(i+"\t");  
        }  
        System.out.println();  
    }  
  
}
```

é˜¶æ®µç»ƒä¹ :ä½¿ç”¨åŸºæœ¬å†…å®¹å†™ä¸€ä¸ªæ¨ç®±å­å°æ¸¸æˆ

---
# 2.é¢å‘å¯¹è±¡ç¼–ç¨‹(é‡ç‚¹)
## 2.0.é¢å‘å¯¹è±¡ä»‹ç»

> [!note] åœ¨å­¦ä¹ å®ŒåŸºç¡€çš„å†…å®¹ä¹‹å,æˆ‘ä»¬å‘ç°,Javaä¸æ¥è§¦è¿‡çš„C/C++ä¸åŒ,å®ƒçš„æ–‡ä»¶å½¢å¼æ˜¯*Javaç±»*
> 1. Javaç±»å’ŒCæ–‡ä»¶çš„æœ¬è´¨åŒºåˆ«
> 	- C/C++: ä»¥**å‡½æ•°**ä¸ºåŸºæœ¬å•å…ƒ, æ–‡ä»¶æ˜¯å‡½æ•°çš„é›†åˆ
> 	- Java: ä»¥**ç±»**ä¸ºåŸºæœ¬å•å…ƒ,æ–‡ä»¶æ˜¯ç±»çš„è½½ä½“
> 2. ç¼–è¯‘é€»è¾‘
> 	- C/C++ï¼šå•ç‹¬ç¼–è¯‘æºæ–‡ä»¶åé“¾æ¥ï¼ˆå¦‚Â `g++ main.cpp utils.cpp`ï¼‰
> 	- Javaï¼šæ¯ä¸ªç±»ç‹¬ç«‹ç¼–è¯‘ä¸º`.class`æ–‡ä»¶ï¼Œè¿è¡Œæ—¶ç”±JVMåŠ¨æ€åŠ è½½
> 3. *æƒé™å…³é”®å­—çš„ä½¿ç”¨*
> Javaé€šè¿‡æƒé™ä¿®é¥°ç¬¦æ¥é™åˆ¶ä¸¥æ ¼çš„å°è£…æ§åˆ¶
> - public -> æš´éœ²APIæ¥å£,å…è®¸å¤–éƒ¨è®¿é—®
> - private -> éšè—å†…éƒ¨å®ç°ç»†èŠ‚(å¦‚å­—æ®µç§æœ‰åŒ–,ç„¶åé€šè¿‡getterå’Œsetterè¿›è¡Œè·¨ç±»çš„è°ƒç”¨)
> - protected -> å…è®¸å­ç±»ç»§æ‰¿ä¿®æ”¹,ä½†æ˜¯ç¦æ­¢å¤–éƒ¨è®¿é—®
> 
> æ¥ä¸‹æ¥æˆ‘å°†ç”¨å‡ ä¸ªå½¢è±¡çš„ä¾‹å­å¯¹è¿™ä¸‰ä¸ªå…³é”®å­—è¿›è¡Œè§£é‡Š
> 
> - private -> é”åœ¨æŠ½å±‰ä¸­çš„æ—¥è®°æœ¬
> 	- ä½ è‡ªå·±å¯ä»¥ä»»æ„è¯»å†™å…¶ä¸­çš„å†…å®¹
> 	- ä½ å¦ˆå¦ˆ(åŒåŒ…), ä½ å„¿å­(å­ç±»), é™Œç”Ÿäºº(å…¶ä»–ç±»)æƒ³å·çœ‹éƒ½ä¼šæŠ¥é”™
> 	- æœ¬è´¨: ç»å¯¹çš„éšç§ä¿æŠ¤,å¿…é¡»é€šè¿‡ä½ æä¾›çš„æ–¹æ³•æ¥è¿›è¡Œè®¿é—®
> ```Java
> class Diary{
> 	private String msg = "æˆ‘å–œæ¬¢xxx";
> 	public void tearDiaryPage(){
> 		msg = "æ—¥è®°å·²è¢«æ’•æ¯";
> 	}
> }
> ```
> - protected -> å®¶æ—ä¿é™©ç®±
> 	- ä½ å’Œä½ çš„å­©å­ä»¬(å­ç±»)éƒ½å¯ä»¥æ‰“å¼€
> 	- é‚»å±…(åŒåŒ…éå­ç±»)å’Œé™Œç”Ÿäºº(å…¶ä»–ç±»)æ— æ³•è§¦ç¢°
> 	- æœ¬è´¨: å®¶åº­ç»§æ‰¿ç‰¹æƒ,å¤–äººæ— æ³•è®¿é—®
> ```Java
> class FamilyVault{
> 	protected String money = "1000ä¸‡å…ƒ";
> 	void  showToFamily(){
> 		System.out.println(money);
> 	}
> }
> class Son extends FamilyVault{
> 	void pay(){
> 		System.out.println("å­©å­èŠ±æ‰äº†"+money); //å­ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨
> 	}
> }
> ```
> - public -> ATMæœº
> 	- ç”¨æˆ·åªèƒ½é€šè¿‡æœºå™¨ä¸Šçš„æŒ‰é’®è¿›è¡Œæ“ä½œ(*publicæ–¹æ³•*)
> 	- å†…éƒ¨çš„è¿è¡Œé€»è¾‘å®Œå…¨ä¸å¯è§(*privateå­—æ®µ/æ–¹æ³•*)
> ```Java
> class ATM{
> 	//å…¬å…±æ“ä½œæŒ‰é’®
> 	public void withdraw(int amount){
> 		if(checkBalance() >= amount){
> 			dispenseCash(amount);
> 		}
> 	}
> 	//ä½™é¢æ£€æŸ¥é€»è¾‘ä¸å¯è§
> 	private int checkBalance(){...}
> 	//å‡ºé’±æœºåˆ¶ä¸å¯è§
> 	private void dispenseCash(int n){...}
> }
> ```
> 


>[!note]  çŸ¥é“äº†ç±»çš„ç›¸å…³ç»†èŠ‚,é‚£ä¹ˆå¯¹è±¡åˆæ˜¯ä»€ä¹ˆå‘¢
>æƒ³è±¡ä½ æ­£åœ¨å¯¼æ¼”ä¸€åœºæˆå‰§ï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹(OOP)å°±åƒæ˜¯è¿™åœºæˆå‰§çš„å‰§æœ¬åˆ›ä½œæ–¹å¼ã€‚è®©æˆ‘ä»¬ç”¨ç”ŸåŠ¨çš„æ¯”å–»æ¥ç†è§£è¿™ä¸ªç¼–ç¨‹èŒƒå¼ï¼š
>1. ğŸ­ è§’è‰²ä¸æ¼”å‘˜ï¼šç±»ä¸å¯¹è±¡
>åœ¨OOPä¸­ï¼Œâ€‹**ç±»(Class)â€‹**å°±åƒæ˜¯è§’è‰²çš„å‰§æœ¬å¤§çº²ã€‚æ¯”å¦‚"è‹±é›„"è¿™ä¸ªè§’è‰²æœ‰å¤§çº²æè¿°äº†ä»–çš„èƒ½åŠ›ã€æ€§æ ¼ç‰¹å¾ç­‰ã€‚è€Œ**å¯¹è±¡(Object)â€‹**åˆ™æ˜¯æ ¹æ®è¿™ä¸ªå¤§çº²å®é™…ç™»å°è¡¨æ¼”çš„æ¼”å‘˜ - æ¯”å¦‚"èœ˜è››ä¾ "å°±æ˜¯"è‹±é›„"ç±»çš„ä¸€ä¸ªå…·ä½“==å®ä¾‹==ã€‚
>
>2. ğŸ’ è§’è‰²çš„è£…å¤‡ï¼šå±æ€§ ->æ¯ä¸ªè§’è‰²éƒ½æœ‰è‡ªå·±çš„**å±æ€§(Properties)â€‹**â€‹ï¼š
>	- è‹±é›„å¯èƒ½è£…å¤‡ç€"æŒ¯é‡‘ç›¾ç‰Œ"(å±æ€§å€¼)
>	- æ‹¥æœ‰"è¶…çº§åŠ›é‡"(å±æ€§å€¼)
>	- ç©¿ç€"çº¢è‰²æ–—ç¯·"(å±æ€§å€¼)
>è¿™äº›å±æ€§å®šä¹‰äº†è§’è‰²çš„**çŠ¶æ€å’Œç‰¹å¾**ã€‚
>
>3. ğŸ¬ è§’è‰²çš„åŠ¨ä½œï¼šæ–¹æ³• -> è§’è‰²çš„**æ–¹æ³•(Methods)â€‹**æ˜¯ä»–ä»¬èƒ½æ‰§è¡Œçš„åŠ¨ä½œï¼š
>	- è‹±é›„å¯ä»¥"é£è¡Œ()"
>	- å¯ä»¥"å‘å°„æ¿€å…‰()"
>	- å¯ä»¥"è‡ªæˆ‘ä¿®å¤()"
>è¿™äº›æ–¹æ³•å®šä¹‰äº†è§’è‰²**èƒ½åšä»€ä¹ˆ**ã€‚
>
>4. ğŸ‘¨ğŸ‘¦ å®¶æ—ä¼ æ‰¿ï¼šç»§æ‰¿ -> **ç»§æ‰¿(Inheritance)â€‹**å°±åƒå®¶æ—é—ä¼ ï¼š
>	- "é’¢é“ä¾ "ç±»å¯ä»¥ç»§æ‰¿è‡ªæ›´é€šç”¨çš„"è¶…çº§è‹±é›„"ç±»
>	- å­©å­ç»§æ‰¿äº†çˆ¶æ¯çš„ç‰¹å¾ï¼Œä½†å¯ä»¥æ·»åŠ è‡ªå·±ç‹¬ç‰¹çš„èƒ½åŠ›
>	- è¿™é¿å…äº†é‡å¤ç¼–å†™ç›¸ä¼¼çš„ä»£ç 
>
>5. ğŸ•µï¸â€â™‚ï¸ å¤šé‡èº«ä»½ï¼šå¤šæ€ -> **å¤šæ€(Polymorphism)â€‹**è®©è§’è‰²å¯ä»¥ä»¥ä¸åŒå½¢å¼å‡ºç°ï¼š
>	- ä¸€ä¸ª"æ”»å‡»()"æ–¹æ³•ï¼Œå¯¹äºå¼“ç®­æ‰‹æ˜¯å°„ç®­ï¼Œå¯¹äºæ³•å¸ˆæ˜¯æ–½æ³•
>	- åŒæ ·çš„æ–¹æ³•åï¼Œ**æ ¹æ®å¯¹è±¡ç±»å‹ä¸åŒè€Œæœ‰ä¸åŒå®ç°**
>6. ğŸ”’ ç§˜å¯†æ—¥è®°ï¼šå°è£…  **å°è£…(Encapsulation)â€‹**å°±åƒè§’è‰²çš„ç§˜å¯†æ—¥è®°ï¼š
>	- æŠŠæ•°æ®(å±æ€§)å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•æ†ç»‘åœ¨ä¸€èµ·
>	- éšè—å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œåªæš´éœ²å¿…è¦çš„æ¥å£
>	- å°±åƒä½ ä¸éœ€è¦çŸ¥é“æ‰‹æœºå¦‚ä½•å·¥ä½œï¼Œåªéœ€çŸ¥é“æ€ä¹ˆä½¿ç”¨å®ƒ
>
>7. ğŸ¤ è§’è‰²å…³ç³»ï¼šå…³è”ã€èšåˆä¸ç»„åˆ
>	- â€‹**å…³è”**â€‹ï¼šè‹±é›„è®¤è¯†è®°è€…(æ¾æ•£å…³ç³»)
>	- **èšåˆ**â€‹ï¼šå¤ä»‡è€…è”ç›Ÿç”±å¤šä¸ªè‹±é›„ç»„æˆ(æ•´ä½“ä¸éƒ¨åˆ†å¯ç‹¬ç«‹å­˜åœ¨)
>	- **ç»„åˆ**â€‹ï¼šæ‰‹è‡‚æ˜¯èº«ä½“çš„ä¸€éƒ¨åˆ†(éƒ¨åˆ†ä¸èƒ½è„±ç¦»æ•´ä½“å­˜åœ¨)
>


---
## 2.1.ç±»å’Œå¯¹è±¡åŸºæœ¬å†…å®¹
å¦‚,æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ‰‹æœºå¯¹è±¡,å®ƒçš„**å±æ€§**æœ‰å“ç‰Œ,ä»·æ ¼ç­‰,å®ƒçš„**è¡Œä¸º**(æ–¹æ³•)æœ‰æ‰“ç”µè¯,ç©æ¸¸æˆç­‰.

> [!warning] æ³¨æ„!
> å¯¹è±¡çš„æ–¹æ³•çš„é»˜è®¤æƒé™ä¸º**private**,åªèƒ½åœ¨åŒä¸€ä¸ªåŒ…å†…è°ƒç”¨.è‹¥è¦åœ¨åŒ…å¤–çš„ç±»è°ƒç”¨å¿…é¡»æ˜¾å¼å£°æ˜ä¸ºpublic

ä¾‹:æ„å»ºæ‰‹æœºç±»,å®ç°åŸºæœ¬æ–¹æ³•,å¦‚æ‰“ç”µè¯,ç©æ¸¸æˆ
```java
//  ç±»:æè¿°ä¸€ç±»äº‹ç‰©     
    //  JavaBean ç±»,ä¸åŒ…å«mainæ–¹æ³•,ç¼–å†™ä¸€ç³»åˆ—å±æ€§å’Œæ–¹æ³•æè¿°äº‹ç‰© //  
    //1.æˆå‘˜å˜é‡--å±æ€§//  
    /*  å®Œæ•´æ ¼å¼:ä¿®é¥°ç¬¦ æ•°æ®ç±»å‹ å˜é‡å = åˆå§‹åŒ–å€¼  
    ä¸€èˆ¬ä¸éœ€è¦æŒ‡å®šåˆå§‹åŒ–å€¼,å­˜åœ¨é»˜è®¤å€¼.  
      æ•´æ•°--0,å°æ•°--0.0,å¸ƒå°”--false,å¼•ç”¨ç±»å‹--NULL*/  
public class Phone { 
    String brand;  
    double price;  
    //æ„é€ å‡½æ•°  
    public Phone(String brand , double price) {  
        this.brand = brand;  
        this.price = price;  
    }  
    public Phone(){  
        this.brand = "è‹¹æœ";  
        this.price = 8888;  
    }  
    public Phone(double price){  
        this.brand = "åä¸º";  
        this.price = price;  
    }  
    //2æˆå‘˜æ–¹æ³•--è¡Œä¸º//  
    public void call()  
    {  
        System.out.println("æ‰‹æœºåœ¨æ‰“ç”µè¯");  
    }  
    public void playgame(){  
        System.out.println("æ‰‹æœºåœ¨ç©æ¸¸æˆ");  
    }  
}
```

åœ¨æµ‹è¯•ç±»ä¸­,æˆ‘ä»¬åˆ›å»º(new)äº†3ä¸ªæ–°çš„æ‰‹æœºå¯¹è±¡çš„å®ä¾‹p1,p2,p3
```Java
/*  å¯¹è±¡,ç±»æ¯”Cçš„ç»“æ„ä½“,åŒ…å«äº†ä¸€ä¸ªäº‹ç‰©çš„å¤šç§å±æ€§    */
public class PhoneTest {  
    //æµ‹è¯•ç±»:åŒ…å«mainæ–¹æ³•//  
    public static void main(String[] args) {  
        //åˆ›å»ºå¯¹è±¡//-->new  
        //æ–¹æ³•(å‡½æ•°)çš„é‡è½½,æ¥å—çš„å‚æ•°ä¸åŒ,è¾“å‡ºå†…å®¹å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒ
        Phone p1 = new Phone("å°ç±³",1999.9);  
        Phone p2 = new Phone();  
        Phone p3 = new Phone(7499);
        //è·å–å¯¹è±¡ä¸­çš„å€¼//  
        System.out.println(p1.brand);  
        System.out.println(p1.price);  
        System.out.println(p2.brand);  
        System.out.println(p2.price);  
        System.out.println(p3.brand);  
        System.out.println(p3.price);  
  
  
        //è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•//  
        p1.call();  
        p2.call();  
        p3.call();  
        p1.playgame();  
        p2.playgame();  
        p3.playgame();  
  
    }  
}
```
è¾“å‡ºç»“æœå¦‚ä¸‹
```text
å°ç±³
1999.9
è‹¹æœ
8888.0
åä¸º
7499.0
æ‰‹æœºåœ¨æ‰“ç”µè¯
æ‰‹æœºåœ¨æ‰“ç”µè¯
æ‰‹æœºåœ¨æ‰“ç”µè¯
æ‰‹æœºåœ¨ç©æ¸¸æˆ
æ‰‹æœºåœ¨ç©æ¸¸æˆ
æ‰‹æœºåœ¨ç©æ¸¸æˆ
```

---

## 2.2. å°è£…-->é«˜å†…èš,ä½è€¦åˆ
- å†…éƒ¨ç»†èŠ‚ç”±è‡ªå·±å®Œæˆ,ä¸å…è®¸å¤–éƒ¨å¹²æ¶‰.ä»…å…è®¸ä¸ªåˆ«æ–¹æ³•ä¾›å¤–éƒ¨ä½¿ç”¨
- å±æ€§ç§æœ‰,ä½¿ç”¨**get/setæ–¹æ³•**ä¾›å¤–éƒ¨è°ƒç”¨æ•°æ®
ä»¥ä¸€ä¸ªå­¦ç”Ÿç±»ä¸¾ä¾‹,å…¶ä¸­id,name,ageå‡ä¸ºprivate.å¦‚æœæ­¤æ—¶ç›´æ¥åœ¨Testç±»ä¸­å»ä½¿ç”¨`student.id`,ä¼šæŠ¥é”™.æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨getå’Œsetçš„å…¬æœ‰æ–¹æ³•æ¥ä¾›Testç±»æ¥è°ƒç”¨,æ¥è®¾ç½®/è·å–ä¿¡æ¯
```jAVA
public class Student {  
    private int id;  
    private String name;  
    private int age;  
  
  
    public Student() {  
    }  
  
    public Student(int id, String name, int age) {  
        this.id = id;  
        this.name = name;  
        this.age = age;  
    }  
  
    /**  
     * è·å–  
     * @return id  
     */    
    public int getId() {  
        return id;  
    }  
  
    /**  
     * è®¾ç½®  
     * @param id  
     */  
    public void setId(int id) {  
        this.id = id;  
    }  
  
    /**  
     * è·å–  
     * @return name  
     */    
    public String getName() {  
        return name;  
    }  
  
    /**  
     * è®¾ç½®  
     * @param name  
     */  
    public void setName(String name) {  
        this.name = name;  
    }  
  
    /**  
     * è·å–  
     * @return age  
     */    
     public int getAge() {  
        return age;  
    }  
  
    /**  
     * è®¾ç½®  
     * @param age  
     */  
    public void setAge(int age) {  
        this.age = age;  
    }  
  
    public String toString() {  
        return "Student{id = " + id + ", name = " + name + ", age = " + age + "}";  
    }  
}
```

```Java
public class Test {  
    public static void main(String[] args) {  
        Student []arr = new Student[3];  
        Student st1 = new Student(1,"å¼ ä¸‰",23);  
        Student st2 = new Student(2,"æå››",24);  
        Student st3 = new Student(3,"ç‹äº”",25);  
  
        arr[0]=st1;  
        arr[1]=st2;  
        arr[2]=st3;  
        //åˆ é™¤ä¸€ä¸ªå¯¹è±¡//  
        int index = getIndex(arr,2);  
        //System.out.println(index);//  
        if (index>=0){  
            arr[index]=null;  
            Print(arr);  
        }  
        else {  
            System.out.println("IDä¸å­˜åœ¨,åˆ é™¤å¤±è´¥!");  
        }  
        //å†æ·»åŠ ä¸€ä¸ªå¯¹è±¡å¹¶è¿›è¡Œå”¯ä¸€æ€§çš„åˆ¤æ–­//  
        Student st4 = new Student(4,"èµµå…­",24);  
        //å”¯ä¸€æ€§åˆ¤æ–­--å·²å­˜åœ¨->ä¸æ·»åŠ ;ä¸å­˜åœ¨->æ·»åŠ è¿›æ•°ç»„  
        boolean flag = contains(arr,st4.getId());  
        if (flag){  
            System.out.println("å½“å‰IDé‡å¤,è¯·ä¿®æ”¹åå†æ·»åŠ !");  
        }  
        else{  
            int count = getCount(arr);  
            if (count == arr.length){  
                //å·²ç»å­˜æ»¡,åˆ›å»ºæ–°æ•°ç»„,é•¿åº¦ä¸ºåŸæ•°ç»„é•¿åº¦+1  
                Student[]NewArr = CreateNewArr(arr);  
                //å°†æ–°çš„å…ƒç´ æ’å…¥'  
                NewArr[count]=st4;  
                //æ·»åŠ åéå†æ‰€æœ‰ä¿¡æ¯  
                Print(NewArr);  
            }  
            else {  
                arr[count] = st4;  
            }  
        }  
        //æ•°ç»„å·²ç»å­˜æ»¡äº†,åˆ›å»ºæ–°æ•°ç»„,é•¿åº¦ä¸º4//  
    }  
    //æ‰“å°å…ƒç´ çš„æ–¹æ³•  
    public static void Print(Student[]arr){  
        for (int i = 0; i < arr.length; i++) {  
            Student stu = arr[i];  
            if (stu!=null){  
                System.out.println(stu.getName()+','+stu.getId()+','+stu.getAge());  
            }  
        }  
    }  
    //åˆ¤æ–­æ•°ç»„å­˜æ”¾å¤šå°‘å…ƒç´ çš„æ–¹æ³•  
    public static int getCount(Student[]arr){  
        //è®¡æ•°å™¨  
        int Count = 0;  
        for (int i = 0; i < arr.length; i++) {  
            if(arr[i]!=null){  
                Count++;  
            }  
        }  
        return Count;  
    }  
    //åˆ›å»ºæ–°æ•°ç»„çš„æ–¹æ³•  
    public static Student[] CreateNewArr(Student[]arr){  
        Student[]newArr = new Student[arr.length+1];  
        for (int i = 0; i < arr.length; i++) {  
            newArr[i]=arr[i];  
        }  
        return newArr;  
    }  
    //åˆ¤æ–­å­¦å·å”¯ä¸€çš„æ–¹æ³•//  
    public static boolean contains(Student[]arr,int id){  
        for (int i = 0; i < arr.length; i++) {  
            //è·å–å¯¹è±¡  
            Student stu = arr[i];  
            if (stu!=null){  
                int sid = stu.getId();  
                if (sid==id){  
                    return  true;  
                }  
            }  
            //è·å–ID  
        }  
        return  false;  
    }  
    //æ‰¾idåœ¨æ•°ç»„ç´¢å¼•//  
    public static int getIndex(Student[]arr,int id){  
        for (int i = 0; i < arr.length; i++) {  
            //ä¾æ¬¡å¾—åˆ°æ¯ä¸ªå­¦ç”Ÿå¯¹è±¡//  
            Student stu = arr[i];  
            if (stu!=null){  
                int sid = stu.getId();  
                if(sid == id){  
                    return i;//è¾“å‡ºå¯¹åº”çš„ç´¢å¼•//  
                }  
            }  
        }  
        return -1;  
    }  
  
}
```



---

## 2.3.ç»§æ‰¿-->extends-->è¡¨ç¤ºå­ç±»æ˜¯çˆ¶ç±»çš„æ‰©å±•
- ç»§æ‰¿æ˜¯**ç±»å’Œç±»ä¹‹é—´çš„å…³ç³»**
- ç»§æ‰¿å…³ç³»çš„ä¸¤ä¸ªç±»,ä¸€ä¸ªä¸ºçˆ¶ç±»(åŸºç±»)ä¸€ä¸ªä¸ºå­ç±»(æ´¾ç”Ÿç±»),å­ç±»ç»§æ‰¿çˆ¶ç±»,ç”¨extendsè¡¨ç¤º
- å­çˆ¶ç±»ä¹‹é—´,ä»æ„ä¹‰ä¸Šè®²åº”æœ‰"is a"çš„å…³ç³».å¦‚Student is a person
- æ‰€æœ‰çš„ç»§æ‰¿æºäºObjectç±»,ä¹Ÿå°±æ˜¯è¯´,Objectç±»æ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»
```java
package extendDemo;  
  
public class Person {  
    public void say(){  
        System.out.println("è¯´äº†ä¸€å¥è¯.");  
    }  
    public int money(){  
         return 100000;  
    }  
}
```
```Java
package extendDemo;  
  
public class Student extends Person{  
    public int score(){  
        return 80;  
    }  
}
```
```Java
package extendDemo;  
  
public class Test {  
    public static void main(String[] args) {  
        Student stu = new Student();  
        stu.say();  
        System.out.println(stu.money());  
        System.out.println(stu.score());  
  
        Person person = new Person();  
        person.say();  
        System.out.println(person.money());  
//        System.out.println(person.score());   é”™è¯¯!!!  
    }  
}
```
å­¦ç”Ÿç±»ç»§æ‰¿äº†personç±»,ä¹Ÿå°±èƒ½è°ƒç”¨personä¸­çš„æ–¹æ³•.ä½†æ˜¯personå¯¹è±¡æ— æ³•ä½¿ç”¨studentçš„æ–¹æ³•

> [!warning] æ³¨æ„
> Javaä¸­**ç±»ä¹‹é—´**åªæœ‰å•ç»§æ‰¿,æ²¡æœ‰å¤šç»§æ‰¿


> [!question] æ€è€ƒï¼šå­ç±»å¦‚ä½•è®¿é—®çˆ¶ç±»çš„ç§æœ‰å†…å®¹ï¼Ÿ
> åœ¨Javaä¸­ï¼Œå­ç±»æ— æ³•ç›´æ¥è®¿é—®çˆ¶ç±»çš„ç§æœ‰æˆå‘˜ï¼Œå› ä¸º**ç§æœ‰æˆå‘˜çš„è®¿é—®æƒé™è¢«ä¸¥æ ¼é™åˆ¶**ã€‚è¦å®ç°çˆ¶ç±»çš„ç§æœ‰å†…å®¹ï¼Œéœ€é€šè¿‡ä»¥ä¸‹æ–¹æ³•é—´æ¥è®¿é—®ï¼š
> 
> 1. é€šè¿‡çˆ¶ç±»çš„å…¬å…±æ–¹æ³•æˆ–å±æ€§
> çˆ¶ç±»å¦‚æœæä¾›äº†è·å– private æˆå‘˜ public æ–¹æ³•ï¼Œå­ç±»å°±å¯ä»¥é€šè¿‡è°ƒç”¨è¿™äº›æ–¹æ³•é—´æ¥è®¿é—®ç§æœ‰å†…å®¹
> ```java
> class Parent { 
> 	private String privateField = "ç§æœ‰å€¼"; 
> 	public String getPrivateField() { 
> 		return privateField; // å…¬å…±æ–¹æ³•è¿”å›ç§æœ‰å­—æ®µ 
> 	} 
> } 
> class Child extends Parent { 
> 	public void accessPrivateField() { 
> 		String value = super.getPrivateField(); // é€šè¿‡çˆ¶ç±»æ–¹æ³•è®¿é—® System.out.println("å­ç±»è·å–çš„ç§æœ‰å­—æ®µå€¼: " + value); 
> 	  } 
>  }
> ```
> 2. é€šè¿‡æ„é€ å‡½æ•°ä¼ é€’å‚æ•°
> è‹¥çˆ¶ç±»ç§æœ‰å­—æ®µåœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ï¼Œå­ç±»å¯é€šè¿‡ä¼ é€’å‚æ•°è§¦å‘çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œé—´æ¥è·å–ç§æœ‰å­—æ®µã€‚ä¾‹å¦‚ï¼š
> ```java
> class Parent { 
> 	private String name; 
> 	public Parent(String name) { 
> 		this.name = name; // åˆå§‹åŒ–ç§æœ‰å­—æ®µ 
> 	} 
> } 
>  class Child extends Parent { 
> 	  public Child(String name) { 
> 		super(name); // è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œä¼ é€’å‚æ•° 
> 		System.out.println("å­ç±»æ„é€ å‡½æ•°è°ƒç”¨çˆ¶ç±»ç§æœ‰å­—æ®µ: " + name); 
> 	  } 
>   }
> ```
> 3. ç»§æ‰¿çˆ¶ç±»çš„å…¬å…±å±æ€§
> è‹¥çˆ¶ç±»å°†ç§æœ‰å­—æ®µæš´éœ²ä¸ºå…¬å…±å±æ€§ï¼ˆå¦‚é™æ€å¸¸é‡ï¼‰ï¼Œå­ç±»å¯ç›´æ¥è®¿é—®ï¼š
> ```java
> class Parent { 
> 	private static final String PRIVATEé™æ€å¸¸é‡ = "ç§æœ‰é™æ€å¸¸é‡"; 
> } 
> class Child extends Parent { 
> 	public static void main(String[] args) { 
> 		System.out.println(PUBLICé™æ€å¸¸é‡); // é€šè¿‡é™æ€å¸¸é‡è®¿é—® 
> 	} 
> }
> ```
> 4. åå°„ï¼ˆä¸å®‰å…¨ï¼‰
> é€šè¿‡`java.lang.reflect`åŒ…çš„APIï¼Œå¯å¼ºåˆ¶è®¿é—®çˆ¶ç±»çš„ç§æœ‰å­—æ®µï¼Œä½†**ç ´åå°è£…ä¸”ä¸å®‰å…¨**ï¼š
> ```java
> import java.lang.reflect.Field; 
> class Parent { 
> 	private String privateField = "ç§æœ‰å€¼"; 
> } 
> class Child extends Parent { 
> 	public void reflectAccess() { 
> 		Field privateFieldField =Child.class.getDeclaredField("privateField"); privateFieldField.setAccessible(true); // ç ´åç§æœ‰æ€§ String value = (String) privateFieldField.get(this); // è·å–ç§æœ‰å­—æ®µå€¼ System.out.println("é€šè¿‡åå°„è®¿é—®ç§æœ‰å­—æ®µ: " + value); 
> 	} 
> }
> ```
> 

> [!summary] æ€»ç»“
> ç»§æ‰¿æ˜¯Javaå®ç°ä»£ç å¤ç”¨å’Œå±‚æ¬¡åŒ–è®¾è®¡çš„æ ¸å¿ƒæœºåˆ¶ï¼Œé€šè¿‡Â `extends`Â å…³é”®å­—å®ç°ã€‚å­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»çš„éç§æœ‰æˆå‘˜ï¼Œä½†ç§æœ‰æˆå‘˜éœ€é€šè¿‡å…¬å…±æ–¹æ³•æˆ–æ„é€ å‡½æ•°é—´æ¥è®¿é—®ã€‚ç»§æ‰¿ä¸å¤šæ€ç»“åˆï¼Œå…è®¸åŒä¸€æ¥å£çš„ä¸åŒå®ç°ï¼Œæå‡ç¨‹åºçš„çµæ´»æ€§ã€‚éœ€è¦æ³¨æ„Javaçš„å•ç»§æ‰¿ç‰¹æ€§ã€æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™ã€è®¿é—®æƒé™æ§åˆ¶ä»¥åŠå¼‚å¸¸å¤„ç†çš„é™åˆ¶ã€‚

---
## 2.4 è¯¦è§£thiså’Œsuperå…³é”®å­—

#### 2.4.1. thiså…³é”®å­—
> [!note] å®šä¹‰ä¸ä½œç”¨
> `this`å…³é”®å­—ç”¨äºåœ¨æ–¹æ³•æˆ–æ„é€ å‡½æ•°å†…éƒ¨**å¼•ç”¨å½“å‰å®ä¾‹**ï¼ˆå³è°ƒç”¨è€…å¯¹è±¡ï¼‰ã€‚å®ƒå…è®¸æ–¹æ³•æˆ–æ„é€ å‡½æ•°è®¿é—®**æœ¬ç±»çš„ç§æœ‰æˆå‘˜**ï¼Œå¹¶å®ç°**å¤šæ€è°ƒç”¨**ã€‚

> [!example] ä½¿ç”¨åœºæ™¯
1. **è®¿é—®å½“å‰å®ä¾‹çš„ç§æœ‰å­—æ®µ**  
   ```java
   public class Student {
       private String name;
       private int age;
       
    public Student(String name, int age) {
        this.name = name; // ä½¿ç”¨thisè®¿é—®å½“å‰å®ä¾‹çš„nameå­—æ®µ
        this.age = age;
    }
}
```

2. **å¤šæ€è°ƒç”¨çˆ¶ç±»æ–¹æ³•**

```java
public class Child extends Parent {
    public void method() {
        this.method(); // è°ƒç”¨æœ¬ç±»çš„æ–¹æ³•ï¼ˆè‹¥ä¸ºé™æ€æ–¹æ³•éœ€æ³¨æ„ï¼‰
        super.method(); // è°ƒç”¨çˆ¶ç±»æ–¹æ³•
    }
}
```

3. **æ„é€ æ–¹æ³•ä¸­çš„å‚æ•°ä¼ é€’**
```java
public class Circle {
   private int radius;
        
    public Circle(int radius) {
        this.radius = radius; // thisç”¨äºå…³è”å½“å‰å®ä¾‹çš„radiuså­—æ®µ
    }
}
```

> [!attention] æ³¨æ„
> - **ä¸èƒ½ç”¨äºé™æ€æ–¹æ³•æˆ–å±€éƒ¨å˜é‡**ï¼š`this`ä»…æŒ‡å‘å½“å‰å®ä¾‹ï¼Œé™æ€æ–¹æ³•æ— å®ä¾‹ï¼Œå±€éƒ¨å˜é‡ä¸å¯è®¿é—®ã€‚
> - **é¿å…é‡å¤ä½¿ç”¨**ï¼šåœ¨å¾ªç¯æˆ–é€’å½’ä¸­éœ€è°¨æ…ï¼Œå¯èƒ½å¯¼è‡´é€»è¾‘é”™è¯¯ã€‚
> - **å¤šæ€è°ƒç”¨çš„ä¼˜å…ˆçº§**ï¼š`this`å’Œ`super`çš„è°ƒç”¨é¡ºåºéœ€ä¸ç»§æ‰¿å…³ç³»ä¸€è‡´ã€‚

#### 2.4.2. superå…³é”®å­—

> [!note] å®šä¹‰ä¸ä½œç”¨
> superå…³é”®å­—ç”¨äºåœ¨å­ç±»ä¸­**å¼•ç”¨çˆ¶ç±»å¯¹è±¡**ï¼Œå®ç°**çˆ¶ç±»æ–¹æ³•æˆ–å­—æ®µçš„è¦†ç›–**ã€‚åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œ`super`ç”¨äºè°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ã€‚

> [!example] ä½¿ç”¨åœºæ™¯
1. **è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•**
```java
public class Child extends Parent {
    public Child(int param) {
        super(param); // è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•
    }
}
```

2. **é‡å†™çˆ¶ç±»æ–¹æ³•**
```java
public class Derived extends Base {
    @Override
    public void print() {
        super.print(); // è°ƒç”¨çˆ¶ç±»printæ–¹æ³•
        System.out.println("å­ç±»æ‰©å±•å†…å®¹"); // æ·»åŠ å­ç±»é€»è¾‘
    }
}
```

3. **è®¿é—®çˆ¶ç±»ç§æœ‰å­—æ®µ**
```java
public class Child extends Parent {
    public void showParentField() {
        // é€šè¿‡superè®¿é—®çˆ¶ç±»nameå­—æ®µ
        System.out.println("çˆ¶ç±»å­—æ®µå€¼: " + super.name);
    }
}
```

> [!attention] æ³¨æ„
> - **æƒé™æ£€æŸ¥**ï¼šçˆ¶ç±»æ–¹æ³•/å­—æ®µéœ€æ»¡è¶³è®¿é—®æƒé™ï¼ˆå¦‚`private`å­—æ®µä»…èƒ½é€šè¿‡æœ¬ç±»æ–¹æ³•è®¿é—®ï¼‰ã€‚
> - **æ„é€ å‡½æ•°è°ƒç”¨**ï¼š`super`å¿…é¡»åœ¨å­ç±»æ„é€ å‡½æ•°**ç¬¬ä¸€ä¸ªè¯­å¥**è°ƒç”¨ï¼Œå¦åˆ™æŠ›å‡º`IllegalStateException`ã€‚
> - **å¤šæ€è¦†ç›–**ï¼šè‹¥å­ç±»é‡å†™æ–¹æ³•ï¼Œéœ€é€šè¿‡`super`è°ƒç”¨çˆ¶ç±»åŸå§‹æ–¹æ³•ï¼ˆéé‡å†™åæ–¹æ³•ï¼‰ã€‚

#### 2.4.3. thisä¸superçš„å…¸å‹åº”ç”¨

> [!example] ç¤ºä¾‹1ï¼šå¤šæ€æ–¹æ³•è°ƒç”¨
```java
public class Animal {
    public void eat() {
        System.out.println("åŠ¨ç‰©åœ¨è¿›é£Ÿ");
    }
}

public class Dog extends Animal {
    @Override
    public void eat() {
        super.eat(); // è°ƒç”¨çˆ¶ç±»eatæ–¹æ³•
        System.out.println("ç‹—åœ¨å•ƒéª¨å¤´");
    }
}

public class Main {
    public static void main(String[] args) {
        Animal a = new Dog();
        a.eat(); // è¾“å‡ºï¼šåŠ¨ç‰©åœ¨è¿›é£Ÿ\nç‹—åœ¨å•ƒéª¨å¤´
    }
}
```

> [!example] ç¤ºä¾‹2ï¼šæ„é€ å‡½æ•°ä¼ é€’å‚æ•°
```java
public class Person {
    private String name;
    private int age;
    
    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }
}

public class Student extends Person {
    public Student(String name, int age, int grade) {
        super(name, age); // è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•åˆå§‹åŒ–éƒ¨åˆ†å‚æ•°
        this.grade = grade;
    }
    
    private int grade;
    
    public void display() {
        super.display(); // è°ƒç”¨çˆ¶ç±»displayæ–¹æ³•ï¼ˆè‹¥å­˜åœ¨ï¼‰
        System.out.println("æˆç»©: " + grade);
    }
}
```

#### 2.4.4. å¸¸è§é”™è¯¯ä¸æœ€ä½³å®è·µ

> [!example] é”™è¯¯ç¤ºä¾‹1ï¼šthisåœ¨é™æ€æ–¹æ³•ä¸­çš„è¯¯ç”¨
```java
public class Test {
    public static void main(String[] args) {
        Test t = new Test();
        té™æ€æ–¹æ³•(); // ç¼–è¯‘é”™è¯¯ï¼šthisä¸èƒ½ç”¨äºé™æ€æ–¹æ³•
    }
    
    private static void é™æ€æ–¹æ³•() {
        this; // è¯­æ³•é”™è¯¯ï¼šé™æ€æ–¹æ³•æ— this
    }
}
```

> [!example] é”™è¯¯ç¤ºä¾‹2ï¼šsuperåœ¨éç»§æ‰¿ç±»ä¸­çš„è°ƒç”¨
```java
public class NonChild {
    public void method() {
        super(); // ç¼–è¯‘é”™è¯¯ï¼šéç»§æ‰¿ç±»è°ƒç”¨super
    }
}
```

**æœ€ä½³å®è·µ**

1. **æ˜ç¡®è®¿é—®å¯¹è±¡**ï¼š

```java
public void printInfo() {
    System.out.println("å½“å‰å¯¹è±¡: " + this); // è¾“å‡ºå®ä¾‹å¯¹è±¡åœ°å€
    System.out.println("çˆ¶å¯¹è±¡: " + super); // è¾“å‡ºçˆ¶ç±»å®ä¾‹åœ°å€
}
```
    
2. **æ„é€ å‡½æ•°é“¾å¼è°ƒç”¨**ï¼š

```java
public class Child extends Parent {
    public Child(int param) {
        super(param); // é“¾å¼è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•
    }
}
```

3. **å¤šæ€æ–¹æ³•ä¼˜å…ˆçº§**ï¼š

```java
public class Base {
    public void abstractMethod() {
        System.out.println("åŸºç±»æ–¹æ³•");
    }
}
    
public class Derived extends Base {
    @Override
    public void abstractMethod() {
        super.abstractMethod(); // è°ƒç”¨çˆ¶ç±»åŸå§‹æ–¹æ³•
        System.out.println("å­ç±»æ–¹æ³•æ‰©å±•");
    }
}
```

#### 2.4.5. thiså’Œsuperçš„å¯¹æ¯”æ€»ç»“

|å¯¹æ¯”é¡¹|thiså…³é”®å­—|superå…³é”®å­—|
|:-:|:-:|:-:|
|**ä½œç”¨å¯¹è±¡**|å½“å‰å®ä¾‹ï¼ˆè°ƒç”¨è€…å¯¹è±¡ï¼‰|çˆ¶ç±»å¯¹è±¡ï¼ˆéšå¼æˆ–æ˜¾å¼ï¼‰|
|**ä½¿ç”¨åœºæ™¯**|è®¿é—®å½“å‰å®ä¾‹çš„æˆå‘˜|è°ƒç”¨çˆ¶ç±»æ–¹æ³•/å­—æ®µæˆ–æ„é€ å‡½æ•°|
|**ç»§æ‰¿å…³ç³»**|ä»…åœ¨å­ç±»ä¸­å¯ç”¨|å­ç±»ä¸çˆ¶ç±»å¿…é¡»å­˜åœ¨ç»§æ‰¿å…³ç³»|
|**è¯­æ³•é™åˆ¶**|ä¸èƒ½ç”¨äºé™æ€æ–¹æ³•æˆ–å±€éƒ¨å˜é‡|ä¸èƒ½ç”¨äºæœ¬ç±»æ–¹æ³•æˆ–å­—æ®µ|
|**å…¸å‹æ“ä½œ**|`this.name = "å®ä¾‹å€¼";`|`super.name = "çˆ¶ç±»å€¼";`|

> [!summary] ç¤ºä¾‹ä»£ç æ•´åˆ
```java
public class Parent {
    private String commonField = "å…¬å…±å­—æ®µ";
    public void commonMethod() {
        System.out.println("çˆ¶ç±»æ–¹æ³•");
    }
}

public class Child extends Parent {
    private String childField = "å­ç±»å­—æ®µ";
    
    public Child(String name) {
        super(name); // è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•åˆå§‹åŒ–commonField
        this.childField = name;
    }
    
    @Override
    public void commonMethod() {
        super.commonMethod(); // è°ƒç”¨çˆ¶ç±»æ–¹æ³•
        System.out.println("å­ç±»æ‰©å±•è¾“å‡º: " + this.childField);
    }
}

public class Main {
    public static void main(String[] args) {
        Child child = new Child("å¼ ä¸‰");
        child.commonMethod(); // è¾“å‡ºï¼šçˆ¶ç±»æ–¹æ³•\nå­ç±»æ‰©å±•è¾“å‡º: å¼ ä¸‰
    }
}
```

**è¿è¡Œç»“æœ**
```text
çˆ¶ç±»æ–¹æ³•
å­ç±»æ‰©å±•è¾“å‡º: å¼ ä¸‰
```

---
## 2.5.æ–¹æ³•çš„é‡å†™
- éœ€è¦æœ‰ç»§æ‰¿å…³ç³»,å­ç±»æ–¹æ³•é‡å†™çˆ¶ç±»æ–¹æ³•
- æ–¹æ³•åå¿…é¡»ç›¸åŒ,æ–¹æ³•ä½“å¯ä»¥ä¸åŒ
- å‚æ•°åˆ—è¡¨å¿…é¡»ç›¸åŒ(å¦åˆ™ä¼šæˆä¸ºé‡è½½)
- ä¿®é¥°ç¬¦èŒƒå›´å¯ä»¥æ‰©å¤§ä¸å¯ä»¥ç¼©å°    **public>protected>default>private**
- æŠ›å‡ºçš„å¼‚å¸¸: èŒƒå›´å¯ä»¥è¢«ç¼©å°ä¸å¯ä»¥è¢«æ‰©å¤§   `ClassNotFoundException`
- ä¸ºä»€ä¹ˆéœ€è¦é‡å†™? --> çˆ¶ç±»çš„åŠŸèƒ½å­ç±»ä¸ä¸€å®šéœ€è¦æˆ–ä¸ä¸€å®šæ»¡è¶³

```java
public class B {  
    public  void test(){  
        System.out.println("B.test()");  
    }  
}

public class A extends B{  
    @Override  
    public  void test() {  
        System.out.println("A.test()");  
    }  
}

public class Text2 {  
    public static void main(String[] args) {  
        //é™æ€æ–¹æ³•-->æ–¹æ³•è°ƒç”¨åªå’Œå·¦è¾¹çš„ç±»å‹ç›¸å…³  
        A a = new A();  
        a.test();   //A  
        //çˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘äº†å­ç±»  
        B b = new A();  //å­ç±»é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•  
        b.test();   //B  
    }  
}
```
è¿è¡Œç»“æœå¦‚ä¸‹
```text
A.test()
A.test()
```

---
## 2.6.å¤šæ€-->å®ç°**åŠ¨æ€ç¼–è¯‘**
- å¤šæ€æ˜¯**æ–¹æ³•çš„å¤šæ€**,å±æ€§æ²¡æœ‰å¤šæ€
- çˆ¶ç±»å’Œå­ç±»å¿…é¡»æœ‰è”ç³»,å¦åˆ™ä¼šå‡ºç°ç±»å‹è½¬æ¢å¼‚å¸¸ `ClassCastException`
- å­˜åœ¨æ¡ä»¶: å­˜åœ¨ç»§æ‰¿å…³ç³», æ–¹æ³•éœ€è¦é‡å†™, çˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘çš„æ˜¯å­ç±»
- staticæ–¹æ³•å±äºç±»ä¸å±äºç¤ºä¾‹
- finalå¸¸é‡
- privateæ— æ³•é‡å†™,ä¸å¯èƒ½å­˜åœ¨å¤šæ€

> [!example] ä¸¾ä¾‹:å›¾å½¢è®¡ç®—
> çŸ©å½¢å’Œåœ†çš„è®¡ç®—æ–¹å¼è‚¯å®šä¸åŒ,éœ€è¦æœ‰è‡ªå·±çš„è®¡ç®—æ–¹å¼,æ‰€ä»¥éœ€è¦é‡å†™æ–¹æ³•.
```Java
public class PolymorphismExample {
    public static void main(String[] args) {
        // ============= å¤šæ€çš„æ ¸å¿ƒä½“ç° =============
        // çˆ¶ç±»Shapeçš„å¼•ç”¨ï¼ŒæŒ‡å‘å­ç±»Circleå¯¹è±¡
        Shape shape1 = new Circle(5.0);
        // çˆ¶ç±»Shapeçš„å¼•ç”¨ï¼ŒæŒ‡å‘å­ç±»Rectangleå¯¹è±¡
        Shape shape2 = new Rectangle(4.0, 6.0);
        
        // åŒä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼Œæ ¹æ®å®é™…å¯¹è±¡ç±»å‹è¡¨ç°å‡ºä¸åŒè¡Œä¸º
        System.out.println("åœ†å½¢é¢ç§¯: " + shape1.calculateArea()); // è¾“å‡ºåœ†çš„é¢ç§¯
        System.out.println("çŸ©å½¢é¢ç§¯: " + shape2.calculateArea()); // è¾“å‡ºçŸ©å½¢é¢ç§¯
        
        // ============= å¤šæ€åœ¨é›†åˆä¸­çš„åº”ç”¨ =============
        Shape[] shapes = new Shape[2];
        shapes[0] = new Circle(3.0);
        shapes[1] = new Rectangle(2.0, 4.0);
        
        // éå†æ—¶æ— éœ€çŸ¥é“å…·ä½“å­ç±»ç±»å‹
        for (Shape shape : shapes) {
            System.out.println("å›¾å½¢é¢ç§¯: " + shape.calculateArea());
        }
    }
}

/**
 * çˆ¶ç±»ï¼šæŠ½è±¡å›¾å½¢ç±»ï¼ˆåŒ…å«æŠ½è±¡æ–¹æ³•ï¼‰
 */
abstract class Shape {
    // æŠ½è±¡æ–¹æ³•ï¼šç”±å­ç±»å®ç°å…·ä½“è®¡ç®—é€»è¾‘
    public abstract double calculateArea();
}

/**
 * å­ç±»1ï¼šåœ†å½¢
 */
class Circle extends Shape {
    private double radius;

    public Circle(double radius) {
        this.radius = radius;
    }

    // é‡å†™çˆ¶ç±»æŠ½è±¡æ–¹æ³•ï¼ˆå®ç°å¤šæ€çš„å…³é”®ï¼‰
    @Override
    public double calculateArea() {
        return Math.PI * radius * radius;
    }
}

/**
 * å­ç±»2ï¼šçŸ©å½¢
 */
class Rectangle extends Shape {
    private double width;
    private double height;

    public Rectangle(double width, double height) {
        this.width = width;
        this.height = height;
    }

    // é‡å†™çˆ¶ç±»æŠ½è±¡æ–¹æ³•ï¼ˆå®ç°å¤šæ€çš„å…³é”®ï¼‰
    @Override
    public double calculateArea() {
        return width * height;
    }
}
```


---
## 2.7.instanceofå…³é”®å­—-->åˆ¤æ–­ä¸¤ä¸ªç±»çš„ç»§æ‰¿å…³ç³»
```mermaid
classDiagram
Person <|-- Student
Person <|-- Teacher
```
Personå’ŒStringæ— å…³è”,ç›´æ¥æŠ¥é”™
```Java
package extendDemo;  
  
import java.util.Objects;  
  
public class Test1 {  
    public static void main(String[] args) {  
        Object object = new Student();  
  
        System.out.println(object instanceof Student);  
        System.out.println(object instanceof Person);  
        System.out.println(object instanceof Object);  
        System.out.println(object instanceof Teacher);  
        System.out.println(object instanceof String);  
        System.out.println("==================================");  
        Person person = new Student();  
        System.out.println(person instanceof Object);  
        System.out.println(person instanceof Person);  
        System.out.println(person instanceof Student);  
        System.out.println(person instanceof Teacher);  
//        System.out.println(person instanceof String);  æŠ¥é”™
        System.out.println("==================================");  
        Student student = new Student();  
        System.out.println(student instanceof Object);  
        System.out.println(student instanceof Person);  
        System.out.println(student instanceof Student);  
//        System.out.println(student instanceof Teacher);  æŠ¥é”™
    }  
}
```

è¿è¡Œç»“æœ:
```text
true
true
true
false
false
==================================
true
true
true
false
==================================
true
true
true
```

---
## 2.8.ç±»å‹è½¬æ¢
> [!example] é«˜è½¬ä½
```Java
public class Test3 {  
    public static void main(String[] args) {  
        Person zhangSan = new Student();  
        Student student = (Student)zhangSan;  
        student.say();  
    }  
}
```

> [!attention] æ³¨æ„
> ä½è½¬é«˜å¯èƒ½ä¼šä¸¢å¤±è‡ªå·±çš„ä¸€äº›æ–¹æ³•(ä¸å®‰å…¨)

---
## 2.9.staticå…³é”®å­—-->ä½¿ç”¨ç±»åè®¿é—®
- å±äºç±»è€Œéå¯¹è±¡
- åœ¨ç±»åŠ è½½æ—¶åˆå§‹åŒ–    
- æ‰€æœ‰å¯¹è±¡å…±äº«åŒä¸€ä»½é™æ€æˆå‘˜
```java
class Employee {
    int id;         // å®ä¾‹å˜é‡ï¼ˆæ¯ä¸ªå¯¹è±¡ç‹¬ç«‹ï¼‰
    static String company = "ABC Corp"; // é™æ€å˜é‡ï¼ˆæ‰€æœ‰å¯¹è±¡å…±äº«ï¼‰
    
    Employee(int id) {
        this.id = id;
    }
    
    void display() {
        System.out.println(id + " " + company);
    }
}

public class Test {
    public static void main(String[] args) {
        Employee e1 = new Employee(101);
        Employee e2 = new Employee(102);
        
        e1.display(); // è¾“å‡ºï¼š101 ABC Corp
        e2.display(); // è¾“å‡ºï¼š102 ABC Corp
        
        // ä¿®æ”¹é™æ€å˜é‡ä¼šå½±å“æ‰€æœ‰å®ä¾‹
        Employee.company = "XYZ Inc";
        e1.display(); // è¾“å‡ºï¼š101 XYZ Inc
        e2.display(); // è¾“å‡ºï¼š102 XYZ Inc
    }
}
```

è¿è¡Œç»“æœ:
```text
101 ABC Corp
102 ABC Corp
101 XYZ Inc
102 XYZ Inc
```
---

## 2.10.æŠ½è±¡ç±»(abstract)å’Œæ¥å£(interface)
### æŠ½è±¡ç±»
- ç”±abstractä¿®é¥°
- æŠ½è±¡ç±»çš„æ‰€æœ‰æ–¹æ³•,é›†æˆäº†å®ƒçš„**å­ç±»å¿…é¡»å®ç°å®ƒçš„æ–¹æ³•**
- ä¸èƒ½è¢«å®ä¾‹åŒ–,åªèƒ½é å­ç±»å®ç°(ä¸€èˆ¬å°†æŠ½è±¡ç±»å®šä¹‰ä¸ºçˆ¶ç±»)
- *æŠ½è±¡æ–¹æ³•å¿…é¡»åœ¨æŠ½è±¡ç±»ä¸­*
- æŠ½è±¡ç±»ä¸­å¯ä»¥æœ‰æ™®é€šæ–¹æ³•
```Java
public abstract  class Parent {  
    abstract void show();  
}
```

### æ¥å£-->çº¦æŸä½œç”¨, åšåˆ°çº¦æŸå’Œå®ç°åˆ†ç¦»
> [!note] å¼•å…¥
> æåˆ°æ¥å£,æˆ‘ä»¬ä¸ç”±ä¼šè”æƒ³åˆ°ç”Ÿæ´»ä¸­å¸¸è§çš„ä¸œè¥¿,å¦‚ç”µè„‘ä¸Šçš„å„ç§æ¥å£,æ’æŸ¥çš„æ’é”€ç­‰,è¿™äº›éƒ½æ˜¯å®ä½“çš„"æ¥å£",å®ƒä»¬çš„å…±åŒç‰¹ç‚¹æ˜¯**ç¬¦åˆæŸä¸€è§„èŒƒ**(å¦‚USB,Type-C,HDMI,æˆ–æ˜¯æ’åº§çš„å½¢çŠ¶è§„èŒƒ),ä½†æ˜¯ä¸é™åˆ¶å…·ä½“çš„å†…å®¹æ˜¯ä»€ä¹ˆ. 

é‚£ä¹ˆåœ¨ä»»ä½•é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ä¸­, æ¥å£è¿™ä¸ªæ¦‚å¿µä¸ç”Ÿæ´»ä¸­çš„æ¥å£ç±»ä¼¼, èµ·åˆ°ä¸€ä¸ª**çº¦æŸå’Œè§„èŒƒ**çš„ä½œç”¨,å…·ä½“ç‰¹ç‚¹å¦‚ä¸‹:
- æ¥å£å¯ä»¥å®ç°å¤šç»§æ‰¿
- æ¥å£æ˜¯çº¯ç²¹çš„æŠ½è±¡ç±»
- æ¥å£ä¸èƒ½è¢«å®ä¾‹åŒ–, å› è€Œæ¥å£ä¸­æ²¡æœ‰æ„é€ æ–¹æ³•, ä¹Ÿå°±æ˜¯è¯´ç±»çš„æ„é€ å’Œæ¥å£å¹¶æ— å…³è”
- å¿…é¡»é‡å†™æ¥å£ä¸­çš„æ–¹æ³•
```Java
public interface Paintable {  
    public void paint();  
}

public class Quadrangle {  
    public void doAnything()  
    {  
        System.out.println("å››è¾¹å½¢");  
    }  
}

public class Square extends Quadrangle implements Paintable{  
    public void paint()  
    {  
        System.out.println("ç”»ä¸€ä¸ªæ­£æ–¹å½¢");  
    }  
}

public class Circle implements Paintable{  
    public void paint()  
    {  
        System.out.println("ç”»ä¸€ä¸ªåœ†å½¢");  
    }  
}

public class Test {  
    public static void main(String[] args) {  
        Square square = new Square();  
        Circle circle = new Circle();  
        Quadrangle quadrangle = new Quadrangle();  
        square.paint();  
        circle.paint();  
        quadrangle.doAnything();  
    }  
}
```
è¿è¡Œç»“æœ:
```text
ç”»ä¸€ä¸ªæ­£æ–¹å½¢
ç”»ä¸€ä¸ªåœ†å½¢
å››è¾¹å½¢
```

> [!question] æ€è€ƒï¼šæˆ‘ä»¬åœ¨çœ‹ä¸€äº›æ¥å£ï¼ˆå¦‚Collectionï¼ŒListï¼‰çš„æºä»£ç æ—¶ä¼šå‘ç°å…¶ä¸­æœ‰çš„å‡½æ•°æœ‰å‡½æ•°ä½“ï¼Œè¿™æ˜¯å¦è¿èƒŒäº†æ¥å£çš„è®¾è®¡åŸåˆ™ï¼Ÿ
> ç­”æ¡ˆæ˜¯ï¼šä»Java8ä¹‹åï¼ŒJavaå¼•å…¥äº†**é»˜è®¤æ–¹æ³•**
> é»˜è®¤æ–¹æ³•æ˜¯æ¥å£ä¸­ä½¿ç”¨Â `default`Â å…³é”®å­—å®šä¹‰çš„æ–¹æ³•ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªé»˜è®¤å®ç°ã€‚
> 1. å®šä¹‰
> ```java
> public interface MyInterface { 
> 	// æŠ½è±¡æ–¹æ³•ï¼ˆå¿…é¡»è¢«å®ç°ç±»è¦†ç›–ï¼‰ 
> 	void abstractMethod(); 
> 	// é»˜è®¤æ–¹æ³•ï¼ˆå¯ç›´æ¥ä½¿ç”¨ï¼Œæˆ–è¢«å®ç°ç±»è¦†ç›–ï¼‰ 
> 	default void defaultMethod() { 
> 		System.out.println("è¿™æ˜¯é»˜è®¤æ–¹æ³•çš„é»˜è®¤å®ç°"); 
> 	} 
> }
> ```
> 2. é»˜è®¤æ–¹æ³•çš„ä½œç”¨
> 	- **æ¥å£æ‰©å±•**ï¼šåœ¨ä¸ç ´åå·²æœ‰å®ç°ç±»çš„æƒ…å†µä¸‹ï¼Œä¸ºæ¥å£æ·»åŠ æ–°æ–¹æ³•
> 	- **å‘åå…¼å®¹**ï¼šå·²æœ‰å®ç°ç±»æ— éœ€ä¿®æ”¹å³å¯ä½¿ç”¨æ–°æ–¹æ³•
> 	- **æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹**ï¼šä¸lambdaè¡¨è¾¾å¼ç»“åˆï¼Œç®€åŒ–ä»£ç 
> 3. ä½¿ç”¨åœºæ™¯
> 	- **æ¥å£æ‰©å±•**ï¼šå½“éœ€è¦ä¸ºæ¥å£æ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼Œé¿å…ä¿®æ”¹æ‰€æœ‰å®ç°ç±»ã€‚
> 	- **å·¥å…·æ–¹æ³•**ï¼šå®šä¹‰ä¸€äº›é€šç”¨æ–¹æ³•ï¼Œä¾›å®ç°ç±»ç›´æ¥è°ƒç”¨ã€‚
> 	- **ä¸æŠ½è±¡æ–¹æ³•ç»“åˆ**ï¼šæ¥å£ä¸­å¯ä»¥åŒæ—¶åŒ…å«æŠ½è±¡æ–¹æ³•å’Œé»˜è®¤æ–¹æ³•ï¼Œå®ç°ç±»éœ€è¦†ç›–æŠ½è±¡æ–¹æ³•ã€‚
> 
> ç¤ºä¾‹ï¼šJava8ä¸­çš„`Iterable`æ¥å£æ–°å¢äº†`forEach()`æ–¹æ³•ï¼Œå…è®¸é›†åˆç›´æ¥éå†
> ```java
> public interface Iterable<T> { 
> 	// æŠ½è±¡æ–¹æ³• 
> 	Iterator<T> iterator(); 
> 		// é»˜è®¤æ–¹æ³• 
> 	default void forEach(Consumer<? super T> action) { Objects.requireNonNull(action); 
> 		for (T t : this) { 
> 			action.accept(t); 
> 		} 
> 	} 
> }
> ```
> 4. æ³¨æ„äº‹é¡¹
> 	- **å®ç°ç±»ä¼˜å…ˆçº§**ï¼šå¦‚æœå®ç°ç±»è¦†ç›–äº†é»˜è®¤æ–¹æ³•ï¼Œä¼˜å…ˆä½¿ç”¨å®ç°ç±»çš„ç‰ˆæœ¬ã€‚
> 	- **é™æ€æ–¹æ³•**ï¼šæ¥å£ä¸­å¯ä»¥å®šä¹‰é™æ€æ–¹æ³•ï¼ˆJava 8æ–°å¢ï¼‰ï¼Œä½†é™æ€æ–¹æ³•ä¸èƒ½ä¸é»˜è®¤æ–¹æ³•å†²çªã€‚
> 	- **ä¸Lambdaè¡¨è¾¾å¼ç»“åˆ**ï¼šé»˜è®¤æ–¹æ³•å¯ä»¥ä¸å‡½æ•°å¼æ¥å£çš„Lambdaå®ç°å…±å­˜ã€‚
> 5. ä¼˜ç¼ºç‚¹
> 	- *ä¼˜ç‚¹*
> 		- ä¿ƒè¿›æ¥å£æ¼”åŒ–
> 		- å‡å°‘å®ç°ç±»çš„ä¿®æ”¹
> 		- æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹å’Œlambdaè¡¨è¾¾å¼
> 	- *ç¼ºç‚¹*
> 		- å¯èƒ½å¯¼è‡´æ¥å£å®ç°å¤æ‚æ€§å¢åŠ 
> 		- éœ€è¦å¤„ç†å¤šæ¥å£é»˜è®¤æ–¹æ³•å†²çª
> 6. æ€»ç»“
> é»˜è®¤æ–¹æ³•æ˜¯Java 8å¼•å…¥çš„é‡è¦ç‰¹æ€§ï¼Œå®ƒå…è®¸æ¥å£åœ¨ä¸ç ´åç°æœ‰å®ç°ç±»çš„æƒ…å†µä¸‹*æ‰©å±•åŠŸèƒ½*ã€‚é€šè¿‡Â `default`Â å…³é”®å­—å®šä¹‰ï¼Œé»˜è®¤æ–¹æ³•å¯ä»¥è¢«å®ç°ç±»ç›´æ¥ä½¿ç”¨æˆ–è¦†ç›–ã€‚è¿™ä¸€ç‰¹æ€§æå‡äº†æ¥å£çš„çµæ´»æ€§ï¼Œæ˜¯Javaå‘å‡½æ•°å¼ç¼–ç¨‹æ¼”è¿›çš„å…³é”®ä¸€æ­¥ã€‚


---
## 2.11.åŒ…å’Œå†…éƒ¨ç±»
### åŒ…
> [!note] è¯´æ˜
> åŒ…åœ¨æ•´ä¸ªç®¡ç†è¿‡ç¨‹ä¸­èµ·åˆ°äº†éå¸¸é‡è¦çš„ä½œç”¨,ä½¿ç”¨åŒ…å¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†ç¹æ‚çš„ç±»æ–‡ä»¶, è§£å†³ç±»é‡åçš„é—®é¢˜.åœ¨ç±»ä¸­ä½¿ç”¨åŒ…å’Œæƒé™å¯ä»¥æ§åˆ¶å…¶ä»–äººå¯¹ç±»æˆå‘˜çš„è®¿é—®.åŒæ—¶,ä¹Ÿè§£å†³äº†ç±»åå†²çªçš„é—®é¢˜.
å¦‚,æˆ‘ç°åœ¨åœ¨å†™é¡¹ç›®,æœ‰è‹¥å¹²ä¸ªåŒ…(æ–‡ä»¶å¤¹),æˆ‘è·¨åŒ…è°ƒç”¨æ—¶,å°±ä¼šç”¨åˆ°**import**æ¥å¯¼å…¥ç›¸åº”åŒ…ä¸­çš„å†…å®¹

```Java
//ServiceåŒ…
package com.Service;
//å¯¼å…¥åŒ…ä¸­çš„ä¸€ä¸ªæœåŠ¡ç±»
import Service.UserService;
//å¯¼å…¥å…¶ä»–å†…å®¹(å¦‚ç³»ç»Ÿè‡ªå¸¦çš„åŒ…)
import java.util.List;
import java.util.Map;
//========================================//

//ç±»çš„è¯¦ç»†å†…å®¹
public class Controller(){
	...
}

```
importé™¤äº†èƒ½å¤Ÿå¯¼å…¥åŒ…, è¿˜å¯ä»¥å¯¼å…¥é™æ€å†…å®¹(é™æ€å˜é‡å’Œæ–¹æ³•)
```Java
package com.mr;
import static java.lang.Math.max;    //é™æ€æˆå‘˜æ–¹æ³•
import static java.lang.System.out;  //å¯¼å…¥é™æ€æˆå‘˜å˜é‡
public class ImportTest(){
	public static void main(String[]args){
		out.println("1å’Œ4ä¸­,æœ€å¤§å€¼ä¸º"+max(1,4));
	}
}
```


### å†…éƒ¨ç±»
> [!note] è¯´æ˜
> å¦‚æœåœ¨ç±»ä¸­å†å®šä¹‰ä¸€ä¸ªç±»,é‚£ä¹ˆè¿™ä¸ªç±»ç§°ä¸ºå†…éƒ¨ç±».å†…éƒ¨ç±»åˆåˆ†ä¸º**æˆå‘˜å†…éƒ¨ç±»**å’Œ**åŒ¿åå†…éƒ¨ç±»**

#### æˆå‘˜å†…éƒ¨ç±»
> [!note] å®šä¹‰
> æˆå‘˜å†…éƒ¨ç±»æ˜¯æœ€å¸¸è§çš„å†…éƒ¨ç±»ï¼Œå®ƒå®šä¹‰åœ¨å¤–éƒ¨ç±»çš„æˆå‘˜ä½ç½®ï¼ˆä¸å­—æ®µã€æ–¹æ³•åŒçº§)
åœ¨ä¸€ä¸ªç±»ä¸­ä½¿ç”¨å†…éƒ¨ç±»,å¯ä»¥åœ¨å†…éƒ¨ç±»ä¸­ç›´æ¥å­˜å–å…¶æ‰€åœ¨ç±»ä¸­çš„ç§æœ‰å˜é‡

```Java
// å¤–éƒ¨ç±»
public class OuterClass {
    private String outerField = "å¤–éƒ¨ç±»å­—æ®µ";
    
    // æˆå‘˜å†…éƒ¨ç±»
    public class InnerClass {
        private String innerField = "å†…éƒ¨ç±»å­—æ®µ";
        
        public void display() {
            System.out.println("è®¿é—®å¤–éƒ¨ç±»å­—æ®µ: " + outerField);//å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»ç§æœ‰æˆå‘˜
            System.out.println("è®¿é—®å†…éƒ¨ç±»å­—æ®µ: " + innerField);
        }
    }
    
    public void createInner() {
        InnerClass inner = new InnerClass();
        inner.display();
    }
}

// æµ‹è¯•ç±»
public class Test {
    public static void main(String[] args) {
        // åˆ›å»ºå¤–éƒ¨ç±»å®ä¾‹
        OuterClass outer = new OuterClass();
        
        // é€šè¿‡å¤–éƒ¨ç±»å®ä¾‹åˆ›å»ºå†…éƒ¨ç±»å®ä¾‹
        OuterClass.InnerClass inner = outer.new InnerClass();
        inner.display();
        
        // æˆ–è€…é€šè¿‡å¤–éƒ¨ç±»æ–¹æ³•åˆ›å»º
        outer.createInner();
    }
}
```
#### åŒ¿åå†…éƒ¨ç±»
> [!note] å®šä¹‰
> åŒ¿åå†…éƒ¨ç±»æ˜¯æ²¡æœ‰åå­—çš„å†…éƒ¨ç±»ï¼Œé€šå¸¸ç”¨äºå®ç°æ¥å£æˆ–ç»§æ‰¿ç±»çš„ä¸€æ¬¡æ€§ä½¿ç”¨åœºæ™¯

```java
// æ¥å£
interface Greeting {
    void greet();
}

// å¤–éƒ¨ç±»
public class AnonymousInnerClassDemo {
    public static void main(String[] args) {
        // åŒ¿åå†…éƒ¨ç±»å®ç°æ¥å£
        Greeting greeting = new Greeting() {
            @Override
            public void greet() {
                System.out.println("ä½ å¥½ï¼Œè¿™æ˜¯åŒ¿åå†…éƒ¨ç±»çš„é—®å€™ï¼");
            }
        };
        greeting.greet();
        
        // åŒ¿åå†…éƒ¨ç±»ç»§æ‰¿ç±»
        Thread thread = new Thread() {
            @Override
            public void run() {
                System.out.println("åŒ¿åçº¿ç¨‹æ­£åœ¨è¿è¡Œ");
            }
        };
        thread.start();
        
        // å¸¦å‚æ•°çš„åŒ¿åå†…éƒ¨ç±»ï¼ˆå¸¸ç”¨äºäº‹ä»¶ç›‘å¬ï¼‰
        Button button = new Button();
        button.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick() {
                System.out.println("æŒ‰é’®è¢«ç‚¹å‡»äº†");
            }
        });
    }
}

// æ¨¡æ‹ŸæŒ‰é’®ç±»
class Button {
    public void setOnClickListener(OnClickListener listener) {
        listener.onClick();
    }
}

interface OnClickListener {
    void onClick();
}
```

|  ç±»å‹   |    é€‚ç”¨åœºæ™¯     |       ç¤ºä¾‹        |
| :---: | :---------: | :-------------: |
| æˆå‘˜å†…éƒ¨ç±» | éœ€è¦å¤šæ¬¡åˆ›å»ºå†…éƒ¨ç±»å®ä¾‹ | è¿­ä»£å™¨ä¸­çš„iteratorå®ç° |
| åŒ¿åå†…éƒ¨ç±» | ä¸€æ¬¡æ€§ä½¿ç”¨çš„ç®€å•å®ç°  | äº‹ä»¶ç›‘å¬,çº¿ç¨‹åˆ›å»º,ä¸´æ—¶å®ç°  |
è¿™ä¸¤ç§å†…éƒ¨ç±»åœ¨Androidå¼€å‘ï¼ˆå¦‚äº‹ä»¶å¤„ç†ï¼‰ã€Swing GUIç¼–ç¨‹å’Œé›†åˆæ¡†æ¶ä¸­éƒ½éå¸¸å¸¸è§.

> [!note] æ€»ç»“
> é¢å‘å¯¹è±¡çš„å†…å®¹åˆ°æ­¤ç»“æŸ,æ€»è€Œè¨€ä¹‹,Javaé¢å‘å¯¹è±¡ç¼–ç¨‹(OOP)çš„æ ¸å¿ƒåœ¨äº**å››å¤§ç‰¹æ€§**ï¼š**å°è£…**é€šè¿‡éšè—æ•°æ®æä¾›å®‰å…¨è®¿é—®ï¼Œ**ç»§æ‰¿**å®ç°ä»£ç å¤ç”¨å’Œå±‚æ¬¡åŒ–è®¾è®¡ï¼Œ**å¤šæ€**å…è®¸åŒä¸€æ¥å£å‘ˆç°ä¸åŒè¡Œä¸ºï¼Œ**æŠ½è±¡**æå–å…±æ€§å¿½ç•¥ç»†èŠ‚ã€‚ç±»ä½œä¸ºå¯¹è±¡çš„æ¨¡æ¿ï¼Œé€šè¿‡æ„é€ æ–¹æ³•åˆå§‹åŒ–ï¼Œåˆ©ç”¨`this`å¼•ç”¨å½“å‰å®ä¾‹ï¼Œè®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦ç®¡ç†å¯è§æ€§ã€‚æ¥å£å®šä¹‰è§„èŒƒæ”¯æŒå¤šç»§æ‰¿ï¼ŒæŠ½è±¡ç±»æä¾›éƒ¨åˆ†å®ç°ã€‚å…³é”®åŒºåˆ«åœ¨äºï¼šæ–¹æ³•**é‡è½½**æ˜¯åŒç±»åŒåä¸åŒå‚ï¼Œ**é‡å†™**æ˜¯å­ç±»è¦†ç›–çˆ¶ç±»å®ç°ã€‚éµå¾ªSOLIDåŸåˆ™ï¼Œä¼˜å…ˆç»„åˆè€Œéç»§æ‰¿ï¼Œè®¾è®¡æ—¶åº”è¿½æ±‚é«˜å†…èšä½è€¦åˆã€‚é¢å‘å¯¹è±¡çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºæå‡ä»£ç çš„å¯ç»´æŠ¤æ€§ã€æ‰©å±•æ€§å’Œå¤ç”¨æ€§, åœ¨å®é™…å¼€å‘ä¸­è‡³å…³é‡è¦! 


---
# 3.æ ¸å¿ƒæŠ€æœ¯

## 3.1.å¼‚å¸¸å¤„ç†
### å¼‚å¸¸æ˜¯ä»€ä¹ˆ
> [!note] è¯´æ˜
> å®é™…å·¥ä½œä¸­,é‡åˆ°çš„æƒ…å†µä¸å¯èƒ½æ˜¯éå¸¸å®Œç¾çš„.åœ¨è½¯ä»¶è¿è¡Œçš„è¿‡ç¨‹ä¸­,æˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°ä¸€äº›"æ„å¤–"ä¼šå¯¼è‡´ç¨‹åºæ— æ³•æ­£å¸¸è¿è¡Œ,è¿™äº›"æ„å¤–"å°±å«åš**å¼‚å¸¸(Exception)**

ä¸¾ä¸ªä¾‹å­:
```Java
public static void main(String[] args) {  
    int result = 3/0;  
    System.out.println(result);  
}
```

å¼‚å¸¸å¯ä»¥åˆ†ä¸ºä¸‰ç±»:
- **æ£€æŸ¥æ€§å¼‚å¸¸**:æœ€å…·ä»£è¡¨çš„æ£€æŸ¥æ€§å¼‚å¸¸æ˜¯ç”¨æˆ·é”™è¯¯æˆ–é—®é¢˜å¼•èµ·çš„å¼‚å¸¸,è¿™æ˜¯ç¨‹åºå‘˜æ— æ³•é¢„è§çš„.ä¾‹å¦‚åœ¨æ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶æ—¶,ä¸€ä¸ªå¼‚å¸¸å°±å‘ç”Ÿäº†,è¿™äº›å¼‚å¸¸åœ¨ç¼–è¯‘æ—¶ä¸èƒ½è¢«ç®€å•çš„å¿½ç•¥æ‰
- **è¿è¡Œæ—¶å¼‚å¸¸**:å¯èƒ½è¢«ç¨‹åºå‘˜é¿å…çš„å¼‚å¸¸.ä¸æ£€æŸ¥æ€§å¼‚å¸¸ç›¸å,è¿è¡Œæ—¶å¼‚å¸¸å¯ä»¥åœ¨ç¼–è¯‘æ—¶è¢«å¿½ç•¥
- **é”™è¯¯**:é”™è¯¯ä¸æ˜¯å¼‚å¸¸,è€Œæ˜¯è„±ç¦»ç¨‹åºå‘˜æ§åˆ¶çš„é—®é¢˜.é”™è¯¯åœ¨ä»£ç ä¸­é€šå¸¸è¢«å¿½ç•¥.å¦‚å½“æ ˆæº¢å‡ºçš„æ—¶å€™,ä¸€ä¸ªé”™è¯¯å°±å‘ç”Ÿäº†,å®ƒä»¬åœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­æ£€æŸ¥ä¸åˆ°
JavaæŠŠå¼‚å¸¸å½“åšå¯¹è±¡æ¥å¤„ç†,å¹¶å®šä¹‰ä¸€ä¸ªåŸºç±»java.lang.Throwableä½œä¸ºæ‰€æœ‰å¼‚å¸¸ç±»çš„è¶…ç±»
åœ¨JavaAPIä¸­å·²ç»å®šä¹‰äº†å¾ˆå¤šå¼‚å¸¸ç±»,è¿™äº›å¼‚å¸¸ç±»åˆ†ä¸ºä¸¤å¤§ç±»,==é”™è¯¯(Error)å’Œå¼‚å¸¸(Exception)==

### Javaä¸­å¸¸è§çš„å¼‚å¸¸ç±»

|               å¼‚å¸¸ç±»               |                            è¯´æ˜                            |
| :-----------------------------: | :------------------------------------------------------: |
|       ClassCastException        |                          ç±»å‹è½¬æ¢å¼‚å¸¸                          |
|     ClassNotFoundException      |                       æœªæ‰¾åˆ°ç›¸åº”ç±»æ—¶æŠ›å‡ºçš„å¼‚å¸¸                       |
|       ArithmeticException       |                           ç®—æ•°å¼‚å¸¸                           |
| ArrayIndexOutOfBoundsException  |                          æ•°ç»„ä¸‹æ ‡è¶Šç•Œ                          |
|       ArrayStoreException       |                       æ•°æ®åº“åŒ…å«ä¸å…¼å®¹å€¼çš„å¼‚å¸¸                       |
|          SQLException           |                       æ“ä½œæ•°æ®åº“æ—¶æŠ›å‡ºçš„å¼‚å¸¸                        |
|      NullPointerException       |                          ç©ºæŒ‡é’ˆå¼‚å¸¸                           |
|      NoSuchFieldException       |                        å­—æ®µæœªæ‰¾åˆ°æŠ›å‡ºçš„å¼‚å¸¸                        |
|      NoSuchMethodException      |                        æ–¹æ³•æœªæ‰¾åˆ°æŠ›å‡ºçš„å¼‚å¸¸                        |
|      NumberFormatException      |                       å­—ç¬¦ä¸²è¢«è½¬æ¢ä¸ºæ•°å­—çš„å¼‚å¸¸                       |
|   NegativeArraySizeException    |                      æ•°ç»„å…ƒç´ ä¸ªæ•°ä¸ºè´Ÿæ—¶æŠ›å‡ºçš„å¼‚å¸¸                      |
| StringIndexOutOfBoundsException |                     å­—ç¬¦ä¸²ç´¢å¼•è¶…å‡ºèŒƒå›´æ—¶æŠ›å‡ºçš„å¼‚å¸¸                      |
|           IOException           |                          è¾“å…¥è¾“å‡ºå¼‚å¸¸                          |
|     IllegalAccessException      |                        ä¸å…è®¸è®¿é—®æŸç±»çš„å¼‚å¸¸                        |
|     InstantiationException      | å½“ç¨‹åºè¯•å›¾ä½¿ç”¨Classç±»ä¸­çš„newInstance()æ–¹æ³•åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹,è€ŒæŒ‡å®šçš„ç±»æ— æ³•è¢«å®ä¾‹åŒ–æ—¶æŠ›å‡ºçš„å¼‚å¸¸ |
|          EOFException           |                       æ–‡ä»¶å·²ç»“æŸæ—¶æŠ›å‡ºçš„å¼‚å¸¸                        |
|      FileNotFoundException      |                       æ–‡ä»¶æœªæ‰¾åˆ°æ—¶æŠ›å‡ºçš„å¼‚å¸¸                        |

### å¼‚å¸¸çš„å¤„ç†:æŠ›å‡ºå’Œæ•è·
ç›¸å…³å…³é”®å­—:

| å…³é”®å­— |      try       | catch |  finally  | throw |      throws      |
| :-: | :------------: | :---: | :-------: | :---: | :--------------: |
| åŠŸèƒ½  | å°è¯•ç›‘æ§å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç å— | æ•è·å¼‚å¸¸  | å§‹ç»ˆéƒ½ä¼šæ‰§è¡Œçš„è¯­å¥ | æŠ›å‡ºå¼‚å¸¸  | æ–¹æ³•å°†å¼‚å¸¸**æŠ›å‡ºè‡³å¤–éƒ¨æ–¹æ³•** |

#### é€šè¿‡**try...catch**è¯­å¥æ•è·å¼‚å¸¸.å¯ä»¥ä¸€æ¬¡æ€§æ•è·å¤šä¸ªå¼‚å¸¸(ç±»ä¼¼äºif...elseè¯­å¥)
```Java
public static void main(String[] args) {  
    int a = 3;  
    int b = 0;  
    //ç›‘æ§å¼‚å¸¸  
    try {  
        System.out.println(a / b);  
    }   
    //æ•è·å¼‚å¸¸  
    catch (ArithmeticException e) {  
        System.out.println("é™¤æ•°ä¸èƒ½ä¸º0!");  
    }  
    //å–„åå·¥ä½œ  (éå¿…è¦)
    finally {  
        System.out.println("ç¨‹åºç»“æŸ");  
    }  
  
}
```


#### å‡è®¾æ•è·å¤šä¸ªå¼‚å¸¸,éœ€è¦æŒ‰ç…§èŒƒå›´ä»å°åˆ°å¤§çš„å»æ•è·,å¦åˆ™ä¼šæŠ¥é”™.
```Java
public static void main(String[] args) {  
    int a = 3;  
    int b = 0;  
    try {  
        System.out.println(a/b);  
    }  
    catch (Error e){  
        System.out.println("Error");  
    }  
    catch (Exception e){  
        System.out.println("Exception");  
    }  
    catch (Throwable e){  
        System.out.println("Throwable");  
    }  
}
```

#### æŠ›å‡ºå¼‚å¸¸-->**throw**,ä¸€èˆ¬åœ¨æ–¹æ³•ä¸­ä½¿ç”¨ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸
```Java
public static void main(String[] args) {  
  
    new Demo3().test(1,0);  
}  
  
  
public void test(int a,int b){  
    if (b==0){  
        throw new ArithmeticException();  
    }  
    System.out.println(a/b);  
}
```


#### åœ¨æ–¹æ³•ä¸ŠæŠ›å‡ºå¼‚å¸¸-->throws
```Java
//å®šä¹‰æ–¹æ³•å¹¶æŠ›å‡ºå¼‚å¸¸  
static void pop()throws NegativeArraySizeException{  
    int []arr = new int[-1];  
}  
  
public static void main(String[] args) {  
    try {  
        pop();  
    }catch (NegativeArraySizeException e){  
        System.out.println("NegativeArraySizeException");  
    }  
}
```

è¿è¡Œç»“æœ:
```text
NegativeArraySizeException
```


### è‡ªå®šä¹‰å¼‚å¸¸
æ­¥éª¤:
- åˆ›å»ºè‡ªå®šä¹‰å¼‚å¸¸ç±»
- åœ¨æ–¹æ³•ä¸­é€šè¿‡throwæŠ›å‡ºå…³é”®å¼‚å¸¸å¯¹è±¡
- å¦‚æœåœ¨å½“å‰æŠ›å‡ºå¼‚å¸¸çš„æ–¹æ³•ä¸­å¤„ç†å¼‚å¸¸,å¯ä»¥ä½¿ç”¨try...catchè¿›è¡Œæ•è·å’Œå¤„ç†,å¦åˆ™éœ€è¦åœ¨æ–¹æ³•å£°æ˜å¤„é€šè¿‡throwsæŒ‡æ˜è¦æŠ›å‡ºç»™æ–¹æ³•è°ƒç”¨è€…çš„å¼‚å¸¸
- åœ¨å‡ºç°å¼‚å¸¸çš„æ–¹æ³•çš„è°ƒç”¨è€…ä¸­æ•è·å¹¶å¤„ç†å¼‚å¸¸
```Java
//è‡ªå®šä¹‰å¼‚å¸¸ç±»
public class MyException extends Exception {  
    public MyException(String message) {  
        super(message);  
    }  
}

//é€šè¿‡æ–¹æ³•æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸
static int avg(int a,int b)throws MyException{  
    if (a<0||b<0){  
        throw new MyException("å‚æ•°ä¸èƒ½å°äº0");  
    }  
    if (a>100||b>100){  
        throw new MyException("æ•°å€¼è¿‡å¤§");  
    }  
    return (a+b)/2;  
}  
  
public static void main(String[] args) {  
    try {  
        int result = avg(102,100);  
        System.out.println(result);  
    }catch (MyException e){  
        System.out.println(e);  
    }  
}
```

è¿è¡Œç»“æœ:
```text
exceptionDemo.MyException: æ•°å€¼è¿‡å¤§
```


### è‡ªå®šä¹‰å¼‚å¸¸çš„åŸåˆ™
Javaçš„å¼‚å¸¸å¼ºåˆ¶ç”¨æˆ·è€ƒè™‘ç¨‹åºçš„å¥å£®æ€§å’Œå®‰å…¨æ€§. å¼‚å¸¸å¤„ç†ä¸åº”è¯¥ç”¨æ¥æ§åˆ¶ç¨‹åºçš„æ­£å¸¸æµç¨‹,å…¶ä¸»è¦ä½œç”¨åº”è¯¥æ˜¯æ•è·ç¨‹åºè¿è¡Œæ—¶å‡ºç°çš„å¼‚å¸¸å¹¶è¿›è¡Œç›¸å…³çš„å¤„ç†.ç¼–å†™ä»£ç å¤„ç†æŸä¸ªæ–¹æ³•å¯èƒ½å‡ºç°çš„å¼‚å¸¸æ—¶,å¯ä»¥éµå¾ªä»¥ä¸‹çš„å‡ æ¡åŸåˆ™:
- åœ¨å½“å‰æ–¹æ³•ä¸­ä½¿ç”¨try...catchè¯­å¥è¿›è¡Œå¼‚å¸¸çš„æ•è·
- å½“ä¸€ä¸ªæ–¹æ³•è¢«è¦†ç›–æ—¶,è¦†ç›–å®ƒçš„æ–¹æ³•å¿…é¡»æŠ›å‡ºä¸€ä¸ªä¸ä¹‹ç›¸åŒçš„å¼‚å¸¸æˆ–è€…è¯¥å¼‚å¸¸çš„å­ç±»
- å¦‚æœçˆ¶ç±»æŠ›å‡ºå¤šä¸ªå¼‚å¸¸,åˆ™è¦†ç›–å®ƒçš„æ–¹æ³•å¿…é¡»æŠ›å‡ºé‚£äº›å¼‚å¸¸çš„ä¸€ä¸ªå­é›†,ä¸èƒ½æŠ›å‡ºæ–°çš„å¼‚å¸¸

---

## 3.2.å­—ç¬¦ä¸²([[String]])
> [!note] ç®€ä»‹
> å­—ç¬¦ä¸²ä¹Ÿæ˜¯Javaä¸­å¸¸å¤„ç†çš„ä¸€ä¸ªå¯¹è±¡.åœ¨Javaä¸­,å­—ç¬¦ä¸²ä½œä¸ºStringçš„å®ä¾‹æ¥å¤„ç†.ä»¥å¯¹è±¡çš„æ–¹å¼å¤„ç†å­—ç¬¦ä¸²,ä½¿å¾—å­—ç¬¦ä¸²æ›´åŠ çµæ´»æ–¹ä¾¿.é€šè¿‡æ·±å…¥äº†è§£å­—ç¬¦ä¸²çš„ç›¸å…³æ–¹æ³•,å¯ä»¥æé«˜ç¼–å†™å’Œç»´æŠ¤çš„æ•ˆç‡.
> åœ¨Javaä¸­,å•ä¸ªå­—ç¬¦å¯ä»¥ä½¿ç”¨charå­˜å‚¨,å¤šä¸ªå­—ç¬¦ç»„æˆçš„æ–‡æœ¬åˆ™éœ€è¦å­˜å‚¨åœ¨Stringå¯¹è±¡ä¸­.Stringé€šå¸¸è¢«ç§°ä¸ºå­—ç¬¦ä¸².

ä¸‹é¢,ä»‹ç»å…³äºå­—ç¬¦ä¸²çš„ç›¸å…³å†…å®¹
### å­—ç¬¦ä¸²çš„å£°æ˜å’Œåˆ›å»º
åœ¨Javaä¸­,å­—ç¬¦ä¸²å¿…é¡»è¢«==åŒå¼•å·==åŒ…è£¹.
```Java
String s1 = "abc";
```
åˆ›å»ºå­—ç¬¦ä¸²çš„æ–¹æ³•:
- **String(char a [ ] )**  : é€šè¿‡å­—ç¬¦æ•°ç»„åˆ›å»ºå­—ç¬¦ä¸²
```java
char a[] = {'g','o','o','d'};
String s = new String(a);
-->"good"
```
- **String(char a[ ] , int offset , int length)** : æå–å­—ç¬¦æ•°ç»„çš„ä¸€éƒ¨åˆ†åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ , offsetæ˜¯å¼€å§‹æˆªå–çš„ä½ç½®, lengthæ˜¯æˆªå–çš„é•¿åº¦
```java 
char a[] = {'s','t','u','d','e','n','t'};
String s = new String(a,2,4) //ä»ç´¢å¼•2å¼€å§‹æˆªå–4ä¸ªå­—ç¬¦
-->"uden"
```
- **Sting(char [ ]value)** : åˆ†é…ä¸€ä¸ªæ–°çš„Stringå¯¹è±¡,ä½¿å…¶è¡¨ç¤ºå­—ç¬¦æ•°ç»„å‚æ•°ä¸­æ‰€æœ‰çš„å…ƒç´ è¿æ¥çš„ç»“æœ.
```java
char a[] = {'s','t','u','d','e','n','t'};
String s = new String(a);
-->"student"
```

### å­—ç¬¦ä¸²æ‹¼æ¥
åœ¨è¾“å‡ºè¯­å¥ä¸­,å¦‚æœæ˜¯å­—ç¬¦ä¸²ä¹‹é—´æœ‰äº†åŠ å·,è¡¨ç¤ºå­—ç¬¦ä¸²çš„æ‹¼æ¥
```java 
System.out.println("love" + "you");
-->"loveyou"
```

### è·å–å­—ç¬¦ä¸²çš„ä¿¡æ¯
#### è·å–å­—ç¬¦ä¸²é•¿åº¦: **length
```Java
String str = "i love you";
int size = str.length();

-->10(åŒ…å«ç©ºæ ¼)
```
#### æŸ¥æ‰¾å­—ç¬¦ä¸² : **indexOf(String s)** å’Œ **lastIndexOf(String str)**
å‰è€…ç”¨äºè¿”å›å‚æ•°å­—ç¬¦ä¸²såœ¨æŒ‡å®šå­—ç¬¦ä¸²ä¸­é¦–æ¬¡å‡ºç°çš„ç´¢å¼•ä½ç½®,å¦‚æœè‡ªå§‹è‡³ç»ˆéƒ½æœªæ‰¾åˆ°,åˆ™è¿”å›-1
```Java
String str = "We are students";
int location = str.indexOf("a");

-->3(ç´¢å¼•åŒ…æ‹¬ç©ºæ ¼)
```
åè€…ç”¨äºè¿”å›æŒ‡å®šå­—ç¬¦ä¸²æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ä½ç½®.
```Java
//åœ¨strä¸­å¯»æ‰¾substræœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®,å¦‚æœæ²¡æ‰¾åˆ°åˆ™è¿”å›-1
str.lastIndexOf(substr);
```
#### è·å–æŒ‡å®šç´¢å¼•çš„å­—ç¬¦ : **charAt(int index)**
è¿”å›indexå¤„çš„å­—ç¬¦
```java
String str = "student";
char target = str.charAt(3)

-->"d"
```

### æ“ä½œå­—ç¬¦ä¸²
#### è·å–å­å­—ç¬¦ä¸² : **substring(int beginIndex)** å’Œ **substring(int beginIndex , int endIndex)**
å‰è€…è¿”å›ä»æŒ‡å®šçš„ç´¢å¼•ä½ç½®å¼€å§‹æˆªå–åˆ°å­—ç¬¦ä¸²ç»“å°¾çš„å­ä¸²
```Java
String str = "hello";
String substr = str.substring(2);

-->"llo"
```
åè€…è¿”å›æŸä¸€ç´¢å¼•å¼€å§‹æˆªå–åˆ°å¦å¤–ä¸€ä¸ªç´¢å¼•ç»“æŸçš„å­ä¸²(ç´¢å¼•èŒƒå›´æ˜¯å·¦é—­å³å¼€)
```Java
String str = "hello";
String substr = str.substring(0,3);

-->"hel"
```

#### å»é™¤ç©ºæ ¼ : **trim()**  
æ–¹æ³•è¿”å›å­—ç¬¦ä¸²çš„å‰¯æœ¬,å¿½ç•¥å‰å¯¼ç©ºæ ¼å’Œå°¾éƒ¨ç©ºæ ¼
```Java
String str = "We are students";
String trimstr = str.trim();

-->"Wearestudents"
```

#### æ›¿æ¢å­—ç¬¦ä¸² **replace(CharSequence tatget , CharSequence replacement)**
å°†æŒ‡å®šçš„å­—ç¬¦æ¢ä¸ºæ–°çš„å­—ç¬¦æˆ–å­—ç¬¦ä¸²
```Java
String str = "address";
String newstr = str.replace("a","A");

-->"Address"
```
å¦‚æœæŒ‡å®šçš„å­—ç¬¦å‡ºç°äº†å¤šæ¬¡,é‚£ä¹ˆreplaceæ–¹æ³•ä¼šå°†æ‰€æœ‰çš„æŒ‡å®šå­—ç¬¦è½¬æ¢ä¸ºæ–°å­—ç¬¦
```Java
String str = "java project";
String newstr = str.replace("j","J");

-->"Java proJect"
```

#### åˆ¤æ–­å­—ç¬¦ä¸²çš„å¼€å¤´å’Œç»“å°¾ : **startsWith()** å’Œ **endsWith()**
äºŒè€…çš„è¿”å›å€¼ç±»å‹å‡ä¸º==å¸ƒå°”ç±»å‹(boolean)==
å‰è€…åˆ¤æ–­å½“å‰å­—ç¬¦ä¸²å¯¹è±¡çš„å‰ç¼€æ˜¯å¦ä¸ºå‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²
```Java
String num1 = "22045612";
boolean result1 = num1.startsWith("22");

-->true
```
åè€…åˆ¤æ–­å½“å‰å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç»™å®šçš„å­å­—ç¬¦ä¸²ç»“æŸ
```java
String num2 = "21304578";
boolean result2 = num2.endsWith("78");

-->true
```

#### åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ : **equals()** å’Œ **equalsIgnoreCase()**
> [!danger] æ³¨æ„!!
> å¯¹**å¯¹è±¡**çš„æ¯”è¾ƒä¸èƒ½ç®€å•åœ°ä½¿ç”¨`==` å»æ¯”è¾ƒ.å› ä¸ºæ¯”è¾ƒè¿ç®—ç¬¦æ¯”è¾ƒçš„æ˜¯äºŒè€…çš„åœ°å€.å› æ­¤å³ä½¿ä¸¤ä¸ªå¯¹è±¡çš„å†…å®¹ç›¸åŒ,ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦åçš„ç»“æœä»ç„¶æ˜¯false

> [!example] æˆ‘ä»¬è”æƒ³ä¸€ä¸ªç™»å½•è´¦å·çš„è¿‡ç¨‹:
> å½“æˆ‘ä»¬è¾“å…¥è´¦å·ä¹‹å,è¿˜éœ€è¦è¾“å…¥*å¯†ç *æ¥å®Œæˆç™»å½•,è¿™æ—¶,è¾“å…¥çš„å¯†ç å¿…é¡»å®Œå…¨å¯¹åº”,ç³»ç»Ÿæ‰èƒ½å°†ä½ æ”¾è¡Œè¿›å».è¿™å°±æ˜¯æˆ‘ä»¬çš„**equals()** æ–¹æ³•å®ç°çš„å†…å®¹-->å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²çš„å†…å®¹==å®Œå…¨ç›¸åŒ==,è¿”å›true,åä¹‹è¿”å›false

```Java
String pwd = "MyPassword";
String str = "mypassword";
boolean isRight = str.equals(pwd);

-->false
```
ä½†æ˜¯,ç”±äºå¤ªé•¿æ—¶é—´æ²¡æœ‰ç™»å½•,ç³»ç»Ÿæ€€ç–‘ä½ æ˜¯å¦æ˜¯è„šæœ¬æ“ä½œ,è¿™æ—¶éœ€è¦ä½ è¾“å…¥ä¸€ä¸²åŒ…å«æ•°å­—å’Œå­—æ¯çš„æ··åˆ*éªŒè¯ç *,è¿™æ—¶ä½ ä¼šå‘ç°,è™½ç„¶ç»™çš„ç¤ºä¾‹å›¾ç‰‡ä¸­çš„å­—æ¯æ˜¯å¤§å†™,ä½†æ˜¯ä¸ç®¡ä½ çš„å­—æ¯è¾“å…¥æ˜¯å¤§å†™è¿˜æ˜¯å°å†™,éªŒè¯è¿‡ç¨‹å¹¶æ²¡æœ‰å‡ºæ„å¤–,è¿™è¯´æ˜éªŒè¯ç çš„æ£€æµ‹æ˜¯ä¸å¯¹æ¯”å¤§å°å†™çš„. è¿™å°±æ˜¯ **equalsIgnoreCase()** å®ç°çš„å†…å®¹-->ä¸å¯¹æ¯”å¤§å°å†™çš„æƒ…å†µä¸‹,å†…å®¹ç›¸åŒè¿”å›true,åä¹‹è¿”å›false
```java 
String CAPTCHA = "3G6S5A";
String str = "3g6s5a";
boolean isRight = str.equalsIgnoreCase(CAPTCHA);

-->true
```


#### æŒ‰ç…§å­—å…¸çš„é¡ºåºæ¯”è¾ƒå­—ç¬¦ä¸² : **compareTo()**
> [!note] è¯´æ˜
> æŒ‰ç…§å­—å…¸çš„é¡ºåºæ¯”è¾ƒå­—ç¬¦ä¸²åŸºäºå­—ç¬¦ä¸²ä¸­å„å­—ç¬¦çš„Unicodeå€¼,æŒ‰ç…§å­—å…¸çš„é¡ºåºå°†Stringå¯¹è±¡è¡¨ç¤ºçš„å­—ç¬¦åºåˆ—ä¸å‚æ•°å­—ç¬¦ä¸²æ‰€è¡¨ç¤ºçš„å­—ç¬¦åºåˆ—è¿›è¡Œæ¯”è¾ƒ.å¦‚æœæŒ‰ç…§å­—å…¸é¡ºåºè¯¥Stringå¯¹è±¡ä½äºå‚æ•°å­—ç¬¦ä¸²ä¹‹å‰åˆ™æ¯”è¾ƒç»“æœæ˜¯ä¸€ä¸ªè´Ÿæ•´æ•°,ä½äºå‚æ•°å­—ç¬¦ä¸²ä¹‹ååˆ™æ¯”è¾ƒç»“æœæ˜¯ä¸€ä¸ªæ­£æ•´æ•°,å¦‚æœç›¸ç­‰åˆ™è¿”å›0

```Java
String str1 = new String("a");
String str2 = new String("b");
String str3 = new String("c");

System.out.println(str2 + "compareTo" + str1 +":" +str2.compareTo(str1)); 
-->"b compareTo a:1"
System.out.println(str2 + "compareTo" + str3 +":" +str2.compareTo(str3));
-->"b compareTo c:-1"
```
#### å­—ç¬¦ä¸²çš„å¤§å°å†™è½¬æ¢ : **toLowerCase()** å’Œ **toUpperCase()**
> [!note] è¯´æ˜
> å‰è€…ä¼šå°†å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å¤§å†™å­—æ¯è½¬æ¢ä¸ºå°å†™å­—æ¯,åè€…ä¼šå°†å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å°å†™å­—æ¯è½¬æ¢ä¸ºå¤§å†™å­—æ¯.å¦‚æœæ²¡æœ‰è¦è½¬æ¢çš„å†…å®¹åˆ™ä¼šè¿”å›åŸå­—ç¬¦ä¸²,å­—ç¬¦ä¸²é•¿åº¦ä¸ä¼šå‘ç”Ÿæ”¹å˜,éè‹±æ–‡å­—ç¬¦ä¸ä¼šå—åˆ°å½±å“.

```Java
String str = "Hello";
String str1 = str.toLowerCase();
-->"hello"
String str2 = str.toUpperCase();
-->"HELLO"
```
#### åˆ†å‰²å­—ç¬¦ä¸² : **split(String sign)** å’Œ **split(String sign , int limit)**
**split(String sign)** å¯æ ¹æ®ç»™å®šçš„åˆ†éš”ç¬¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ‹†åˆ†
```java
String str = "192.168.0.1";
//æŒ‰ç…§.è¿›è¡Œåˆ†å‰²
String []str1 = str.split("\\.");
-->[192][168][0][1]
```
**split(String sign , int limit)** å¯æ ¹æ®ç»™å®šçš„åˆ†éš”ç¬¦å¯¹å­—ç¬¦ä¸²è¿›è¡Œæ‹†åˆ†,å¹¶é™å®šæ‹†åˆ†çš„æ¬¡æ•°
```Java
//æŒ‰ç…§.åˆ†å‰²2æ¬¡
String []str2 = str.split("\\.",2);
-->[192][168.0.1]
```

### æ ¼å¼åŒ–å­—ç¬¦ä¸²
Stringç±»çš„é™æ€ **format()** æ–¹æ³•ç”¨äºåˆ›å»ºæ ¼å¼åŒ–çš„å­—ç¬¦ä¸².æœ‰ä¸¤ç§é‡è½½æ–¹å¼:
- **format( String format , Object...args)**
è¯¥æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„æ ¼å¼å­—ç¬¦ä¸²å’Œå‚æ•°è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–å­—ç¬¦ä¸²,æ ¼å¼åŒ–åçš„æ–°å­—ç¬¦ä¸²ä½¿ç”¨æœ¬åœ°é»˜è®¤çš„è¯­è¨€ç¯å¢ƒ
- **format(Local l ,String format , Object...args)**
è¯¥æ–¹æ³•ä½¿ç”¨æŒ‡å®šçš„è¯­è¨€ç¯å¢ƒ,æ ¼å¼å­—ç¬¦ä¸²å’Œå‚æ•°è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–å­—ç¬¦ä¸²,æ ¼å¼åŒ–åçš„æ–°å­—ç¬¦ä¸²ä½¿ç”¨æŒ‡å®šçš„è¯­è¨€ç¯å¢ƒ

### æ­£åˆ™è¡¨è¾¾å¼
æ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨äºåŒ¹é…çš„åˆ¤æ–­ä¸­,ç”¨äºæ£€æŸ¥æŸä¸€å­—ç¬¦ä¸²æ˜¯å¦æ»¡è¶³è§„å®šæ ¼å¼.åœ¨ç½‘ç»œçˆ¬è™«ä¸­ä¼šæŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼çš„è¦æ±‚å»æŠ“å–ç›¸å…³çš„å†…å®¹.
æ­£åˆ™è¡¨è¾¾å¼çš„å…ƒå­—ç¬¦:

|    å…ƒå­—ç¬¦    |   æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„å†™æ³•   |             æ„ä¹‰              |
| :-------: | :-----------: | :-------------------------: |
|     .     |       .       |           ä»»æ„ä¸€ä¸ªå­—ç¬¦            |
|    \d     |     `\\d`     |         0~9çš„ä»»æ„ä¸€ä¸ªæ•°å­—          |
|    \D     |     `\\D`     |         ä»»ä½•ä¸€ä¸ªéæ•°å­—çš„å­—ç¬¦          |
|    \s     |     `\\s`     |       ç©ºç™½å­—ç¬¦,å¦‚'\t','\n'       |
|    \S     |     `\\S`     |            éç©ºç™½å­—ç¬¦            |
|    \w     |     `\\w`     |       å¯ç”¨äºæ ‡è¯†ç¬¦çš„å­—ç¬¦,ä¸åŒ…æ‹¬$        |
|    \W     |     `\\W`     |         ä¸å¯ç”¨äºæ ‡è¯†ç¬¦çš„å­—ç¬¦          |
| \p{Lower} | `\\p{Lower}`  |           å°å†™å­—æ¯a~z           |
| \p{Upper} |  `\\p{Upper`  |           å¤§å†™å­—æ¯A~Z           |
| \p{ASCII} | `\\p{ASCII}`  |           ASCIIå­—ç¬¦           |
| \p{Alpha} | `\\p{Alpha}`  |            å­—æ¯å­—ç¬¦             |
| \p{Digit} | `\\p{Digit}`  |          åè¿›åˆ¶æ•°å­—0~9           |
| \p{Alnum} | `\\p{Alnum}`  |           æ•°å­—æˆ–å­—æ¯å­—ç¬¦           |
| \p{Punct} | `\\p{Punct}}` |            æ ‡ç‚¹ç¬¦å·             |
| \p{Graph} | `\\p{Graph}`  | å¯è§å­—ç¬¦:`[\p{Alnum}\p{punct}]` |
| \p{Print} | `\\p{Print}`  |  å¯è¾“å‡ºçš„å­—ç¬¦: `[\p{Graph}\x20]`  |
| \p{Blank} | `\\p{Blank}`  |           ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦            |
| \p{Cntrl} | `\\p{Cntrl}`  |  æ§åˆ¶å­—ç¬¦: `[\x00-\x1F-\x7F]`   |
### å­—ç¬¦ä¸²ç”Ÿæˆå™¨(å¯å˜å­—ç¬¦ä¸²)
> [!note] è¯´æ˜
> åˆ›å»ºæˆåŠŸçš„å­—ç¬¦ä¸²,å…¶é•¿åº¦æ˜¯å›ºå®šçš„,å†…å®¹ä¸èƒ½è¢«æ”¹å˜å’Œç¼–è¯‘.è™½ç„¶ä½¿ç”¨+èƒ½å¤Ÿèµ·åˆ°æ‹¼æ¥çš„ä½œç”¨,ä½†æ˜¯+ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„Stringå®ä¾‹,ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡.å¦‚æœåå¤çš„å¯¹ä¸€ä¸ªå­—ç¬¦ä¸²è¿›è¡Œä¿®æ”¹,ä¼šé€ æˆæå¤§çš„ç©ºé—´æµªè´¹.è€ŒJDKæ–°å¢çš„***StringBuilder***ç±»èƒ½å¤Ÿæå¤§æé«˜åå¤ä¿®æ”¹å­—ç¬¦ä¸²çš„æ•ˆç‡

#### StringBuilderçš„å¸¸ç”¨æ–¹æ³•
- **append()**
è¯¥æ–¹æ³•ç”¨äºæƒ³å­—ç¬¦ä¸²ç”Ÿæˆå™¨ä¸­è¿½åŠ å†…å®¹,é€šè¿‡è¯¥æ–¹æ³•çš„å¤šä¸ªé‡è½½å½¢å¼,å¯ä»¥å®ç°æ¥å—ä»»ä½•ç±»å‹çš„æ•°æ®,å¦‚int,boolean,char,String,doubleæˆ–å¦ä¸€ä¸ªå­—ç¬¦ä¸²ç”Ÿæˆå™¨ç­‰
```Java
StringBuilder sb = new StringBuilder("hello");
sb.append(1);
-->"hello1"
```
- **insert(int offset , arg)**
è¯¥æ–¹æ³•ç”¨äºæƒ³å­—ç¬¦ä¸²ç”Ÿæˆå™¨ä¸­çš„æŒ‡å®šä½ç½®å¤„æ’å…¥æ•°æ®å†…å®¹,é€šè¿‡è¯¥æ–¹æ³•çš„ä¸åŒé‡è½½å½¢å¼,å¯æ˜¯å¸çº³å‘å­—ç¬¦ä¸²ç”Ÿæˆå™¨ä¸­æ’å…¥int,boolean,char,String,doubleç­‰åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°æ®æˆ–å…¶ä»–å¯¹è±¡
```java 
sb.insert(5,"world");
-->"helloworld"
```
- **delete(int start , int end)**
è¯¥æ–¹æ³•ç”¨äºç§»é™¤æ­¤åºåˆ—çš„å­åºåˆ—ä¸­çš„å­—ç¬¦.è¯¥å­—ç¬¦ä»ç´¢å¼•startå¼€å§‹åˆ°ç´¢å¼•end-1ç»“æŸ,å¦‚æœä¸å­˜åœ¨è¿™ç§å­—ç¬¦,åˆ™ä¸€ç›´åˆ°åºåˆ—å°¾éƒ¨.å¦‚æœstart=end,åˆ™ä¸å‘ç”Ÿä»»ä½•æ›´æ”¹
```Java
StringBuilder sb = new StringBuilder("helloworld");
sb.delete(5,10);
-->"hello"
```
- **reverse()**
è¯¥æ–¹æ³•ç”¨äºåè½¬å­—ç¬¦ä¸²
```Java
StringBuilder sb = new StringBuilder("hello");
sb.reverse();
-->"olleh"
```
- **length()**
è¯¥æ–¹æ³•ç”¨äºè¿”å›ç”Ÿæˆå™¨ä¸­å­—ç¬¦ä¸²çš„é•¿åº¦,è¿”å›å€¼ä¸ºintç±»å‹.
```java
StringBuilder sb = new StringBuilder("hello");
int size = sb.length();
--> size=5
```
- **toString()**
è¯¥æ–¹æ³•ä¼šå°†å­—ç¬¦ä¸²ç”Ÿæˆå™¨ä¸­çš„å†…å®¹ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›
```Java
StringBuilder sb = new StringBuilder("helloworld");
sb.delete(5,10);
System.out.println(sb.toString());
-->"hello"
```


---

## 3.3.å¸¸ç”¨ç±»åº“
### åŒ…è£…ç±»
> [!note] å¼•å…¥
> æˆ‘ä»¬è¯´è¿‡,Javaæ˜¯ä¸€é—¨é¢å‘å¯¹è±¡çš„è¯­è¨€,ä½†æ˜¯åœ¨Javaä¸­,åŸºæœ¬çš„æ•°æ®ç±»å‹ä¸èƒ½è¢«å®šä¹‰ä¸ºå¯¹è±¡,ä¸ºäº†èƒ½å¤Ÿå°†åŸºæœ¬çš„æ•°æ®ç±»å‹å½“åšå¯¹è±¡æ¥å¤„ç†,Javaæå‡ºäº†åŒ…è£…ç±»çš„æ¦‚å¿µ,ä»–ä¸»è¦æ˜¯æŠŠåŸºæœ¬æ•°æ®ç±»å‹å°è£…åœ¨äº†åŒ…è£…ç±»ä¸­,è¿™æ ·ä¾¿å¯ä»¥æŠŠè¿™äº›åŸºæœ¬ç±»å‹è½¬æ¢ä¸ºå¯¹è±¡è¿›è¡Œå¤„ç†.

åŒ…è£…ç±»åŠå…¶å¯¹åº”çš„åŸºæœ¬æ•°æ®ç±»å‹

|    åŒ…è£…ç±»    | å¯¹åº”çš„åŸºæœ¬æ•°æ®ç±»å‹ |   åŒ…è£…ç±»   | å¯¹åº”çš„åŸºæœ¬æ•°æ®ç±»å‹ |
| :-------: | :-------: | :-----: | :-------: |
|   Byte    |   byte    |  Short  |   short   |
|  Integer  |    int    |  Long   |   long    |
|   Float   |   float   | Double  |  double   |
| Character |   char    | Boolean |  boolean  |

####  **Integerç±»**
Integerç±»åœ¨å¯¹è±¡ä¸­åŒ…è£…äº†ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹intçš„å€¼,è¯¥ç±»çš„å¯¹è±¡åŒ…å«ä¸€ä¸ªintç±»å‹çš„å­—æ®µ.æ­¤å¤–,è¯¥ç±»æä¾›äº†å¤šä¸ªæ–¹æ³•,è¿™äº›æ–¹æ³•å¯ä»¥åœ¨intç±»å‹å’ŒStringç±»å‹ä¹‹é—´ç›¸äº’è½¬æ¢,åŒæ—¶æä¾›äº†å…¶ä»–ä¸€äº›å¤„ç†intç±»å‹å¾ˆæœ‰ç”¨çš„å¸¸é‡å’Œæ–¹æ³•

|                æ–¹æ³•                 |                               åŠŸèƒ½æè¿°                               |
| :-------------------------------: | :--------------------------------------------------------------: |
|        valueOf(String str)        |                     è¿”å›ä¿å­˜æŒ‡å®šçš„Stringå€¼çš„Integerå¯¹è±¡                     |
|       parseInt(String str)        |                    è¿”å›åŒ…å«åœ¨æœ‰stræŒ‡å®šçš„å­—ç¬¦ä¸²ä¸­çš„æ•°å­—çš„ç­‰ä»·æ•´æ•°å€¼                     |
|            toString()             |                è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¯¥Integerå€¼çš„Stringå¯¹è±¡(å¯ä»¥æŒ‡å®šè¿›åˆ¶åŸºæ•°)                |
|       toBinaryString(int i)       |                   ä»¥äºŒè¿›åˆ¶æ— ç¬¦å·æ•´æ•°çš„å½¢å¼è¿”å›ä¸€ä¸ªæ•´æ•°å‚æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼                   |
|        toHexString(int i)         |                  ä»¥åå…­è¿›åˆ¶æ— ç¬¦å·æ•´æ•°çš„å½¢å¼è¿”å›ä¸€ä¸ªæ•´æ•°å‚æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼                   |
|       toOctalString(int i)        |                   ä»¥å…«è¿›åˆ¶æ— ç¬¦å·æ•´æ•°çš„å½¢å¼è¿”å›ä¸€ä¸ªæ•´æ•°å‚æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼                   |
|     equals(Object IntegerObj)     |                         æ¯”è¾ƒè¯¥å¯¹è±¡å’ŒæŒ‡å®šçš„å¯¹è±¡æ˜¯å¦ç›¸ç­‰                          |
|            intValue()             |                        ä»¥intç±»å‹è¿”å›è¯¥Integerå¯¹è±¡                        |
|           shortValue()            |                       ä»¥shortç±»å‹è¿”å›è¯¥Integerå¯¹è±¡                       |
|            byteValue()            |                       ä»¥byteç±»å‹è¿”å›è¯¥Integerå¯¹è±¡                        |
| compareTo(Integer anotherInteger) | åœ¨æ•°å­—ä¸Šæ¯”è¾ƒä¸¤ä¸ªIntegerå¯¹è±¡,ä¸¤ä¸ªå€¼ç›¸ç­‰è¿”å›0, è°ƒç”¨å¯¹è±¡çš„å€¼å°äºanotherIntegerçš„å€¼,è¿”å›è´Ÿå€¼,å¤§äºè¿”å›æ­£å€¼ |

Integerç±»æä¾›äº†ä»¥ä¸‹å››ä¸ªå¸¸é‡:

- MAX_VALUE: è¡¨ç¤ºintç±»å‹å¯ä»¥å–åˆ°çš„æœ€å¤§å€¼,å³
$$
2^{32}-1
$$
- MIN_VALUE: è¡¨ç¤ºintç±»å‹å¯ä»¥å–åˆ°çš„æœ€å°å€¼,å³
$$
-2^{31}
$$
- SIZE:ç”¨æ¥ä»¥äºŒè¿›åˆ¶è¡¥ç å½¢å¼è¡¨ç¤ºintå€¼çš„ä½æ•°
- TYPE:è¡¨ç¤ºåŸºæœ¬ç±»å‹intçš„Classå®ä¾‹


####  **Doubleç±»**
Doubleç±»å’ŒFloatç±»å°è£…çš„ç±»å‹åˆ†åˆ«ä¸ºdoubleå’Œfloat. ç”±äºå®ƒä»¬éƒ½æ˜¯Numberç±»çš„å­ç±»,ä¸”æ“ä½œå¯¹è±¡éƒ½æ˜¯æµ®ç‚¹ç±»å‹,å› æ­¤å®ƒä»¬çš„æ–¹æ³•åŸºæœ¬ç›¸åŒ.

doubleç±»å¸¸ç”¨çš„æ–¹æ³•:

|          æ–¹æ³•           |                           åŠŸèƒ½æè¿°                            |
| :-------------------: | :-------------------------------------------------------: |
|  valueOf(String str)  |             è¿”å›ä¿å­˜ç”¨å‚æ•°å­—ç¬¦ä¸²strè¡¨ç¤ºçš„doubleå€¼çš„Doubleå¯¹è±¡              |
| parseDouble(String s) |      è¿”å›ä¸€ä¸ªæ–°çš„doubleå€¼,è¯¥å€¼è¢«åˆå§‹åŒ–ä¸ºç”¨æŒ‡å®šStringè¡¨ç¤ºçš„å€¼,ä¸valueOf()ä¸€æ ·      |
|     doubleValue()     |                   ä»¥doubleå½¢å¼è¿”å›è¯¥Doubleå¯¹è±¡                    |
|        isNAN()        | å¦‚æœæ­¤doubleå€¼ä¸æ˜¯æ•°å­—(**N**ot **A** **N**umber),è¿”å›true,åä¹‹è¿”å›false |
|      intValue()       |                     ä»¥intå½¢å¼è¿”å›è¯¥doubleå€¼                      |
|      byteValue()      |                 ä»¥byteå½¢å¼è¿”å›Doubleå¯¹è±¡å€¼(å¼ºåˆ¶è½¬æ¢)                  |
|      longValue()      |                ä»¥longå½¢å¼è¿”å›doubleå€¼(å¼ºåˆ¶è½¬æ¢ä¸ºlong)                |
|  compareTo(Double d)  |        å¯¹æ¯”ä¸¤ä¸ªDoubleå¯¹è±¡çš„æ•°å€¼,å¦‚æœç›¸ç­‰è¿”å›0,è°ƒç”¨å¯¹è±¡å°äºdè¿”å›è´Ÿå€¼,å¤§äºè¿”å›æ­£å€¼         |
|  equals(Object obj)   |                       å°†è¯¥å¯¹è±¡ä¸æŒ‡å®šçš„å¯¹è±¡æ¯”è¾ƒ                        |
|      toString()       |                    è¿”å›æ­¤Doubleå¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼                    |
| toHexString(double d) |                  è¿”å›doubleå‚æ•°çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼                   |

Doubleç±»æä¾›äº†ä»¥ä¸‹å¸¸é‡:
- MAX_EXPONENT: è¿”å›intå€¼,è¡¨ç¤ºæœ‰é™doubleå˜é‡å¯èƒ½å…·æœ‰çš„æœ€å¤§æŒ‡æ•°
- MIN_EXPONENT: è¿”å›intå€¼,è¡¨ç¤ºæ ‡å‡†åŒ–doubleå˜é‡å¯èƒ½å…·æœ‰çš„æœ€å°å€¼ä¹¦
- NEGATIVE_INFINITY:è¿”å›doubleå€¼,è¡¨ç¤ºä¿å­˜doubleç±»å‹çš„è´Ÿæ— ç©·å¤§å€¼çš„å¸¸é‡
- POSITIVE_INFINITY:è¿”å›doubleå€¼,è¡¨ç¤ºä¿å­˜doubleç±»å‹çš„æ­£æ— ç©·å¤§å€¼çš„å¸¸
####  **Booleanç±»**
Booleanç±»å°†åŸºæœ¬ç±»å‹ä¸ºbooleançš„å€¼åŒ…è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­.ä¸€ä¸ªBooleanç±»å‹çš„å¯¹è±¡åªåŒ…å«ä¸€ä¸ªç±»å‹ä¸ºbooleançš„å­—æ®µ.æ­¤å¤–,æ­¤ç±»è¿˜ä¸ºbooleanç±»å‹å’ŒStringç±»å‹çš„ç›¸äº’è½¬æ¢æä¾›äº†è®¸å¤šæ–¹æ³•,å¹¶æä¾›äº†å¤„ç†booleanç±»å‹æ—¶éå¸¸æœ‰ç”¨çš„å…¶ä»–ä¸€äº›å¸¸é‡å’Œæ–¹æ³•.

Booleanç±»å¸¸ç”¨çš„æ–¹æ³•

|           æ–¹æ³•           |                                     åŠŸèƒ½æè¿°                                      |
| :--------------------: | :---------------------------------------------------------------------------: |
|     booleanValue()     |                          å°†Booleanå¯¹è±¡çš„å€¼ä»¥å¯¹åº”çš„booleanå€¼è¿”å›                           |
|   equals(Object obj)   | åˆ¤æ–­è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡ä¸objæ˜¯å¦ç›¸ç­‰.å½“ä¸”ä»…å½“å‚æ•°ä¸æ˜¯null,è€Œä¸”ä¸è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡ä¸€æ ·éƒ½è¡¨ç¤ºåŒä¸€ä¸ªbooleanå€¼çš„Booleanå¯¹è±¡æ—¶,è¿”å›true |
| parseBoolean(String s) |                               å°†å­—ç¬¦ä¸²å‚æ•°è§£æä¸ºbooleanå€¼                               |
|       toString()       |                            è¿”å›è¡¨ç¤ºè¯¥booleanå€¼çš„Stringå¯¹è±¡                             |
|   valueOf(String s)    |                             è¿”å›ä¸€ä¸ªç”¨æŒ‡å®šå­—ç¬¦ä¸²è¡¨ç¤ºçš„booleanå€¼                             |
Booleanç±»æä¾›äº†ä»¥ä¸‹ä¸‰ä¸ªå¸¸é‡:
- TRUE: å¯¹åº”åŸºå€¼ä¸ºtrueçš„Booleanå¯¹è±¡
- FALSE: å¯¹åº”åŸºå€¼ä¸ºfalseçš„Booleanå¯¹è±¡
- TYPE: åŸºæœ¬ç±»å‹booleançš„Classå¯¹è±¡
####  **Characterç±»**
Characterç±»åœ¨å¯¹è±¡ä¸­åŒ…è£…ä¸€ä¸ªåŸºæœ¬ç±»å‹ä¸ºcharçš„å€¼,è¯¥ç±»ä¹Ÿæä¾›äº†å¤šç§æ–¹æ³•,ä»¥ç¡®å®šå­—ç¬¦çš„ç±»åˆ«,å¹¶å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†å­—ç¬¦ä»å¤§å†™è½¬æ¢åˆ°å°å†™,åä¹‹äº¦ç„¶.Characterç±»æä¾›äº†å¾ˆå¤šæ–¹æ³•æ¥å®Œæˆå¯¹å­—ç¬¦çš„æ“ä½œ,å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹è¡¨

|                  æ–¹æ³•                   |            åŠŸèƒ½æè¿°             |
| :-----------------------------------: | :-------------------------: |
|            valueOf(char a)            |   è¿”å›ä¿å­˜æŒ‡å®šcharå€¼çš„Characterå¯¹è±¡   |
| compareTo(Character anotherCharacter) | æ ¹æ®æ•°å­—æ¯”è¾ƒä¸¤ä¸ªCharacterå¯¹è±¡,å¦‚æœç›¸ç­‰è¿”å›0 |
|          equals(Object obj)           |     å°†è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡ä¸æŒ‡å®šçš„å¯¹è±¡è¿›è¡Œæ¯”è¾ƒ     |
|         toUpperCase(char ch)          |         å°†å­—ç¬¦å‚æ•°è½¬æ¢ä¸ºå¤§å†™          |
|         toLowerCase(char ch)          |         å°†å­—ç¬¦å‚æ•°è½¬æ¢ä¸ºå°å†™          |
|              toString()               |   è¿”å›ä¸€ä¸ªè¡¨ç¤ºæŒ‡å®šcharå€¼çš„Stringå¯¹è±¡    |
|              charValue()              |      è¿”å›è¯¥Characterå¯¹è±¡çš„å€¼       |
|         isUpperCase(char ch)          |        åˆ¤æ–­æŒ‡å®šå­—ç¬¦æ˜¯å¦ä¸ºå¤§å†™å­—ç¬¦        |
|         isLowerCase(char ch)          |        åˆ¤æ–­æŒ‡å®šå­—ç¬¦æ˜¯å¦ä¸ºå°å†™å­—ç¬¦        |
|           isLetter(char ch)           |         åˆ¤æ–­æŒ‡å®šå­—ç¬¦æ˜¯å¦ä¸ºå­—æ¯         |
|           isDigit(char ch)            |         åˆ¤æ–­æŒ‡å®šå­—ç¬¦æ˜¯å¦ä¸ºæ•°å­—         |
Characterç±»æä¾›äº†å¤§é‡è¡¨ç¤ºç‰¹å®šå­—ç¬¦çš„å¸¸é‡:
- CONNECTOR_PUNCTUATION: è¿”å›byteå‹å€¼,è¡¨ç¤ºUnicodeè§„èŒƒä¸­çš„å¸¸è§„ç±»åˆ«"Pc"
- UNASSIGNED: è¿”å›byteå‹å€¼,è¡¨ç¤ºUnicodeè§„èŒƒä¸­çš„å¸¸è§„ç±»åˆ«"Cn"
- TITLECASE_LETTER: è¿”å›byteå‹å€¼,è¡¨ç¤ºUnicodeè§„èŒƒä¸­çš„å¸¸è§„ç±»åˆ«"Lt"

####  **Numberç±»**
å¯¹äºæ•°å€¼ç±»å‹çš„åŒ…è£…ç±», å®ƒä»¬æœ‰ä¸€ä¸ªå…±åŒçš„çˆ¶ç±»--Numberç±».Numberç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»,å®ƒæ˜¯Byte,Integer,Short,Long,Double,Floatçš„çˆ¶ç±»,å…¶å­ç±»å¿…é¡»æä¾›å°†è¡¨ç¤ºçš„æ•°å€¼è½¬æ¢ä¸ºç›¸åº”åŸºæœ¬ç±»å‹çš„æ–¹æ³•.

|      æ–¹æ³•      |      åŠŸèƒ½æè¿°       |      æ–¹æ³•       |       åŠŸèƒ½æè¿°       |
| :----------: | :-------------: | :-----------: | :--------------: |
| byteValue()  | ä»¥byteå½¢å¼è¿”å›æŒ‡å®šçš„æ•°å€¼  | shortValue()  | ä»¥shortå½¢å¼è¿”å›æŒ‡å®šçš„æ•°å€¼  |
|  intValue()  |  ä»¥intå½¢å¼è¿”å›æŒ‡å®šçš„æ•°å€¼  |  longValue()  |  ä»¥longå½¢å¼è¿”å›æŒ‡å®šçš„æ•°å€¼  |
| floatValue() | ä»¥floatå½¢å¼è¿”å›æŒ‡å®šçš„æ•°å€¼ | doubleValue() | ä»¥doubleå½¢å¼è¿”å›æŒ‡å®šçš„æ•°å€¼ |




### æ•°å­—å¤„ç†
> [!note] ä»‹ç»
> Javaæä¾›äº†ä¸€ä¸ªæ‰§è¡Œæ•°å­¦åŸºæœ¬è¿ç®—çš„**Mathç±»**,è¯¥ç±»åŒ…æ‹¬å¸¸ç”¨çš„æ•°å­¦è¿ç®—æ–¹æ³•,å¦‚ä¸‰è§’å‡½æ•°æŒ‡æ•°å‡½æ•°ç­‰.é™¤æ­¤ä¹‹å¤–,Javaè¿˜æä¾›äº†ä¸€ç³»åˆ—æ•°å­¦å¸¸é‡,å¦‚PI,Eç­‰.æ­¤å¤–,è¿˜æä¾›äº†éšæœºæ•°çš„ç®—æ³•å’Œå¤§æ•°å­—çš„æ“ä½œç±»

#### **Mathç±»**
- å¸¸é‡
è°ƒç”¨æ–¹æ³•å¦‚ä¸‹:
```Java
Math.PI
Math.E
```
- ä¸‰è§’å‡½æ•°(ç›¸å…³æ–¹æ³•å‡ä¸º**public static double**)

|          æ–¹æ³•           |    æè¿°     |
| :-------------------: | :-------: |
|     sin(double a)     | è¿”å›è§’çš„ä¸‰è§’æ­£å¼¦  |
|     cos(double a)     | è¿”å›è§’çš„ä¸‰è§’ä½™å¼¦  |
|     tan(double a)     | è¿”å›è§’çš„ä¸‰è§’æ­£åˆ‡  |
|    asin(double a)     | è¿”å›ä¸€ä¸ªå€¼çš„åæ­£å¼¦ |
|    acos(double a)     | è¿”å›ä¸€ä¸ªå€¼çš„åä½™å¼¦ |
|    atan(double a)     | è¿”å›ä¸€ä¸ªå€¼çš„åæ­£åˆ‡ |
| toRadians(double deg) | å°†è§’åº¦è½¬æ¢ä¸ºå¼§åº¦  |
| toDegrees(double rad) | å°†å¼§åº¦è½¬æ¢ä¸ºè§’åº¦  |
éœ€è¦æ³¨æ„,è§’åº¦å’Œå¼§åº¦çš„è½¬æ¢é€šå¸¸æ˜¯ä¸å‡†ç¡®çš„

- æŒ‡æ•°å‡½æ•°(ç›¸å…³æ–¹æ³•å‡ä¸º**public static double**)

|           æ–¹æ³•           |    æè¿°    |
| :--------------------: | :------: |
|     exp(double a)      | è·å–eçš„aæ¬¡æ–¹  |
|     log(double a)      | å–è‡ªç„¶å¯¹æ•°lna |
|    log10(double a)     |  å–å¸¸ç”¨å¯¹æ•°   |
|     sqrt(double a)     |  å¯¹aå¼€å¹³æ–¹   |
|     cbrt(double a)     |  å¯¹aå¼€ç«‹æ–¹   |
| pow(double a,double b) |  æ±‚açš„bæ¬¡æ–¹  |

- å–æ•´å‡½æ•°

|                  æ–¹æ³•                  |               æè¿°               |
| :----------------------------------: | :----------------------------: |
| public static double ceil(double a)  |      è¿”å›å¤§äºç­‰äºå‚æ•°çš„æœ€å°æ•´æ•°(å‘ä¸Šå–æ•´)       |
| public static double floor(double a) |      è¿”å›å°äºç­‰äºå‚æ•°çš„æœ€å¤§æ•´æ•°(å‘ä¸‹å–æ•´)       |
| public static double rint(double a)  | è¿”å›ä¸å‚æ•°æœ€æ¥è¿‘çš„æ•´æ•°,å¦‚æœå­˜åœ¨ä¸¤ä¸ªåŒæ ·æ¥è¿‘çš„æ•´æ•°åˆ™å–å¶æ•°  |
|   public static int round(float a)   |       å°†å‚æ•°åŠ 0.5åè¿”å›ä¸å‚æ•°æœ€è¿‘çš„æ•´æ•°       |
|  public static long round(double a)  | å°†å‚æ•°åŠ 0.5åè¿”å›ä¸å‚æ•°æœ€è¿‘çš„æ•´æ•°ç„¶åå¼ºåˆ¶è½¬æ¢ä¸ºé•¿æ•´æ•°ç±»å‹ |


- æœ€å¤§å€¼/æœ€å°å€¼

|                      æ–¹æ³•                      |          æè¿°          |
| :------------------------------------------: | :------------------: |
| public static double max(double a,double b)  |      å–aå’Œbä¹‹é—´çš„æœ€å¤§å€¼      |
|      public static int min(int a,int b)      |   å–aå’Œbä¹‹é—´çš„æœ€å°å€¼,å‚æ•°ä¸ºæ•´å‹   |
|    public static long min(long a,long b)     |  å–aå’Œbä¹‹é—´çš„æœ€å°å€¼,å‚æ•°ä¸ºé•¿æ•´å‹   |
|   public static float min(float a,float b)   | å–aå’Œbä¹‹é—´çš„æœ€å°å€¼,å‚æ•°ä¸ºå•ç²¾åº¦æµ®ç‚¹å‹ |
| public static double min (double a,double b) | å–aå’Œbä¹‹é—´çš„æœ€å°å€¼,å‚æ•°ä¸ºåŒç²¾åº¦æµ®ç‚¹å‹ |

- ç»å¯¹å€¼

|                 æ–¹æ³•                 |        æè¿°        |
| :--------------------------------: | :--------------: |
|    public static int abs(int a)    |   å–açš„ç»å¯¹å€¼,å‚æ•°ä¸ºæ•´å‹   |
|  public static float abs(float a)  | å–açš„ç»å¯¹å€¼,å‚æ•°ä¸ºå•ç²¾åº¦æµ®ç‚¹å‹ |
| public static double abs(double a) | å–açš„ç»å¯¹å€¼,å‚æ•°ä¸ºåŒç²¾åº¦æµ®ç‚¹å‹ |
|   public static long abs(long a)   |  å–açš„ç»å¯¹å€¼,å‚æ•°ä¸ºé•¿æ•´å‹   |

#### **Randomç±»**
> [!note] è¯´æ˜
> Randomç±»æ˜¯JDKä¸­çš„éšæœºæ•°ç”Ÿæˆå™¨ç±»,ç¨‹åºå¼€å‘è€…å¯ä»¥é€šè¿‡å®ä¾‹åŒ–ä¸€ä¸ªRandomå¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªéšæœºæ•°ç”Ÿæˆå™¨

```Java
Random rd = new Random();
```
ç”¨æˆ·ä¹Ÿå¯ä»¥åœ¨å®ä¾‹åŒ–Randomå¯¹è±¡æ—¶,è®¾ç½®ç”Ÿæˆéšæœºæ•°çš„ç§å­,å¦‚ä¸‹:
```Java
Random rd = new Random(seedValue);
```
ç›¸å…³æ–¹æ³•å¦‚ä¸‹è¡¨

|              æ–¹æ³•              |          æè¿°          |
| :--------------------------: | :------------------: |
|     public int nextInt()     |       è¿”å›ä¸€ä¸ªéšæœºæ•´æ•°       |
|  public int nextInt(int n)   |   è¿”å›å¤§äºç­‰äº0ä¸”å°äºnçš„éšæœºæ•´æ•°   |
|    public long nextLong()    |      è¿”å›ä¸€ä¸ªéšæœºé•¿æ•´æ•°       |
| public boolean nextBoolean() |      è¿”å›ä¸€ä¸ªéšæœºå¸ƒå°”å€¼       |
|   public float nextFloat()   |     è¿”å›ä¸€ä¸ªéšæœºå•ç²¾åº¦æµ®ç‚¹å€¼     |
|  public double nextDouble()  |     è¿”å›ä¸€ä¸ªéšæœºåŒç²¾åº¦æµ®ç‚¹å€¼     |
| public double nextGaussian() | è¿”å›ä¸€ä¸ªæ¦‚ç‡å¯†åº¦ä¸ºé«˜æ–¯åˆ†å¸ƒçš„åŒç²¾åº¦æµ®ç‚¹å€¼ |
#### **BigIntegerç±»**
ä¹‹å‰æˆ‘ä»¬ä»‹ç»è¿‡Integerç±»æ˜¯intçš„åŒ…è£…ç±»,å¤„ç†çš„æœ€å¤§å€¼ä¸º

$$
2^{31}-1.
$$

å¦‚æœè¦å¤„ç†æ›´å¤§çš„æ•°å­—,Integerå°±ä¸å¤Ÿç”¨äº†,å› æ­¤javaæä¾›äº†BigIntegerç±»æ¥å¤„ç†æ›´å¤§çš„æ•°å­—.BigIntegerç±»æ”¯æŒä»»æ„ç²¾åº¦çš„æ•´æ•°,ä¹Ÿå°±æ˜¯è¯´åœ¨è¿ç®—ä¸­BigIntegerç±»ä¼šå‡†ç¡®è®¡ç®—,ä¸ä¼šä¸¢å¤±ä»»ä½•æ•°å€¼

ç›¸å…³æ–¹æ³•å¦‚ä¸‹:

|                            æ–¹æ³•                            |                     æè¿°                      |
| :------------------------------------------------------: | :-----------------------------------------: |
|          public BigInteger add(BigInteger val)           |                     åŠ æ³•                      |
|        public BigInteger subtract(BigInteger val)        |                     å‡æ³•                      |
|       public BigInteger multiply (BigInteger val)        |                     ä¹˜æ³•                      |
|        public BigInteger divide (BigInteger val)         |                     é™¤æ³•                      |
|       public BigInteger remainder (BigInteger val)       |                     å–ä½™                      |
| public BigInteger [ ] divideAndRemainder(BigInteger val) |           ç”¨æ•°ç»„è¿”å›ä½™æ•°å’Œå•†,ç¬¬ä¸€ä¸ªå€¼ä¸ºå•†ç¬¬äºŒä¸ªå€¼ä¸ºä½™æ•°           |
|              public BigInteger pow (int n)               |                  è¿›è¡Œå–å‚æ•°çš„næ¬¡æ–¹                  |
|               public BigInteger negate ()                |                    å–ç›¸åæ•°                     |
|            public BigInteger shiftLeft(int n)            |             å°†æ•°å­—å·¦ç§»nä½,å¦‚æœnä¸ºè´Ÿæ•°è¿›è¡Œå³ç§»              |
|           public BigInteger shiftRight(int n)            |             å°†æ•°å­—å³ç§»nä½,å¦‚æœnä¸ºè´Ÿæ•°è¿›è¡Œå·¦ç§»              |
|          public BigInteger and(BigInteger val)           |                      ä¸                      |
|           public BigInteger or(BigInteger val)           |                      æˆ–                      |
|           public int compareTo(BigInteger val)           |                    æ¯”è¾ƒæ•°å€¼                     |
|            public boolean equals(Object obj)             | å½“å‚æ•°objæ˜¯BigIntegerç±»å‹çš„æ•°å­—å¹¶ä¸”æ•°å€¼å’Œå¯¹è±¡å®ä¾‹çš„æ•°å€¼ç›¸åŒåˆ™è¿”å›true |
|          public BigInteger max(BigInteger val)           |                   è¿”å›è¾ƒå¤§çš„å€¼                    |
|          public BigInteger min(BigInteger val)           |                   è¿”å›è¾ƒå°çš„å€¼                    |
#### **BigDecimalç±»**
BigDecimalç±»å’ŒBigIntegerç±»éƒ½å¯ä»¥å®ç°å¯¹å¤§æ•°å­—çš„è¿ç®—,ä¸åŒçš„æ˜¯BigDecimalç±»æ·»åŠ äº†å°æ•°çš„æ¦‚å¿µ.
BigDecimalç±»æ”¯æŒä»»ä½•ç²¾åº¦çš„å®šç‚¹æ•°,å¯ä»¥ç”¨å®ƒç²¾ç¡®è®¡ç®—è´§å¸å€¼
å¸¸ç”¨çš„ä¸¤ä¸ªæ„é€ æ–¹æ³•å¦‚ä¸‹:

|          æ„é€ æ–¹æ³•          |             æè¿°             |
| :--------------------: | :------------------------: |
| BigDecimal(double val) | å®ä¾‹åŒ–æ—¶,å°†åŒç²¾åº¦æµ®ç‚¹è½¬æ¢ä¸ºBigDecimalç±»å‹ |
| BigDecimal(String val) |  å®ä¾‹åŒ–æ—¶,å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºBigDecimalç±»å‹  |

BigDecimalç±»å‹çš„åŠ å‡ä¹˜é™¤æ–¹æ³•å¦‚ä¸‹:

|                                æ–¹æ³•                                 |                æè¿°                |
| :---------------------------------------------------------------: | :------------------------------: |
|                         add(BigDecimal n)                         |                åŠ                  |
|                      subtract(BigDecimal n)                       |                å‡                 |
|                      multiply(BigDecimal n)                       |                ä¹˜                 |
| divide(BigDecimal divisor, int scale , RoundingMode roundingMode) | é™¤,æ–¹æ³•ä¸­ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä»£è¡¨é™¤æ•°,å•†çš„å°æ•°ç‚¹åçš„ä½æ•°,è¿‘ä¼¼å¤„ç†æ¨¡å¼ |
é™¤æ³•çš„è¿‘ä¼¼å¤„ç†æ¨¡å¼:

|           æ¨¡å¼           |                               å«ä¹‰                                |
| :--------------------: | :-------------------------------------------------------------: |
|    RoundingMode.UP     |                    å•†çš„æœ€åä¸€ä½å¦‚æœå¤§äº0,åˆ™å‘å‰è¿›ä½,æ­£è´Ÿæ•°éƒ½å¦‚æ­¤                     |
|   RoundingMode.DOWN    |                        å•†çš„æœ€åä¸€ä½æ— è®ºæ˜¯ä»€ä¹ˆæ•°å­—éƒ½çœç•¥                         |
|  RoundingMode.CEILING  |       å¦‚æœå•†æ˜¯æ­£æ•°,æŒ‰ç…§UPå¤„ç†; å¦‚æœå•†æ˜¯è´Ÿæ•°,æŒ‰ç…§DOWNå¤„ç†.è¿™ç§æ¨¡å¼çš„å¤„ç†éƒ½ä¼šä½¿è¿‘ä¼¼å€¼å¤§äºç­‰äºå®é™…å€¼       |
|   RoundingMode.FLOOR   |       å•†å¦‚æœæ˜¯æ•´æ•°åˆ™æŒ‰ç…§DOWNå¤„ç†; å¦‚æœå•†æ˜¯è´Ÿæ•°åˆ™æŒ‰ç…§UPå¤„ç†.è¿™ç§æ¨¡å¼çš„å¤„ç†éƒ½ä¼šæ˜¯è¿‘ä¼¼å€¼å°äºç­‰äºå®é™…å€¼       |
| RoundingMode.HALF_DOWN |          å¯¹å•†è¿›è¡Œå››èˆäº”å…¥: å¦‚æœå•†æœ€åä¸€ä½å°äºç­‰äº5,åˆ™èˆå¼ƒ,å¤§äº5åˆ™åšè¿›ä½æ“ä½œ. å¦‚7.5â‰ˆ7           |
|  RoundingMode.HALF_UP  |          å¯¹å•†è¿›è¡Œå››èˆäº”å…¥: å¦‚æœå•†çš„æœ€åä¸€ä½å°äº5, åˆ™èˆå¼ƒ, å¤§äºç­‰äº5åˆ™åšè¿›ä½. å¦‚7.5â‰ˆ8          |
| RoundingMode.HALF_EVEN | å¦‚æœå•†çš„å€’æ•°ç¬¬äºŒä½ä¸ºå¥‡æ•°,åˆ™æŒ‰ç…§HALF_UPå¤„ç†,å¦‚æœä¸ºå¶æ•°åˆ™æŒ‰ç…§HALF_DOWNå¤„ç†. å¦‚7.5â‰ˆ8 , 8.5çº¦ç­‰äº8 |


### Systemç±»
> [!note] è¯´æ˜
> Systemç±»æ˜¯JDKä¸­æä¾›çš„ç³»ç»Ÿç±»,è¯¥ç±»ç”±***final***ä¿®é¥°,å› æ­¤ä¸å…è®¸è¢«ç»§æ‰¿.Systemç±»æä¾›äº†è®¸å¤šç³»ç»Ÿå±‚é¢çš„æ“ä½œ,å¹¶ä¸”è¿™äº›æ–¹æ³•å…¨éƒ¨æ˜¯é™æ€çš„.Systemç±»æä¾›çš„æ–¹æ³•å¦‚ä¸‹:


|             æ–¹æ³•             |                                   æè¿°                                   |
| :------------------------: | :--------------------------------------------------------------------: |
|    currentTimeMillis()     |                             è¿”å›ä»¥æ¯«ç§’ä¸ºå•ä½çš„å½“å‰æ—¶é—´                              |
|      exit(int status)      | é€šè¿‡å¯åŠ¨è™šæ‹Ÿæœºçš„å…³é—­åºåˆ—,ç»ˆæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„Javaè™šæ‹Ÿæœº.æ­¤æ–¹æ³•ä»ä¸æ­£å¸¸è¿”å›.å¯ä»¥å°†å˜é‡ä½œä¸ºä¸€ä¸ªçŠ¶æ€ç ,é0è¡¨ç¤ºéæ­£å¸¸ç»ˆæ­¢,0è¡¨ç¤ºæ­£å¸¸ç»ˆæ­¢ |
| Map<String,String>getenv() |                        è¿”å›ä¸€ä¸ªä¸èƒ½ä¿®æ”¹çš„å½“å‰ç³»ç»Ÿç¯å¢ƒçš„å­—ç¬¦ä¸²æ˜ å°„è§†å›¾                         |
|    getenv(String name)     |                               è·å–æŒ‡å®šçš„ç¯å¢ƒå˜é‡å€¼                               |
| getProperties(String key)  |                               ç¡®å®šå½“å‰çš„ç³»ç»Ÿå±æ€§                                |
|  getProperty(String key)   |                             è·å–ç”¨æŒ‡å®šé”®æè¿°çš„ç³»ç»Ÿå±æ€§                              |
|   setIn(InputStream in)    |                               é‡æ–°åˆ†é…æ ‡å‡†è¾“å…¥æµ                                |

### Scannerç±»
> [!note] è¯´æ˜
> å’ŒCè¯­è¨€ä¸åŒ,Javaæ§åˆ¶å°è¯»å–ç”¨æˆ·è¾“å…¥çš„å€¼,ä½¿ç”¨çš„ä¸æ˜¯ä¸€è¡Œå¯ä»¥ç›´æ¥ä½¿ç”¨çš„ä»£ç ,è€Œæ˜¯ç”±ä¸€ä¸ªå«Scannerçš„ç±»å®ç°çš„.Scannerçš„è‹±æ–‡ç›´è¯‘å°±æ˜¯æ‰«æä»ª,å®ƒçš„ç”¨é€”äº¦ç„¶,å°†æ•°å­—åŒ–çš„ä¿¡æ¯æµè½¬æ¢ä¸ºäººç±»å¯è¯†åˆ«çš„æ–‡å­—.

åœ¨ä½¿ç”¨Scannerç±»ä¹‹å‰,éœ€è¦å…ˆå¯¼å…¥è¯¥ç±»
```Java
import java.util.Scanner;
```

Scannerç±»æä¾›çš„æ–¹æ³•å¦‚ä¸‹:

|      æ–¹æ³•       |  è¿”å›å€¼ç±»å‹  |         æè¿°          |     æ–¹æ³•      | è¿”å›å€¼ç±»å‹  |        æè¿°        |
| :-----------: | :-----: | :-----------------: | :---------: | :----: | :--------------: |
|    next()     | String  | æŸ¥æ‰¾å¹¶è¿”å›æ­¤æ‰«æå™¨è·å–çš„ä¸‹ä¸€ä¸ªå®Œæ•´æ ‡è®° |  nextInt()  |  int   |  æ‰«æä¸€ä¸ªå€¼å¹¶è¿”å›intç±»å‹   |
| nextBoolean() | boolean |    æ‰«æä¸€ä¸ªå¸ƒå°”å€¼æ ‡è®°å¹¶è¿”å›     | nextLine()  | String | æ‰«æä¸€ä¸ªå€¼å¹¶è¿”å›Stringç±»å‹ |
|  nextByte()   |  byte   |   æ‰«æä¸€ä¸ªå€¼å¹¶è¿”å›byteç±»å‹    | nextLong()  |  long  |  æ‰«æä¸€ä¸ªå€¼å¹¶è¿”å›longç±»å‹  |
| nextDouble()  | double  |  æ‰«æä¸€ä¸ªå€¼å¹¶è¿”å›doubleç±»å‹   | nextShort() | short  | æ‰«æä¸€ä¸ªå€¼å¹¶è¿”å›shortç±»å‹  |
|  nextFloat()  |  float  |   æ‰«æä¸€ä¸ªå€¼å¹¶è¿”å›floatç±»å‹   |   close()   |  void  |      å…³é—­è¯¥æ‰«æå™¨      |

### æ—¥æœŸæ—¶é—´ç±»
åœ¨ç¨‹åºå¼€å‘ä¸­,ç»å¸¸éœ€è¦å¤„ç†æ—¥æœŸæ—¶é—´,Javaä¸­æä¾›äº†ä¸“é—¨çš„æ—¥æœŸæ—¶é—´ç±»æ¥å¤„ç†ç›¸åº”çš„é—®é¢˜
#### **Dateç±»**
Dateç±»ç”¨äºè¡¨ç¤ºæ—¥æœŸæ—¶é—´,ä½¿ç”¨è¯¥ç±»è¡¨ç¤ºæ—¶é—´**éœ€è¦ä½¿ç”¨æ„é€ æ–¹æ³•**åˆ›å»ºå¯¹è±¡
æ„é€ æ–¹æ³•å¦‚ä¸‹:

|      æ„é€ æ–¹æ³•       |                              æè¿°                               |
| :-------------: | :-----------------------------------------------------------: |
|     Date()      |                   åˆ†é…Dateå¯¹è±¡å¹¶åˆå§‹åŒ–æ­¤å¯¹è±¡,è¡¨ç¤ºåˆ†é…å®ƒçš„æ—¶é—´                    |
| Date(long date) | åˆ†é…Dateå¯¹è±¡å¹¶åˆå§‹åŒ–æ­¤å¯¹è±¡,ä»¥è¡¨ç¤ºè‡ªæ ‡å‡†åŸºå‡†æ—¶é—´(å³1970å¹´1æœˆ1æ—¥00:00:00 GMT)èµ·ç»è¿‡æŒ‡å®šæ¯«ç§’æ•°çš„æ—¶é—´ |
Dateç±»çš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹:

|         æ–¹æ³•         |                             æè¿°                              |
| :----------------: | :---------------------------------------------------------: |
|  after(Date when)  |                       æµ‹è¯•å½“å‰æ—¥æœŸæ˜¯å¦åœ¨æŒ‡å®šæ—¥æœŸä¹‹å                       |
| before(Date when)  |                       æµ‹è¯•å½“å‰æ—¥æœŸæ˜¯å¦åœ¨æŒ‡å®šæ—¥æœŸä¹‹å‰                       |
|     getTime()      |            è·å¾—è‡ª1970å¹´1æœˆ1æ—¥00:00:00 GMTå¼€å§‹åˆ°ç°åœ¨æ‰€ç»è¿‡çš„æ¯«ç§’æ•°             |
| setTime(long time) | è®¾ç½®å½“å‰Dateå¯¹è±¡æ‰€è¡¨ç¤ºçš„æ—¥æœŸæ—¶é—´å€¼,è¯¥å€¼ç”¨ä»¥è¡¨ç¤º1970å¹´1æœˆ1æ—¥00:00:00 GMTä»¥åtimeæ¯«ç§’çš„æ—¶é—´ç‚¹ |

#### **æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–ç±»**
> [!question] æ€è€ƒ:
> å¦‚æœåœ¨ç¨‹åºä¸­ç›´æ¥è¾“å‡ºDateå¯¹è±¡,æ˜¾ç¤ºçš„æ˜¯"Mon Feb 20 17:39:00 CST 2025"è¿™ç§æ ¼å¼çš„æ—¥æœŸæ—¶é—´,é‚£ä¹ˆå¦‚ä½•å°†å…¶æ˜¾ç¤ºä¸º"2025-2-20"æˆ–"17:39:00"çš„æ ¼å¼å‘¢?
> Javaä¸­æä¾›äº†**DateFormatç±»**æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½

> [!note] ä»‹ç»
> DateFormatç±»æ˜¯æ—¥æœŸæ ¼å¼åŒ–å­ç±»çš„æŠ½è±¡ç±»,å¯ä»¥æŒ‰ç…§æŒ‡å®šçš„æ ¼å¼å¯¹æ—¥æœŸæˆ–æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–.DateFormatæä¾›äº†å¾ˆå¤šç±»æ–¹æ³•,ä»¥è·å¾—åŸºäºé»˜è®¤æˆ–ç»™å®šè¯­è¨€ç¯å¢ƒå’Œå¤šç§æ ¼å¼åŒ–é£æ ¼çš„é»˜è®¤æ—¥æœŸæ—¶é—´Formatter,æ ¼å¼åŒ–é£æ ¼ä¸»è¦åŒ…æ‹¬**SHORT,MEDIUM,LONG,FULL**å››ç§.

- SHORT: å®Œå…¨ä¸ºæ•°å­—,å¦‚12.31.52æˆ–3.30pm
- MEDIUM: è¾ƒé•¿,å¦‚Jan 12,1952
- LONG: æ›´é•¿,å¦‚January 12,1952æˆ–3:30:52 pm
- FULL: å®Œå…¨æŒ‡å®š,å¦‚Tuesday,April 12,1952AD
DateFormatç±»è¿˜æä¾›äº†ä¸€äº›é™æ€æ–¹æ³•:

|          æ–¹æ³•           |               æè¿°                |
| :-------------------: | :-----------------------------: |
|   format(Date date)   |      å°†ä¸€ä¸ªDateå¯¹è±¡å®ä¾‹åŒ–ä¸ºæ—¥æœŸ/æ—¶é—´å­—ç¬¦ä¸²      |
|     getCalendar()     |        è·å–ä¸æ­¤æ—¥æœŸ/æ—¶é—´æ ¼å¼å™¨å…³è”çš„æ—¥å†        |
|   getDateInstance()   |  è·å–æ—¥æœŸæ ¼å¼å™¨,è¯¥æ ¼å¼å™¨å…·æœ‰é»˜è®¤è¯­è¨€ç¯å¢ƒçš„é»˜è®¤æ ¼å¼åŒ–é£æ ¼   |
| getDateTimeInstance() | è·å–æ—¥æœŸ/æ—¶é—´æ ¼å¼å™¨,è¯¥æ ¼å¼å™¨å…·æœ‰é»˜è®¤è¯­è¨€ç¯å¢ƒçš„é»˜è®¤æ ¼å¼åŒ–é£æ ¼ |
|     getInstance()     |  è·å–ä¸ºæ—¥æœŸå’Œæ—¶é—´ä½¿ç”¨SHORTé£æ ¼çš„é»˜è®¤æ—¥æœŸ/æ—¶é—´æ ¼å¼å™¨   |
|   getTimeInstance()   |  è·å–æ—¶é—´æ ¼å¼å™¨,è¯¥æ ¼å¼å™¨å…·æœ‰é»˜è®¤è¯­è¨€ç¯å¢ƒçš„é»˜è®¤æ ¼å¼åŒ–é£æ ¼   |
| parse(String source)  |   å°†å­—ç¬¦ä¸²è§£æä¸ºä¸€ä¸ªæ—¥æœŸ,å¹¶è¿”å›è¿™ä¸ªæ—¥æœŸçš„Dateå¯¹è±¡    |
ä¾‹å¦‚:å°†å½“å‰æ—¥æœŸæŒ‰ç…§DateFormatç±»é»˜è®¤æ ¼å¼è¾“å‡º
```java
DateFormat df = DateFormat.getInstance();
System.out.println(df.format(new Date()));

-->2025/7/1 15:08
```

> [!warning] æ³¨æ„!
ç”±äºDateFormatç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»,ä¸å…è®¸è¢«å®ä¾‹åŒ–.å› æ­¤,é™¤äº†ä½¿ç”¨getXXXInstance()æ–¹æ³•åˆ›å»ºå¯¹è±¡,è¿˜å¯ä»¥ä½¿ç”¨å…¶å­ç±»,å¦‚**SimpleDateFormat**ç±».è¯¥ç±»æ˜¯ä¸€ä¸ªä»¥ä¸è¯­è¨€ç¯å¢ƒç›¸å…³çš„æ–¹å¼æ¥æ ¼å¼åŒ–å’Œåˆ†ææ—¥æœŸçš„å…·ä½“ç±»,ä»–å…è®¸è¿›è¡Œæ ¼å¼åŒ–(æ—¥æœŸ->æ–‡æœ¬),åˆ†æ(æ–‡æœ¬->æ—¥æœŸ)å’Œè§„èŒƒåŒ–

SimpleDateFormatæä¾›äº†19ä¸ªæ ¼å¼åŒ–å­—ç¬¦,å¯ä»¥è®©å¼€å‘è€…ä»»æ„ç¼–å†™æ—¥æœŸæ ¼å¼

| å­— æ¯ |  æ—¥æœŸæˆ–æ—¶é—´å…ƒç´    |        ç±» å‹        |                ç¤º ä¾‹                 |
| :-: | :--------: | :---------------: | :--------------------------------: |
|  G  |   Eraæ ‡è¯†ç¬¦   |       Text        |                 AD                 |
|  y  |     å¹´      |       Year        |              1996;96               |
|  M  |   å¹´ä¸­çš„æœˆä»½    |       Month       |            July;Jul;07             |
|  w  |   å¹´ä¸­çš„å‘¨æ•°    |      Number       |                 27                 |
|  W  |   æœˆä»½ä¸­çš„å‘¨æ•°   |      Number       |                 2                  |
|  D  |   å¹´ä¸­çš„å¤©æ•°    |      Number       |                189                 |
|  d  |   æœˆä»½ä¸­çš„å¤©æ•°   |      Number       |                 10                 |
|  F  |   æœˆä»½ä¸­çš„æ˜ŸæœŸ   |      Number       |                 2                  |
|  E  |   æ˜ŸæœŸä¸­çš„å¤©æ•°   |       Text        |            Tuesday;Tue             |
|  a  |  am/pmæ ‡è®°   |       Text        |                 PM                 |
|  H  |  ä¸€å¤©ä¸­çš„å°æ—¶æ•°   |      Number       |                 0                  |
|  h  | am/pmä¸­çš„å°æ—¶æ•° |      Number       |                 12                 |
|  k  |  ä¸€å¤©ä¸­çš„å°æ—¶æ•°   |      Number       |                 24                 |
|  K  | am/pmä¸­çš„å°æ—¶æ•° |      Number       |                 0                  |
|  m  |  å°æ—¶ä¸­çš„åˆ†é’Ÿæ•°   |      Number       |                 30                 |
|  s  |   åˆ†é’Ÿä¸­çš„ç§’æ•°   |      Number       |                 55                 |
|  S  |    æ¯«ç§’æ•°     |      Number       |                978                 |
|  z  |     æ—¶åŒº     | General time zone | Pacific Standard Time;PST;GMT-8:00 |
|  Z  |     æ—¶åŒº     | RFC 822 time zone |                -800                |

#### **Calendarç±»**
> [!note] ä»‹ç»
> java.util.CalendarÂ æ˜¯Javaä¸­ç”¨äºå¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„***æŠ½è±¡åŸºç±»***ï¼Œå®ƒæä¾›äº†æ¯”`java.util.Date`ç±»æ›´å¼ºå¤§çš„æ—¥æœŸæ“ä½œåŠŸèƒ½ã€‚

> [!warning] æ³¨æ„
> ç”±äºCalendarç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»,å› æ­¤æ— æ³•ç›´æ¥newå‡ºæ¥ä¸€ä¸ªå®ä¾‹åŒ–çš„å¯¹è±¡,åªèƒ½ä½¿ç”¨getInstance()æ–¹æ³•åˆ›å»º. å¦‚æœéœ€è¦åˆ›å»ºCalendarç±»çš„å¯¹è±¡, å¿…é¡»ä½¿ç”¨å…¶å­ç±»,å¦‚GregorianCalendarç±».


- Calendarç±»æä¾›çš„å­—æ®µåŠå…¶è¯´æ˜å¦‚ä¸‹:

|          å­—æ®µ          |                         è¯´æ˜                         |
| :------------------: | :------------------------------------------------: |
|         DATE         |               getå’Œsetçš„å­—æ®µæ•°å­—,æŒ‡ç¤ºä¸€ä¸ªæœˆä¸­çš„æŸå¤©               |
|     DAY_OF_MONTH     |               getå’Œsetçš„å­—æ®µæ•°å­—,æŒ‡ç¤ºä¸€ä¸ªæœˆä¸­çš„æŸå¤©               |
|     DAY_OF_WEEK      |              getå’Œsetçš„å­—æ®µæ•°å­—,æŒ‡ç¤ºä¸€ä¸ªæ˜ŸæœŸä¸­çš„æŸå¤©               |
| DAY_OF_WEEK_IN_MONTH |             getå’Œsetçš„å­—æ®µæ•°å­—,æŒ‡ç¤ºå½“å‰æœˆä¸­çš„ç¬¬å‡ ä¸ªæ˜ŸæœŸ              |
|     DAY_OF_YEAR      |               getå’Œsetçš„å­—æ®µæ•°å­—,æŒ‡ç¤ºå½“å‰å¹´ä¸­çš„å¤©æ•°               |
|         HOUR         |              getå’Œsetçš„å­—æ®µæ•°å­—,æŒ‡ç¤ºä¸Šåˆæˆ–ä¸‹åˆçš„å°æ—¶               |
|     HOUR_OF_DAY      |               getå’Œsetçš„å­—æ®µæ•°å­—,æŒ‡ç¤ºä¸€å¤©ä¸­çš„å°æ—¶                |
|     MILLISECOND      |               getå’Œsetçš„å­—æ®µæ•°å­—,æŒ‡ç¤ºä¸€ç§’ä¸­çš„æ¯«ç§’                |
|        MINUTE        |               getå’Œsetçš„å­—æ®µæ•°å­—,æŒ‡ç¤ºä¸€å°æ—¶ä¸­çš„åˆ†é’Ÿ               |
|        MONTH         |                 æŒ‡ç¤ºæœˆä»½çš„getå’Œsetçš„å­—æ®µæ•°å­—                  |
|        SECOND        |                getå’Œsetçš„å­—æ®µæ•°å­—,æŒ‡ç¤ºä¸€åˆ†é’Ÿçš„ç§’                |
|         time         | æ—¥å†çš„å½“å‰è®¾ç½®æ—¶é—´,ä»¥æ¯«ç§’ä¸ºå•ä½,è¡¨ç¤ºè‡ªæ ¼æ—å¨æ²»æ ‡å‡†æ—¶é—´1970å¹´1æœˆ1æ—¥0:00:00åç»è¿‡çš„æ—¶é—´ |
|    WEEK_OF_MONTH     |              getå’Œsetçš„å­—æ®µæ•°å­—,æŒ‡ç¤ºå½“å‰æœˆä¸­çš„æ˜ŸæœŸæ•°               |
|     WEEK_OF_YEAR     |              getå’Œsetçš„å­—æ®µæ•°å­—,æŒ‡ç¤ºå½“å‰å¹´ä¸­çš„æ˜ŸæœŸæ•°               |
|         YEAR         |                  æŒ‡ç¤ºå¹´çš„getå’Œsetçš„å­—æ®µæ•°å­—                  |
- Calendarç±»æä¾›çš„æ–¹æ³•

|                                    æ–¹æ³•                                     |                            æè¿°                            |
| :-----------------------------------------------------------------------: | :------------------------------------------------------: |
|                        add(int field, int amount)                         |        æ ¹æ®æ—¥å†çš„è§„åˆ™,ä¸ºç»™å®šçš„æ—¥å†å­—æ®µæ·»åŠ æˆ–å‡å»æŒ‡å®šçš„æ—¶é—´é‡,***ä¼šå½±å“æ›´å¤§çš„å­—æ®µ***        |
|                            after(Object when)                             |       åˆ¤æ–­æ­¤Calendarå¯¹è±¡è¡¨ç¤ºçš„æ—¶é—´æ˜¯å¦åœ¨æŒ‡å®šObjectè¡¨ç¤ºçš„æ—¶é—´ä¹‹å,è¿”å›åˆ¤æ–­ç»“æœ        |
|                            before(Object when)                            |       åˆ¤æ–­æ­¤Calendarå¯¹è±¡è¡¨ç¤ºçš„æ—¶é—´æ˜¯å¦åœ¨æŒ‡å®šObjectè¡¨ç¤ºçš„æ—¶é—´ä¹‹å‰,è¿”å›åˆ¤æ–­ç»“æœ        |
|                              get(int field)                               |                        è¿”å›ç»™å®šæ—¥å†å­—æ®µçš„å€¼                        |
|                               getInstance()                               |                    ä½¿ç”¨é»˜è®¤æ—¶åŒºå’Œè¯­è¨€ç¯å¢ƒè·å¾—ä¸€ä¸ªæ—¥å†                     |
|                                 getTime()                                 |        è¿”å›ä¸€ä¸ªè¡¨ç¤ºæ­¤Calendarå¯¹è±¡æ—¶é—´å€¼(ä»å†å…ƒè‡³ç°åœ¨çš„æ¯«ç§’åç§»é‡)çš„Dateå¯¹è±¡         |
|                             getTimeInMillis()                             |                è¿”å›æ­¤Calendarå¯¹è±¡è¡¨ç¤ºçš„æ—¶é—´å€¼,ä»¥æ¯«ç§’ä¸ºå•ä½                |
|                        rool(int field, boolean up)                        |           åœ¨ç»™å®šçš„æ—¶é—´å­—æ®µä¸Šæ·»åŠ æˆ–å‡å»å•ä¸ªæ—¶é—´å•å…ƒ,***ä¸æ›´æ”¹æ›´å¤§çš„å­—æ®µ***            |
|                         set(int field, int value)                         |                      å°†ç»™å®šçš„æ—¥å†å­—æ®µè®¾ç½®ä¸ºæŒ‡å®šå€¼                      |
|                    set(int year, int month, int date)                     |            è®¾ç½®æ—¥å†å­—æ®µ YEAR, MONTH, DAY_OF_MONTHçš„å€¼            |
|       set(int year, int month, int date, int hourOfDay, int minute)       |     è®¾ç½®æ—¥å†å­—æ®µ YEAR, MONTH, DAY_OF_MONTH, HOUR, MINUTEçš„å€¼     |
| set(int year, int month, int date, int hourOfDay, int minute, int second) | è®¾ç½®æ—¥å†å­—æ®µ YEAR, MONTH, DAY_OF_MONTH, HOUR, MINUTE, SECONDçš„å€¼ |
|                            setTime(Date date)                             |               ä½¿ç”¨ç»™å®šçš„Dateå¯¹è±¡è®¾ç½®æ­¤Calendarå¯¹è±¡çš„æ—¶é—´                |
|                       setTimeInMillis(long millis)                        |               ç”¨ç»™å®šçš„longå€¼è®¾ç½®æ­¤Calendarå¯¹è±¡çš„å½“å‰æ—¶é—´å€¼               |
æœ€åå¯¹Calendarç±»åšä¸ªæ€»ç»“:
- c.set(Calendar.DAY_OF_MONTH,0)è·å–çš„æ˜¯ä¸Šä¸ªæœˆçš„æœ€åä¸€å¤©,å› æ­¤è°ƒç”¨å‰éœ€è¦å°†æœˆä»½å¾€ååŠ ä¸€ä¸ªæœˆ
- Calendar.MONTHçš„ç¬¬ä¸€ä¸ªæœˆæ˜¯*ä»0å¼€å§‹è®°å½•*çš„,å› æ­¤åœ¨è·å¾—æœˆä»½æ•°å­—åè¦åŠ 1. å¹´å’Œæ—¥æ˜¯ä»1å¼€å§‹è®°å½•çš„,ä¸éœ€è¦åŠ 1
- Calendar.DAY_OF_WEEKçš„ç¬¬ä¸€å¤©æ˜¯å‘¨æ—¥,å‘¨å…­æ˜¯æœ€åä¸€å¤©


---

## 3.4.é›†åˆç±»

### é›†åˆç±»æ¦‚è¿°
java.utilåŒ…ä¸­æä¾›äº†ä¸€äº›é›†åˆç±»,è¿™äº›é›†åˆç±»åˆè¢«ç§°ä¸º[[æ•°æ®å®¹å™¨]]. è¯´åˆ°å®¹å™¨,æˆ‘ä»¬ä¸éš¾è”æƒ³åˆ°æ•°ç»„.
é›†åˆç±»å’Œæ•°ç»„çš„ä¸åŒä¹‹å¤„åœ¨äº: 
- æ•°ç»„å­˜æ”¾çš„å†…å®¹æ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„å†…å®¹,è€Œ**é›†åˆç±»å­˜æ”¾çš„å†…å®¹æ˜¯å¯¹è±¡çš„å¼•ç”¨**(åœ°å€,ç±»ä¼¼äºC/C++çš„æŒ‡é’ˆ,ä½†æ˜¯æ¯”æŒ‡é’ˆæ›´å®‰å…¨)
- æ•°ç»„çš„é•¿åº¦å›ºå®šè€Œé›†åˆçš„é•¿åº¦å¯å˜

ä¸æ•°ç»„ç›¸åŒ, é›†åˆä¸­ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ä¸º0

å¸¸ç”¨çš„é›†åˆç±»æœ‰**List,Set,Map**. å…¶ä¸­Listå’ŒSetåˆç»§æ‰¿äº†Collectionæ¥å£,å„æ¥å£è¿˜æä¾›äº†ä¸åŒçš„å®ç°ç±».
ç»§æ‰¿å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤º:

```mermaid
classDiagram
Java.lang.Object <|-- Map
Map <|-- HashMap
Map <|-- TreeMap
Java.lang.Object <|-- Collection
Collection <|-- Set
Set <|-- HashSet
Set <|-- TreeSet
Collection <|-- List
List <|-- ArrayList
List <|-- LinkedList
```
### Collectionæ¥å£
> [!note] è¯´æ˜
> Collectionæ¥å£æ˜¯å±‚æ¬¡ç»“æ„ä¸­çš„***æ ¹æ¥å£***, æ„æˆCollectionçš„å•ä½è¢«ç§°ä¸ºå…ƒç´ . Collectionæ¥å£é€šå¸¸ä¸èƒ½è¢«ç›´æ¥ä½¿ç”¨,ä½†æ˜¯è¯¥æ¥å£æä¾›äº†æ·»åŠ å…ƒç´ ,åˆ é™¤å…ƒç´ ,ç®¡ç†æ•°æ®çš„æ–¹æ³•. ç”±äºListå’ŒSetéƒ½ç»§æ‰¿äº†Collectionæ¥å£,å› æ­¤è¿™äº›æ–¹æ³•å¯¹Listå’ŒSetæ˜¯é€šç”¨çš„. 


Collectionæ¥å£çš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹

|                æ–¹æ³•                 |                   æè¿°                   |
| :-------------------------------: | :------------------------------------: |
|             add(E e)              |             å°†æŒ‡å®šçš„å¯¹è±¡æ·»åŠ åˆ°è¯¥é›†åˆä¸­              |
| `addAll(Collection<? extends T>)` |            å°†å‚æ•°ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½æ·»åŠ åˆ°é›†åˆä¸­            |
|        contains(Object o)         |             åˆ¤æ–­è¯¥é›†åˆä¸­æ˜¯å¦åŒ…å«å¯¹è±¡o              |
|         remove(Object o)          |              å°†æŒ‡å®šçš„å¯¹è±¡ä»é›†åˆä¸­ç§»é™¤              |
|             isEmpty()             |       è¿”å›booleanå€¼, ç”¨äºåˆ¤æ–­å½“å‰é›†åˆæ˜¯å¦ä¸ºç©º.        |
|            iterator()             | è¿”å›åœ¨æ­¤Collectionçš„å…ƒç´ ä¸Šè¿›è¡Œè¿­ä»£çš„è¿­ä»£å™¨, ç”¨äºéå†é›†åˆä¸­çš„å¯¹è±¡ |
|              size()               |           è¿”å›intå€¼,è¿”å›é›†åˆä¸­çš„å…ƒç´ ä¸ªæ•°            |
|        `Object [] toArray`        |             è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å…ƒç´ çš„æ•°ç»„              |

### Listæ¥å£
> [!note] æ¦‚è¿°
> Listæ¥å£ç»§æ‰¿äº†Collectionæ¥å£,å› æ­¤åŒ…å«Collectionæ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•.æ­¤å¤–,Listæ¥å£è¿˜å®šä¹‰äº†ä»¥ä¸‹ä¸¤ä¸ªé‡è¦çš„æ–¹æ³•:
> - ***get(int index)***: è·å–æŒ‡å®šç´¢å¼•ä½ç½®çš„å…ƒç´ 
> - ***set(int index, Object obj)***: å°†é›†åˆä¸­æŒ‡å®šç´¢å¼•ä½ç½®çš„å¯¹è±¡ä¿®æ”¹ä¸ºæŒ‡å®šå¯¹è±¡


 Listæ¥å£å¯ä»¥å®ä¾‹åŒ–ä¸º*ArrayList*å’Œ*LinkedList*

#### **ArrayListç±»**
> [!note] è¯´æ˜
> ArrayListç±»å®ç°äº†å¯å˜çš„æ•°ç»„,è¿è¡Œä¿å­˜æ‰€æœ‰å…ƒç´ (åŒ…æ‹¬null),å¹¶å¯ä»¥æ ¹æ®ç´¢å¼•ä½ç½®å¯¹é›†åˆè¿›è¡Œå¿«é€Ÿçš„éšæœºè®¿é—®.ç¼ºç‚¹æ˜¯æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ•ˆç‡è¾ƒä½


é€šè¿‡ArrayListå¯ä»¥å®ä¾‹åŒ–Listæ¥å£
```Java
List<E> list = new ArrayList<>();
```

ArrayListçš„å¸¸ç”¨æ–¹æ³•å®ç°:
```Java
public static void main(String[] args) {  
    //åˆ›å»ºé›†åˆ  
    ArrayList<String> list = new ArrayList<>();  
    //1.æ·»åŠ å…ƒç´   
    boolean result = list.add("aaa");  
    boolean result1 = list.add("bbb");  
    boolean result11 = list.add("ccc");  
    System.out.println(result1);  
    //2.åˆ é™¤  
    boolean result2 = list.remove("aaa");  
    System.out.println(result2);  
    String  str = list.remove(0);  
    //3.ä¿®æ”¹  
    String str1 = list.set(0,"ddd");  
    //4.æŸ¥è¯¢  
    String found = list.get(0);  
    //5.è·å–é•¿åº¦  
    int len = list.size();  
    System.out.println(list);  
    System.out.println(len);  
    System.out.println();  
    //6.éå†  
    for (int i = 0; i < list.size(); i++) {  
        String str11 = list.get(i);  
        System.out.println(str11);  
    }  
    //7.åˆ¤æ–­æ˜¯å¦ä¸ºç©º-->ç©ºè¿”å›true,éç©ºè¿”å›false  
    boolean isempty = list.isEmpty();  
    System.out.println(isempty);  
    //8.è¿”å›åŒ…å«æ‰€æœ‰å…ƒç´ çš„æ•°ç»„  
    Object []array = list.toArray();  
    for (Object element :array){  
        System.out.println(element);  
    }  
}
```

è¿è¡Œç»“æœ
```text
true
true
[ddd]
1

ddd
false
ddd
```

#### **LinkedListç±»**
> [!note] è¯´æ˜
> LinkedListç±»é‡‡ç”¨**åŒå‘é“¾è¡¨**ç»“æ„å­˜å‚¨å¯¹è±¡.è¿™ç§ç»“æ„çš„ä¼˜ç‚¹æ˜¯ä¾¿äºå‘é›†åˆä¸­æ’å…¥å¯¹è±¡æˆ–ä»é›†åˆä¸­åˆ é™¤å¯¹è±¡. ä½†æ˜¯å¯¹äºéšæœºè®¿é—®é›†åˆä¸­çš„å¯¹è±¡, ä½¿ç”¨LinkedListç±»å®ç°Listé›†åˆæ•ˆç‡è¾ƒä½


åŒæ ·çš„,é€šè¿‡LinkedListä¹Ÿå¯ä»¥å®ä¾‹åŒ–Listæ¥å£
```Java
List<E> list = new LinkedList<>();
```

LinkedListçš„ç‰¹æœ‰æ–¹æ³•;

|         æ–¹æ³•         |            æè¿°             |
| :----------------: | :-----------------------: |
| void addFirst(E e) | å°†æŒ‡å®šçš„å…ƒç´ æ·»åŠ åˆ°è¯¥é›†åˆçš„å¼€å¤´(é“¾è¡¨å¤´éƒ¨æ’å…¥ç»“ç‚¹) |
| void addLast(E e)  | å°†æŒ‡å®šçš„å…ƒç´ æ·»åŠ åˆ°è¯¥é›†åˆçš„æœ«å°¾(é“¾è¡¨å°¾éƒ¨æ’å…¥ç»“ç‚¹) |
|    E getFirst()    |        è¿”å›è¯¥é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´         |
|    E getLast()     |       è¿”å›è¯¥é›†åˆçš„æœ€åä¸€ä¸ªå…ƒç´         |
|  E removeFirst()   |        åˆ é™¤è¯¥é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´         |
|   E removeLast()   |        åˆ é™¤è¯¥é›†åˆçš„ç¬¬äºŒä¸ªå…ƒç´         |
|                    |                           |


LinkedListçš„å¸¸ç”¨æ–¹æ³•å®ç°
```Java
public static void main(String[] args) {  
    List<String> products = new ArrayList<>();  
    //åˆ›å»ºé›†åˆå¯¹è±¡  
    String p1 = new String("Cè¯­è¨€ä»å…¥é—¨åˆ°ç²¾é€š");  
    String p2 = new String("Javaä»å…¥é—¨åˆ°ç²¾é€š");  
    String p3 = new String("Pythonä»å…¥é—¨åˆ°ç²¾é€š");  
    String p4 = new String("C++ä»å…¥é—¨åˆ°ç²¾é€š");  
    //å°†æ–°å»ºçš„å¯¹è±¡æ·»åŠ åˆ°é›†åˆ  
    products.add(p1);  
    products.add(p2);  
    products.add(p3);  
    products.add(p4);  
  
    String p5 = new String("Spring Bootä»å…¥é—¨åˆ°ç²¾é€š");  
    //å°†p5æ·»åŠ åˆ°é“¾è¡¨æœ«å°¾  
    products.addLast(p5);  
    //è¾“å‡ºå•†å“ä¿¡æ¯  
    System.out.println("--------å•†å“ä¿¡æ¯--------");  
    System.out.println();  
    System.out.println("å½“å‰å•†å“æœ‰:");  
    for (int i = 0; i < products.size(); i++) {  
        System.out.println(products.get(i)+"\t");  
    }  
    System.out.println();  
    System.out.println("ç¬¬ä¸€ä¸ªå•†å“ä¸º:"+products.getFirst());  
    System.out.println("æœ€åä¸€ä¸ªå•†å“ä¸º:"+products.getLast());  
    System.out.println();  
    //åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´   
    products.removeLast();  
    //æ›´æ–°å•†å“åˆ—è¡¨  
    System.out.println("åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ ,å½“å‰å•†å“æœ‰:");  
    for (int i = 0; i < products.size(); i++) {  
        System.out.println(products.get(i));  
    }  
}
```
è¿è¡Œç»“æœ
```text
--------å•†å“ä¿¡æ¯--------

å½“å‰å•†å“æœ‰:
Cè¯­è¨€ä»å…¥é—¨åˆ°ç²¾é€š	
Javaä»å…¥é—¨åˆ°ç²¾é€š	
Pythonä»å…¥é—¨åˆ°ç²¾é€š	
C++ä»å…¥é—¨åˆ°ç²¾é€š	
Spring Bootä»å…¥é—¨åˆ°ç²¾é€š	

ç¬¬ä¸€ä¸ªå•†å“ä¸º:Cè¯­è¨€ä»å…¥é—¨åˆ°ç²¾é€š
æœ€åä¸€ä¸ªå•†å“ä¸º:Spring Bootä»å…¥é—¨åˆ°ç²¾é€š

åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ ,å½“å‰å•†å“æœ‰:
Cè¯­è¨€ä»å…¥é—¨åˆ°ç²¾é€š
Javaä»å…¥é—¨åˆ°ç²¾é€š
Pythonä»å…¥é—¨åˆ°ç²¾é€š
C++ä»å…¥é—¨åˆ°ç²¾é€š
```


### éå†é›†åˆä¸­çš„å…ƒç´ 
#### ***Iteratoréå†***
> [!note] Iterator
> Iterator,åˆç§°è¿­ä»£å™¨,æ˜¯ä¸€ä¸ª**æ¥å£**,ä¸»è¦ç”¨äºéå†Collectionä¸­çš„å…ƒç´ . åœ¨éå†Collectioné›†åˆä¸­çš„å…ƒç´ æ—¶, éœ€è¦ä½¿ç”¨Iteratoræ¥å£ä¸­ç”¨äºåˆ¤æ–­é›†åˆä¸­å…ƒç´ æ˜¯å¦è¢«éå†å®Œå…¨çš„***hasNext()*** æ–¹æ³•å’Œç”¨äºè¿”å›é›†åˆä¸­ä¸‹ä¸€ä¸ªå…ƒç´ çš„***next()*** æ–¹æ³•.

```Java
public static void main(String[] args) {  
    Collection<String> list = new ArrayList<>();  
    list.add("C#ä»å…¥é—¨åˆ°ç²¾é€š");  
    list.add("Javaä»å…¥é—¨åˆ°ç²¾é€š");  
    list.add("Pythonä»å…¥é—¨åˆ°ç²¾é€š");  
    Iterator< String> it = list.iterator();  
    //è¿­ä»£å™¨è¿­ä»£é›†åˆä¸­çš„å¯¹è±¡  
    while (it.hasNext()){  
        String s = it.next();  
        System.out.println(s);  
    }  
    System.out.println("===================================");  
    //è½¬æ¢ä¸ºæ•°ç»„éå†æ•°ç»„  
    Object []arr = list.toArray();  
    for (int i = 0; i < arr.length; i++) {  
        System.out.println(arr[i]);  
    }  
  
}
```

è¿è¡Œç»“æœ:
```text
C#ä»å…¥é—¨åˆ°ç²¾é€š
Javaä»å…¥é—¨åˆ°ç²¾é€š
Pythonä»å…¥é—¨åˆ°ç²¾é€š
===================================
C#ä»å…¥é—¨åˆ°ç²¾é€š
Javaä»å…¥é—¨åˆ°ç²¾é€š
Pythonä»å…¥é—¨åˆ°ç²¾é€š
```

#### ***foreach()æ–¹æ³•å®ç°***
ä½¿ç”¨foreachæ–¹æ³•éå†è¦æ¯”ä½¿ç”¨è¿­ä»£å™¨æ›´åŠ ä¾¿æ·
```Java
public static void main(String[] args) {  
    Collection <String>ct = new ArrayList<>();  
    ct.add("C#ä»å…¥é—¨åˆ°ç²¾é€š");  
    ct.add("Javaä»å…¥é—¨åˆ°ç²¾é€š");  
    ct.add("Pythonä»å…¥é—¨åˆ°ç²¾é€š");  
    for(String e:ct){  
        System.out.println(e);  
    }  
}
```

è¿è¡Œç»“æœ:
```text
C#ä»å…¥é—¨åˆ°ç²¾é€š
Javaä»å…¥é—¨åˆ°ç²¾é€š
Pythonä»å…¥é—¨åˆ°ç²¾é€š
```

#### ***forEach()æ–¹æ³•éå†é›†åˆä¸­çš„å…ƒç´ ***
> [!note] è¯´æ˜
> forEach()æ–¹æ³•æ˜¯Iterableæ¥å£ä¸­çš„ä¸€ä¸ªé»˜è®¤æ–¹æ³•. ä¸ºäº†éå†Collectioné›†åˆä¸­çš„å…ƒç´ , å³å¯è°ƒç”¨forEachæ–¹æ³•
```Java
public static void main(String[] args) {  
    Collection<String> ct = new ArrayList<>();  
    ct.add("C#ä»å…¥é—¨åˆ°ç²¾é€š");  
    ct.add("Javaä»å…¥é—¨åˆ°ç²¾é€š");  
    ct.add("Pythonä»å…¥é—¨åˆ°ç²¾é€š");  
    ct.forEach(e-> System.out.println(e));  
}
```

è¿è¡Œç»“æœ:
```text
C#ä»å…¥é—¨åˆ°ç²¾é€š
Javaä»å…¥é—¨åˆ°ç²¾é€š
Pythonä»å…¥é—¨åˆ°ç²¾é€š
```

### ä½¿ç”¨Predicateæ“ä½œé›†åˆ
> [!note] ä»‹ç»
> Java8 ä¸ºCollectioné›†åˆæ–°å¢äº†ä¸€ä¸ª**removeIf(Predicate filter)** æ–¹æ³•,è¯¥æ–¹æ³•å°†ä¼šæ‰¹é‡åˆ é™¤ç¬¦åˆfilteræ¡ä»¶çš„æ‰€æœ‰å…ƒç´ .ä¸éš¾å‘ç°,removeIf()æ–¹æ³•éœ€è¦ä¸€ä¸ªPredicateå¯¹è±¡ä½œä¸ºå‚æ•°.å› ä¸ºPredicateæ˜¯ä¸€ä¸ªå‡½æ•°å¼çš„æ¥å£, æ‰€ä»¥å¯ä½¿ç”¨Lambdaè¡¨è¾¾å¼ä½œä¸ºå‚æ•°

Predicateçš„ä½¿ç”¨åœºæ™¯:
- è¿‡æ»¤é›†åˆ
```Java
public static void main(String[] args) {  
    Collection<String> ct = new ArrayList<>();  
    ct.add("C#ä»å…¥é—¨åˆ°ç²¾é€š");  
    ct.add("Javaä»å…¥é—¨åˆ°ç²¾é€š");  
    ct.add("Pythonä»å…¥é—¨åˆ°ç²¾é€š");  
    ct.removeIf(e->(e).length()>8);  
    System.out.println(ct);  
}
```
åœ¨ä»£ç ä¸­,ä½¿ç”¨removeIf()æ–¹æ³•ç§»é™¤äº†å­—ç¬¦ä¸²é•¿åº¦å¤§äº8çš„å…ƒç´ ,å†å°†å‰©ä½™çš„ç»“æœè¾“å‡ºåˆ°æ§åˆ¶å°
è¿è¡Œç»“æœ:
```text
[C#ä»å…¥é—¨åˆ°ç²¾é€š]
```

- ç®€åŒ–é›†åˆè¿ç®—
```Java
public static void main(String[] args) {  
    Collection<String> ct = new ArrayList<>();  
    ct.add("C#ä»å…¥é—¨åˆ°ç²¾é€š");  
    ct.add("Javaä»å…¥é—¨åˆ°ç²¾é€š");  
    ct.add("Pythonä»å…¥é—¨åˆ°ç²¾é€š");  
    //åˆ†åˆ«è¾“å‡ºé›†åˆä¸­åŒ…å«å­—ç¬¦ä¸²"C","Java",ä»¥åŠé•¿åº¦å¤§äº8çš„å…ƒç´ æ•°é‡  
    System.out.println(calNum(ct, e->((String) e).contains("C")));  
    System.out.println(calNum(ct, e->((String) e).contains("Java")));  
    System.out.println(calNum(ct, e->((String) e).length()>8));  
  
}  
  
public static int calNum(Collection ct, Predicate pc){  
    int count = 0;  
    for (Object obj : ct){  
        if (pc.test(obj)){  
            count++;  
        }  
    }  
    return count;  
}
```
å…ˆè¾“å‡ºåŒ…å«å­—ç¬¦ä¸²"C"çš„å…ƒç´ çš„æ•°é‡,å†è¾“å‡ºåŒ…å«"Java"çš„å…ƒç´ æ•°é‡,æœ€åè¾“å‡ºå­—ç¬¦ä¸²é•¿åº¦å¤§äº8çš„å…ƒç´ æ•°é‡
è¿è¡Œç»“æœ
```text
1
1
2
```
ç»“æœçš„æ„ä¹‰æ˜¯: ç¬¦åˆä¸‰ä¸ªæ¡ä»¶çš„å…ƒç´ ä¸ªæ•°åˆ†åˆ«ä¸º1,1,2ä¸ª
### Setæ¥å£
> [!note] æ¦‚è¿°
> Seté›†åˆç”±Setæ¥å£å’ŒSetæ¥å£çš„å®ç°ç±»ç»„æˆ. Setæ¥å£ç»§æ‰¿äº†Collectionæ¥å£,å› æ­¤å®ƒåŒ…å«äº†Collectionæ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•. Setæ¥å£å¸¸ç”¨çš„å®ç°ç±»ç”±***HashSetç±»***å’Œ***TreeSetç±»***

#### **HashSetç±»**
> [!note] è¯´æ˜
> HashSetç±»å®ç°Setæ¥å£,ç”±å“ˆå¸Œè¡¨(å®é™…ä¸Šæ˜¯ä¸€ä¸ªHashMapå®ä¾‹)æ”¯æŒ. å®ƒä¸ä¿è¯Seté›†åˆçš„è¿­ä»£é¡ºåº,ç‰¹åˆ«æ˜¯å®ƒä¸ä¿è¯è¯¥é¡ºåºæ’ä¹…ä¸å˜. æ­¤ç±»å…è®¸ä½¿ç”¨nullå…ƒç´ 


ä½¿ç”¨Setæ¥å£æ—¶é€šå¸¸è¢«å£°æ˜ä¸ºSetç±»å‹,é€šè¿‡HashSetç±»å®ä¾‹åŒ–Setæ¥å£
```Java
Set<E> set = new HashSet<>();
```

```java
public static void main(String[] args) {  
    Set<String> set = new HashSet<>();  
    String str1 = new String("Cè¯­è¨€ä»å…¥é—¨åˆ°ç²¾é€š");  
    String str2 = new String("C++ä»å…¥é—¨åˆ°ç²¾é€š");  
    String str3 = new String("Javaä»å…¥é—¨åˆ°ç²¾é€š");  
    String str4 = new String("Pythonä»å…¥é—¨åˆ°ç²¾é€š");  
    //å°†å®šä¹‰çš„å­—ç¬¦ä¸²å­˜å‚¨åˆ°Seté›†åˆä¸­  
    set.add(str1);  
    set.add(str2);  
    set.add(str3);  
    set.add(str4);  
    System.out.println("ä»å…¥é—¨åˆ°ç²¾é€šç³»åˆ—å›¾ä¹¦æœ‰:");  
    for(String s : set){  
        System.out.println( s);  
    }  
}
```
è¯¥ç±»é€šè¿‡HashSetç±»å®ä¾‹åŒ–Setæ¥å£,å‘é›†åˆä¸­æ·»åŠ ä¹¦å,ä½¿ç”¨foreachéå†Setä¸­çš„å…ƒç´ ,å¹¶è¾“å‡ºåˆ°æ§åˆ¶å°
è¿è¡Œç»“æœ:
```text
ä»å…¥é—¨åˆ°ç²¾é€šç³»åˆ—å›¾ä¹¦æœ‰:
Javaä»å…¥é—¨åˆ°ç²¾é€š
C++ä»å…¥é—¨åˆ°ç²¾é€š
Pythonä»å…¥é—¨åˆ°ç²¾é€š
Cè¯­è¨€ä»å…¥é—¨åˆ°ç²¾é€š
```


#### **TreeSetç±»**
é€šè¿‡TreeSetç±»ä¹Ÿå¯ä»¥å®ä¾‹åŒ–Setæ¥å£
```java
Set <E> set = new TreeSet<>();
```

TreeSetç±»ä¸ä»…å®ç°äº†Setæ¥å£,è¿˜å®ç°äº†java.util.SortedSetæ¥å£,å› æ­¤åœ¨éå†é›†åˆæ—¶,TreeSetç±»å®ç°çš„Seté›†åˆ==**å¯ä»¥æŒ‰ç…§è‡ªç„¶é¡ºåºè¿›è¡Œé€’å¢æ’åº**==,å³å¯ä»¥é€šè¿‡æ¯”è¾ƒå™¨å¯¹ç”¨TreeSetç±»å®ç°çš„Seté›†åˆä¸­çš„å¯¹è±¡è¿›è¡Œæ’åº.

TreeSetç±»æ–°å¢çš„æ–¹æ³•å¦‚ä¸‹:

|                 æ–¹æ³•                 |                            æè¿°                            |
| :--------------------------------: | :------------------------------------------------------: |
|              first()               |                     è¿”å›Seté›†åˆä¸­å½“å‰ç¬¬ä¸€ä¸ªå…ƒç´                       |
|               last()               |                     è¿”å›Seté›†åˆä¸­å½“å‰æœ€åä¸€ä¸ªå…ƒç´                      |
|            comparator()            |           è¿”å›Seté›†åˆä¸­çš„å…ƒç´ è¿›è¡Œæ’åºçš„æ¯”è¾ƒå™¨. å¦‚æœä½¿ç”¨è‡ªç„¶é¡ºåºåˆ™è¿”å›null           |
|        headSet(E toElement)        |        è¿”å›ä¸€ä¸ªæ–°çš„Seté›†åˆ,è¿™ä¸ªæ–°é›†åˆåŒ…å«toElementå¯¹è±¡(ä¸åŒ…å«)ä¹‹å‰çš„æ‰€æœ‰å¯¹è±¡        |
| subSet(E fromElement, E toElement) | è¿”å›ä¸€ä¸ªæ–°çš„Seté›†åˆ,è¿™ä¸ªæ–°é›†åˆåŒ…å«fromElement(åŒ…å«)ä¸toElement(ä¸åŒ…å«)ä¹‹é—´çš„æ‰€æœ‰å¯¹è±¡ |
|       tailSet(E fromElement)       |       è¿”å›ä¸€ä¸ªæ–°çš„Seté›†åˆ,è¿™ä¸ªæ–°é›†åˆåŒ…å«fromElementå¯¹è±¡(åŒ…å«)ä¹‹åçš„æ‰€æœ‰å¯¹è±¡        |

```java
public static void main(String[] args) {  
    Set<Integer> set = new TreeSet<>();  
    set.add(-5);  
    set.add(5);  
    set.add(0);  
    set.add(-10);  
    set.add(10);  
  
    Iterator<Integer> it = set.iterator();  
    while(it.hasNext()){  
        System.out.println(it.next());  
    }  
  
}
```
ä½¿ç”¨add(val)æ–¹æ³•å‘é›†åˆä¸­ä¾æ¬¡æ·»åŠ æ•´æ•°å…ƒç´ ,æœ€åä½¿ç”¨è¿­ä»£å™¨è¾“å‡ºSeté›†åˆä¸­çš„å…ƒç´ (è‡ªç„¶é¡ºåº-->æŒ‰ä»å°åˆ°å¤§æ’åˆ—)
è¿è¡Œç»“æœ:
```text
-10
-5
0
5
10
```

å°æŠ€å·§:
ä½¿ç”¨headSet(), subSet(), tailSet()æ–¹æ³•æˆªå–å¯¹è±¡ç”Ÿæˆæ–°çš„é›†åˆæ—¶,æ˜¯å¦åŒ…å«æŒ‡å®šçš„å‚æ•°,å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹æ³•æ¥åˆ¤æ–­
- å¦‚æœæŒ‡å®šå‚æ•°ä½äºæ–°é›†åˆçš„èµ·å§‹ä½ç½®,åˆ™åŒ…å«è¯¥å¯¹è±¡,å¦‚subSet()çš„ç¬¬ä¸€ä¸ªå‚æ•°å’ŒtailSet()çš„æœ€åä¸€ä¸ªå‚æ•°
- å¦‚æœæŒ‡å®šå‚æ•°ä½äºæ–°é›†åˆçš„ç»ˆæ­¢ä½ç½®,åˆ™ä¸åŒ…å«è¯¥å‚æ•°,å¦‚headSet()æ–¹æ³•çš„å…¥å£å‚æ•°å’ŒsubSet()æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°
### Mapæ¥å£
>[!note] ç®€ä»‹
>Mapæ¥å£å¹¶æœªç»§æ‰¿Collectionæ¥å£,å…¶æä¾›çš„æ˜¯**keyåˆ°valueçš„æ˜ å°„**(é”®å€¼å¯¹). é€šè¿‡Mapæ¥å£çš„å®ç°ç±»å®ç°Mapæ¥å£,å³å¯åˆ›å»ºMapé›†åˆ. åœ¨Mapé›†åˆä¸­**ä¸èƒ½åŒ…å«ç›¸åŒçš„key**, æ¯ä¸ªkeyåªèƒ½æ˜ å°„ä¸€ä¸ªvalue. keyè¿˜å†³å®šäº†å­˜å‚¨å¯¹è±¡åœ¨æ˜ å°„ä¸­çš„å­˜å‚¨ä½ç½®,ä½†ä¸æ˜¯ç”±keyå¯¹è±¡æœ¬èº«å†³å®šçš„,è€Œæ˜¯é€šè¿‡ä¸€ç§**æ•£åˆ—æŠ€æœ¯**è¿›è¡Œå¤„ç†çš„,äº§ç”Ÿä¸€ä¸ªæ•£åˆ—ç çš„æ•´æ•°å€¼(å…¶å®å°±æ˜¯å“ˆå¸Œç®—æ³•(å‚è€ƒ[[å“ˆå¸Œè¡¨]])). æ•£åˆ—ç é€šå¸¸è¢«ç”¨ä½œä¸€ä¸ªåç§»é‡, è¯¥åç§»é‡å¯¹åº”åˆ†é…ç»™æ˜ å°„çš„å†…å­˜åŒºåŸŸçš„èµ·å§‹ä½ç½®,ä»è€Œç¡®å®šå­˜å‚¨å¯¹è±¡åœ¨æ˜ å°„ä¸­çš„ä½ç½®.


é™¤äº†é›†åˆçš„å¸¸ç”¨æ–¹æ³•å¤–,Mapæ¥å£è¿˜æä¾›äº†å¦‚ä¸‹çš„æ–¹æ³•

|             æ–¹æ³•              |               æè¿°               |
| :-------------------------: | :----------------------------: |
|     `put(K key, V val)`     |     å‘é›†åˆä¸­æ·»åŠ æŒ‡å®šçš„keyä¸valçš„æ˜ å°„å…³ç³»      |
|  `containsKey(Object key)`  |   å¦‚æœæ­¤æ˜ å°„åŒ…å«æŒ‡å®šçš„keyçš„æ˜ å°„å…³ç³»,è¿”å›true    |
| `containsValue(Object val)` | å¦‚æœæ­¤æ˜ å°„å°†ä¸€ä¸ªæˆ–å¤šä¸ªkeyæ˜ å°„åˆ°æŒ‡å®šå€¼ä¸Š, åˆ™è¿”å›true |
|      `get(Object key)`      | å¦‚æœå­˜åœ¨æŒ‡å®šçš„keyå¯¹è±¡,åˆ™è¿”å›è¯¥å¯¹è±¡çš„å€¼,åä¹‹è¿”å›null |
|         `keySet()`          |     è¿”å›è¯¥é›†åˆä¸­æ‰€æœ‰keyå¯¹è±¡å½¢æˆçš„Seté›†åˆ      |
|         `values()`          |   è¿”å›è¯¥é›†åˆä¸­æ‰€æœ‰å€¼å¯¹è±¡å½¢æˆçš„Collectioné›†åˆ   |


#### **HashMapç±»**
> [!note] è¯´æ˜
> å»ºè®®ä½¿ç”¨HashMapç±»æ¥å®ç°Mapé›†åˆ, å› ä¸ºç”±HashMapç±»å®ç°çš„Mapé›†åˆ*æ·»åŠ å’Œåˆ é™¤æ˜ å°„å…³ç³»æ•ˆç‡æ›´é«˜*. å¯ä»¥é€šè¿‡HashMapç±»åˆ›å»ºMapé›†åˆ, å½“éœ€è¦é¡ºåºè¾“å‡ºæ—¶,å†åˆ›å»ºä¸€ä¸ªå®Œæˆç›¸åŒæ˜ å°„å…³ç³»çš„TreeMapæ¥å®ç°


```Java
public static void main(String[] args) {  
    Map<String, String> map = new HashMap<>();  
    map.put("ID-001","Javaä»å…¥é—¨åˆ°ç²¾é€š");  
    map.put("ID-002","Cè¯­è¨€ä»å…¥é—¨åˆ°ç²¾é€š");  
    map.put("ID-003","Pythonä»å…¥é—¨åˆ°ç²¾é€š");  
    map.put("ID-004","C++ä»å…¥é—¨åˆ°ç²¾é€š");  
    map.put("ID-005","C#ä»å…¥é—¨åˆ°ç²¾é€š");  
  
    Set<String> set = map.keySet();     //æ„å»ºMapé›†åˆä¸­æ‰€æœ‰keyçš„Seté›†åˆ  
    Iterator<String> iterator = set.iterator();  
    System.out.println("æ‰€æœ‰keyæœ‰:");  
    while(iterator.hasNext()){  
        System.out.println(iterator.next());  
    }  
  
    Collection <String> coll = map.values();  
    iterator = coll.iterator();  
    System.out.println("æ‰€æœ‰çš„val:");  
    while (iterator.hasNext()){  
        System.out.println(iterator.next());  
    }  
}
```
å…ˆåˆ›å»ºMapé›†åˆ,å†å‘é›†åˆä¸­æ·»åŠ é”®å€¼å¯¹.æ¥ç€è·å–Mapé›†åˆä¸­çš„keyå’Œvalå¹¶è¾“å‡º
è¿è¡Œç»“æœ
```text
æ‰€æœ‰keyæœ‰:
ID-003
ID-002
ID-005
ID-004
ID-001
æ‰€æœ‰çš„val:
Pythonä»å…¥é—¨åˆ°ç²¾é€š
Cè¯­è¨€ä»å…¥é—¨åˆ°ç²¾é€š
C#ä»å…¥é—¨åˆ°ç²¾é€š
C++ä»å…¥é—¨åˆ°ç²¾é€š
Javaä»å…¥é—¨åˆ°ç²¾é€š
```

#### **éå†Mapé›†åˆ**
> [!note] è¯´æ˜
> Mapé›†åˆçš„éå†ä¸Listå’ŒSetä¸åŒ.ç”±äºMapé›†åˆæœ‰é”®å€¼å¯¹<key,val>çš„å­˜åœ¨,æ‰€ä»¥åœ¨éå†Mapé›†åˆæ—¶,å¯ä»¥åªéå†key,ä¹Ÿå¯ä»¥åªéå†val,è¿˜å¯ä»¥åŒæ—¶éå†.
##### éå†key**æˆ–**val
```Java
public static void main(String[] args) {  
    Map<String , String> map = new HashMap<>();  
    map.put("Mon","æ˜ŸæœŸä¸€");  
    map.put("Tue","æ˜ŸæœŸäºŒ");  
    map.put("Wed","æ˜ŸæœŸä¸‰");  
    map.put("Thu","æ˜ŸæœŸå››");  
    map.put("Fri","æ˜ŸæœŸäº”");  
    map.put("Sat","æ˜ŸæœŸå…­");  
    map.put("Sun","æ˜ŸæœŸæ—¥");  
  
    //è¾“å‡ºkey  
    for(String key : map.keySet()){  
        System.out.print(key+"\t\t");  
    }  
    System.out.println();  
    //è¾“å‡ºvalue  
    for(String val : map.values()){  
        System.out.print(val+"\t");  
    }  
}
```

è¿è¡Œç»“æœ:
```text
Thu		Tue		Wed		Sat		Fri		Mon		Sun		
æ˜ŸæœŸå››	æ˜ŸæœŸäºŒ	æ˜ŸæœŸä¸‰	æ˜ŸæœŸå…­	æ˜ŸæœŸäº”	æ˜ŸæœŸä¸€	æ˜ŸæœŸæ—¥	
```

##### éå†key**å’Œ**val
> [!note] å®ç°æ–¹æ³•
> åœ¨forå¾ªç¯ä¸­ä½¿ç”¨*entries*èƒ½å¤ŸåŒæ—¶éå†Mapé›†åˆä¸­çš„keyå’Œval.è¿™ç§æ–¹å¼å¸¸è§ä¹Ÿå¸¸ç”¨.

```Java
public static void main(String[] args) {  
    Map<String , String> map = new HashMap<>();  
    map.put("Mon","æ˜ŸæœŸä¸€");  
    map.put("Tue","æ˜ŸæœŸäºŒ");  
    map.put("Wed","æ˜ŸæœŸä¸‰");  
    map.put("Thu","æ˜ŸæœŸå››");  
    map.put("Fri","æ˜ŸæœŸäº”");  
    map.put("Sat","æ˜ŸæœŸå…­");  
    map.put("Sun","æ˜ŸæœŸæ—¥");  
    //ä½¿ç”¨entrieséå†é›†åˆ  
    for(Map.Entry<String , String> entry : map.entrySet()){  
        System.out.println(entry.getKey()+"\t"+entry.getValue());  
    }  
}
```

è¿è¡Œç»“æœ:
```text
Thu	æ˜ŸæœŸå››
Tue	æ˜ŸæœŸäºŒ
Wed	æ˜ŸæœŸä¸‰
Sat	æ˜ŸæœŸå…­
Fri	æ˜ŸæœŸäº”
Mon	æ˜ŸæœŸä¸€
Sun	æ˜ŸæœŸæ—¥
```
#### **TreeMapç±»**
> [!note] è¯´æ˜
> TreeMapä¸ä»…å®ç°äº†Mapæ¥å£,è¿˜å®ç°äº†`java.util.SortedMap`æ¥å£,å› æ­¤é›†åˆä¸­çš„æ˜ å°„å…³ç³»å…·æœ‰ä¸€å®šçš„é¡ºåº.ä½†åœ¨æ·»åŠ åˆ é™¤å’Œå®šä½æ˜ å°„å…³ç³»æ—¶, TreeMapç±»æ¯”HashMapç±»çš„æ€§èƒ½ç¨å·®. ç”±äºTreeMapç±»å®ç°çš„Mapé›†åˆä¸­çš„æ˜ å°„å…³ç³»æ˜¯æ ¹æ®keyå¯¹è±¡æŒ‰ç…§ä¸€å®šé¡ºåºæ’åˆ—çš„,å› æ­¤**ä¸å…è®¸å¯¹è±¡æ˜¯null**


```Java
public static void main(String[] args) {  
    Map<String,String> map = new TreeMap<>();  
    map.put("Mon","æ˜ŸæœŸä¸€");  
    map.put("Tue","æ˜ŸæœŸäºŒ");  
    map.put("Wed","æ˜ŸæœŸä¸‰");  
    map.put("Thu","æ˜ŸæœŸå››");  
    map.put("Fri","æ˜ŸæœŸäº”");  
    map.put("Sat","æ˜ŸæœŸå…­");  
    map.put("Sun","æ˜ŸæœŸæ—¥");  
  
    Set< String> set = map.keySet();  
    Iterator<String> it = set.iterator();  
    System.out.print("key:");  
    while(it.hasNext()){  
        System.out.print(it.next()+"\t\t");  
    }  
    System.out.println();  
    System.out.print("val:");  
    Collection<String> coll = map.values();  
    it = coll.iterator();  
    while(it.hasNext()){  
        System.out.print(it.next()+"\t");  
    }  
}
```

è¿è¡Œç»“æœ
```text
key:Fri		Mon		Sat		Sun		Thu		Tue		Wed		
val:æ˜ŸæœŸäº”	æ˜ŸæœŸä¸€	æ˜ŸæœŸå…­	æ˜ŸæœŸæ—¥	æ˜ŸæœŸå››	æ˜ŸæœŸäºŒ	æ˜ŸæœŸä¸‰	
```


#### **Propertiesç±»**
> [!note] è¯´æ˜
> Propertiesç±»æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„é›†åˆ. å®ƒè¡¨ç¤ºä¸€ä¸ª*æŒä¹…çš„å±æ€§é›†*, åœ¨å±æ€§åˆ—è¡¨ä¸­çš„æ¯ä¸ªkeyåŠå…¶å¯¹åº”çš„valéƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸². Propertiesç±»ä¸»è¦ç”¨äºè¯»å–Javaæ–‡ä»¶, å…¶é…ç½®æ–‡ä»¶ä¸ºPropertiesæ–‡ä»¶,å±äºæ–‡æœ¬æ–‡ä»¶,æ˜¯ä»¥é”®å€¼å¯¹çš„å½¢å¼è¿›è¡Œé…å¯¹çš„.

Propertiesç±»çš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹:

|                         æ–¹æ³•                         |            æè¿°            |
| :------------------------------------------------: | :----------------------: |
|           String getProperty(String key)           |     ç”¨æŒ‡å®šçš„é”®åœ¨æ­¤å±æ€§åˆ—è¡¨ä¸­æœç´¢å±æ€§     |
| void load(InputStream inStream) throws IOException | å°†æ–‡ä»¶ä¸­çš„é”®å€¼å¯¹åŠ è½½åˆ°propertiesé›†åˆä¸­ |
|     Object setProperty(String key, String val)     |   è°ƒç”¨HashTableçš„æ–¹æ³•put()    |
|     void store(Writer writer, String comments)     | å°†é›†åˆä¸­çš„æ•°æ®å­˜å‚¨åˆ°.propertiesæ–‡ä»¶ä¸­ |
```java
public static void main(String[] args) {  
    //åˆ›å»ºPropertiesé›†åˆ  
    Properties p1 = new Properties();  
    p1.put("Name","Peter");  
    p1.put("Age","18");  
    p1.put("Sex","Male");  
    //æ˜ç¡®pro.propertyæ–‡ä»¶çš„è·¯å¾„  
    try (FileOutputStream fos = new FileOutputStream("pro.property") ){  
        //å°†Propertiesé›†åˆä¸­çš„æ•°æ®ï¼Œä¿å­˜åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­  
        p1.store(fos,"this is a person");  
    }  
    catch (Exception e){  
        e.printStackTrace();  
    }  
    finally {  
        System.out.println("ä¿å­˜å®Œæ¯•");  
    }  
}
```
å°†Propertiesé›†åˆä¸­çš„å†…å®¹å­˜åˆ°äº†å½“å‰é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹çš„pro.propertyæ–‡ä»¶ä¸­(ä¸èƒ½æœ‰ä¸­æ–‡!)

è¿è¡Œç»“æœ:
```text
ä¿å­˜å®Œæ¯•
```

pro.propertyæ–‡ä»¶ä¸­çš„å†…å®¹:
```text
#this is a person  
#Wed Jul 02 19:08:28 CST 2025  
Age=18  
Name=Peter  
Sex=Male
```

### Collectionsç±»
> [!note] è¯´æ˜
> Java.util.Collectionsæ˜¯ä¸€ä¸ªå·¥å…·ç±»,ç”¨äºæ“ä½œMap,Set,Listç­‰é›†åˆ. å®ƒæä¾›äº†ä¸€ç³»åˆ—ç”¨äºæ“ä½œé›†åˆå…ƒç´ çš„é™æ€æ–¹æ³•. éœ€è¦æ³¨æ„çš„æ˜¯,Collectionç±»ä¸èƒ½é€šè¿‡newè¿›è¡Œåˆ›å»ºå¯¹è±¡,è¿™æ˜¯å› ä¸ºCollectionsç±»ä¸­çš„æ„é€ æ–¹æ³•è¢«ç§æœ‰åŒ–äº†.å› æ­¤,ç›´æ¥é€šè¿‡ç±»åå³å¯è°ƒç”¨Collectionsç±»çš„é™æ€æ–¹æ³•.


Collectionså’ŒCollectionè™½ç„¶åªç›¸å·®ä¸€ä¸ªå­—æ¯,å´æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ¦‚å¿µ. 
- Collectionsæ˜¯ä¸€ä¸ªå…·æœ‰å±æ€§å’Œé™æ€æ–¹æ³•çš„*å·¥å…·ç±»*
- Collectionæ˜¯ä¸€ä¸ªå«æœ‰Listå’ŒSetæ¥å£åŠå…¶ç›¸å¯¹åº”çš„å®ç°ç±»çš„*æ¥å£*

Collectionsç±»çš„å¸¸ç”¨æ–¹æ³•åŠå…¶è¯´æ˜å¦‚ä¸‹:

|                                 æ–¹æ³•                                 |                æè¿°                |
| :----------------------------------------------------------------: | :------------------------------: |
|                    `static void shuffle(List)`                     |               æ‰“ä¹±æ’åº               |
|     `static <T> boolean addAll(Collection<T> c, T...elements)`     |              æ·»åŠ ä¸€äº›å…ƒç´               |
|     `static <T> void sort(List<T> list, Comparator<?superT>)`      |        æ’åº,å°†é›†åˆä¸­çš„å…ƒç´ æŒ‰ç…§æŒ‡å®šè§„åˆ™æ’åº        |
| `static <T extends Comparable<? super T>> void sort(List<T> list)` |        æ’åº,å°†é›†åˆä¸­çš„å…ƒç´ æŒ‰ç…§é»˜è®¤è§„åˆ™æ’åº        |
|          `static int binarySearch(List list, Object key)`          | ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾è·å¾—æŒ‡å®šå¯¹è±¡åœ¨Listä¸­çš„ç´¢å¼•ä½ç½®(å¿…é¡»ä¿è¯æœ‰æœ‰åº) |
|   `static void copy(List<? super T>dest,List<? extends T> src)`    |    å¤åˆ¶,ç”¨äºå°†æŒ‡å®šé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ å¤åˆ¶åˆ°å¦ä¸€ä¸ªé›†åˆä¸­     |
|                     `static void replaceAll()`                     |        æ›¿æ¢,æ›¿æ¢é›†åˆä¸­æ‰€æœ‰æ—§å…ƒç´ ä¸ºæ–°å…ƒç´          |

ç¤ºä¾‹: æ‰“ä¹±Listé›†åˆä¸­çš„å…ƒç´ 
```Java
public static void main(String[] args) {  
    //åˆ›å»ºä¸€ä¸ªListé›†åˆ  
    List<Integer> list = new LinkedList<>();  
    //å‘é›†åˆä¸­æ·»åŠ å…ƒç´   
    list.add(1);  
    list.add(13);  
    list.add(5);  
    list.add(54);  
    list.add(76);  
    //ä½¿ç”¨foreachéå†é›†åˆ  
    for (Integer i : list){  
        System.out.print(i+"\t");  
    }  
  
    System.out.println();  
    Collections.shuffle(list);  
    System.out.println("æ‰“ä¹±é›†åˆå:");  
    for (Integer i : list){  
        System.out.print(i+"\t");  
    }  
}
```

è¿è¡Œç»“æœ
```text
1	13	5	54	76	
æ‰“ä¹±é›†åˆå:
5	13	1	54	76	
```

---

## 3.5.æšä¸¾å’Œæ³›å‹
### æšä¸¾
ä½¿ç”¨æšä¸¾ç±»å‹, å¯ä»¥å–ä»£å‰é¢å­¦ä¹ è¿‡çš„å®šä¹‰å¸¸é‡çš„æ–¹å¼, åŒæ—¶æšä¸¾ç±»å‹è¿˜èµ‹äºˆç¨‹åºåœ¨ç¼–è¯‘æ—¶è¿›è¡Œæ£€æŸ¥çš„åŠŸèƒ½.

å®šä¹‰å¸¸é‡çš„ä»£ç å¦‚ä¸‹:
```Java
public interface Constants{
	public static final int Constant_A = 1;
	public static final int Constant_B = 2;
}
```
ä½¿ç”¨æšä¸¾ä¹‹å:
```Java
public enum Constants{
	Constant_A;
	Constant_B;
}
```

æšä¸¾ç±»å‹ç›¸è¾ƒäºä¼ ç»Ÿå®šä¹‰å¸¸é‡çš„æ–¹å¼, é™¤äº†å…·æœ‰å‚æ•°ç±»å‹æ£€æµ‹çš„ä¼˜åŠ¿ä»¥å¤–,è¿˜æœ‰å…¶ä»–æ–¹é¢çš„ä¼˜åŠ¿.
- ç”¨æˆ·å¯ä»¥å°†æšä¸¾çœ‹ä½œä¸€ä¸ªç±»,,å®ƒç»§æ‰¿è‡ªjava.lang.Enumç±», å½“å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹æ—¶, æ¯ä¸€ä¸ªæšä¸¾ç±»å‹çš„æˆå‘˜éƒ½å¯ä»¥è¢«çœ‹åšæ˜¯æšä¸¾ç±»å‹çš„ä¸€ä¸ªå®ä¾‹,è¿™äº›æšä¸¾ç±»å‹çš„æˆå‘˜éƒ½é»˜è®¤è¢«final, public, staticä¿®é¥°, å› æ­¤å½“ä½¿ç”¨æšä¸¾ç±»å‹æˆå‘˜æ—¶ç›´æ¥ä½¿ç”¨æšä¸¾ç±»å‹åç§°è°ƒç”¨æšä¸¾ç±»å‹æˆå‘˜å³å¯

æšä¸¾ç±»å‹çš„å¸¸ç”¨æ–¹æ³•:

|     æ–¹æ³•      |          æè¿°          |       ä½¿ç”¨æ–¹æ³•       |                ä¸¾ä¾‹                |
| :---------: | :------------------: | :--------------: | :------------------------------: |
|  values()   | è¯¥æ–¹æ³•å¯ä»¥å°†æšä¸¾ç±»å‹æˆå‘˜ä»¥æ•°ç»„çš„æ–¹å¼è¿”å› |  enum.values()   |        Constants1.values         |
|  valueOf()  | è¯¥æ–¹æ³•å¯ä»¥å®ç°å°†æ™®é€šå­—ç¬¦ä¸²è½¬æ¢ä¸ºæšä¸¾å®ä¾‹ |  enum.valueOf()  |    Constants1.valueOf("abc")     |
| compareTo() | è¯¥æ–¹æ³•ç”¨äºæ¯”è¾ƒä¸¤ä¸ªæšä¸¾å¯¹è±¡åœ¨å®šä¹‰æ—¶çš„é¡ºåº | enum.compareTo() | Constants1.compareTo(Constants2) |
|  ordinal()  |   è¯¥æ–¹æ³•ç”¨äºå¾—åˆ°æšä¸¾æˆå‘˜çš„ä½ç½®ç´¢å¼•   |  enum.ordinal()  |       Constants1.ordinal()       |
```java
public enum SeasonEnum {  
    SPRING, SUMMER, AUTUMN, WINTER;  
}
```

```java
public static void main(String[] args) {  
    //valuesæ–¹æ³•  
    SeasonEnum [] es = SeasonEnum.values();  
    for (int i =0; i < es.length; i++){  
        System.out.println("æšä¸¾å¸¸é‡:"+es[i]);  
    }  
    System.out.println("=========================");  
    //valueOfæ–¹æ³•å’ŒcompareToæ–¹æ³•  
    SeasonEnum tmp = SeasonEnum.valueOf("SUMMER");  
    for (int i = 0; i < es.length; i++) {  
        String message = "";  
        int result = es[i].compareTo(tmp);  
        if(result<0){  
            message = tmp+"åœ¨"+es[i]+"ä¹‹å‰"+(-result)+"ä¸ªä½ç½®";  
        }  
        else if(result>0){  
            message = tmp+"åœ¨"+es[i]+"ä¹‹å"+result+"ä¸ªä½ç½®";  
        }  
        else{  
            message = tmp+"å’Œ"+es[i]+"ç›¸ç­‰";  
        }  
        System.out.println(message);  
    }  
    System.out.println("=========================");  
    //ordinalæ–¹æ³•  
    for (int i = 0; i < es.length; i++) {  
        System.out.println(es[i]+"çš„ç´¢å¼•ä¸º:"+es[i].ordinal());  
    }  
}
```

è¿è¡Œç»“æœ:
```text
æšä¸¾å¸¸é‡:SPRING
æšä¸¾å¸¸é‡:SUMMER
æšä¸¾å¸¸é‡:AUTUMN
æšä¸¾å¸¸é‡:WINTER
=========================
SUMMERåœ¨SPRINGä¹‹å‰1ä¸ªä½ç½®
SUMMERå’ŒSUMMERç›¸ç­‰
SUMMERåœ¨AUTUMNä¹‹å1ä¸ªä½ç½®
SUMMERåœ¨WINTERä¹‹å2ä¸ªä½ç½®
=========================
SPRINGçš„ç´¢å¼•ä¸º:0
SUMMERçš„ç´¢å¼•ä¸º:1
AUTUMNçš„ç´¢å¼•ä¸º:2
WINTERçš„ç´¢å¼•ä¸º:3
```

æ€»ç»“: æšä¸¾ç±»å‹çš„ä¼˜åŠ¿æœ‰
- ç±»å‹å®‰å…¨
- ç´§å‡‘æœ‰æ•ˆçš„æ•°æ®å®šä¹‰
- å¯ä»¥å’Œç¨‹åºçš„å…¶ä»–éƒ¨åˆ†å®Œç¾äº¤äº’
- è¿è¡Œæ•ˆç‡é«˜


### æ³›å‹
> [!note] å®šä¹‰
> æ³›å‹å®è´¨ä¸Šå°±æ˜¯ä½¿ç¨‹åºå‘˜å®šä¹‰å®‰å…¨çš„ç±»å‹. åœ¨æ²¡æœ‰å‡ºç°æ³›å‹ä¹‹å‰, Javaä¹Ÿæä¾›äº†å¯¹Objectç±»çš„å¼•ç”¨"ä»»æ„åŒ–"æ“ä½œ, è¿™ç§"ä»»æ„åŒ–"æ“ä½œå°±æ˜¯å¯¹Objectç±»å‹çš„å¼•ç”¨è¿›è¡Œå‘ä¸‹å’Œå‘ä¸Šè½¬å‹çš„æ“ä½œ, ä½†æ˜¯æŸäº›å¼ºåˆ¶ç±»å‹è½¬æ¢çš„é”™è¯¯ä¹Ÿè®¸ä¸ä¼šè¢«ç¼–è¯‘å™¨æ•æ‰, è€Œåœ¨è¿è¡Œåå‡ºç°å¼‚å¸¸,å¯è§å¼ºè½¬å­˜åœ¨å®‰å…¨éšæ‚£,å› æ­¤æä¾›äº†æ³›å‹æœºåˆ¶

#### å›é¡¾å‘ä¸Šè½¬å‹å’Œå‘ä¸‹è½¬å‹
##### å‘ä¸Šè½¬å‹
å­ç±»->çˆ¶ç±»çš„è‡ªåŠ¨è½¬æ¢
```Java
Object obj = "Hello"; // Stringè‡ªåŠ¨è½¬ä¸ºObject
```
##### å‘ä¸‹è½¬å‹
çˆ¶ç±»->å­ç±»çš„å¼ºåˆ¶è½¬æ¢(å­˜åœ¨é£é™©)
```Java
Object obj = new Integer(5);
String str = (String) obj; // è¿è¡Œæ—¶å‡ºç°ClassCastException
```

#### æ³›å‹çš„å¸¸ç”¨æ–¹æ³•
- å®šä¹‰æ³›å‹ç±»
> [!attention] æ³›å‹çš„å°–æ‹¬å·ä¸­çš„å†…å®¹æŒ‡çš„æ˜¯**ç±»æˆ–æ¥å£**ï¼Œè€Œä¸æ˜¯å¯¹è±¡
```Java
ç±»å <T>
```
- æ³›å‹çš„å®šä¹‰å¯ä»¥å®šä¹‰å¤šä¸ªç±»å‹(å…¶ä¸­,T1å’ŒT2å‡ä¸ºå¯èƒ½è¢«å®šä¹‰çš„ç±»å‹)
```Java
class MyClass<T1,T2>{}
```

- å®šä¹‰æ³›å‹ç±»æ—¶å£°æ˜æ•°ç»„ç±»å‹
```Java
public class GenericsDemo1<T> {  
    private T[] arr;  
    public T[] getArr() {  
        return arr;  
    }  
    public void setArr(T[] arr) {  
        this.arr = arr;  
    }  
  
    public static void main(String[] args) {  
        GenericsDemo1<String> demo = new GenericsDemo1<String>();  
        String []val = {"Cè¯­è¨€ä»å…¥é—¨åˆ°ç²¾é€š","C++ä»å…¥é—¨åˆ°ç²¾é€š","Javaä»å…¥é—¨åˆ°ç²¾é€š","Pythonä»å…¥é—¨åˆ°ç²¾é€š"};  
        demo.setArr(val);  
        String []arr = demo.getArr();  
        for (int i = 0; i < arr.length; i++) {  
            System.out.println(arr[i]);  
        }  
    }  
}
```

è¿è¡Œç»“æœ
```text
Cè¯­è¨€ä»å…¥é—¨åˆ°ç²¾é€š
C++ä»å…¥é—¨åˆ°ç²¾é€š
Javaä»å…¥é—¨åˆ°ç²¾é€š
Pythonä»å…¥é—¨åˆ°ç²¾é€š
```

> [!attention] å¯ä»¥åœ¨ä½¿ç”¨æ³›å‹æœºåˆ¶çš„åŒæ—¶å£°æ˜ä¸€ä¸ªæ•°ç»„, ä½†æ˜¯ä¸èƒ½ä½¿ç”¨æ³›å‹æ¥å»ºç«‹æ•°ç»„çš„å®ä¾‹
> é”™è¯¯ç¤ºèŒƒ:
```Java
public class ArrayClass<T>{
	private T[] arr = new T[10]; //ä¼šæŠ¥é”™!!
}
```

- é›†åˆç±»å£°æ˜å®¹å™¨çš„å…ƒç´ 
JDKä¸­çš„é›†åˆæ¥å£,é›†åˆç±»éƒ½è¢«å®šä¹‰äº†æ³›å‹, å‘½åè§„èŒƒ: E-Element, K-Key, V-Value, T-Type

å¸¸ç”¨çš„è¢«æ³›å‹åŒ–çš„é›†åˆç±»:

|    é›†åˆç±»    |      æ³›å‹å®šä¹‰      |
| :-------: | :------------: |
| ArrayList | `ArrayList<E>` |
|  HashMap  | `HashMap<K,V>` |
|  HashSet  |  `HashSet<E>`  |

```java
public static void main(String[] args) {  
    //å®šä¹‰ArrayListå®¹å™¨å¹¶è®¾ç½®å®¹å™¨å†…çš„ç±»å‹ä¸ºInteger  
    ArrayList<Integer> a = new ArrayList<Integer>();  
    a.add(1);  
    for (int i = 0; i < a.size(); i++) {  
        System.out.println("ArrayListå®¹å™¨çš„æˆå‘˜:"+a.get(i));  
    }  
    //å®šä¹‰HashMapå®¹å™¨å¹¶è®¾ç½®é”®å€¼å¯¹çš„ç±»å‹ä¸º<Integer, String>  
    Map<Integer, String> m = new HashMap<Integer, String>();  
    for (int i = 0; i < 5; i++) {  
        m.put(i, "key:"+i);  
    }  
    for (int i = 0; i < m.size(); i++) {  
        System.out.println("Mapå®¹å™¨æˆå‘˜:"+m.get(i));  
    }  
}
```

è¿è¡Œç»“æœ:
```text
ArrayListå®¹å™¨çš„æˆå‘˜:1
Mapå®¹å™¨æˆå‘˜:key:0
Mapå®¹å™¨æˆå‘˜:key:1
Mapå®¹å™¨æˆå‘˜:key:2
Mapå®¹å™¨æˆå‘˜:key:3
Mapå®¹å™¨æˆå‘˜:key:4
```


#### æ³›å‹çš„é«˜çº§ç”¨æ³•
##### é™åˆ¶æ³›å‹çš„å¯ç”¨ç±»å‹
é»˜è®¤å¯ä»¥ä½¿ç”¨ä»»ä½•ç±»å‹æ¥å®ä¾‹åŒ–ä¸€ä¸ªæ³›å‹å¯¹è±¡,ä½†æ˜¯Javaä¸­ä¹Ÿå¯¹æ³›å‹ç±»çš„å®ä¾‹çš„ç±»å‹è¿›è¡Œäº†é™åˆ¶.
è¯­æ³•å¦‚ä¸‹
```Java
class ç±»å <T extends anyClass>
```
å…¶ä¸­,anyClassæŒ‡æŸä¸ªæ¥å£æˆ–ç±»
ä½¿ç”¨æ³›å‹é™åˆ¶å,æ³›å‹ç±»çš„ç±»å‹å¿…é¡»å®ç°æˆ–ç»§æ‰¿anyClassè¿™ä¸ªæ¥å£æˆ–ç±». æ— è®ºanyClassæ˜¯ç±»è¿˜æ˜¯æ¥å£, åœ¨è¿›è¡Œæ³›å‹é™åˆ¶æ—¶éƒ½éœ€è¦ä½¿ç”¨**extends**å…³é”®å­—
```Java
public static void main(String[] args) {  
    //å¯ä»¥å®ä¾‹åŒ–å·²ç»å®ç°Listæ¥å£çš„ç±»  
    LimitClass <ArrayList>  list1 = new LimitClass<ArrayList>();  
    LimitClass <LinkedList> list2 = new LimitClass<LinkedList>();  
}
```
å¦‚æœæˆ‘è¦åœ¨é‡Œé¢å†™è¿™ä¸€å¥ä»£ç ,åˆ™ä¼šå‡ºé”™
```Java
LimitClass <HashMap> list3 = new LimitClass<HashMap>();
```

å½“æ²¡æœ‰ä½¿ç”¨extendsé™åˆ¶ç±»å‹æ—¶,é»˜è®¤Objectç±»ä¸‹çš„æ‰€æœ‰å­ç±»éƒ½å¯ä»¥å®ä¾‹åŒ–å¯¹è±¡

##### ä½¿ç”¨ç±»å‹é€šé…ç¬¦
> [!note] è¯´æ˜
> åœ¨æ³›å‹æœºåˆ¶ä¸­,æä¾›äº†*ç±»å‹é€šé…ç¬¦*,å…¶ä¸»è¦ä½œç”¨æ˜¯åœ¨åˆ›å»ºä¸€ä¸ªæ³›å‹ç±»å¯¹è±¡çš„æ—¶å€™**é™åˆ¶è¿™ä¸ªæ³›å‹ç±»çš„ç±»å‹**å®ç°æˆ–ç»§æ‰¿æŸä¸ªæ¥å£æˆ–ç±»çš„å­ç±». è¦å£°æ˜è¿™æ ·ä¸€ä¸ªå¯¹è±¡å¯ä»¥ä½¿ç”¨ **"?"** é€šé…ç¬¦æ¥è¡¨ç¤º, åŒæ—¶ä½¿ç”¨extendså¯¹æ³›å‹åŠ ä»¥é™åˆ¶.

ç”¨æ³•å¦‚ä¸‹
```Java
æ³›å‹ç±»å <? extends List> a = null;
```
å…¶ä¸­,`<? extends List>`è¡¨ç¤ºç±»å‹æœªçŸ¥,å½“éœ€è¦ä½¿ç”¨è¯¥æ³›å‹å¯¹è±¡æ—¶, å¯ä»¥å•ç‹¬å¯¹å…¶å®ä¾‹åŒ–
å¦‚:
```Java
A <? extends List> a = null;
a = new A<ArrayList>();
a = new A<LinkedList>();
```
å¦‚æœå®ä¾‹åŒ–æ²¡æœ‰å®ç°Listæ¥å£çš„æ³›å‹å¯¹è±¡,ç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™

é™¤äº†å¯ä»¥å®ä¾‹åŒ–ä¸€ä¸ªé™åˆ¶æ³›å‹ç±»å‹çš„å®ä¾‹, è¿˜å¯ä»¥å°†å®ä¾‹æ”¾åœ¨æ–¹æ³•çš„å‚æ•°ä¸­
```Java
public void doSomething(A<? extends List> a){}
```

å¦‚æœä½¿ç”¨`A<?>`è¿™ç§å½¢å¼æ¥å®ä¾‹åŒ–æ³›å‹å¯¹è±¡, åˆ™è¡¨ç¤ºAæŒ‡å®šä¸ºå®ä¾‹åŒ–ObjectåŠä»¥ä¸‹çš„å­ç±»ç±»å‹
```Java
List<String> l1 = new ArrayList<String>();
l1.add("å¼ ä¸‰");
List<?> l2 = l1;
List<?> l3 = new LinkedList<Integer>();
System.out.print(l2.get(0));
```
åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, `List<?>`ç±»å‹çš„å¯¹è±¡å¯ä»¥æ¥å—Stringçš„ArrayListé›†åˆä¹Ÿå¯ä»¥æ¥å—Integerç±»å‹çš„LinkedListé›†åˆ.

> [!warning] æ³¨æ„: 
> å¯¹äºä½¿ç”¨é€šé…ç¬¦çš„å¯¹è±¡,ä¸èƒ½å‘å…¶ä¸­åŠ å…¥æ–°çš„ä¿¡æ¯(ä¸èƒ½ä½¿ç”¨setæ–¹æ³•), åªèƒ½ä»ä¸­è·å–æˆ–åˆ é™¤ä¿¡æ¯(getæˆ–removeæ–¹æ³•å¯ç”¨)

æ³›å‹ç±»å‹é™¤äº†å¯ä»¥å‘ä¸‹é™åˆ¶,ä¹Ÿå¯ä»¥å‘ä¸Šé™åˆ¶. åªéœ€è¦åœ¨å®šä¹‰æ—¶ä½¿ç”¨**super**å…³é”®å­—å³å¯.
å¦‚
```Java
A<? super List> a = null;
```
è¿™æ ·å®šä¹‰å, å¯¹è±¡aå°±åªèƒ½æ¥å—Listæ¥å£æˆ–ä¸Šå±‚çˆ¶ç±»çš„ç±»å‹.
å¦‚
```Java
a = new A<Object>();
```


##### ç»§æ‰¿æ³›å‹ç±»ä¸å®ç°æ³›å‹çš„æ¥å£
å®šä¹‰ä¸ºæ³›å‹çš„ç±»å’Œæ¥å£ä¹Ÿå¯ä»¥è¢«ç»§æ‰¿æˆ–å®ç°.
```Java
class ExtendedClass<T1>{}
class SubClass<T1,T2,T3> extends ExtendedClass<T1>{}
```
å¦‚æœåœ¨SubClassç±»ç»§æ‰¿ExtendedClassç±»æ—¶ä¿ç•™çˆ¶ç±»çš„æ³›å‹ç±»å‹, éœ€è¦åœ¨ç»§æ‰¿æ—¶å£°æ˜,å¦‚æœæ²¡æœ‰æŒ‡æ˜, ç›´æ¥ä½¿ç”¨extendsè¿›è¡Œç»§æ‰¿, åˆ™T1,T2,T3å‡ä¼šå˜ä¸ºObjectç±»å‹. æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹éƒ½å¯¹çˆ¶ç±»çš„æ³›å‹è¿›è¡Œä¿ç•™

å®šä¹‰ä¸ºæ³›å‹çš„æ¥å£ä¹Ÿèƒ½è¢«å®ç°
```Java
interface SomeInterface<T1>{}
class SubClass<T1,T2,T3> implements SomeInterface<T1>{}
```
#### æ€»ç»“
- æ³›å‹çš„ç±»å‹å‚æ•°åªèƒ½æ˜¯ç±»ç±»å‹,ä¸å¯ä»¥æ˜¯ç®€å•ç±»å‹,å¦‚`A<int>`è¿™ç§æ³›å‹å®šä¹‰å°±æ˜¯é”™è¯¯çš„
- æ³›å‹çš„ç±»å‹ä¸ªæ•°å¯ä»¥æ˜¯å¤šä¸ª
- å¯ä»¥ä½¿ç”¨extendså…³é”®å­—é™åˆ¶æ³›å‹çš„ç±»å‹
- å¯ä»¥ä½¿ç”¨é€šé…ç¬¦é™åˆ¶æ³›å‹çš„ç±»å‹


---

## 3.6.lambdaè¡¨è¾¾å¼ä¸æµå¤„ç†
### lambdaè¡¨è¾¾å¼
> [!note] æ¦‚è¿°
> lambdaæ˜¯å¸Œè…Šå­—æ¯Î»çš„è¯»éŸ³,lambdaè¡¨è¾¾å¼æ˜¯åŸºäºÎ»æ¼”ç®—è€Œå¾—å, å› ä¸ºlambdaæŠ½è±¡(lambda abstraction)è¡¨ç¤ºä¸€ä¸ªåŒ¿åå‡½æ•°, äºæ˜¯å¼€å‘è¯­è¨€ä¹Ÿå°†lambdaè¡¨è¾¾å¼ç”¨æ¥**è¡¨ç¤ºåŒ¿åå‡½æ•°**, ä¹Ÿå°±æ˜¯æ²¡æœ‰å‡½æ•°åçš„å‡½æ•°. ä¸ºäº†æé«˜å¼€å‘æ•ˆç‡ä»¥åŠè·¨è¯­è¨€çš„å¼€å‘è€…æ¨¡å¼,Javaä¸­ä¹Ÿå¼•å…¥äº†lambdaè¡¨è¾¾å¼.
> 
> lambdaè¡¨è¾¾å¼å¯ä»¥ç”¨æå°‘çš„ä»£ç æ¥å®ç°æŠ½è±¡æ–¹æ³•. lambdaè¡¨è¾¾å¼ä¸èƒ½è¢«ç‹¬ç«‹æ‰§è¡Œ, å› æ­¤å¿…é¡»å®ç°å‡½æ•°å¼æ¥å£, å¹¶ä¸”è¿”å›ä¸€ä¸ªå‡½æ•°å¼æ¥å£çš„å¯¹è±¡.

lambdaè¡¨è¾¾å¼çš„è¯­æ³•å¾ˆæŠ½è±¡, ä¸”æœ‰éå¸¸å¼ºå¤§çš„è‡ªåŠ¨åŒ–åŠŸèƒ½, å¦‚è‡ªåŠ¨è¯†åˆ«æ³›å‹, è‡ªåŠ¨æ•°æ®ç±»å‹è½¬æ¢ç­‰.
å¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼æ¥ç†è§£
```Java
  ()         ->          {ä»£ç å—}
è¿™äº›å‚æ•°     æŒ‰ç…§     ä»£ç å—ä¸­çš„å†…å®¹å®ç°
```
lambdaè¡¨è¾¾å¼çš„è¯­æ³•æ ¼å¼:
```Java
()->ç»“æœè¡¨è¾¾å¼
å‚æ•° -> ç»“æœè¡¨è¾¾å¼
(å‚æ•°1,å‚æ•°2,...,å‚æ•°n) -> ç»“æœè¡¨è¾¾å¼
//å®ç°å¤æ‚æ–¹æ³•
()->{ä»£ç å—}
å‚æ•° -> {ä»£ç å—}
(å‚æ•°1,å‚æ•°2,...,å‚æ•°n) -> {ä»£ç å—}
```
ç¬¬ä¸€è¡Œå®ç°æ— å‚æ–¹æ³•,ç®­å¤´å³ä¾§ä»£è¡¨è¿”å›å€¼
ç¬¬äºŒè¡Œå®ç°åªæœ‰ä¸€ä¸ªå‚æ•°çš„æ–¹æ³•,å‚æ•°å¯ä»¥å†™åœ¨æ‹¬å·é‡Œæˆ–ä¸å†™æ‹¬å·
ç¬¬ä¸‰è¡Œå®ç°å¤šä¸ªå‚æ•°çš„æ–¹æ³•,æ‰€æœ‰å‚æ•°æŒ‰é¡ºåºå†™åœ¨æ‹¬å·é‡Œ,ä¸”æ‹¬å·ä¸å¯çœç•¥


#### **lambdaè¡¨è¾¾å¼å®ç°å‡½æ•°å¼æ¥å£**
> [!note] è¯´æ˜
> å‡½æ•°å¼æ¥å£æ˜¯æŒ‡ä»…åŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£, æ¥å£ä¸­çš„æ–¹æ³•ç®€å•æ˜äº†åœ°è¯´æ˜äº†æ¥å£çš„ç”¨é€”, å¦‚çº¿ç¨‹æ¥å£Runnable, åŠ¨ä½œäº‹ä»¶ç›‘å¬æ¥å£ActionListenerç­‰.å½“ç„¶,ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£

å¦‚:
```Java
interface MyInterface{
	void method();
}
```
å¦‚æœæ¥å£ä¸­æœ‰ä¸€ä¸ªä»¥ä¸Šçš„æŠ½è±¡æ–¹æ³•,åˆ™ä¸ç¬¦åˆå‡½æ•°å¼æ¥å£çš„è§„èŒƒ,è¿™æ ·çš„æ¥å£ä¸èƒ½ä½¿ç”¨lambdaè¡¨è¾¾å¼æ¥åˆ›å»ºåŒ¿åå¯¹è±¡.

##### ä½¿ç”¨lambdaè¡¨è¾¾å¼æ¥å®ç°æ— å‚æŠ½è±¡æ–¹æ³•
```Java
public interface SayHelloInterface {  
    public String sayHello();  
}

public class SayHelloInterface_Demo {  
    public static void main(String[] args) {  
        SayHelloInterface s = () -> "Hello,è¿™æ˜¯ä¸€ä¸ªlambdaè¡¨è¾¾å¼";  
        System.out.println(s.sayHello());  
    }  
}
```
æœ¬ä¾‹ç›´æ¥åœ¨lambdaè¡¨è¾¾å¼ä¸­åˆ›å»ºSayHelloInterfaceå¯¹è±¡,å¹¶æŒ‡å®šäº†ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºæ¥å£æ–¹æ³•çš„è¿”å›å€¼.(æ³¨æ„æ–¹æ³•çš„å±æ€§å’Œè¿”å›å€¼çš„ç±»å‹ç›¸åŒ¹é…)
è¿è¡Œç»“æœ:
```text
Hello,è¿™æ˜¯ä¸€ä¸ªlambdaè¡¨è¾¾å¼
```

##### lambdaè¡¨è¾¾å¼å®ç°æœ‰å‚æŠ½è±¡æ–¹æ³•
```Java
public interface AdditionInterface {  
    public int add(int a, int b);  
}

public class AdditionDemo {  
    public static void main(String[] args) {  
        AdditionInterface c = (a, b) -> a + b;  
        System.out.println(c.add(1, 2));  
    }  
}
```
è¿è¡Œç»“æœ
```text
3
```


##### lambdaè¡¨è¾¾å¼ä½¿ç”¨ä»£ç å—
```Java
public interface CheckGrade {  
    public String check(int grade);  
}

public class GradeChecker {  
    public static void main(String[] args) {  
        CheckGrade c = (grade)->  
        {  
            if(grade>=90)  
                return "ä¼˜ç§€";  
            else if(grade>=80)  
                return "è‰¯å¥½";  
            else if(grade>=70)  
                return "åŠæ ¼";  
            else if(grade>=60)  
                return "ä¸åŠæ ¼";  
            else  
                return "è¾“å…¥é”™è¯¯";  
        };  
        Scanner sc = new Scanner(System.in);  
        System.out.println("è¯·è¾“å…¥ä¸€ä¸ªæˆç»©:");  
        int grade = sc.nextInt();  
        System.out.println(c.check(grade));  
    }  
}
```

è¿è¡Œç»“æœ
```text
è¯·è¾“å…¥ä¸€ä¸ªæˆç»©:
78
åŠæ ¼
```

#### **lambdaè¡¨è¾¾å¼è°ƒç”¨å¤–éƒ¨å˜é‡**
##### lambdaè¡¨è¾¾å¼æ— æ³•æ”¹å˜å±€éƒ¨å˜é‡
å±€éƒ¨å˜é‡åœ¨lambdaè¡¨è¾¾å¼ä¸­è¢«å®šä¹‰ä¸ºfinal, ä¹Ÿå°±æ˜¯è¯´lambdaè¡¨è¾¾å¼åªèƒ½è°ƒç”¨å±€éƒ¨å˜é‡å´ä¸èƒ½æ”¹å˜å…¶å€¼
```Java
public interface VariableInterface1 {  
    void method();  
}

public class VariableDemo1 {  
    public static void main(String[] args) {  
        int val = 100;  
        VariableInterface1 v = () ->{  
            int num = val+10;  
            val = 12;  
        };  
    }  
}
```
æˆ‘ä»¬å°è¯•ä¿®æ”¹å±€éƒ¨å˜é‡çš„å€¼,ä¼šå‡ºç°å¦‚ä¸‹æŠ¥é”™
```text
java: ä»lambda è¡¨è¾¾å¼å¼•ç”¨çš„æœ¬åœ°å˜é‡å¿…é¡»æ˜¯æœ€ç»ˆå˜é‡æˆ–å®é™…ä¸Šçš„æœ€ç»ˆå˜é‡
```

##### lambdaè¡¨è¾¾å¼å¯ä»¥æ›´æ”¹ç±»æˆå‘˜å˜é‡
ç±»æˆå‘˜å˜é‡åœ¨lambdaè¡¨è¾¾å¼ä¸­æ˜¯ä¸è¢«finalä¿®é¥°çš„,å› æ­¤lambdaè¡¨è¾¾å¼å¯ä»¥ä¿®æ”¹å…¶å€¼
```Java
public interface VariableInterface2 {  
    public void method();  
}

public class VariableDemo2 {  
    int val = 100;  
  
    public void action(){  
        VariableInterface2 v = ()->{  
            val = -12;  
        };  
        System.out.println("è¿è¡Œæ¥å£æ–¹æ³•å‰,val="+val);  
        v.method();  
        System.out.println("è¿è¡Œæ¥å£æ–¹æ³•å,val="+val);  
    }  
    public static void main(String[] args) {  
        VariableDemo2 vd = new VariableDemo2();  
        vd.action();  
    }  
}
```

è¿è¡Œç»“æœ
```text
è¿è¡Œæ¥å£æ–¹æ³•å‰,val=100
è¿è¡Œæ¥å£æ–¹æ³•å,val=-12
```
ä»è¿™ä¸ªç»“æœä¸­å¯ä»¥çœ‹å‡º
- lambdaè¡¨è¾¾å¼å¯ä»¥è°ƒç”¨å¹¶ä¿®æ”¹ç±»æˆå‘˜å˜é‡çš„å€¼
- lambdaè¡¨è¾¾å¼åªæ˜¯æè¿°äº†æŠ½è±¡æ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„, åœ¨æŠ½è±¡æ–¹æ³•æ²¡æœ‰è¢«è°ƒç”¨å‰,lambdaè¡¨è¾¾å¼ä¸­çš„ä»£ç ä¸ä¼šè¢«æ‰§è¡Œ,å› æ­¤åœ¨æ‰§è¡ŒæŠ½è±¡æ–¹æ³•ä¹‹å‰ç±»æˆå‘˜å˜é‡çš„å€¼ä¸ä¼šå‘ç”Ÿæ”¹å˜
- åªè¦æŠ½è±¡æ–¹æ³•è¢«è°ƒç”¨, å°±ä¼šæ‰§è¡Œlambdaè¡¨è¾¾å¼ä¸­çš„ä»£ç ,ç±»æˆå‘˜å˜é‡ä¹Ÿä¼šè¢«ä¿®æ”¹

#### **lambdaè¡¨è¾¾å¼ä¸å¼‚å¸¸å¤„ç†**
å¾ˆå¤šæ¥å£çš„æŠ½è±¡æ–¹æ³•ä¸ºäº†ä¿è¯ç¨‹åºçš„å®‰å…¨æ€§,ä¼šåœ¨å®šä¹‰æ—¶æŠ›å‡ºå¼‚å¸¸. ä½†æ˜¯lambdaè¡¨è¾¾å¼ä¸­å¹¶æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸çš„è¯­æ³•, è¿™æ˜¯å› ä¸ºlambdaè¡¨è¾¾å¼é»˜è®¤æŠ›å‡ºæŠ½è±¡æ–¹æ³•åŸæœ‰çš„å¼‚å¸¸,å½“æ­¤æ–¹æ³•è¢«è°ƒç”¨æ—¶åˆ™éœ€è¦è¿›è¡Œå¼‚å¸¸å¤„ç†

```Java
public interface AntiaddiotInterface {  
    boolean check(int age) throws Exception;  
}

public class UnderAgeException extends Exception {  
    public UnderAgeException(String message) {  
        super(message);  
    }  
}

public class AgeTest {  
    public static void main(String[] args) {  
        Scanner sc = new Scanner(System.in);  
        AntiaddiotInterface add = (age) ->{  
            if (age < 18){  
                throw new UnderAgeException("æœªæ»¡18å²,ä¸ºæ‚¨å¼€å¯é˜²æ²‰è¿·!");  
            }  
            else{  
                return true;  
            }  
        };  
        System.out.println("è¯·è¾“å…¥æ‚¨çš„å¹´é¾„:");  
        int age = sc.nextInt();  
        try {  
            if(add.check(age)){  
                System.out.println("æ¬¢è¿è¿›å…¥åˆ°XXä¸–ç•Œ!");  
            }  
        }  
        catch (UnderAgeException e) {  
            System.err.println(e);  
        }  
        sc.close();  
    }  
}
```

è¿è¡Œç»“æœ
```text
è¯·è¾“å…¥æ‚¨çš„å¹´é¾„:
19
æ¬¢è¿è¿›å…¥åˆ°XXä¸–ç•Œ!

è¯·è¾“å…¥æ‚¨çš„å¹´é¾„:
16
lambdaDemo.UnderAgeException: æœªæ»¡18å²,ä¸ºæ‚¨å¼€å¯é˜²æ²‰è¿·!
```
ä»è¿™ä¸ªå®ä¾‹ä¸­å¯ä»¥çœ‹å‡º, å³ä½¿lambdaè¡¨è¾¾å¼æ²¡æœ‰å®šä¹‰å¼‚å¸¸, åŸæŠ½è±¡æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ä¾ç„¶å­˜åœ¨, å½“æ¥å£å¯¹è±¡æ‰§è¡Œè¯¥æ–¹æ³•æ—¶ä¼šè¢«å¼ºåˆ¶æ‰§è¡Œå¼‚å¸¸å¤„ç†


### æ–¹æ³•çš„å¼•ç”¨
lambdaè¡¨è¾¾å¼è¿˜æ·»åŠ äº†ä¸€ç±»æ–°è¯­æ³•ç”¨æ¥*å¼•ç”¨æ–¹æ³•*, ä¹Ÿå°±æ˜¯è¯´æ–¹æ³•ä¹Ÿå¯ä»¥è¢«å½“åšä¸€ä¸ªå¯¹è±¡è°ƒç”¨.æ ¹æ®æ–¹æ³•çš„ä¸åŒ, æ–¹æ³•çš„å¼•ç”¨åŒ…æ‹¬å¼•ç”¨é™æ€æ–¹æ³•,æ„é€ æ–¹æ³•å’Œæˆå‘˜æ–¹æ³•ç­‰.
#### **å¼•ç”¨é™æ€æ–¹æ³•**
å¼•ç”¨é™æ€æ–¹æ³•çš„è¯­æ³•å¦‚ä¸‹
```Java
ç±»å :: é™æ€æ–¹æ³•å
```
è¿™ä¸ªè¯­æ³•ä¸­å‡ºç°äº†ä¸€ä¸ªæ–°çš„æ“ä½œç¬¦`" :: "`,å†’å·ä¹‹é—´æ²¡æœ‰ç©ºæ ¼. è¿™ä¸ªæ“ä½œç¬¦å·¦è¾¹è¡¨ç¤ºæ‰€å±çš„ç±»å,å³è¾¹æ˜¯æ–¹æ³•å.éœ€è¦æ³¨æ„,è¿™ä¸ªè¯­æ³•ä¸­æ–¹æ³•åä¸è¢«æ‹¬å·åŒ…è£¹

```Java
public interface StaticMethodInterface {  
    int method(int a, int b);  
}

public class Demo1 {  
    static int add(int a, int b) {  
        return a+b;  
    }  
  
    public static void main(String[] args) {  
        StaticMethodInterface sm = Demo1::add;  
        int result1 = sm.method(3, 5);  
        System.out.println(result1);  
        sm = Math::max;  
        int result2 = sm.method(3, 5);  
        System.out.println(result2);  
    }  
}
```
ä½¿ç”¨å¼•ç”¨é™æ€æ–¹æ³•æ¥è®©æ¥å£ä¸­å¯¹è±¡çš„æŠ½è±¡æ–¹æ³•æŒ‰ç…§å¼•ç”¨æ–¹æ³•æ¥å®ç°
è¿è¡Œç»“æœ
```text
8
5
```

#### **å¼•ç”¨æˆå‘˜æ–¹æ³•**
å¼•ç”¨æˆå‘˜æ–¹æ³•çš„è¯­æ³•å¦‚ä¸‹
```Java
å¯¹è±¡å :: æˆå‘˜æ–¹æ³•å
```
ä¸å¼•ç”¨é™æ€æ–¹æ³•ä¸åŒ, è¿™é‡Œæ“ä½œç¬¦çš„å·¦ä¾§å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡åè€Œéç±»å. è¿™ç§è¯­æ³•ä¹Ÿå¯ä»¥è¾¾åˆ°æŠ½è±¡æ–¹æ³•æŒ‰ç…§ç±»æˆå‘˜çš„é€»è¾‘æ¥å®ç°çš„ç›®çš„

```Java
public interface InstanceMethodInterface {  
    String method(Date date);  
}

public class Demo2 {  
    public String format(Date date){  
        SimpleDateFormat sp = new SimpleDateFormat("yyyy-MM-dd");  
        return sp.format(date);  
    }  
  
    public static void main(String[] args) {  
        Demo2 demo = new Demo2();  
        InstanceMethodInterface im = demo::format;  //å¼•ç”¨ç±»å¯¹è±¡æ–¹æ³•  
        Date date = new Date();  
        System.out.println("é»˜è®¤æ ¼å¼:"+date);  
        System.out.println("æŒ‡å®šæ ¼å¼:"+im.method(date));  
    }  
}
```

è¿è¡Œç»“æœ
```text
é»˜è®¤æ ¼å¼:Fri Jul 04 09:08:43 CST 2025
æŒ‡å®šæ ¼å¼:2025-07-04
```

#### **å¼•ç”¨å¸¦æ³›å‹çš„æ–¹æ³•**
æ³›å‹æ˜¯Javaå¼€å‘ç»å¸¸ä½¿ç”¨åˆ°çš„åŠŸèƒ½, " `::` "æ“ä½œç¬¦æ”¯æŒå¼•ç”¨å¸¦æ³›å‹çš„ç±».
```Java
public interface ParadigmInterface<T> {  
    int method(T[]t);  
}

public class Demo3 {  
    static public <T> int repeatCount(T[]t){  
        int arrayLength = t.length;  
        HashSet<T> set = new HashSet<>();  
        for(T tmp : t){  
            set.add(tmp);  
        }  
        return arrayLength - set.size();  
    }  
  
    public static void main(String[] args) {  
        Integer [] a= {1,2,3,1,5,6,3,4,2,1};  
        String []s = {"hello","world","hello","world","hello","world"};  
        ParadigmInterface<Integer> p1 = Demo3::repeatCount;  
        System.out.println("æ•´æ•°æ•°ç»„é‡å¤å…ƒç´ ä¸ªæ•°:"+p1.method(a));  
        ParadigmInterface<String> p2 = Demo3::repeatCount;  
        System.out.println("å­—ç¬¦ä¸²æ•°ç»„é‡å¤å…ƒç´ ä¸ªæ•°:"+p2.method(s));  
    }  
}
```

è¿è¡Œç»“æœ
```text
æ•´æ•°æ•°ç»„é‡å¤å…ƒç´ ä¸ªæ•°:4
å­—ç¬¦ä¸²æ•°ç»„é‡å¤å…ƒç´ ä¸ªæ•°:4
```
ä¸å…¶ä»–æ³›å‹çš„ä½¿ç”¨åœºæ™¯ç›¸åŒ, è¦ä¿è¯ä»£ç çš„å‰åæ³›å‹ä¸€è‡´,å¦åˆ™ä¼šå‘ç”Ÿç¼–è¯‘é”™è¯¯

#### **å¼•ç”¨æ„é€ æ–¹æ³•**
lambdaè¡¨è¾¾å¼æœ‰3ä¸­å¼•ç”¨æ„é€ æ–¹æ³•çš„è¯­æ³•

- å¼•ç”¨æ— å‚æ„é€ æ–¹æ³•
```Java
ç±»å :: new
```

ç”±äºæ„é€ æ–¹æ³•å’Œç±»åç›¸åŒ,å¦‚æœåœ¨å·¦å³ä¸¤ä¾§éƒ½å†™ä¸Šç±»å, ä¼šè®©æ“ä½œç¬¦è®¤ä¸ºæ˜¯åœ¨å¼•ç”¨å’Œç±»åç›¸åŒçš„é™æ€æ–¹æ³•,è¿™æ ·ä¼šå¯¼è‡´ç¨‹åºå‡ºç°bug,æ‰€ä»¥å¼•ç”¨æ„é€ æ–¹æ³•çš„è¯­æ³•ä½¿ç”¨äº†newå…³é”®å­—.

è¿™ä¸ªè¯­æ³•æœ‰ä¸€ç‚¹è¦æ³¨æ„: newå…³é”®å­—åæ²¡æœ‰åœ†æ‹¬å·,ä¹Ÿæ²¡æœ‰å‚æ•°çš„å®šä¹‰. "::"æ“ä½œç¬¦ä¼šè¿”å›ä¸æŠ½è±¡æ–¹æ³•å‚æ•°ç»“æ„ç›¸åŒçš„æ„é€ æ–¹æ³•. å¦‚æœæ‰¾ä¸åˆ°å’Œå‚æ•°æ¥å£ç›¸åŒçš„æ„é€ æ–¹æ³•,åˆ™ä¼šå‘ç”Ÿé”™è¯¯.
```java
public interface ConstructorsInterface1 {  
    ConstructorsDemo1 action();  
}

public class ConstructorsDemo1 {  
    public ConstructorsDemo1(){  
        System.out.println("æ— å‚æ„é€ ");  
    }  
    public ConstructorsDemo1(int a){  
        System.out.println("æœ‰å‚æ„é€ ");  
    }  
  
    public static void main(String[] args) {  
        //å¼•ç”¨æ„é€ æ–¹æ³•  
        ConstructorsInterface1 a = ConstructorsDemo1::new;  
        //é€šè¿‡æ— å‚æ–¹æ³•åˆ›å»ºå¯¹è±¡  
        ConstructorsDemo1 b = a.action();  
    }  
}
```

- å¼•ç”¨å«å‚æ„é€ æ–¹æ³•
```java
public interface ConstructorsInterface2 {  
    ConstructorsDemo2 action(int i);  
}

public class ConstructorsDemo2 {  
    public ConstructorsDemo2(){  
        System.out.println("æ— å‚æ„é€ ");  
    }  
    public ConstructorsDemo2(int a){  
        System.out.println("æœ‰å‚æ„é€ ,å‚æ•°ä¸º"+a);  
    }  
  
    public static void main(String[] args) {  
        ConstructorsInterface2 a = ConstructorsDemo2::new;  
        ConstructorsDemo2 b = a.action(1);  
    }  
}
```

è¿è¡Œç»“æœ
```text
æœ‰å‚æ„é€ ,å‚æ•°ä¸º1
```

- å¼•ç”¨æ•°ç»„æ„é€ æ–¹æ³•
åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­,å¯èƒ½å‡ºç°è¿™æ ·çš„åœºæ™¯: æŠŠæ•°ç»„ç±»å‹å½“åšæ³›å‹. å¦‚æœæ–¹æ³•çš„è¿”å›å€¼æ˜¯æ³›å‹, åœ¨è¿™ç§ç‰¹æ®Šçš„æƒ…å†µä¸‹,æ–¹æ³•å°±åº”è¯¥è¿”å›ä¸€ä¸ªæ•°ç»„ç±»å‹çš„ç»“æœ. å¦‚æœè¦æ±‚æŠ½è±¡æ–¹æ³•æ—¢å¼•ç”¨æ„é€ æ–¹æ³•åˆè¦è¿”å›æ•°ç»„çš„ç±»å‹ç»“æœ, åœ¨è¿™ç§åœºæ™¯ä¸‹æŠ½è±¡æ–¹æ³•çš„å‚æ•°å°±å¤šäº†ä¸€ä¸ªå«ä¹‰-->æ•°ç»„ä¸ªæ•°. æŠ½è±¡æ–¹æ³•çš„å‚æ•°å¯ä»¥å†³å®šè¿”å›çš„æ•°ç»„é•¿åº¦, ä½†æ•°ç»„ä¸­çš„å…ƒç´ ä¸ä¸€å®šæ˜¯æœ‰å€¼çš„, è¿˜éœ€è¦å†æ¬¡å¯¹å…¶èµ‹å€¼.å¼•ç”¨æ•°æ®æ„é€ æ–¹æ³•çš„è¯­æ³•ä¹Ÿä¼šæœ‰æ‰€ä¸åŒ,å¦‚ä¸‹
```Java
ç±»å[] :: new
```

```Java
public interface ArraysConsInterface<T> {  
    // æŠ½è±¡æ–¹æ³•è¿”å›æ•°ç»„,æ–¹æ³•å‚æ•°å†³å®šæ•°ç»„ä¸ªæ•°  
    T action(int n);  
}

public class ArraysConsDemo {  
    // é‡å†™ toString() æå‡æ‰“å°å¯è¯»æ€§  
    @Override  
    public String toString() {  
        return "ArraysConsDemo Instance";  
    }  
  
    public static void main(String[] args) {  
        // ä½¿ç”¨æ•°ç»„æ„é€ æ–¹æ³•å¼•ç”¨åˆ›å»º ArraysConsDemo æ•°ç»„  
        ArraysConsInterface<ArraysConsDemo[]> a = ArraysConsDemo[]::new;  
  
        // åˆ›å»ºå¤§å°ä¸º 3 çš„æ•°ç»„  
        ArraysConsDemo[] arr = a.action(3);  
  
        // åˆå§‹åŒ–æ•°ç»„å…ƒç´   
        arr[0] = new ArraysConsDemo();  
        arr[1] = new ArraysConsDemo();  
        arr[2] = new ArraysConsDemo();  
  
        // æ‰“å°æ¯ä¸ªå¯¹è±¡ï¼Œæ­¤æ—¶å°†æ˜¾ç¤º "ArraysConsDemo Instance"        for (ArraysConsDemo i : arr) {  
            System.out.println(i);  
        }  
    }  
}
```

è¿è¡Œç»“æœ
```text
ArraysConsDemo Instance
ArraysConsDemo Instance
ArraysConsDemo Instance
```
#### **Functionæ¥å£**
> [!note] æè¿°
> åœ¨å‰é¢çš„ä¾‹å­ä¸­, æƒ³è¦ä½¿ç”¨lambdaè¡¨è¾¾å¼éƒ½éœ€è¦å…ˆåˆ›å»ºå‡½æ•°å¼æ¥å£, ä½†java.util.functionåŒ…å·²ç»æä¾›äº†å¾ˆå¤šé¢„å®šä¹‰å‡½æ•°å¼æ¥å£,å°±æ˜¯æ²¡æœ‰å®ç°ä»»ä½•åŠŸèƒ½,ä»…ä»…ç”¨æ¥å°è£…lambdaè¡¨è¾¾å¼çš„å¯¹è±¡. è¯¥åŒ…ä¸­æœ€å¸¸ç”¨çš„æ¥å£æ˜¯`Function<T,R>`,è¿™ä¸ªæ¥å£ä¸­æœ‰ä¸¤ä¸ªæ³›å‹:
> - T : è¢«æ“ä½œçš„ç±»å‹,å¯ä»¥ç†è§£ä¸ºæ–¹æ³•å‚æ•°ç±»å‹. 
> - R : æ“ä½œç»“æœç±»å‹, å¯ä»¥ç†è§£ä¸ºæ–¹æ³•çš„è¿”å›ç±»å‹.
> 

Functionæ¥å£æ˜¯å‡½æ•°å¼æ¥å£,å› æ­¤åªä¼šæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•, ä½†æ˜¯Functionæ¥å£è¿˜æä¾›äº†3ä¸ªå·²å®ç°çš„æ–¹æ³•,ä»¥ä¾¿å¼€å‘è€…å¯¹å‡½æ•°é€»è¾‘è¿›è¡Œæ›´æ·±å±‚çš„å¤„ç†.

Functionæ¥å£æ–¹æ³•

|                        æ–¹æ³•                        |                       è¯´æ˜                        |             æ–¹æ³•è¿”å›å€¼             |
| :----------------------------------------------: | :---------------------------------------------: | :---------------------------: |
|                    apply(T t)                    |         æŠ½è±¡æ–¹æ³•,æŒ‰ç…§è¢«å­ç±»å®ç°çš„é€»è¾‘æ‰§è¡Œå‡½æ•°,å‚æ•°ä¸ºè¢«æ“ä½œæ³›å‹å¯¹è±¡          |               R               |
| `andThen(Function<? super R,? extends V>after)`  | å…ˆæ‰§è¡Œapply(t)æ–¹æ³•,å°†æ‰§è¡Œç»“æœä½œä¸ºè¯¥æ–¹æ³•çš„å‚æ•°,å†æŒ‰ç…§afterå‡½æ•°é€»è¾‘ç»§ç»­æ‰§è¡Œè¯¥æ–¹æ³• | (T,t)->after.apply(apply(t))  |
| `compose(Function<? super V,? extends T>before)` |  å…ˆæŒ‰ç…§beforeå‡½æ•°é€»è¾‘æ“ä½œæ¥å£è¢«æ“ä½œå¯¹è±¡t, å†å°†æ‰§è¡Œç»“æœä½œä¸ºapplyæ–¹æ³•çš„å‚æ•°.   | (V,v)->apply(before.apply(v)) |
|                static identity()                 |   é™æ€æ–¹æ³•, è¿”å›ä¸€ä¸ªFunctionå¯¹è±¡,æ­¤å¯¹è±¡çš„apply()æ–¹æ³•åªä¼šè¿”å›å‚æ•°å€¼.    |             t->t              |

ä¾‹:ç»„åˆIPåœ°å€æ•°å­—
```java
public class FunctionDemo {  
    //åˆ›å»ºFunctionå¯¹è±¡  
    Function<Integer[],String> function = (n)->{  
        StringBuilder str = new StringBuilder();  
        for(Integer i : n){  
            str.append(i);  
            str.append(".");  
        }  
        str.deleteCharAt(str.length()-1);  
        return str.toString();  
    };  
  
    public static void main(String[] args) {  
        Integer [] ip = {192,168,1,1};  
        FunctionDemo f = new FunctionDemo();  
        System.out.println(f.function.apply(ip));  
    }  
}
```
è¿è¡Œç»“æœ
```text
192.168.1.1
```
### æµå¤„ç†(Stream API)
> [!note] æ¦‚è¿°
> æµ(Stream)æ˜¯Java 8ä¸­å¤„ç†é›†åˆ(Collection)æ•°æ®çš„æŠ½è±¡æ¦‚å¿µï¼Œå®ƒå¯ä»¥è®©ä½ ä»¥å£°æ˜å¼çš„æ–¹å¼å¤„ç†æ•°æ®é›†åˆã€‚æµä¸æ˜¯æ•°æ®ç»“æ„ï¼Œè€Œæ˜¯ä»æ•°æ®æº(å¦‚é›†åˆã€æ•°ç»„æˆ–I/Oèµ„æº)è·å–æ•°æ®çš„ç®¡é“ã€‚

#### **ä¸»è¦ç‰¹ç‚¹ï¼š**
1. â€‹**å£°æ˜å¼ç¼–ç¨‹**â€‹ï¼šä½ åªéœ€è¯´æ˜"åšä»€ä¹ˆ"è€Œä¸æ˜¯"å¦‚ä½•åš"
2. â€‹**å¯ç»„åˆ**â€‹ï¼šå¤šä¸ªæ“ä½œå¯ä»¥é“¾å¼è¿æ¥
3. â€‹**å¯å¹¶è¡Œ**â€‹ï¼šèƒ½è‡ªåŠ¨åˆ©ç”¨å¤šæ ¸æ¶æ„
4. â€‹**å†…éƒ¨è¿­ä»£**â€‹ï¼šä¸åŒäºé›†åˆçš„å¤–éƒ¨è¿­ä»£ï¼ˆfor-eachå¾ªç¯ï¼‰

æµå¤„ç†æœ‰ç‚¹ç±»ä¼¼äºæ•°æ®åº“ä¸­çš„SQLè¯­å¥,å¯ä»¥æ‰§è¡Œéå¸¸å¤æ‚çš„*è¿‡æ»¤,æ˜ å°„,æŸ¥æ‰¾,æ”¶é›†*åŠŸèƒ½,å¹¶ä¸”ä»£ç é‡å¾ˆå°‘.å”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯å¯è¯»æ€§ä¸é«˜.
#### **Streamæ¥å£**
> [!note] ç®€ä»‹
> æµå¤„ç†çš„æ¥å£è¢«å®šä¹‰åœ¨java.util.streamåŒ…ä¸­. BaseStreamæ¥å£æ˜¯æœ€åŸºç¡€çš„æ¥å£,ä½†æœ€å¸¸ç”¨çš„æ˜¯BaseStreamçš„ä¸€ä¸ªå­æ¥å£--Streamæ¥å£. åŸºæœ¬ä¸Šç»å¤§å¤šæ•°çš„æµå¤„ç†éƒ½æ˜¯åœ¨Streamæ¥å£ä¸Šå®ç°çš„.

Streamæ¥å£æ˜¯ä¸€ä¸ªæ³›å‹æ¥å£,å› æ­¤æµä¸­çš„å¯¹è±¡å¯ä»¥æ˜¯ä»»ä½•ç±»çš„å¯¹è±¡.

Streamæ¥å£çš„å¸¸ç”¨æ–¹æ³•

|                        æ–¹æ³•                        |     è¿”å›å€¼ç±»å‹      |                    åŠŸèƒ½æè¿°                     |  ç±»å‹  |
| :----------------------------------------------: | :------------: | :-----------------------------------------: | :--: |
|                     count()                      |      long      |                  è¿”å›æµä¸­çš„å…ƒç´ ä¸ªæ•°                  | ç»ˆç«¯æ“ä½œ |
|                    distinct()                    |  `Stream<T>`   |                  å»é™¤æµä¸­çš„é‡å¤å…ƒç´                   | ä¸­é—´æ“ä½œ |
|      `filter(Predict<? super T> predicate`)      |  `Stream<T>`   |                 è¿”å›ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„æµ                  | ä¸­é—´æ“ä½œ |
|      `forEach(Consumer<? super T> action)`       |      void      |            éå†æµä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ,æ‰§è¡Œactionæ“ä½œ            | ç»ˆç«¯æ“ä½œ |
|               limit(long maxSize)                |  `Stream<T>`   |               è·å–æµä¸­å‰maxSizeä¸ªå…ƒç´                | ä¸­é—´æ“ä½œ |
|  `map(Function<? super T,? extends R> mapper)`   | `<R>Stream<R>` |       å¯¹æµä¸­çš„å…ƒç´ è°ƒç”¨mapperæ–¹æ³•,äº§ç”ŸåŒ…å«è¿™äº›å…ƒç´ çš„ä¸€ä¸ªæ–°çš„æµ       | ä¸­é—´æ“ä½œ |
| `mapToDouble(ToDoubleFunction<? super T>mapper)` |  DoubleStream  | å¯¹æµä¸­çš„å…ƒç´ è°ƒç”¨mapperæ–¹æ³•,äº§ç”ŸåŒ…å«è¿™äº›å…ƒç´ çš„ä¸€ä¸ªæ–°çš„DoubleStreamæµ | ä¸­é—´æ“ä½œ |
|  `mapToInt(ToDoubleFunction<? super T>mapper)`   |   IntStream    |  å¯¹æµä¸­çš„å…ƒç´ è°ƒç”¨mapperæ–¹æ³•,äº§ç”ŸåŒ…å«è¿™äº›å…ƒç´ çš„ä¸€ä¸ªæ–°çš„IntStreamæµ   | ä¸­é—´æ“ä½œ |
|  `mapToLong(ToDoubleFunction<? super T>mapper)`  |   LongStream   |  å¯¹æµä¸­çš„å…ƒç´ è°ƒç”¨mapperæ–¹æ³•,äº§ç”ŸåŒ…å«è¿™äº›å…ƒç´ çš„ä¸€ä¸ªæ–°çš„LongStreamæµ  | ä¸­é—´æ“ä½œ |
|      `max(Comparator<? super T>comparator)`      | `Optional<T>`  |             æ ¹æ®æŒ‡å®šæ¯”è¾ƒå™¨è§„åˆ™,è·å–æµä¸­çš„æœ€å¤§å…ƒç´              | ç»ˆç«¯æ“ä½œ |
|      `min(Comparator<? super T>comparator)`      | `Optional<T>`  |             æ ¹æ®æŒ‡å®šæ¯”è¾ƒå™¨è§„åˆ™,è·å–æµä¸­çš„æœ€å°å…ƒç´              | ç»ˆç«¯æ“ä½œ |
|                   skip(long n)                   |  `Stream<T>`   |                 å»é™¤æµä¸­çš„å‰nä¸ªå…ƒç´                   | ä¸­é—´æ“ä½œ |
|                     sorted()                     |  `Stream<T>`   |                  å°†æµä¸­çš„å…ƒç´ æ’åº                   | ç»ˆç«¯æ“ä½œ |
|    `sorted(Comparator<? super T>comparator)`     |  `Stream<T>`   |              å°†æµä¸­çš„å…ƒç´ æŒ‰ç…§æŒ‡å®šæ¯”è¾ƒå™¨è§„åˆ™æ’åº              | ç»ˆç«¯æ“ä½œ |
è¡¨ä¸­æœ€åä¸€åˆ—çš„"ç±»å‹"æœ‰ä¸¤ç§å€¼: **ç»ˆç«¯æ“ä½œ**å’Œ**ä¸­é—´æ“ä½œ**. 
- ä¸­é—´æ“ä½œç±»å‹çš„æ–¹æ³•ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„æµå¯¹è±¡,è¢«æ“ä½œçš„æµå¯¹è±¡ä»ç„¶å¯ä»¥è¿›è¡Œå…¶ä»–æ“ä½œ 
- ç»ˆç«¯æ“ä½œä¼šæ¶ˆè´¹æµ,æ“ä½œç»“æŸä¹‹å,è¢«æ“ä½œçš„æµå¯¹è±¡å°±ä¸èƒ½æ‰§è¡Œå…¶ä»–æ“ä½œäº†

Collectionæ¥å£æ–°å¢äº†ä¸¤ä¸ªå¯ä»¥==è·å–æµå¯¹è±¡==çš„æ–¹æ³•
- è·å–é›†åˆçš„é¡ºåº
```Java
Stream<E> stream();
```
- è·å–é›†åˆçš„å¹¶è¡Œæµ
```java
Stream<E> parallelsStream();
```

#### **Optionalç±»**
> [!note] ç®€ä»‹
> Optionalç±»åƒæ˜¯ä¸€ä¸ªå®¹å™¨,å¯ä»¥ä¿å­˜ä»»ä½•å¯¹è±¡,å¹¶ä¸”é’ˆå¯¹NullPointerExceptionç©ºæŒ‡é’ˆå¼‚å¸¸åšäº†ä¼˜åŒ–, ä¿è¯Optionalç±»ä¿å­˜çš„å€¼ä¸ä¼šæ˜¯null. å› æ­¤,Optionalç±»é’ˆå¯¹å¯¹è±¡ä¸ç¡®å®šæ˜¯å¦ä¸ºç©ºçš„æƒ…å†µ,ä¸ºå¼€å‘è€…æä¾›äº†ä¼˜è´¨çš„è§£å†³æ–¹æ¡ˆ.

> [!warning] æ³¨æ„
> Optionalç±»æ˜¯**ç”±finalä¿®é¥°**çš„, å› æ­¤ä¸èƒ½æœ‰å­ç±». Optionalç±»ç”±äºæ˜¯å¸¦æœ‰æ³›å‹çš„ç±»,å› æ­¤å¯ä»¥ä¿å­˜ä»»æ„å¯¹è±¡çš„å€¼


```Java
public final class Optional<T>{
	private final T value;
	...
}
```
Optionalç±»ä¸­è¿˜æœ‰ä¸€ä¸ªå«åšvalueçš„æˆå‘˜å±æ€§, è¿™ä¸ªå±æ€§å°±æ˜¯ç”¨æ¥ä¿å­˜å…·ä½“å€¼çš„. valueæ˜¯ç”¨æ³›å‹Tä¿®é¥°çš„, å¹¶ä¸”è¿˜ç”¨äº†finalä¿®é¥°, è¿™è¡¨ç¤º**ä¸€ä¸ªOptionalå¯¹è±¡åªèƒ½å­˜å‚¨ä¸€ä¸ªå€¼**.

Optionalç±»æä¾›çš„å¸¸ç”¨æ–¹æ³•

|         æ–¹æ³•          |     è¿”å›ç±»å‹      |                                  æè¿°                                   |
| :-----------------: | :-----------: | :-------------------------------------------------------------------: |
|       empty()       | `Optional<T>` |                          é™æ€æ–¹æ³•, è¿”å›ä¸€ä¸ªè¡¨ç¤ºç©ºå€¼çš„å®ä¾‹.                           |
|      filter()       | `Optional<T>` | å¦‚æœOptionalå®ä¾‹çš„valueæ˜¯æœ‰å€¼çš„, å¹¶ä¸”è¯¥å€¼ä¸ç»™å®šæ¡ä»¶åŒ¹é…, åˆ™è¿”å›è¿™ä¸ªå€¼çš„Optionalå®ä¾‹,å¦åˆ™è¿”å›ä¸€ä¸ªè¡¨ç¤ºç©ºå€¼çš„å®ä¾‹. |
|        get()        |     `<T>`     |                  å¦‚æœOptionalå®ä¾‹çš„valueæœ‰å€¼,è¿”å›å€¼,å¦åˆ™æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸                   |
|     of(T value)     | `Optional<T>` |                    é™æ€æ–¹æ³•,è¿”å›ä¸€ä¸ªvalueå€¼ç­‰äºå‚æ•°å€¼çš„Optionalå®ä¾‹                    |
| ofNullable(T value) | `Optional<T>` |                   è¿”å›ä¸€ä¸ªvalueå€¼ç­‰äºå‚æ•°å€¼çš„énullçš„Optionalå®ä¾‹                    |
|   orElse(T value)   |     `<T>`     |              å¦‚æœOptionalå®ä¾‹çš„valueæ˜¯æœ‰å€¼çš„,åˆ™è¿”å›valueå€¼,å¦åˆ™è¿”å›å‚æ•°çš„å€¼.               |
```Java
public class OptionalDemo {  
    public static void main(String[] args) {  
        Optional<String> strVal = Optional.of("hello");  
        boolean haveFlag = strVal.isPresent();  
        System.out.println("strValå¯¹è±¡æ˜¯å¦åŒ…å«å€¼:"+haveFlag);  
        if (haveFlag){  
            String str = strVal.get();  
            System.out.println("strValå¯¹è±¡çš„å€¼ä¸º:"+ str);  
        }  
        Optional<String > noVal = Optional.empty();  
        boolean noHaveFlag = noVal.isPresent();  
        System.out.println("noValå¯¹è±¡æ˜¯å¦åŒ…å«å€¼:"+noHaveFlag);  
        if (noHaveFlag){  
            String str = noVal.get();  
            System.out.println("noValå¯¹è±¡çš„å€¼ä¸º:"+ str);  
        }  
        else {  
            String str = noVal.orElse("ä½¿ç”¨é»˜è®¤å€¼");  
            System.out.println("noValå¯¹è±¡æ²¡æœ‰å€¼,ä½¿ç”¨é»˜è®¤å€¼:"+ str);  
        }  
    }  
}
```

è¿è¡Œç»“æœ
```text
strValå¯¹è±¡æ˜¯å¦åŒ…å«å€¼:true
strValå¯¹è±¡çš„å€¼ä¸º:hello
noValå¯¹è±¡æ˜¯å¦åŒ…å«å€¼:false
noValå¯¹è±¡æ²¡æœ‰å€¼,ä½¿ç”¨é»˜è®¤å€¼:ä½¿ç”¨é»˜è®¤å€¼
```

#### **Collectorsç±»**
> [!note] ç®€ä»‹
> Collectorsç±»ä¸ºæ”¶é›†å™¨ç±», è¯¥ç±»å®ç°äº†java.util.Collectoræ¥å£, å¯ä»¥å°†Streamæµå¯¹è±¡è¿›è¡Œå„ç§å„æ ·çš„å°è£…,å½’é›†,åˆ†ç»„ç­‰æ“ä½œ. åŒæ—¶, Collectorsç±»è¿˜æä¾›äº†å¾ˆå¤šå®ç”¨çš„æ•°æ®åŠ å·¥æ–¹æ³•,å¦‚æ•°æ®ç»Ÿè®¡è®¡ç®—ç­‰


Collectorsç±»å¸¸ç”¨æ–¹æ³•

|                                              æ–¹æ³•                                              |                           æè¿°                           |
| :------------------------------------------------------------------------------------------: | :----------------------------------------------------: |
|                    `averagingDouble(ToDoubleFunction<? extends T>mapper)`                    |                        è®¡ç®—æµå…ƒç´ å¹³å‡å€¼                        |
|                       `averagingInt(ToIntFunction<? extends T>mapper)`                       |                        è®¡ç®—æµå…ƒç´ å¹³å‡å€¼                        |
|                      `averagingLong(ToLongFunction<? extends T>mapper)`                      |                        è®¡ç®—æµå…ƒç´ å¹³å‡å€¼                        |
|                                          counting()                                          |                         ç»Ÿè®¡å…ƒç´ ä¸ªæ•°                         |
|                          `maxBy(Comparator<? super T> comparator)`                           |                      è¿”å›ç¬¦åˆæ¡ä»¶çš„æœ€å¤§çš„å…ƒç´                       |
|                          `minBy(Comparator<? super T> comparator)`                           |                      è¿”å›ç¬¦åˆæ¡ä»¶çš„æœ€å°çš„å…ƒç´                       |
|                       `summarizingInt(ToIntFunction<? super T>mapper)`                       |                        è¿”å›æµå…ƒç´ çš„å’Œ                         |
|                                          joining()                                           |                 æŒ‰ç…§é¡ºåºå°†å…ƒç´ è¿æˆä¸€ä¸ªStringç±»å‹çš„æ•°æ®                 |
|                               joining(CharSequence delimiter)                                |           æŒ‰ç…§é¡ºåºå°†å…ƒç´ è¿æˆä¸€ä¸ªStringç±»å‹çš„æ•°æ®,å¹¶æŒ‡å®šå…ƒç´ ä¹‹é—´çš„åˆ†éš”ç¬¦           |
|                                           toList()                                           |                    å°†æµä¸­çš„å…ƒç´ å°è£…æˆListé›†åˆ                     |
| `toMap(Function<? super T,? extends K>keyMapper,Function<? super T,? extends U>valueMapper)` |                     å°†æµä¸­çš„å…ƒç´ å°è£…æˆMapé›†åˆ                     |
|                                           toSet()                                            |                     å°†æµä¸­çš„å…ƒç´ å°è£…æˆSeté›†åˆ                     |
|                   `groupingBy(Function<? super T,? extends K>classifier)`                    |              æ ¹æ®åˆ†ç±»å‡½æ•°å¯¹å…ƒç´ è¿›è¡Œåˆ†ç»„,å¹¶å°†ç»“æœå°è£…æˆä¸€ä¸ªMapé›†åˆ              |
|  `groupingBy(Function<? super T,? extends K>classifier,Collector<? super T,A,D>downStream)`  | æ ¹æ®åˆ†ç±»å‡½æ•°å¯¹å…ƒç´ è¿›è¡Œåˆ†ç»„,å¹¶å°†ç»“æœå°è£…æˆä¸€ä¸ªMapé›†åˆ.ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¸€çº§åˆ†ç»„æ¡ä»¶,ç¬¬äºŒä¸ªå‚æ•°ä¸ºäºŒçº§åˆ†ç»„æ¡ä»¶ |

#### **æ•°æ®è¿‡æ»¤**
æ•°æ®è¿‡æ»¤å°±æ˜¯åœ¨æ‚ä¹±çš„æ•°æ®ä¸­ç­›é€‰å‡ºç¬¦åˆæ¡ä»¶çš„æ•°æ®,ç±»ä¼¼äºSQLè¯­å¥ä¸­çš„WHEREå…³é”®å­—,ç»™å‡ºä¸€å®šçš„æ¡ä»¶,å°†ç¬¦åˆæ¡ä»¶çš„æ•°æ®è¿‡æ»¤å¹¶å±•ç¤ºå‡ºæ¥

##### filter()æ–¹æ³•
> [!note] è¯´æ˜
> filter()æ–¹æ³•æ˜¯Streamæ¥å£æä¾›çš„è¿‡æ»¤æ–¹æ³•. è¯¥æ–¹æ³•å¯ä»¥å°†lambdaè¡¨è¾¾å¼ä½œä¸ºå‚æ•°,ç„¶åæŒ‰ç…§lambdaè¡¨è¾¾å¼çš„é€»è¾‘è¿‡æ»¤æ‰æµä¸­çš„å…ƒç´ . è¿‡æ»¤å‡ºæƒ³è¦çš„å…ƒç´ å,è¿˜éœ€è¦ä½¿ç”¨Streamæä¾›çš„collect()æ–¹æ³•æŒ‰ç…§æŒ‡å®šæ–¹æ³•è¿›è¡Œé‡æ–°å°è£…

```Java
import java.util.ArrayList;  
import java.util.List;  
import java.util.stream.Collectors;  
import java.util.stream.Stream;

public class FilterOddDemo {  
    static void printEach(String message, List list){  
        System.out.println(message);  
        list.stream().forEach(n->{  
            System.out.print(n+" ");  
        });  
        System.out.println();  
    }  
  
    public static void main(String[] args) {  
        List<Integer> list = new ArrayList<>();  
        for (int i = 0; i < 10; i++) {  
            list.add(i);  
        }  
        printEach("æ‰€æœ‰æ•°æ®",list);  
        Stream<Integer> stream1 = list.stream();  
        //å°†å¥‡æ•°è¿‡æ»¤å‡ºæ¥  
        stream1 = stream1.filter(n->n%2==1);  
        //å°†å¯¹è±¡é‡æ–°å°è£…æˆä¸€ä¸ªé›†åˆ  
        List<Integer> result = stream1.collect(Collectors.toList());  
        List<Integer> result1 = list.stream().filter(n->n%2==0).collect(Collectors.toList());  
        printEach("å¥‡æ•°æ•°æ®",result);  
        printEach("å¶æ•°æ•°æ®",result1);  
    }  
}
```

è¿è¡Œç»“æœ
```text
æ‰€æœ‰æ•°æ®
0 1 2 3 4 5 6 7 8 9 
å¥‡æ•°æ•°æ®
1 3 5 7 9 
```

è¿™ä¸ªç¤ºä¾‹å°†æµçš„**è·å–**,**è¿‡æ»¤**,**å°è£…**ä¸‰ä¸ªéƒ¨åˆ†çš„æ“ä½œåˆ†å¼€ç¼–å†™.é€šå¸¸ä¸ºäº†ä»£ç çš„ç®€æ´, å°†ä¸‰éƒ¨åˆ†å†™åˆ°ä¸€è¡Œä»£ç ä¸­(è¿‡æ»¤å¶æ•°æ•°æ®æ—¶ä½¿ç”¨çš„æ–¹æ³•). è¿™ç§å†™æ³•ä¹Ÿå¯ä»¥é¿å…ç»ˆç«¯æ“ä½œå¯¼è‡´çš„"æµè¢«æµªè´¹æ‰"çš„é—®é¢˜,å› ä¸ºæ¯æ¬¡è¢«æ“ä½œçš„å¯¹è±¡éƒ½æ˜¯ä»é›†åˆä¸­è·å–çš„.
```Java
List<Integer> result1 = list.stream().filter(n->n%2==0).collect(Collectors.toList());  
```

##### distinct()æ–¹æ³•
> [!note] è¯´æ˜
> distinct()æ–¹æ³•æ˜¯Streamæ¥å£æä¾›çš„è¿‡æ»¤æ–¹æ³•.è¯¥æ–¹æ³•å¯ä»¥å»é™¤æµä¸­çš„é‡å¤å…ƒç´ ,æ•ˆæœä¸SQLè¯­å¥çš„DISTINCTå…³é”®å­—ç›¸åŒ.

```Java
import java.util.ArrayList;  
import java.util.List;  
import java.util.stream.Collectors;  
  
public class distinctDemo {  
    static void printEach(String message, List list){  
        System.out.println( message);  
        list.stream().forEach(n->{  
            System.out.print(n+" ");  
        });  
        System.out.println();  
    }  
  
    public static void main(String[] args) {  
        List<Integer> list = new ArrayList<>();  
        for (int i = 0; i < 5; i++) {  
            list.add(i);  
        }  
        for (int i = 2; i < 6; i++) {  
            list.add(i);  
        }  
        printEach("å»é‡å‰:",list);  
        List<Integer> resultList = list.stream().distinct().collect(Collectors.toList());  
        printEach("å»é‡å:",resultList);  
  
    }  
}
```
è¿è¡Œç»“æœ
```text
å»é‡å‰:
0 1 2 3 4 2 3 4 5 
å»é‡å:
0 1 2 3 4 5 
```

ç”±äºdistinctå±äºä¸­é—´æ“ä½œ,æ‰€ä»¥å¯ä»¥å’Œfilterä¸€èµ·ä½¿ç”¨

##### limit()æ–¹æ³•
limit()æ–¹æ³•æ˜¯Streamæä¾›çš„æ–¹æ³•,è¯¥æ–¹æ³•å¯ä»¥**è·å–æµä¸­çš„å‰nä¸ªå…ƒç´ **
```Java
import java.util.ArrayList;  
import java.util.List;  
import java.util.stream.Collectors;  
  
public class limitDemo {  
    public static void printEach(String message, List list){  
        System.out.println(message);  
        list.stream().forEach(n->{  
            System.out.print(n+" ");  
        });  
        System.out.println();  
    }  
  
    public static void main(String[] args) {  
        List<Integer> list = new ArrayList<>();  
        for (int i = 0; i < 20; i++) {  
            list.add(i);  
        }  
        printEach("åŸå§‹æ•°æ®:",list);  
        List<Integer> resultList = list.stream().limit(10).collect(Collectors.toList());  
        printEach("æˆªå–å‰10ä¸ªæ•°æ®:",resultList);  
    }  
}
```

è¿è¡Œç»“æœ
```text
åŸå§‹æ•°æ®:
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 
æˆªå–å‰10ä¸ªæ•°æ®:
0 1 2 3 4 5 6 7 8 9 
```


##### skip()æ–¹æ³•
skip()æ–¹æ³•æ˜¯Streamæ¥å£æä¾›çš„æ–¹æ³•,è¯¥æ–¹æ³•å¯ä»¥**å¿½ç•¥æµä¸­çš„å‰nä¸ªå…ƒç´ **
```Java
import java.util.ArrayList;  
import java.util.List;  
import java.util.stream.Collectors;  
  
public class skipDemo {  
        public static void printEach(String message, List list){  
            System.out.println(message);  
            list.stream().forEach(n->{  
                System.out.print(n+" ");  
            });  
            System.out.println();  
        }  
  
        public static void main(String[] args) {  
            List<Integer> list = new ArrayList<>();  
            for (int i = 0; i < 20; i++) {  
                list.add(i);  
            }  
            printEach("åŸå§‹æ•°æ®:",list);  
            List<Integer> resultList = list.stream().skip(10).collect(Collectors.toList());  
            printEach("è·³è¿‡å‰10ä¸ªæ•°æ®:",resultList);  
        }  
}
```

è¿è¡Œç»“æœ
```text
åŸå§‹æ•°æ®:
0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 
è·³è¿‡å‰10ä¸ªæ•°æ®:
10 11 12 13 14 15 16 17 18 19 
```

#### **æ•°æ®æ˜ å°„**
> [!note] è¯´æ˜
> æ•°æ®çš„æ˜ å°„å’Œè¿‡æ»¤çš„æ¦‚å¿µä¸åŒ: è¿‡æ»¤æ˜¯åœ¨æµä¸­æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ,æ˜ å°„æ˜¯**åœ¨æµä¸­è·å¾—å…·ä½“æ•°æ®**.
> 
> Streamæ¥å£æä¾›äº†map()æ–¹æ³•ç”¨æ¥å®ç°æ•°æ®æ˜ å°„,map()æ–¹æ³•ä¼šæŒ‰ç…§å‚æ•°ä¸­çš„å‡½æ•°é€»è¾‘è·å–æ–°çš„æµå¯¹è±¡,æ–°çš„æµå¯¹è±¡ä¸­å…ƒç´ ç±»å‹å¯èƒ½ä¸æ—§çš„æµå…ƒç´ å¯¹è±¡å…ƒç´ ç±»å‹ä¸ç›¸åŒ.

```Java
import java.util.ArrayList;  
import java.util.List;  
  
public class Student {  
    private String name;  
    private int age;  
    private double score;  
    private String sex;  
  
    public Student(String name, int age, double score, String sex)  
    {  
        this.name = name;  
        this.age = age;  
        this.score = score;  
        this.sex = sex;  
    }  
    public String getName()  
    {  
        return name;  
    }  
    public int getAge()  
    {  
        return age;  
    }  
    public double getScore()  
    {  
        return score;  
    }  
    public String getSex(){  
        return sex;  
    }  
  
    static List<Student> getEmpList(){  
        List<Student> list = new ArrayList<Student>();  
        list.add(new Student("å¼ ä¸‰",18,88.8,"ç”·"));  
        list.add(new Student("æå››",19,99.9,"å¥³"));  
        list.add(new Student("ç‹äº”",20,77.7,"ç”·"));  
        list.add(new Student("èµµå…­",18,66.6,"å¥³"));  
        list.add(new Student("å­™ä¸ƒ",18,55.5,"å¥³"));  
        list.add(new Student("å‘¨å…«",20,44.4,"ç”·"));  
        return list;  
    }  
  
    @Override  
    public String toString() {  
        return "Student [name=" + name + ", age=" + age + ", score=" + score + ",sex:"+ sex+"]"; 
    }  
}

import java.util.List;  
import java.util.stream.Collectors;  
  
public class MapDemo {  
    public static void printEach(String message, List list){  
        System.out.println(message);  
        list.stream().forEach(n->{  
            System.out.print(n+" ");  
        });  
        System.out.println();  
    }  
    public static void main(String[] args) {  
        List<Student> list = Student.getEmpList();  
        List<String> resultList = list.stream()  
                .filter(s->s.getAge()==18)  
                .map(Student::getName)  
                .collect(Collectors.toList());  
        printEach("18å²å­¦ç”Ÿå§“å:",resultList);  
  
    }  
}
```
è¿è¡Œç»“æœ
```text
18å²å­¦ç”Ÿå§“å:
å¼ ä¸‰ èµµå…­ å­™ä¸ƒ 
```
åœ¨è¿™ä¸ªä¾‹å­ä¸­,é€šè¿‡mapæ˜ å°„å‡ºç¬¦åˆæ¡ä»¶çš„å­¦ç”Ÿ,ç„¶åè¾“å‡ºå¯¹åº”çš„å§“å.å¯è§ç»“æœçš„åˆ—è¡¨çš„ç±»å‹æ˜¯Stringè€ŒéStudent.

#### **æ•°æ®æŸ¥æ‰¾**
åœ¨è¿™é‡Œæˆ‘ä»¬æ‰€è®²çš„æ•°æ®æŸ¥æ‰¾å¹¶éæ˜¯ä»æµä¸­å»è·å–æ•°æ®,è€Œæ˜¯åˆ¤æ–­æµä¸­æ˜¯å¦æœ‰ç¬¦åˆæ¡ä»¶çš„æ•°æ®,è¿”å›å€¼æ˜¯ä¸€ä¸ªbooleanå€¼æˆ–è€…ä¸€ä¸ªOptionalç±»çš„å¯¹è±¡.

##### allMatch()æ–¹æ³• (å…¨ç§°é‡è¯)
> [!note] è¯´æ˜
> allMatch()æ–¹æ³•æ˜¯Streamæ¥å£æä¾›çš„æ–¹æ³•, è¯¥æ–¹æ³•ä¼šåˆ¤æ–­æµä¸­çš„å…ƒç´ **æ˜¯å¦å…¨éƒ¨ç¬¦åˆæŸä¸€æ¡ä»¶**,è¿”å›ç»“æœæ˜¯booleanå€¼.å¦‚æœå…¨éƒ¨ç¬¦åˆæ¡ä»¶åˆ™è¿”å›true,åä¹‹è¿”å›false

```Java
import java.util.List;  
import java.util.stream.Stream;  
  
public class AllMatchDemo {  
    public static void main(String[] args) {  
        List<Student> list = Student.getEmpList();  
        Stream<Student> stream = list.stream();  
        boolean result = stream.allMatch(s->s.getAge()>18);  
        System.out.println("æ‰€æœ‰äººçš„å¹´é¾„æ˜¯å¦éƒ½å¤§äº18:"+result);  
    }  
}
```
è¿è¡Œç»“æœ
```text
æ‰€æœ‰äººçš„å¹´é¾„æ˜¯å¦éƒ½å¤§äº18:false
```
ç”±äºæœ‰3ä¸ªäººçš„å¹´é¾„ä¸ç¬¦åˆå¤§äº18çš„æ¡ä»¶,æ‰€ä»¥æœ€åç»“æœè¿”å›äº†false.

##### anyMatch()æ–¹æ³• (å­˜åœ¨é‡è¯)
> [!note] è¯´æ˜
> anyMatch()æ–¹æ³•æ˜¯Streamæ¥å£æä¾›çš„æ–¹æ³•,è¯¥æ–¹æ³•ä¼šåˆ¤æ–­æµä¸­çš„å…ƒç´ æ˜¯å¦æœ‰ç¬¦åˆæŸä¸€æ¡ä»¶,åªæœ‰æœ‰ä¸€ä¸ªå…ƒç´ ç¬¦åˆæ¡ä»¶,å°±è¿”å›true,å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ,è¿”å›false.

```Java
import java.util.List;  
import java.util.stream.Stream;  
  
public class AnyMatchDemo {  
    public static void main(String[] args) {  
        List<Student> list = Student.getEmpList();  
        Stream<Student> stream = list.stream();  
        boolean result = stream.anyMatch(s->s.getAge()>18);  
        System.out.println("æ˜¯å¦å­˜åœ¨å¹´é¾„å¤§äº18çš„:"+result);  
    }  
}
```
è¿è¡Œç»“æœ
```text
æ˜¯å¦å­˜åœ¨å¹´é¾„å¤§äº18çš„:true
```

##### noneMatch()æ–¹æ³•
> [!note] è¯´æ˜
> noneMatch()æ–¹æ³•æ˜¯Streamæ¥å£æä¾›çš„æ–¹æ³•,è¯¥æ–¹æ³•ä¼šåˆ¤æ–­æµä¸­çš„å…ƒç´ *æ˜¯å¦éƒ½ä¸ç¬¦åˆæŸä¸€æ¡ä»¶*.ä¸allMatch()æ–¹æ³•ç›¸å

```Java
import java.util.List;  
import java.util.stream.Stream;  
  
public class noneMatchDemo {  
    public static void main(String[] args) {  
        List<Student> list = Student.getEmpList();  
        Stream<Student> stream = list.stream();  
        boolean result = stream.noneMatch(s->s.getAge()>18);  
        System.out.println("ä¸å­˜åœ¨å¹´é¾„å¤§äº18çš„:"+result);  
    }  
}
```
è¿è¡Œç»“æœ
```text
ä¸å­˜åœ¨å¹´é¾„å¤§äº18çš„:false
```
å› ä¸ºæˆå‘˜ä¸­æœ‰å­˜åœ¨18å²çš„,æ‰€ä»¥è¿”å›äº†false

##### findFirst()æ–¹æ³•
> [!note] è¯´æ˜
> findFirst()æ–¹æ³•æ˜¯Streamæ¥å£æä¾›çš„æ¥å£æ–¹æ³•,è¿™ä¸ªæ–¹æ³•ä¼š*è¿”å›ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ *

```Java
import java.util.List;  
import java.util.Optional;  
import java.util.stream.Collectors;  
  
public class findFirstDemo {  
    public static void printEach(String message, List list){  
        System.out.println(message);  
        list.stream().forEach(n->{  
            System.out.print(n+" ");  
        });  
        System.out.println();  
    }  
    public static void main(String[] args) {  
        List<Student> list = Student.getEmpList();  
  
        List<Student> result = list.stream().filter(s->s.getAge()>18).collect(Collectors.toList());  
        printEach("è¿‡æ»¤åç»“æœ:",result);  
        Optional<Student> young = result.stream().findFirst();  
        System.out.println("ç¬¬ä¸€ä¸ªå¹´é¾„å¤§äº18çš„:"+young.get());  
    }  
}
```
è¿è¡Œç»“æœ
```text
è¿‡æ»¤åç»“æœ:
Student [name=æå››, age=19, score=99.9,sex:å¥³] Student [name=ç‹äº”, age=20, score=77.7,sex:ç”·] Student [name=å‘¨å…«, age=20, score=44.4,sex:ç”·] 
ç¬¬ä¸€ä¸ªå¹´é¾„å¤§äº18çš„:æå››
```


#### **æ•°æ®æ”¶é›†**
æ•°æ®æ”¶é›†å¯ä»¥ç†è§£ä¸ºé«˜çº§çš„"æ•°æ®è¿‡æ»¤+æ•°æ®æ˜ å°„", æ˜¯å¯¹æ•°æ®çš„æ·±åŠ å·¥.æˆ‘ä»¬å°†è®²è§£ä¸¤ç§å®ç”¨çš„åœºæ™¯:
##### æ•°æ®ç»Ÿè®¡
> [!note] è¯´æ˜
> æ•°æ®ç»Ÿè®¡ä¸ä»…èƒ½ç­›é€‰å‡ºç‰¹æ®Šå…ƒç´ ,è¿˜å¯ä»¥å¯¹å…ƒç´ çš„å±æ€§è¿›è¡Œè®¡ç®—.è¿™ç§å¤æ‚çš„æ“ä½œå¹¶éæ˜¯ç”±Streamå®ç°çš„,è€Œæ˜¯é€šè¿‡Collectoræ”¶é›†å™¨ç±»å®ç°çš„,æ”¶é›†å™¨æä¾›äº†ä¸°å¯Œçš„API,æœ‰ç€å¼ºå¤§çš„æ•°æ®æŒ–æ˜çš„èƒ½åŠ›


ä¾‹:ç»Ÿè®¡å„é¡¹æ•°æ®å¹¶è¾“å‡ºæŠ¥è¡¨
```Java
import java.util.Comparator;  
import java.util.DoubleSummaryStatistics;  
import java.util.List;  
import java.util.Optional;  
import java.util.stream.Collectors;  
  
public class ReducingDemo {  
    public static void main(String[] args) {  
        List<Student> list = Student.getEmpList();  
  
        long count = list.stream().count();  
        System.out.println("å­¦ç”Ÿæ€»äººæ•°:"+ count);  
  
        //é€šè¿‡æ¯”è¾ƒå™¨æ¯”è¾ƒå¹´é¾„  
        Optional<Student> ageMax = list.stream()  
                .collect(Collectors.maxBy(Comparator.comparing(Student::getAge)));  
        Student older = ageMax.get();  
        System.out.println("å¹´é¾„æœ€å¤§çš„å­¦ç”Ÿ:"+older);  
  
        Optional<Student> ageMin = list.stream()  
                .collect(Collectors.minBy(Comparator.comparing(Student::getAge)));  
        Student younger = ageMin.get();  
        System.out.println("å¹´é¾„æœ€å°çš„å­¦ç”Ÿ:"+younger);  
  
        double scoreSum = list.stream()  
                .collect(Collectors.summingDouble(Student::getScore));  
        System.out.println("æ‰€æœ‰å­¦ç”Ÿçš„æ€»åˆ†:"+scoreSum);  
  
        double scoreAvg = list.stream()  
                .collect(Collectors.averagingDouble(Student::getScore));  
        System.out.println("æ‰€æœ‰å­¦ç”Ÿçš„å¹³å‡åˆ†:"+scoreAvg);  
  
        System.out.println();  
          
        DoubleSummaryStatistics s = list.stream()  
                .collect(Collectors.summarizingDouble(Student::getScore));  
        System.out.println("æ‰€æœ‰å­¦ç”Ÿçš„ç»Ÿè®¡ä¿¡æ¯:"+s);  
        System.out.println("æ‰€æœ‰å­¦ç”Ÿçš„æœ€å¤§åˆ†:"+s.getMax());  
        System.out.println("æ‰€æœ‰å­¦ç”Ÿçš„æœ€å°åˆ†:"+s.getMin());  
        System.out.println("æ‰€æœ‰å­¦ç”Ÿçš„å¹³å‡åˆ†:"+s.getAverage());  
        System.out.println("æ‰€æœ‰å­¦ç”Ÿçš„æ€»æ•°:"+s.getCount());  
        System.out.println("æ‰€æœ‰å­¦ç”Ÿçš„å’Œ:"+s.getSum());  
    }  
}
```
è¿è¡Œç»“æœ
```Java
å­¦ç”Ÿæ€»äººæ•°:6
å¹´é¾„æœ€å¤§çš„å­¦ç”Ÿ:Student [name=ç‹äº”, age=20, score=77.7,sex:ç”·]
å¹´é¾„æœ€å°çš„å­¦ç”Ÿ:Student [name=å¼ ä¸‰, age=18, score=88.8,sex:ç”·]
æ‰€æœ‰å­¦ç”Ÿçš„æ€»åˆ†:432.9
æ‰€æœ‰å­¦ç”Ÿçš„å¹³å‡åˆ†:72.14999999999999

æ‰€æœ‰å­¦ç”Ÿçš„ç»Ÿè®¡ä¿¡æ¯:DoubleSummaryStatistics{count=6, sum=432.900000, min=44.400000, average=72.150000, max=99.900000}
æ‰€æœ‰å­¦ç”Ÿçš„æœ€å¤§åˆ†:99.9
æ‰€æœ‰å­¦ç”Ÿçš„æœ€å°åˆ†:44.4
æ‰€æœ‰å­¦ç”Ÿçš„å¹³å‡åˆ†:72.14999999999999
æ‰€æœ‰å­¦ç”Ÿçš„æ€»æ•°:6
æ‰€æœ‰å­¦ç”Ÿçš„å’Œ:432.9
```

##### æ•°æ®åˆ†ç»„
> [!note] è¯´æ˜
> æ•°æ®åˆ†ç»„å°±æ˜¯å°†æµä¸­çš„å…ƒç´ æŒ‰ç…§æŒ‡å®šçš„æ¡ä»¶åˆ†å¼€ä¿å­˜,ç±»ä¼¼SQLè¯­å¥ä¸­çš„GROUP BYå…³é”®å­—. åˆ†ç»„ä¹‹åçš„æ•°æ®ä¼šè¢«æŒ‰ç…§ä¸åŒçš„æ ‡ç­¾åˆ†åˆ«ä¿å­˜åˆ°ä¸€ä¸ªé›†åˆä¸­,ç„¶åæŒ‰ç…§é”®å€¼å¯¹çš„å½¢å¼å°è£…åœ¨Mapå¯¹è±¡ä¸­.

ä¾‹:å°†å­¦ç”Ÿä¿¡æ¯æŒ‰ç…§åˆ†æ•°æ®µåˆ†ç»„,å†æŒ‰ç…§æ€§åˆ«åˆ†ç»„
```Java
import java.util.List;  
import java.util.Map;  
import java.util.function.Function;  
import java.util.stream.Collectors;  
import java.util.stream.Stream;  
  
public class GroupingDemo {  
    public static void main(String[] args) {  
        List<Student> list = Student.getEmpList();  
        Stream<Student> stream = list.stream();  
        //ä¸€çº§åˆ†ç»„:æŒ‰ç…§åˆ†æ•°æ®µ  
        Function<Student,Double> scoreFun = Student::getScore;  
        //äºŒçº§åˆ†ç»„:æŒ‰ç…§æ€§åˆ«åˆ†ç»„  
        Function<Student,String> sexFun = Student::getSex;  
        //å°†æµä¸­çš„æ•°æ®è¿›è¡ŒäºŒæ¬¡åˆ†ç»„,å…ˆå¯¹åˆ†æ•°æ®µåˆ†ç»„å†å¯¹æ€§åˆ«åˆ†ç»„  
        Map<String,Map<String,List<Student>>> grouped = list.stream()  
                .collect(Collectors.groupingBy(s->{  
                    if(scoreFun.apply(s)>=90)  
                        return "ä¼˜ç§€";  
                    else if(scoreFun.apply(s)>=80)  
                        return "è‰¯å¥½";  
                    else if(scoreFun.apply(s)>=70)  
                        return "åŠæ ¼";  
                    else  
                        return "ä¸åŠæ ¼";  
                },Collectors.groupingBy(Student::getSex)));  
        grouped.forEach((scoreLevel, genderMap) -> {  
            System.out.println(scoreLevel + ":");  
            genderMap.forEach((gender, students) -> {  
                System.out.println("  " + gender + ": " + students);  
            });  
        });  
    }  
}
```

è¿è¡Œç»“æœ
```text
ä¸åŠæ ¼:
  å¥³: [Student [name=èµµå…­, age=18, score=66.6,sex:å¥³], Student [name=å­™ä¸ƒ, age=18, score=55.5,sex:å¥³]]
  ç”·: [Student [name=å‘¨å…«, age=20, score=44.4,sex:ç”·]]
ä¼˜ç§€:
  å¥³: [Student [name=æå››, age=19, score=99.9,sex:å¥³]]
åŠæ ¼:
  ç”·: [Student [name=ç‹äº”, age=20, score=77.7,sex:ç”·]]
è‰¯å¥½:
  ç”·: [Student [name=å¼ ä¸‰, age=18, score=88.8,sex:ç”·]]
```


---

## 3.7 Java I/O
> [!note] ä»‹ç»
> åœ¨å˜é‡,æ•°ç»„å’Œå¯¹è±¡ä¸­,å­˜å‚¨çš„æ•°æ®éƒ½æ˜¯å’±æ˜¯å­˜åœ¨çš„,å½“ç¨‹åºç»“æŸçš„æ—¶å€™ä¾¿æ¶ˆå¤±. è‹¥è¦æ°¸ä¹…ä¿å­˜ç¨‹åºåˆ›å»ºçš„æ•°æ®, å°±éœ€è¦å°†å…¶ä¿å­˜åˆ°ç£ç›˜æ–‡ä»¶ä¸­,è€Œåªæœ‰å°†æ•°æ®å­˜å‚¨èµ·æ¥,åœ¨å…¶ä»–ç¨‹åºä¸­æ‰èƒ½å¤Ÿä½¿ç”¨å®ƒä»¬. [[JavaIO]]æŠ€æœ¯å¯ä»¥å°†æ•°æ®ä¿å­˜åˆ°æ–‡æœ¬æ–‡ä»¶,äºŒè¿›åˆ¶æ–‡ä»¶ç”šè‡³æ˜¯zipå‹ç¼©æ–‡ä»¶ä¸­,ä»¥è¾¾åˆ°æ°¸ä¹…ä¿å­˜æ•°æ®çš„è¦æ±‚.
> 
> åœ¨ç¨‹åºå¼€å‘çš„è¿‡ç¨‹ä¸­,æˆ‘ä»¬å°†è¾“å…¥ä¸è¾“å‡ºè®¾å¤‡ä¹‹é—´çš„æ•°æ®ä¼ é€’æŠ½è±¡ä¸ºæµ, æ ¹æ®æµçš„æ–¹å‘åˆå¯ä»¥åˆ†ä¸ºè¾“å…¥æµå’Œè¾“å‡ºæµ
> 
> ä»å†…å­˜çš„è§’åº¦æ¥è®², è¾“å…¥æ˜¯æŒ‡æ•°æ®ä»æ•°æ®æºæµå…¥å†…å­˜ä¸­çš„è¿‡ç¨‹, è¾“å‡ºæ˜¯æŒ‡æ•°æ®ä»å†…å­˜æµå‡ºè¿›å…¥åˆ°æ•°æ®æºçš„è¿‡ç¨‹
> 
Javaè¯­è¨€å®šä¹‰äº†è®¸å¤šç±»,ä¸“é—¨è´Ÿè´£å„ç§æ–¹å¼çš„è¾“å…¥å’Œè¾“å‡º, è¿™äº›ç±»è¢«æ”¾åœ¨**java.io**åŒ…ä¸­. å…¶ä¸­,æ‰€æœ‰çš„è¾“å…¥æµç±»éƒ½æ˜¯æŠ½è±¡ç±»**InputStream(å­—èŠ‚è¾“å…¥æµ)** æˆ–æŠ½è±¡ç±» **Reader(å­—ç¬¦è¾“å…¥æµ)** çš„å­ç±»; è€Œæ‰€æœ‰çš„è¾“å‡ºæµéƒ½æ˜¯æŠ½è±¡ç±»**OutputStream(å­—èŠ‚è¾“å‡ºæµ)** æˆ–æŠ½è±¡ç±»**Writer(å­—ç¬¦è¾“å‡ºæµ)** çš„å­ç±»

### è¾“å…¥è¾“å‡ºæµ
#### **InputStreamå­—èŠ‚/Readerå­—ç¬¦è¾“å…¥æµ**
- InputStreamç±»æ˜¯å­—èŠ‚è¾“å…¥æµçš„æŠ½è±¡ç±»,å®ƒæ˜¯æ‰€æœ‰å­—èŠ‚è¾“å…¥æµçš„çˆ¶ç±». **è¯¥ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•é‡åˆ°é”™è¯¯éƒ½ä¼šæŠ›å‡ºIOExceptionå¼‚å¸¸**

InputStreamçš„å¸¸ç”¨æ–¹æ³•:

|         æ–¹æ³•          |                           è¯´æ˜                            |
| :-----------------: | :-----------------------------------------------------: |
|       read()        | ä»è¾“å…¥æµä¸­è¯»å–æ•°æ®çš„ä¸‹ä¸€ä¸ªå­—èŠ‚,è¿”å›0~255çš„intå­—èŠ‚å€¼.å¦‚æœå› ä¸ºå·²ç»åˆ°è¾¾æµæœ«å°¾è€Œæ²¡æœ‰å¯ç”¨çš„å­—èŠ‚,åˆ™è¿”å›1 |
|  `read(byte []b)`   |               ä»è¾“å…¥æµä¸­è¯»å–ä¸€å®šé•¿åº¦çš„å­—èŠ‚,å¹¶ä»¥æ•´æ•°çš„å½¢å¼è¿”å›å­—èŠ‚æ•°               |
| mark(int readlimit) |   åœ¨è¾“å…¥æµå½“å‰ä½ç½®æ”¾ç½®ä¸€ä¸ªæ ‡è®°, readlimitå‚æ•°å‘ŠçŸ¥æ­¤è¾“å…¥æµåœ¨æ ‡è®°ä½ç½®å¤±æ•ˆä¹‹å‰å…è®¸è¯»å–çš„å­—èŠ‚æ•°    |
|       reset()       |                     å°†è¾“å…¥æŒ‡é’ˆè¿”å›å½“å‰æ‰€åšçš„æ ‡è®°å¤„                     |
|    skip(long n)     |                 è·³è¿‡è¾“å…¥æµä¸Šçš„nä¸ªå­—èŠ‚å¹¶è¿”å›å®é™…è·³è¿‡çš„å­—èŠ‚æ•°                  |
|   markSupported()   |             å¦‚æœå½“å‰æµæ”¯æŒmark()æˆ–reset()æ“ä½œ,å°±è¿”å›true             |
|        close        |                  å…³é—­æ­¤è¾“å…¥æµå¹¶é‡Šæ”¾ä¸è¯¥æµç›¸å…³çš„æ‰€æœ‰ç³»ç»Ÿèµ„æº                  |

- Javaå­—ç¬¦æ˜¯Unicodeç¼–ç çš„,å¹¶ä¸”æ˜¯åŒå­—èŠ‚çš„. InputStreamæ˜¯ç”¨æ¥å¤„ç†å­—èŠ‚çš„,å¹¶ä¸é€‚åˆå¤„ç†å­—ç¬¦æ–‡æœ¬. Javaä¸ºå­—ç¬¦æ–‡æœ¬çš„è¾“å…¥ä¸“é—¨æä¾›äº†ä¸€å¥—å•ç‹¬çš„ç±»,å³**Readerç±»**, ä½†æ˜¯Readerå¹¶éæ˜¯InputStreamçš„æ›¿ä»£è€…,åªæ˜¯åœ¨å¤„ç†å­—ç¬¦ä¸²æ—¶ç®€åŒ–äº†ç¼–ç¨‹.

#### **OutputStreamå­—èŠ‚/Writerå­—ç¬¦è¾“å‡ºæµ**
- OutputStreamç±»æ˜¯å­—èŠ‚è¾“å‡ºæµçš„æŠ½è±¡ç±», æ­¤æŠ½è±¡ç±»æ˜¯è¡¨ç¤ºè¾“å‡ºå­—èŠ‚æµçš„æ‰€æœ‰ç±»çš„è¶…ç±». OutputStreamçš„æ–¹æ³•è¿”å›å€¼å‡ä¸ºvoid, åœ¨é‡åˆ°é”™è¯¯æ—¶ä¼šæŠ›å‡ºIOExceptionå¼‚å¸¸.

OutputStreamçš„ä¸€äº›å¸¸ç”¨æ–¹æ³•:

|                æ–¹æ³•                 |                 æè¿°                 |
| :-------------------------------: | :--------------------------------: |
|           write(int b)            |            å°†æŒ‡å®šçš„å­—èŠ‚å†™å…¥è¯¥è¾“å‡ºæµ            |
|         `write(byte[] b)`         |      å°†bä¸ªå­—èŠ‚ä»æŒ‡å®šçš„byteæ•°ç»„ä¸­å†™å…¥åˆ°è¯¥è¾“å‡ºæµä¸­      |
| `write(byte[] b,int off,int len)` | å°†æŒ‡å®šçš„byteæ•°ç»„ä¸­ä»åç§»é‡offå¼€å§‹çš„lenä¸ªå­—èŠ‚å†™å…¥æ­¤è¾“å…¥æµä¸­ |
|              flush()              |            å½»åº•å®Œæˆè¾“å‡ºå¹¶æ¸…ç©ºç¼“å†²åŒº            |
|               close               |               å…³é—­è¾“å‡ºæµ                |

- Writerç±»æ˜¯å­—ç¬¦è¾“å‡ºæµçš„æŠ½è±¡ç±»,æ‰€æœ‰å­—ç¬¦è¾“å‡ºç±»çš„å®ç°éƒ½æ˜¯å®ƒçš„å­ç±».
### Fileç±»
> [!note] æ¦‚è¿°
> Fileç±»æ˜¯java.ioåŒ…ä¸­å”¯ä¸€ä»£è¡¨ç£ç›˜æ–‡ä»¶æœ¬èº«çš„ç±». Fileç±»å®šä¹‰äº†ä¸€äº›ä¸å¹³å°æ— å…³çš„æ–¹æ³•æ¥æ“ä½œæ–‡ä»¶, è¿™æ„å‘³ç€ç¨‹åºå¼€å‘è€…å¯ä»¥é€šè¿‡è°ƒç”¨Fileç±»ä¸­çš„æ–¹æ³•æ¥å®ç°**åˆ›å»º,åˆ é™¤,é‡å‘½å**æ–‡ä»¶ç­‰æ“ä½œ.
> 
> Fileç±»çš„å¯¹è±¡ä¸»è¦ç”¨æ¥è·å–æ–‡ä»¶æœ¬èº«çš„ä¸€äº›ä¿¡æ¯, å¦‚æ–‡ä»¶æ‰€åœ¨ç›®å½•,æ–‡ä»¶çš„é•¿åº¦,è¯»å–æƒé™ç­‰. æ•°æ®æµå¯ä»¥å°†æ•°æ®å†™å…¥æ–‡ä»¶ä¸­,æ–‡ä»¶ä¹Ÿæ˜¯æ•°æ®æµæœ€å¸¸ç”¨çš„æ•°æ®åª’ä½“.

#### **æ–‡ä»¶çš„åˆ›å»ºå’Œåˆ é™¤**
å¯ä»¥ä½¿ç”¨Fileç±»åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¯¹è±¡,é€šå¸¸ä½¿ç”¨ä¸‰ç§æ„é€ æ–¹æ³•æ¥åˆ›å»º

|                 æ–¹æ³•                 |                      æè¿°                       |
| :--------------------------------: | :-------------------------------------------: |
|      `File(String pahtName)`       | è¯¥æ„é€ æ–¹æ³•é€šè¿‡ç»™å®šçš„è·¯å¾„åç§°å­—ç¬¦ä¸²è½¬æ¢ä¸ºæŠ½è±¡è·¯å¾„æ¥åˆ›å»ºå®ä¾‹,å…¶ä¸­pathNameåŒ…å«æ–‡ä»¶å |
| `File(String parent,String child)` |    è¯¥æ„é€ æ–¹æ³•æ ¹æ®å®šä¹‰çš„çˆ¶è·¯å¾„å’Œå­è·¯å¾„å­—ç¬¦ä¸²(åŒ…å«æ–‡ä»¶å)åˆ›å»ºä¸€ä¸ªæ–°çš„Fileå¯¹è±¡    |
|    `File(File f, String child)`    |   è¯¥æ„é€ æ–¹æ³•æ ¹æ®æ–‡ä»¶fçš„æŠ½è±¡è·¯å¾„åå’Œchildè·¯å¾„åå­—å­—ç¬¦ä¸²åˆ›å»ºä¸€ä¸ªæ–°çš„Fileå®ä¾‹   |
ç¤ºä¾‹ä»£ç 
```java
public class Create_Delete {  
    public static void main(String[] args) {  
        File file = new File("F:/test.txt");  
        if (file.exists()){  
            file.delete();  
            System.out.println("æ–‡ä»¶å·²åˆ é™¤");  
        }  
        else{  
            try {  
                file.createNewFile();  
                System.out.println("æ–‡ä»¶å·²åˆ›å»º");  
            } catch (Exception e) {  
                e.printStackTrace();  
            }  
        }  
    }  
}
```
ä¸Šè¿°ä»£ç åˆ¤æ–­åœ¨Fç›˜ä¸­æ˜¯å¦å­˜åœ¨test.txtæ–‡ä»¶,å¦‚æœå­˜åœ¨,åˆ™åˆ é™¤,å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»º

#### **è·å–æ–‡ä»¶ä¿¡æ¯**
Fileç±»æä¾›äº†å¾ˆå¤šæ–¹æ³•ç”¨äºè·å–æ–‡ä»¶çš„ä¿¡æ¯

|        æ–¹æ³•         |   è¿”å›å€¼   |       è¯´æ˜       |       æ–¹æ³•       |   è¿”å›å€¼   |          è¯´æ˜           |
| :---------------: | :-----: | :------------: | :------------: | :-----: | :-------------------: |
|     getName()     | String  |     è·å–æ–‡ä»¶åç§°     |  getParent()   | String  |       è·å–æ–‡ä»¶çš„çˆ¶è·¯å¾„        |
|     canRead()     | boolean |    åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¯è¯»    |    isFile()    | boolean | åˆ¤æ–­æŠ½è±¡è·¯å¾„åè¡¨ç¤ºçš„æ–‡ä»¶æ˜¯å¦ä¸ºä¸€ä¸ªæ ‡å‡†æ–‡ä»¶ |
|    canWrite()     | boolean |    åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¯å†™    | isDirectory()  | boolean |      åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¸ºä¸€ä¸ªç›®å½•      |
|     exists()      | boolean |    åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨    |   isHidden()   | boolean |      åˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¸ºéšè—æ–‡ä»¶      |
|     length()      |  long   | è·å–æ–‡ä»¶é•¿åº¦(ä»¥å­—èŠ‚ä¸ºå•ä½) | lastModified() |  long   |      è·å–æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´      |
| getAbsolutePath() | String  |   è·å–æ–‡ä»¶çš„ç»å¯¹è·¯å¾„    |                |         |                       |
ç¤ºä¾‹ä»£ç 
```Java
public class getInfo {  
    public static void main(String[] args) {  
        File file = new File("F:/test.txt");  
        //åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨  
        if(file.exists()){  
            //è·å–æ–‡ä»¶å  
            String name = file.getName();  
            //è·å–æ–‡ä»¶å¤§å°  
            long size = file.length();  
            //åˆ¤æ–­æ–‡ä»¶æ˜¯å¦éšè—  
            boolean isHidden = file.isHidden();  
            //è¾“å‡ºæ–‡ä»¶ä¿¡æ¯  
            System.out.println("æ–‡ä»¶åï¼š" + name + "ï¼Œæ–‡ä»¶å¤§å°ï¼š" + size + "ï¼Œæ–‡ä»¶æ˜¯å¦éšè—ï¼š" + isHidden);  
        }  
        else{  
            System.out.println("æ–‡ä»¶ä¸å­˜åœ¨");  
        }  
    }  
}
```


### æ–‡ä»¶è¾“å…¥è¾“å‡ºæµ

> [!note] æ¦‚è¿°
> ç¨‹åºè¿è¡ŒæœŸé—´,å¤§éƒ¨åˆ†æ•°æ®åœ¨å†…å­˜ä¸­è¢«æ“ä½œ,å½“ç¨‹åºè¢«å…³é—­æ—¶,è¿™äº›æ•°æ®å°†ä¼šæ¶ˆå¤±. å¦‚æœéœ€è¦å°†æ•°æ®æ°¸ä¹…ä¿å­˜,åˆ™éœ€è¦é€šè¿‡æ–‡ä»¶è¾“å…¥è¾“å‡ºæµæ¥å°†ä»–ä»¬**å†™å…¥åˆ°æ–‡ä»¶ä¸­**.

#### **FileInputStreamå’ŒFileOutputStream**
FileInputStreamå’ŒFileOutputStreamç±»ç”¨äº**æ“ä½œç£ç›˜æ–‡ä»¶**. è¿™ä¸¤ä¸ªç±»çš„åŠŸèƒ½ç›¸å¯¹åº”, æä¾›äº†åŸºæœ¬çš„å†™å…¥èƒ½åŠ›.

ä¸¤ä¸ªç±»éƒ½å…·æœ‰ä¸¤ç§å¸¸ç”¨çš„æ„é€ æ–¹æ³•
```Java
//ä½¿ç”¨ç»™å®šçš„æ–‡ä»¶ååˆ›å»ºæµå¯¹è±¡
FileInputStream|FileOutputStream(String name);
//ä½¿ç”¨Fileå¯¹è±¡åˆ›å»ºæµå¯¹è±¡

FileInputStream|FileOutputStream(File file);
```

ç¤ºä¾‹ä»£ç 
```Java
public class FileTest {  
    public static void main(String[] args) {  
        File file = new File("F:/test.txt");  
        // æ–‡ä»¶å†™å…¥æ“ä½œï¼šåˆ›å»ºFileOutputStreamå¯¹è±¡ï¼Œå°†"Hello World"å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„å¹¶å†™å…¥æ–‡ä»¶  
        try {  
            // åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµ  
            FileOutputStream out = new FileOutputStream(file);  
            // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„  
            byte b[] = "Hello World".getBytes();  
            // å°†å­—èŠ‚æ•°ç»„å†™å…¥æ–‡ä»¶  
            out.write(b);  
            // å…³é—­è¾“å‡ºæµ  
            out.close();  
        }catch (IOException e){  
            e.printStackTrace();  
        }  
  
        // æ–‡ä»¶è¯»å–æ“ä½œï¼šåˆ›å»ºFileInputStreamå¯¹è±¡ï¼Œä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®å¹¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¾“å‡º  
        try {  
            // åˆ›å»ºæ–‡ä»¶è¾“å…¥æµ  
            FileInputStream in = new FileInputStream(file);  
            // åˆ›å»ºå­—èŠ‚æ•°ç»„ç”¨äºå­˜å‚¨è¯»å–çš„æ•°æ®  
            byte b[] = new byte[1024];  
            // ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®åˆ°å­—èŠ‚æ•°ç»„ï¼Œè¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°  
            int len = in.read(b);  
            // å°†å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶è¾“å‡º  
            System.out.println("æ–‡ä»¶ä¸­çš„ä¿¡æ¯æ˜¯:"+new String(b,0,len));  
            // å…³é—­è¾“å…¥æµ
            in.close();                                          
        }catch (IOException e){  
            e.printStackTrace();  
        }  
    }  
}
```
ç¨‹åºè¿è¡Œåä¼šåœ¨Fç›˜æ ¹ç›®å½•ä¸‹çš„test.txtæ–‡ä»¶ä¸­å†™å…¥ä¸€è¡Œæ–‡å­—,å¹¶åœ¨æ§åˆ¶å°ä¸Šç”Ÿæˆå†™å…¥çš„å†…å®¹


#### **FileReaderå’ŒFileWriter**
> [!note] æ¦‚è¿°
> ä½¿ç”¨FileOutputStreamå‘æ–‡ä»¶ä¸­å†™å…¥æ•°æ®å’Œç”¨FileInputStreamä»æ–‡ä»¶ä¸­è¯»å–å†…å®¹éƒ½å­˜åœ¨ä¸€ç‚¹ä¸è¶³--è¿™ä¸¤ä¸ªç±»åªæä¾›äº†å¯¹å­—èŠ‚æˆ–å­—èŠ‚æ•°ç»„çš„è¯»å–æ–¹æ³•. ç”±äºæ±‰å­—åœ¨æ–‡ä»¶ä¸­å ç”¨ä¸¤ä¸ªå­—èŠ‚,å¦‚æœä½¿ç”¨å­—èŠ‚è¾“å…¥è¾“å‡ºæµ,è¯»å–ä¸å¥½æ—¶ä¼šå‡ºç°ä¹±ç , æ­¤æ—¶é‡‡ç”¨å­—ç¬¦è¾“å…¥è¾“å‡ºæµFileReaderå’ŒFileWriterè¿›è¡Œæ“ä½œå³å¯é¿å…è¿™ç§ç°è±¡.
> 
> FileReaderå’ŒFileWriterç±»åˆ†åˆ«å¯¹åº”FileInputStreamå’ŒFileOutputStream.FileReaderç±»é¡ºåºåœ°è¯»å–æ–‡ä»¶,åªè¦ä¸å…³é—­æµ,æ¯æ¬¡è°ƒç”¨read()æ–¹æ³•å°±èƒ½å¤Ÿé¡ºåºè¯»å–æºä¸­çš„å…¶ä»–å†…å®¹,ç›´åˆ°æºæœ«æˆ–æµå…³é—­

> [!example] ç¤ºä¾‹: è¯»å–Fç›˜ä¸­çš„test.txtæ–‡ä»¶å†™å…¥ä¸€å¥è¯å¹¶è¯»å–,å°†è¯»å–åˆ°çš„å†…å®¹è¾“å‡ºåˆ°æ§åˆ¶å°ä¸Š
```Java
import java.io.File;  
import java.io.FileReader;  
import java.io.FileWriter;  
  
public class FileReaderDemo {  
    public static void main(String[] args) {  
        File file = new File("F:/test.txt");  
        try {  
            FileWriter fileWriter = new FileWriter(file);  
            String str = "é—®å›èƒ½æœ‰å‡ å¤šæ„,æ°ä¼¼ä¸€æ±Ÿæ˜¥æ°´å‘ä¸œæµ";  
            fileWriter.write(str);  
            fileWriter.close();  
        }        
        catch (Exception e) {  
            e.printStackTrace();  
        }        
        try {  
            FileReader fileReader = new FileReader(file);  
            char ch[] = new char[1024];  
            int len = fileReader.read(ch);  
            System.out.println("æ–‡ä»¶ä¸­çš„å†…å®¹æ˜¯:"+new String(ch,0,len));  
            fileReader.close();  
        }        
        catch (Exception e) {  
            e.printStackTrace();  
        }    
    }     
}
```

è¿è¡Œç»“æœ:
```text
æ–‡ä»¶ä¸­çš„å†…å®¹æ˜¯:é—®å›èƒ½æœ‰å‡ å¤šæ„,æ°ä¼¼ä¸€æ±Ÿæ˜¥æ°´å‘ä¸œæµ
```

### å¸¦ç¼“å­˜çš„è¾“å…¥è¾“å‡ºæµ
> [!question] ä»€ä¹ˆæ˜¯å¸¦ç¼“å­˜çš„è¾“å…¥è¾“å‡ºæµ?
> **ç¼“å­˜**æ˜¯I/Oçš„ä¸€ç§æ€§èƒ½ä¼˜åŒ–. ç¼“å­˜æµä¸ºI/Oå¢åŠ äº†å†…å­˜ç¼“å­˜åŒº,è¿™ä½¿å¾—åœ¨æµä¸Šè¿è¡Œ`skip()`,`mark()`å’Œ`reset()`æ–¹æ³•éƒ½æˆä¸ºå¯èƒ½

#### **BufferedInputStreamå’ŒBufferedOutputStream**
> [!note] æ¦‚è¿°
> 1. BufferedInputStreamç±»å¯¹æ‰€æœ‰çš„InputStreamç±»è¿›è¡Œå¸¦ç¼“å­˜çš„åŒ…è£…ä»¥è¾¾åˆ°å¯¹æ€§èƒ½çš„ä¼˜åŒ–. å…¶ä¸¤ç§æ„é€ æ–¹æ³•å¦‚ä¸‹
> 	- `BufferedInputStream(InputStream in)`
> 	- `BufferedInputStream(InputStream in,int size)`
> ç¬¬ä¸€ç§æ„é€ æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªæœ‰32ä¸ªå­—èŠ‚çš„ç¼“å­˜åŒº,ç¬¬äºŒç§çš„æ„é€ æŒ‰ç…§æŒ‡å®šçš„å¤§å°æ¥åˆ›å»ºç¼“å­˜åŒº. 
> ä¸€ä¸ªæœ€ä¼˜ç¼“å­˜åŒºçš„å¤§å°å–å†³äºå®ƒæ‰€åœ¨çš„æ“ä½œç³»ç»Ÿ,å¯ç”¨çš„å†…å­˜ç©ºé—´ä»¥åŠæœºå™¨é…ç½®
> BufferedInputStreamè¯»å–æ–‡ä»¶çš„è¿‡ç¨‹å¦‚ä¸‹å›¾
> ```mermaid
> graph LR
> A[æ–‡ä»¶] --> B[InputStream]
> B --> C[BufferedInputStream]
> C --> D[ç›®çš„åœ°]
> ```
> 2. ä½¿ç”¨BufferedOutputStreamç±»è¾“å‡ºä¿¡æ¯ä¸ä»…ç”¨OutputStreamè¾“å‡ºä¿¡æ¯å®Œå…¨ç›¸åŒ,åªä¸è¿‡BufferedOutputStreamç±»æœ‰ä¸€ä¸ª`flush()`æ–¹æ³•æ¥å°†ç¼“å†²åŒºä¸­çš„å†…å®¹å¼ºåˆ¶è¾“å‡ºå®Œ. ç›¸åŒ,BufferedOutputStreamç±»ä¹Ÿæœ‰ä¸¤ç§æ„é€ æ–¹æ³•
> 	- `BufferedOutputStream(OutputStream out)`
> 	- `BufferedOutputStream(OutputStream out,intsize)`
> åŒç†,ç¬¬ä¸€ä¸ªæ„é€ æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªæœ‰32ä¸ªå­—èŠ‚çš„ç¼“å­˜åŒº,ç¬¬äºŒç§çš„æ„é€ æŒ‰ç…§æŒ‡å®šçš„å¤§å°æ¥åˆ›å»ºç¼“å­˜åŒº
> 

> [!attention] æ³¨æ„
> `flush()`æ–¹æ³•å°±æ˜¯ç”¨äºå³ä½¿åœ¨ç¼“å­˜åŒºæ²¡æœ‰æ»¡çš„æƒ…å†µä¸‹,ç‰¹èƒ½å¤Ÿå°†ç¼“å­˜åŒºçš„å†…å®¹å¼ºåˆ¶å†™å…¥å¤–éƒ¨è®¾å¤‡ä¸­,ä¹ æƒ¯ä¸Šç§°è¿™ä¸ªè¿‡ç¨‹ä¸º*åˆ·æ–°*. è¯¥æ–¹æ³•åªå¯¹ä½¿ç”¨ç¼“å­˜åŒºçš„OutputStreamç±»çš„å­ç±»æœ‰æ•ˆ. å½“è°ƒç”¨`close()`æ–¹æ³•å…³é—­æµä¹‹å‰,ä¹Ÿä¼šå°†ç¼“å­˜åŒºä¸­çš„ä¿¡æ¯åˆ·æ–°åˆ°ç£ç›˜æ–‡ä»¶ä¸­.
#### **BufferedReaderå’ŒBufferedWriter**
> [!note] æ¦‚è¿°
> BufferedReaderå’ŒBufferedWriteråˆ†åˆ«ç»§æ‰¿è‡ªReaderå’ŒWriter. è¿™ä¸¤ä¸ªç±»åŒæ ·ä¹Ÿå…·æœ‰å†…éƒ¨ç¼“å­˜æœºåˆ¶,å¹¶èƒ½å¤Ÿè¿›è¡Œ*ä»¥è¡Œä¸ºå•ä½*çš„è¾“å…¥/è¾“å‡º
> 
> æ ¹æ®BufferedReaderç±»çš„ç‰¹ç‚¹,å¯ä»¥æ€»ç»“å‡ºå¦‚ä¸‹å›¾æ‰€ç¤ºçš„å¸¦ç¼“å­˜çš„å­—ç¬¦æ•°æ®è¯»å–æ–‡ä»¶çš„è¿‡ç¨‹.
> 
> ```mermaid
> graph LR
> A[æ–‡ä»¶] --> B[InputStream]
> B --> C[InputStreamReader]
> C --> D[BufferedReader]
> D --> E[å­—ç¬¦æ•°æ®]
> ```
> 
> - BufferReaderç±»çš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹
> 	- `read()`æ–¹æ³•: è¯»å–å•ä¸ªå­—ç¬¦
> 	- `readLine()`æ–¹æ³•: è¯»å–ä¸€ä¸ªæ–‡æœ¬è¡Œ,å¹¶å°†å…¶è¿”å›ä¸ºå­—ç¬¦ä¸².è‹¥æ— æ•°æ®å¯è¯»,åˆ™è¿”å›null
> - BufferedWriterç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•éƒ½è¿”å›void,å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹
> 	- `write(String str,int offset,int length)`æ–¹æ³•: å†™å…¥æŒ‡å®šå­—ç¬¦ä¸²çš„æŸä¸€éƒ¨åˆ†
> 	- `flush()`æ–¹æ³•: åˆ·æ–°è¯¥æµçš„ç¼“å­˜
> 	- `newLine()`æ–¹æ³•: å†™å…¥ä¸€ä¸ªè¡Œåˆ†éš”ç¬¦

> [!danger] æ³¨æ„!
> åœ¨ä½¿ç”¨BufferedWriterç±»çš„`write()`æ–¹æ³•æ—¶, æ•°æ®å¹¶æ²¡æœ‰ç«‹åˆ»è¢«å†™å…¥åˆ°è¾“å‡ºæµä¸­,è€Œæ˜¯é¦–å…ˆè¿›å…¥åˆ°ç¼“å­˜åŒºä¸­. å¦‚æœéœ€è¦ç«‹åˆ»å°†ç¼“å­˜åŒºçš„å†…å®¹å†™å…¥åˆ°è¾“å‡ºæµä¸­,åˆ™ä¸€å®šéœ€è¦ä½¿ç”¨`flush()`æ–¹æ³•

> [!example] ç¤ºä¾‹ä»£ç : ä½¿ç”¨BufferedReaderå’ŒBufferedWriterå‘test.txtæ–‡ä»¶ä¸­å†™å…¥å¤šè¡Œå†…å®¹,ç„¶åå°†å…¶è¯»å–åˆ°æ§åˆ¶å°ä¸Š.
```Java
/**  
 * BufferedDemoç±»æ¼”ç¤ºäº†ä½¿ç”¨BufferedWriterå’ŒBufferedReaderè¿›è¡Œæ–‡ä»¶è¯»å†™æ“ä½œ  
 * è¯¥ç±»å°†ä¸€ç»„å­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ï¼Œç„¶åè¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹  
 */  
public class BufferedDemo {  
    /**  
     * mainæ–¹æ³•æ˜¯ç¨‹åºçš„å…¥å£ç‚¹  
     * å®ƒé¦–å…ˆå°†é¢„å®šä¹‰çš„å­—ç¬¦ä¸²æ•°ç»„å†™å…¥æŒ‡å®šæ–‡ä»¶ï¼Œç„¶åè¯»å–è¯¥æ–‡ä»¶å¹¶æ‰“å°æ¯ä¸€è¡Œå†…å®¹  
     * @param args å‘½ä»¤è¡Œå‚æ•°æ•°ç»„  
     */  
    public static void main(String[] args) {  
        // å®šä¹‰è¦å†™å…¥æ–‡ä»¶çš„å­—ç¬¦ä¸²å†…å®¹æ•°ç»„  
        String content [] = {  
                "æ˜æœˆå‡ æ—¶æœ‰",  
                "æŠŠé…’é—®é’å¤©",  
                "ä¸çŸ¥å¤©ä¸Šå®«é˜™",  
                "ä»Šå¤•æ˜¯ä½•å¹´"  
        };  
        // åˆ›å»ºæ–‡ä»¶å¯¹è±¡ï¼ŒæŒ‡å®šæ–‡ä»¶è·¯å¾„  
        File file = new File("F:/test.txt");  
  
        // ä½¿ç”¨BufferedWriterå°†å†…å®¹å†™å…¥æ–‡ä»¶  
        try {  
            FileWriter fw = new FileWriter(file);  
            BufferedWriter bw = new BufferedWriter(fw);  
            // éå†å†…å®¹æ•°ç»„ï¼Œå°†æ¯ä¸ªå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶å¹¶æ¢è¡Œ  
            for (int i = 0; i < content.length; i++) {  
                bw.write(content[i]);  
                bw.newLine();  
            }            // å…³é—­å†™å…¥æµ  
            bw.close();  
            fw.close();  
        }        
        catch (Exception e) {  
            e.printStackTrace();  
        }  
        // ä½¿ç”¨BufferedReaderè¯»å–æ–‡ä»¶å†…å®¹å¹¶æ‰“å°  
        try {  
            FileReader fr = new FileReader(file);  
            BufferedReader br = new BufferedReader(fr);  
            String tmp = null;  
            int i = 1;  
            // é€è¡Œè¯»å–æ–‡ä»¶å†…å®¹å¹¶æ‰“å°  
            while ((tmp = br.readLine()) != null) {  
                System.out.println("ç¬¬"+i + "è¡Œ:" + tmp);  
                i++;  
            }            // å…³é—­è¯»å–æµ  
            br.close();  
            fr.close();  
        }        
        catch (Exception e) {  
            e.printStackTrace();  
        }  
    }
}
```
è¿è¡Œç»“æœ
```text
ç¬¬1è¡Œ:æ˜æœˆå‡ æ—¶æœ‰
ç¬¬2è¡Œ:æŠŠé…’é—®é’å¤©
ç¬¬3è¡Œ:ä¸çŸ¥å¤©ä¸Šå®«é˜™
ç¬¬4è¡Œ:ä»Šå¤•æ˜¯ä½•å¹´
```

### æ•°æ®çš„è¾“å…¥è¾“å‡ºæµ
> [!note] æ¦‚è¿°
> æ•°æ®è¾“å…¥/è¾“å‡ºæµ(DataInputStreamç±»å’ŒDataOutputStreamç±»),å®ƒä»¬å±äº**è¿‡æ»¤æµ**(å¤„ç†æµ)çš„èŒƒç•´ï¼Œå…è®¸åº”ç”¨ç¨‹åºä»¥ä¸æœºå™¨æ— å…³çš„æ–¹å¼ä»åº•å±‚è¾“å…¥æµä¸­è¯»å–åŸºæœ¬çš„Javaæ•°æ®ç±»å‹. ä¹Ÿå°±æ˜¯è¯´,å½“è¯»å–ä¸€ä¸ªæ•°æ®æ—¶,ä¸å¿…å†å…³å¿ƒè¿™ä¸ªæ•°å€¼åº”å½“æ˜¯é‚£ç§å­—èŠ‚.
> 
> ç‰¹æ€§:
> 1. â€‹**æ•°æ®ç±»å‹æŒä¹…åŒ–**â€‹ï¼šä»¥*äºŒè¿›åˆ¶å½¢å¼*è¯»å†™JavaåŸºæœ¬æ•°æ®ç±»å‹(int, double, booleanç­‰)
> 2. **å¹³å°æ— å…³æ€§**â€‹ï¼šæ— è®ºæ•°æ®åœ¨ä½•ç§å¹³å°ä¸Šå­˜å‚¨ï¼Œéƒ½èƒ½æ­£ç¡®è¯»å–
> 3.  â€‹**é«˜æ•ˆæ€§**â€‹ï¼šç›´æ¥æ“ä½œäºŒè¿›åˆ¶æ•°æ®ï¼Œæ¯”æ–‡æœ¬è½¬æ¢æ•ˆç‡æ›´é«˜
> 
> DataInputStreamç±»å’ŒDataOutputStreamç±»çš„æ„é€ æ–¹æ³•å¦‚ä¸‹
> - `DataInputStream(InputStream in)`
> ä½¿ç”¨æŒ‡å®šçš„åŸºç¡€InputStreamå¯¹è±¡åˆ›å»ºä¸€ä¸ªæ•°æ®è¾“å…¥æµ
> - `DataOutputStream(OutputStream out)`
> ä½¿ç”¨æŒ‡å®šçš„åŸºç¡€OutputStreamå¯¹è±¡åˆ›å»ºä¸€ä¸ªæ•°æ®è¾“å‡ºæµ
> 

å¸¸ç”¨æ–¹æ³•
1. DataInputStream

|          æ–¹æ³•          |       æè¿°        |
| :------------------: | :-------------: |
|   `readBoolean()`    |  è¯»å–ä¸€ä¸ªbooleanå€¼   |
|     `readByte()`     |   è¯»å–ä¸€ä¸ª8ä½çš„byte   |
|     `readChar()`     |  è¯»å–ä¸€ä¸ª16ä½çš„char   |
|    `readShort()`     |  è¯»å–ä¸€ä¸ª16ä½çš„short  |
|     `readInt()`      |   è¯»å–ä¸€ä¸ª32ä½çš„int   |
|     `readLong()`     |  è¯»å–ä¸€ä¸ª64ä½çš„long   |
|    `readFloat()`     |  è¯»å–ä¸€ä¸ª32ä½çš„float  |
|    `readDouble()`    | è¯»å–ä¸€ä¸ª64ä½çš„double  |
|     `readUTF()`      | è¯»å–ä¸€ä¸ªUTF-8æ ¼å¼çš„å­—ç¬¦ä¸² |
| `readFully(byte[]b)` | è¯»å–æŒ‡å®šé•¿åº¦çš„å­—èŠ‚åˆ°å­—èŠ‚æ•°ç»„  |

2. DataOutputStream

|            æ–¹æ³•             |       æè¿°        |
| :-----------------------: | :-------------: |
| `writeBoolean(boolean v)` |  å†™å…¥ä¸€ä¸ªbooleanå€¼   |
|    `writeByte(int v)`     |   å†™å…¥ä¸€ä¸ª8ä½çš„byte   |
|    `writeChar(int v)`     |  å†™å…¥ä¸€ä¸ª16ä½çš„char   |
|    `writeShort(int v)`    |  å†™å…¥ä¸€ä¸ª16ä½çš„short  |
|     `writeInt(int v)`     |   å†™å…¥ä¸€ä¸ª32ä½çš„int   |
|    `writeLong(long v)`    |  å†™å…¥ä¸€ä¸ª64ä½çš„long   |
|   `writeFloat(float v)`   |  å†™å…¥ä¸€ä¸ª32ä½çš„float  |
|  `writeDouble(double v)`  | å†™å…¥ä¸€ä¸ª64ä½çš„double  |
|  `writeUTF(String str)`   | å†™å…¥ä¸€ä¸ªUTF-8æ ¼å¼çš„å­—ç¬¦ä¸² |
|     `write(byte[] b)`     |     å†™å…¥å­—èŠ‚æ•°ç»„      |

> [!danger] æ³¨æ„äº‹é¡¹
> 1. é¡ºåºä¸€è‡´æ€§: **è¯»å–æ•°æ®çš„é¡ºåºå¿…é¡»å’Œå†™å…¥çš„é¡ºåºå®Œå…¨ä¸€è‡´**,å¦åˆ™ä¼šå¯¼è‡´æ•°æ®è¯»å–é”™è¯¯
> 2. å¼‚å¸¸å¤„ç†: å¿…é¡»å¦¥å–„å¤„ç†IOException, å…»æˆå†™try-with-resourcesè¯­å¥
> 3. å­—ç¬¦ç¼–ç : å­—ç¬¦ä¸²ä½¿ç”¨`writeUTF()`æ–¹æ³•å†™å…¥,é‡‡ç”¨UTF-8ç¼–ç ,è¯»å–æ—¶ä¹Ÿå¿…é¡»ä½¿ç”¨`readUTF()`æ–¹æ³•
> 4. èµ„æºå…³é—­: å…³é—­DataOutputStreamæ—¶, ä¼šå…ˆåˆ·æ–°ç¼“å†²åŒºå†å…³é—­åº•å±‚æµ, å…³é—­DataInputStreamåªä¼šå…³é—­åº•å±‚æµ
> 5. æ€§èƒ½è€ƒè™‘: å¯¹äºå¤§é‡æ•°æ®è¯»å†™ï¼Œå»ºè®®ä½¿ç”¨ç¼“å†²æµ(BufferedInputStream/BufferedOutputStream)åŒ…è£…

> [!example] ç¤ºä¾‹ä»£ç : åˆ†åˆ«å‘test.txtæ–‡ä»¶ä¸­å†™å…¥ä¸åŒçš„æ•°æ®ç±»å‹å¹¶æ­£ç¡®è¯»å–,å°†è¯»å–ç»“æœè¾“å‡ºåˆ°æ§åˆ¶å°
```Java
import java.io.*;  
  
public class DataStreamDemo {  
    /**  
     * ä¸»å‡½æ•°  
     * æ¼”ç¤ºDataOutputStreamå†™å…¥å„ç§åŸºæœ¬æ•°æ®ç±»å‹åˆ°æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨DataInputStreamä»æ–‡ä»¶è¯»å–è¿™äº›æ•°æ®  
     * @param args å‘½ä»¤è¡Œå‚æ•°æ•°ç»„  
     */  
    public static void main(String[] args) {  
        File file = new File("F:/test.txt");  
        try {  
            // åˆ›å»ºæ–‡ä»¶è¾“å‡ºæµå’Œæ•°æ®è¾“å‡ºæµï¼Œå‘æ–‡ä»¶å†™å…¥ä¸åŒç±»å‹çš„æ•°æ®  
            FileOutputStream fos = new FileOutputStream(file);  
            DataOutputStream dos = new DataOutputStream(fos);  
            dos.writeDouble(3.14);  
            dos.writeInt(100);  
            dos.writeBoolean(true);  
            dos.writeChar('a');  
            dos.writeUTF("hello world");  
            dos.close();  
            fos.close();  
  
            // åˆ›å»ºæ–‡ä»¶è¾“å…¥æµå’Œæ•°æ®è¾“å…¥æµï¼Œä»æ–‡ä»¶è¯»å–ä¸åŒç±»å‹çš„æ•°æ®  
            FileInputStream fis = new FileInputStream(file);  
            DataInputStream dis = new DataInputStream(fis);  
            System.out.println("ç”¨readDouble()è¯»å–: "+dis.readDouble());  
            System.out.println("ç”¨readInt()è¯»å–: "+dis.readInt());  
            System.out.println("ç”¨readBoolean()è¯»å–: "+dis.readBoolean());  
            System.out.println("ç”¨readChar()è¯»å–: "+dis.readChar());  
            System.out.println("ç”¨readUTF()è¯»å–: "+dis.readUTF());  
            dis.close();  
            fis.close();  
        }        
        catch (Exception e) {  
            e.printStackTrace();  
        }    
    }
}
```

è¿è¡Œç»“æœ
```text
ç”¨readDouble()è¯»å–: 3.14
ç”¨readInt()è¯»å–: 100
ç”¨readBoolean()è¯»å–: true
ç”¨readChar()è¯»å–: a
ç”¨readUTF()è¯»å–: hello world
```

> [!question] ğŸ”æ€è€ƒ: **äºŒè¿›åˆ¶æ•°æ®æµçš„å¹³å°æ— å…³æ€§éªŒè¯**
> åœ¨è¿è¡ŒDataInputStream/DataOutputStreamçš„æµ‹è¯•ä»£ç åï¼Œè§‚å¯Ÿåˆ°ä¸¤ä¸ªé‡è¦ç°è±¡ï¼š
> 1. â€‹**æ–‡æœ¬ç¼–è¾‘å™¨ä¸­çš„ä¹±ç ç°è±¡**
> 	- ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ç”Ÿæˆçš„.txtæ–‡ä»¶æ—¶ï¼Œé™¤éƒ¨åˆ†å­—ç¬¦ä¸²å¤–æ˜¾ç¤ºä¸ºä¹±ç 
> 	- åŸå› åˆ†æï¼š  
> 		âœ“ æ•°æ®**ä»¥äºŒè¿›åˆ¶åŸå§‹æ ¼å¼å­˜å‚¨**ï¼ˆéæ–‡æœ¬ç¼–ç ï¼‰  
> 		âœ“ æ–‡æœ¬ç¼–è¾‘å™¨å°è¯•ç”¨å­—ç¬¦ç¼–ç è§£æäºŒè¿›åˆ¶æ•°æ®  
> 		âœ“ åŸºæœ¬æ•°æ®ç±»å‹(int/doubleç­‰)çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ— æ³•å¯¹åº”æœ‰æ•ˆå­—ç¬¦
> 2. **æ§åˆ¶å°çš„æ­£ç¡®è¾“å‡º**
> - ç¨‹åºè¯»å–åæ§åˆ¶å°è¾“å‡ºä¸åŸå§‹å†™å…¥æ•°æ®å®Œå…¨ä¸€è‡´
> - å…³é”®ç»“è®ºï¼š  
> 	âœ“ è¯æ˜Javaçš„äºŒè¿›åˆ¶I/Oå…·æœ‰**å¹³å°æ— å…³æ€§**  
> 	âœ“ åŒä¸€å¥—è¯»å†™æ–¹æ³•**åœ¨ä¸åŒç³»ç»Ÿä¸Šè¡Œä¸ºä¸€è‡´**  
> 	âœ“ æ•°æ®ç±»å‹è½¬æ¢ç”±JVMåœ¨å­—èŠ‚å±‚é¢å¤„ç†
> ğŸ’¡ â€‹**å»¶ä¼¸æ€è€ƒï¼šâ€‹**
> - äºŒè¿›åˆ¶å­˜å‚¨ vs æ–‡æœ¬å­˜å‚¨ï¼š  
> - â”œâ”€ äºŒè¿›åˆ¶ï¼šä¿æŒæ•°æ®ç²¾åº¦ï¼ŒèŠ‚çœç©ºé—´ï¼Œä½†ä¸å¯ç›´æ¥é˜…è¯»  
> - â””â”€ æ–‡æœ¬ï¼šå¯è¯»æ€§å¼ºï¼Œä½†å­˜åœ¨ç¼–ç è½¬æ¢å’Œç²¾åº¦æŸå¤±
> 
>- å®é™…åº”ç”¨å»ºè®®ï¼š  
âœ“ é…ç½®æ–‡ä»¶/æ—¥å¿—ç­‰éœ€è¦äººå·¥æŸ¥çœ‹çš„ â†’ ä½¿ç”¨æ–‡æœ¬æ ¼å¼  
âœ“ éœ€è¦**ç²¾ç¡®å­˜å‚¨/é«˜æ•ˆä¼ è¾“**çš„æ•°æ® â†’ ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼

### å¯¹è±¡åºåˆ—åŒ–è¾“å…¥è¾“å‡ºæµ
> [!note] æ¦‚è¿°
> ObjectOutputStreamç±»çš„å¯¹è±¡ç”¨æ¥åºåˆ—åŒ–å¯¹è±¡,è€ŒObjectInputStreamç±»çš„å¯¹è±¡ç”¨æ¥ååºåˆ—åŒ–å¯¹è±¡. å®ƒä»¬åˆ†åˆ«ç»§æ‰¿è‡ªOutputStreamå’ŒInputStreamç±»
> 
> ä¸€ä¸ªç±»åªæœ‰å®ç°**Serializableæ¥å£**æˆ–**Externalizableæ¥å£**æ‰èƒ½è¢«åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–. Serializableæ¥å£æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£.
> 
> ç¤ºä¾‹ä»£ç 
> ```Java
> import java.io.Serializable;
> public class Book implements Serializable{...}
> ```
> Javaè´Ÿè´£å¤„ç†ä»è¾“å…¥æµä¸­è¯»å–æˆ–ä»è¾“å‡ºæµä¸­å†™å…¥åˆ°Serializableå¯¹è±¡çš„ç»†èŠ‚
> 
> å®ç°Externalizableæ¥å£èƒ½å¤Ÿæ›´å¥½åœ°æ§åˆ¶ä»è¾“å…¥æµä¸­è¯»å–å¯¹è±¡æˆ–ä»è¾“å‡ºæµä¸­å†™å…¥å¯¹è±¡. è¿™æ˜¯å› ä¸ºExternalizableæ¥å£ç»§æ‰¿äº†Serializableæ¥å£.
> 
> å½“ä»è¾“å…¥æµä¸­è¯»å–ä¸€ä¸ªå¯¹è±¡æ—¶,éœ€è¦è°ƒç”¨`readExternal()`æ–¹æ³• ; å½“ä»è¾“å‡ºæµä¸­å†™å…¥ä¸€ä¸ªå¯¹è±¡æ—¶,éœ€è¦ä½¿ç”¨`writeExternal()`æ–¹æ³•.

#### åºåˆ—åŒ–å¯¹è±¡
> [!example] åºåˆ—åŒ–ä¸€ä¸ªBookç±»
> - [âˆš] åˆ›å»ºObjectOutputStreamç±»çš„å¯¹è±¡,å¹¶å°†å¯¹è±¡ä¿å­˜åˆ°book.seræ–‡ä»¶ä¸­.
> - [âˆš] å°†å¯¹è±¡ä¿å­˜åˆ°ByteArrayOutputStreamç±»ä¸­,å¹¶æ„é€ ä¸€ä¸ªå¯¹è±¡è¾“å‡ºæµ
> - [âˆš] ä½¿ç”¨ObjectOutputStreamç±»çš„writeObject()æ–¹æ³•åºåˆ—åŒ–å¯¹è±¡
> - [âˆš] å…³é—­å¯¹è±¡è¾“å‡ºæµ

> [!note] æ ¹æ®ä¸Šè¿°æ­¥éª¤,åœ¨Book.javaæ–‡å­—ä¸­ç¼–å†™Bookç±»
```java
import java.io.Serializable;  
  //å¿…é¡»å®ç°Serializableæ¥å£!!!
public class Book implements Serializable {  
    private String name;  
    private double price;  
    public Book(String name, double price){  
        this.name = name;  
        this.price = price;  
    }  
    @Override  
    public String toString(){  
        return "Book [name=" + name + ", price=" + price + "]";  
    }
}
```

> [!note] åœ¨BookOutTest.javaæ–‡ä»¶ä¸­ç¼–å†™åºåˆ—åŒ–Bookç±»å¯¹è±¡çš„ä»£ç 
```java
import java.io.File;  
import java.io.FileOutputStream;  
import java.io.IOException;  
import java.io.ObjectOutputStream;  
  
public class BookOutTest {  
    public static void main(String[] args) {
        // åˆ›å»ºä¸¤ä¸ªBookå¯¹è±¡ç”¨äºåºåˆ—åŒ–æµ‹è¯•
        Book book1 = new Book("Javaä»å…¥é—¨åˆ°ç²¾é€š", 89.9);
        Book book2 = new Book("C#ä»å…¥é—¨åˆ°ç²¾é€š", 89.9);
        
        // æŒ‡å®šåºåˆ—åŒ–æ–‡ä»¶è·¯å¾„
        File fileObject = new File("book.ser");
        
        // ä½¿ç”¨try-with-resourcesè¯­å¥è‡ªåŠ¨å…³é—­èµ„æº
        try (ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(fileObject))){
            // å°†Bookå¯¹è±¡åºåˆ—åŒ–å¹¶å†™å…¥æ–‡ä»¶
            oos.writeObject(book1);
            oos.writeObject(book2);
            
            // åœ¨æ§åˆ¶å°è¾“å‡ºBookå¯¹è±¡ä¿¡æ¯
            System.out.println(book1);
            System.out.println(book2);
        }
        catch (IOException e) {
            // æ•è·å¹¶æ‰“å°IOå¼‚å¸¸ä¿¡æ¯
            e.printStackTrace();
        }
    }
}
```

è¿è¡Œç»“æœ
```text
Book [name=Javaä»å…¥é—¨åˆ°ç²¾é€š, price=89.9]
Book [name=C#ä»å…¥é—¨åˆ°ç²¾é€š, price=89.9]
```

#### ååºåˆ—åŒ–å¯¹è±¡
> [!example] ååºåˆ—åŒ–ä¸€ä¸ªBookç±»å¯¹è±¡éœ€è¦æ‰§è¡Œå¦‚ä¸‹æ­¥éª¤
> - [âˆš] åˆ›å»ºObjectInputStreamç±»çš„å¯¹è±¡,å¹¶ä»book.seræ–‡ä»¶ä¸­è¯»å–å¯¹è±¡
> - [âˆš] ä»ByteArrayInputStreamç±»ä¸­è¯»å–å¯¹è±¡,åˆ›å»ºä¸€ä¸ªå¯¹è±¡è¾“å…¥æµ
> - [âˆš]  ä½¿ç”¨ObjectInputStreamç±»çš„`readObject()`æ–¹æ³•ååºåˆ—åŒ–å¯¹è±¡
> - [âˆš]  å…³é—­å¯¹è±¡è¾“å…¥æµ


> [!note] æ ¹æ®ä¸Šè¿°æ­¥éª¤,åœ¨Bookç±»å’Œbook.seréƒ½ä¿æŒä¸å˜çš„æƒ…å†µä¸‹,åœ¨BookInTest.javaç±»ä¸­è¿›è¡ŒBookå¯¹è±¡çš„ååºåˆ—åŒ–
```java
import java.io.File;  
import java.io.FileInputStream;  
import java.io.ObjectInputStream;  
  
public class BookInTest {  
    public static void main(String[] args) {
        // åˆ›å»ºæŒ‡å‘åºåˆ—åŒ–æ–‡ä»¶çš„Fileå¯¹è±¡
        File fileObject = new File("book.ser");
        
        // ä½¿ç”¨try-with-resourcesè¯­å¥è‡ªåŠ¨å…³é—­è¾“å…¥æµ
        try (ObjectInputStream ois = new ObjectInputStream(new FileInputStream(fileObject)))
        {
            // ä»è¾“å…¥æµä¸­è¯»å–ä¸¤ä¸ªBookå¯¹è±¡
            Book book1 = (Book) ois.readObject();
            Book book2 = (Book) ois.readObject();
            
            // æ‰“å°Bookå¯¹è±¡ä¿¡æ¯åˆ°æ§åˆ¶å°
            System.out.println(book1);
            System.out.println(book2);
        }
        catch (Exception e){
            // æ•è·å¹¶æ‰“å°å¼‚å¸¸å †æ ˆä¿¡æ¯
            e.printStackTrace();
        }
    }
}
```
è¿è¡Œç»“æœ
```text
Book [name=Javaä»å…¥é—¨åˆ°ç²¾é€š, price=89.9]
Book [name=C#ä»å…¥é—¨åˆ°ç²¾é€š, price=89.9]
```

å¯ä»¥çœ‹å‡º,è¾“å‡ºçš„ç»“æœå°±æ˜¯åœ¨åºåˆ—åŒ–å¯¹è±¡ä¸­å­˜å‚¨çš„ä¸¤ä¸ªBookå¯¹è±¡

> [!tip] æ€»ç»“
> ## ä¸€ã€æ ¸å¿ƒæ¡†æ¶
> - **ä¸¤å¤§ä½“ç³»**â€‹ï¼š
> - â€‹**å­—èŠ‚æµ**â€‹ï¼šInputStream/OutputStream â†’ å¤„ç†æ‰€æœ‰ç±»å‹æ•°æ®
> - â€‹**å­—ç¬¦æµ**â€‹ï¼šReader/Writer â†’ ä¸“ä¸ºæ–‡æœ¬è®¾è®¡ï¼ˆè§£å†³ç¼–ç é—®é¢˜ï¼‰
> ## äºŒã€å…³é”®ç»„ä»¶è¯¦è§£
> ### 1. Fileç±» - æ–‡ä»¶åŸºç¡€æ“ä½œ
> - åˆ›å»º/åˆ é™¤æ–‡ä»¶
> - è·å–æ–‡ä»¶å±æ€§ä¿¡æ¯
> - æ–‡ä»¶è·¯å¾„ç®¡ç†
> ### 2. æ–‡ä»¶æµ - åŸºç¡€è¯»å†™
> - â€‹**FileInputStream/FileOutputStream**â€‹ï¼šå­—èŠ‚çº§æ–‡ä»¶æ“ä½œ
> - â€‹**FileReader/FileWriter**â€‹ï¼šå­—ç¬¦çº§æ–‡æœ¬å¤„ç†
> ### 3. ç¼“å†²æµ - æ€§èƒ½ä¼˜åŒ–
> - â€‹**Bufferedç³»åˆ—**â€‹ï¼šå¤§å¹…æå‡IOæ•ˆç‡
> - å‡å°‘ç‰©ç†è¯»å†™æ¬¡æ•°ï¼Œè‡ªåŠ¨å¤„ç†ç¼“å†²åŒº
> ### 4. æ•°æ®æµ - ç»“æ„åŒ–å­˜å‚¨
> - DataInputStream/DataOutputStream
> - ç›´æ¥è¯»å†™åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆint, doubleç­‰ï¼‰
> - ä¿æŒæ•°æ®ç²¾åº¦å’Œå¹³å°ä¸€è‡´æ€§
> ### 5. å¯¹è±¡æµ - é«˜çº§åºåˆ—åŒ–
> - ObjectInputStream/ObjectOutputStream
> - å®ç°Serializableæ¥å£
> - å®Œæ•´å¯¹è±¡æŒä¹…åŒ–å’Œæ¢å¤
> - ## ä¸‰ã€é€‰æ‹©æŒ‡å—
> | åœºæ™¯     | æ¨èæ–¹æ¡ˆ                                      |
> |------ | ----------------------------------------- |
> | äºŒè¿›åˆ¶æ–‡ä»¶  | FileInputStream/OutputStream              |
> | æ–‡æœ¬æ–‡ä»¶   | FileReader/Writer + BufferedReader/Writer |
> | åŸºæœ¬æ•°æ®ç±»å‹ | DataInputStream/DataOutputStream          |
> | å®Œæ•´å¯¹è±¡å­˜å‚¨ | ObjectInputStream/ObjectOutputStream      |
> ## å››ã€æœ€ä½³å®è·µè¦ç‚¹
> 1. â€‹**å§‹ç»ˆä½¿ç”¨try-with-resources**ç¡®ä¿èµ„æºé‡Šæ”¾
> 2. â€‹**ç¼“å†²æµåŒ…è£…åŸºç¡€æµ**æå‡æ€§èƒ½
> 3. â€‹**å¯¹è±¡åºåˆ—åŒ–**è®°å¾—åŠ serialVersionUID
> 4. â€‹**å­—ç¬¦æµæŒ‡å®šç¼–ç **é¿å…ä¹±ç é—®é¢˜
>  
>  ## äº”ã€æ ¸å¿ƒä»·å€¼
>  æŒæ¡äº†ä»å­—èŠ‚åˆ°å­—ç¬¦ã€ä»æ•°æ®åˆ°å¯¹è±¡çš„å®Œæ•´IOå¤„ç†èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„IOæ–¹æ¡ˆï¼
>  è¿™ä¸ªçŸ¥è¯†ä½“ç³»ä¸ºä½ æ‰“ä¸‹äº†åšå®çš„Java I/OåŸºç¡€ï¼Œåç»­å¯ä»¥æ·±å…¥å­¦ä¹ NIOæé«˜å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚ ğŸ’ª

---

## 3.8.åå°„å’Œæ³¨è§£
### åå°„


### Annotationæ³¨è§£åŠŸèƒ½


---
## 3.9 æ•°æ®åº“æ“ä½œ(é‡è¦!)
### æ•°æ®åº“åŸºç¡€
[[MySQLçŸ¥è¯†ç‚¹æ¢³ç†|MySQL]]

### JDBC
> [!note] æ¦‚è¿°
> JDBCæ˜¯ä¸€ç§å¯ç”¨äºæ‰§è¡ŒSQLè¯­å¥çš„Java API(**A**pplication **P**rogramming **I**nterface,åº”ç”¨ç¨‹åºè®¾è®¡æ¥å£),æ˜¯è¿æ¥æ•°æ®åº“å’ŒJavaçš„çº½å¸¦
> 
> JDBCçš„å…¨ç§°æ˜¯**J**ava **D**ata**B**ase **C**onnectivity,æ˜¯ä¸€å¥—é¢å‘å¯¹è±¡çš„åº”ç”¨ç¨‹åº**æ¥å£**, æŒ‡å®šäº†ç»Ÿä¸€åœ°è®¿é—®å„ç§å…³ç³»å‹æ•°æ®åº“çš„æ ‡å‡†æ¥å£.  JDBCæ˜¯ä¸€ç§åº•å±‚API, å› æ­¤è®¿é—®æ•°æ®æ—¶åº”è¯¥åœ¨ä¸šåŠ¡é€»è¾‘å±‚ä¸­åµŒå…¥SQLè¯­å¥. ç”±äºSQLè¯­å¥æ˜¯é¢å‘å…³ç³»çš„,ä¾èµ–äºå…³ç³»æ¨¡å‹, å› æ­¤é€šè¿‡JDBCæŠ€æœ¯è®¿é—®æ•°æ®åº“ä¹Ÿæ˜¯é¢å‘å…³ç³»çš„.
> 
> JDBCä¸»è¦å®Œæˆä»¥ä¸‹å‡ ä¸ªä»»åŠ¡
> - [âˆš] ä¸æ•°æ®åº“å»ºç«‹è¿æ¥
> - [âˆš] å‘æ•°æ®åº“ä¸­å‘é€SQLè¯­å¥
> - [âˆš] å¤„ç†ä»æ•°æ®åº“ä¸­è¿”å›çš„ç»“æœ.
> 
> éœ€è¦æ³¨æ„,JDBCä¸èƒ½ç›´æ¥è®¿é—®æ•°æ®åº“,å¿…é¡»ä¾èµ–äºJDBCé©±åŠ¨ç¨‹åº, é©±åŠ¨åˆ†ä¸ºä»¥ä¸‹å‡ ç±»
> 1. JDBC-ODBCæ¡¥
> 2. æœ¬åœ°APIé©±åŠ¨ç¨‹åº
> 3. JDBCç½‘ç»œé©±åŠ¨
> 4. æœ¬åœ°åè®®é©±åŠ¨
> 
> JDBCç½‘ç»œé©±åŠ¨å’Œæœ¬åœ°é©±åŠ¨æ˜¯JDBCè®¿é—®æ•°æ®åº“çš„é¦–é€‰,è¿™ä¸¤ç±»é©±åŠ¨æä¾›äº†Javaçš„æ‰€æœ‰ä¼˜ç‚¹


#### JDBCå¸¸ç”¨çš„ç±»å’Œæ¥å£

##### DriverManagerç±»
> [!note] æ¦‚è¿°
> DriverManagerç±»æ˜¯JDBCçš„**ç®¡ç†å±‚**, ç”¨äº*ç®¡ç†æ•°æ®åº“ä¸­çš„é©±åŠ¨ç¨‹åº*. åœ¨æ“ä½œæŒ‡å®šæ•°æ®åº“ä¹‹å‰,éœ€è¦ä½¿ç”¨Javaä¸­çš„Classç±»çš„å†…éƒ¨æ–¹æ³•`forName(String className)`*åŠ è½½æŒ‡å®šæ•°æ®åº“çš„é©±åŠ¨ç¨‹åº*.

> [!example] ä¾‹: åŠ è½½MySQLé©±åŠ¨ç¨‹åº
> ```Java
> try{
> 	Class.forName("com.mysql.cj.jdbc.Driver");
> }
> catch(ClassNotFoundException){
> 	e.printStackTrace();
> }
> ```
> åŠ è½½å®Œç›¸åº”çš„é©±åŠ¨ä¹‹å,Javaä¼šè‡ªåŠ¨å°†é©±åŠ¨ç¨‹åºçš„å®ä¾‹æ³¨å†Œåˆ°DriverManagerç±»ä¸­,è¿™æ—¶å³å¯é€šè¿‡DriverManagerç±»çš„`getConnection()`æ–¹æ³•è¿æ¥åˆ°ç›¸åº”çš„æ•°æ®åº“.DriverManagerçš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹


|                           æ–¹æ³•                            |               æè¿°               |
| :-----------------------------------------------------: | :----------------------------: |
| `getConnection(String url,String user,String password)` |      æŒ‡å®šä¸‰ä¸ªå…¥å£å‚æ•°,æ¥è·å–å’Œæ•°æ®åº“çš„é“¾æ¥       |
|                   `setLoginTimeout()`                   | è·å–é©±åŠ¨ç¨‹åºè§†å›¾ç™»å½•æŸä¸€æ•°æ®åº“æ—¶å¯ä»¥ç­‰å¾…æœ€é•¿æ—¶é—´,ä»¥ç§’ä¸ºå•ä½ |
|                  `println(String msg)`                  |      å°†ä¸€æ¡ä¿¡æ¯è¾“å‡ºåˆ°å½“å‰çš„JDBCæ—¥å¿—æµä¸­       |


##### Connectionæ¥å£
> [!note] æ¦‚è¿°
> Connectionæ¥å£ä»£è¡¨ä¸ç‰¹å®šçš„æ•°æ®åº“è¿›è¡Œ**è¿æ¥**, åœ¨è¿æ¥ä¸Šä¸‹æ–‡ä¸­æ‰§è¡ŒSQLè¯­å¥å¹¶è¿”å›ç»“æœ.
> Connectionæ¥å£çš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹


|                              æ–¹æ³•                               |                         æè¿°                          |
| :-----------------------------------------------------------: | :-------------------------------------------------: |
|                      `createStatement()`                      |                    åˆ›å»ºStatementå¯¹è±¡                    |
| `createStatement(int resultSetType,int resultSetConcurrency)` | åˆ›å»ºä¸€ä¸ªStatementå¯¹è±¡, è¯¥å¯¹è±¡å°†ç”Ÿæˆå…·æœ‰ç»™å®šç±»å‹,å¹¶å‘æ€§å’Œå¯ä¿å­˜æ€§çš„ResultSetå¯¹è±¡  |
|                     `preparedStatement()`                     |              åˆ›å»ºé¢„å¤„ç†å¯¹è±¡preparedStatement               |
|                        `isReadOnly()`                         |             æŸ¥çœ‹å½“å‰Connectionå¯¹è±¡çš„è¯»å–å½¢å¼æ˜¯å¦ä¸ºåªè¯»              |
|                        `setReadOnly()`                        |            å°†å½“å‰çš„Connectionå¯¹è±¡è®¾ç½®ä¸ºåªè¯»(é»˜è®¤ä¸ºéåªè¯»)            |
|                          `commit()`                           | ä½¿ä¸Šä¸€æ¬¡æäº¤/å›æ»šåè¿›è¡Œçš„æ‰€æœ‰æ›´æ”¹æˆä¸ºæŒä¹…æ›´æ”¹,å¹¶é‡Šæ”¾æ­¤Connectionå¯¹è±¡å½“å‰æŒæœ‰çš„æ‰€æœ‰æ•°æ®åº“é” |
|                         `roolback()`                          |      å–æ¶ˆå½“å‰åœ¨äº‹åŠ¡ä¸­çš„æ‰€æœ‰æ›´æ”¹,å¹¶é‡Šæ”¾æ­¤Connectionå¯¹è±¡å½“å‰æŒæœ‰çš„æ‰€æœ‰æ•°æ®åº“é”      |
|                           `close()`                           |      ç«‹å³é‡Šæ”¾æ­¤Connectionå¯¹è±¡çš„æ•°æ®åº“å’ŒJDBCèµ„æº,è€Œéç­‰å¾…å®ƒä»¬è¢«è‡ªåŠ¨é‡Šæ”¾.      |


##### Statementæ¥å£(stmt)
> [!note] æ¦‚è¿°
> Statementæ¥å£ç”¨äºåœ¨å·²ç»å»ºç«‹è¿æ¥çš„æ•°æ®åº“ä¸Šå‘æ•°æ®åº“å‘é€SQLè¯­å¥. åœ¨JDBCä¸­æœ‰ä¸‰ç§Statementè¯­å¥:
> 1. Statement -> æ‰§è¡Œç®€å•çš„SQLè¯­å¥
> 2. PreparedStatement -> æ‰§è¡ŒåŠ¨æ€SQLè¯­å¥
> 3. CallableStatement -> æ‰§è¡Œå¯¹æ•°æ®åº“çš„å­˜å‚¨è¿‡ç¨‹çš„è°ƒç”¨
> 
> Statementæ¥å£çš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹


|             æ–¹æ³•             |                            æè¿°                             |
| :------------------------: | :-------------------------------------------------------: |
|   `execute(String sql)`    |                æ‰§è¡Œé™æ€çš„SELECTè¯­å¥,è¯¥è¯­å¥å¯èƒ½è¿”å›å¤šä¸ªç»“æœé›†                 |
| `executeQuery(String sql)` |               æ‰§è¡Œç»™å®šçš„SQLè¯­å¥,è¯¥è¯­å¥è¿”å›å•ä¸ªResultSetå¯¹è±¡               |
|       `clearBatch()`       |                 æ¸…ç©ºæ­¤å¯¹Statementå¯¹è±¡å½“å‰çš„SQLå‘½ä»¤åˆ—è¡¨                 |
|      `executeBatch()`      | å°†ä¸€æ‰¹å‘½ä»¤äº¤ç»™æ•°æ®åº“æ¥æ‰§è¡Œ,å¦‚æœå…¨éƒ¨æ‰§è¡ŒæˆåŠŸ,åˆ™è¿”å›æ›´æ–°è®¡æ•°ç»„æˆçš„æ•°ç»„. æ•°ç»„å…ƒç´ çš„æ’åºä¸SQLè¯­å¥çš„æ·»åŠ é¡ºåºå¯¹åº” |
|   `addBatch(String sql)`   |   å°†ç»™å®šçš„SQLå‘½ä»¤æ·»åŠ åˆ°Statementå¯¹è±¡çš„å½“å‰å‘½ä»¤åˆ—è¡¨ä¸­. å¦‚æœé©±åŠ¨ç¨‹åºä¸æ”¯æŒæ‰¹é‡å¤„ç†,å°†æŠ›å‡ºå¼‚å¸¸    |
|         `close()`          |                é‡Šæ”¾Statementå®ä¾‹å ç”¨çš„æ•°æ®åº“å’ŒJDBCèµ„æº                 |


##### PreparedStatement(ps)
> [!note] æ¦‚è¿°
> PreparedStatementæ¥å£ç”¨æ¥åŠ¨æ€æ‰§è¡ŒSQLè¯­å¥. PreparedStatementå®ä¾‹æ‰§è¡Œçš„åŠ¨æ€SQLè¯­å¥, å°†è¢«é¢„ç¼–è¯‘å¹¶ä¿å­˜åˆ°è¯¥å®ä¾‹ä¸­, ä»è€Œå¯ä»¥åå¤æ‰§è¡ŒSQLè¯­å¥.
> 
> PreparedStatementæ¥å£çš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹


|                æ–¹æ³•                 |                        æè¿°                         |
| :-------------------------------: | :-----------------------------------------------: |
|     `setInt(int index,int k)`     |                  å°†æŒ‡å®šä½ç½®çš„å‚æ•°è®¾ç½®ä¸ºintå€¼                  |
|   `setFloat(int index,float f)`   |                 å°†æŒ‡å®šä½ç½®çš„å‚æ•°è®¾ç½®ä¸ºfloatå€¼                 |
|    `setLong(int index,long l)`    |                 å°†æŒ‡å®šä½ç½®çš„å‚æ•°è®¾ç½®ä¸ºlongå€¼                  |
|  `setDouble(int index,double d)`  |                å°†æŒ‡å®šä½ç½®çš„å‚æ•°è®¾ç½®ä¸ºdoubleå€¼                 |
| `setBoolean(int index,boolean b)` |                å°†æŒ‡å®šä½ç½®çš„å‚æ•°è®¾ç½®ä¸ºbooleanå€¼                |
|  `setDate(int index,date date)`   |                 å°†æŒ‡å®šä½ç½®çš„å‚æ•°è®¾ç½®ä¸ºdateå€¼                  |
|         `executeQuery()`          | åœ¨æ­¤PreparedStatementå¯¹è±¡ä¸­æ‰§è¡ŒSQLè¯­å¥æŸ¥è¯¢,å¹¶è¿”å›ç”Ÿæˆçš„ResultSetå¯¹è±¡ |
|  `setString(int index,String s)`  |                å°†æŒ‡å®šä½ç½®çš„å‚æ•°è®¾ç½®ä¸ºStringå€¼                 |
| `setNull(int index, intsqlType)`  |                å°†æŒ‡å®šä½ç½®çš„å‚æ•°è®¾ç½®ä¸ºSQL NULL                |
|         `executeUpdate()`         |        æ‰§è¡Œå‰é¢æ‰€åŒ…å«çš„å‚æ•°çš„åŠ¨æ€insert,updateæˆ–deleteè¯­å¥        |
|        `clearParameters()`        |                    æ¸…é™¤å½“å‰æ‰€æœ‰å‚æ•°çš„å€¼                     |

##### ResultSetæ¥å£(rs)
> [!note] æ¦‚è¿°
> ResultSetæ¥å£ç±»ä¼¼äºä¸€ä¸ªä¸´æ—¶è¡¨, ç”¨æ¥æš‚æ—¶*å­˜å‚¨æ•°æ®åº“æŸ¥è¯¢æ“ä½œæ‰€è·å¾—çš„ç»“æœé›†*.
> ResultSetå®ä¾‹å…·æœ‰æŒ‡å‘å½“å‰æ•°æ®è¡Œçš„æŒ‡é’ˆ, æŒ‡é’ˆä¸€å¼€å§‹çš„ä½ç½®åœ¨ç¬¬ä¸€æ¡è®°å½•çš„å‰é¢,é€šè¿‡`next()`æ–¹æ³•å¯å°†æŒ‡é’ˆå‘ä¸‹ç§».
> 
> ResultSetçš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹


|          æ–¹æ³•           |                        æè¿°                        |
| :-------------------: | :----------------------------------------------: |
|      `getInt()`       |   ä»¥intå½¢å¼è·å–æ­¤ResultSetå¯¹è±¡çš„å½“å‰è¡Œçš„æŒ‡å®šåˆ—å€¼. å¦‚æœåˆ—å€¼ä¸ºnull,è¿”å›0   |
|     `getFloat()`      |  ä»¥floatå½¢å¼è·å–æ­¤ResultSetå¯¹è±¡çš„å½“å‰è¡Œçš„æŒ‡å®šåˆ—å€¼. å¦‚æœåˆ—å€¼ä¸ºnull,è¿”å›0  |
|      `getDate()`      | ä»¥dateå½¢å¼è·å–æ­¤ResultSetå¯¹è±¡çš„å½“å‰è¡Œçš„æŒ‡å®šåˆ—å€¼. å¦‚æœåˆ—å€¼ä¸ºnull,è¿”å›null |
|    `getBoolean()`     |   ä»¥å½¢å¼è·å–æ­¤ResultSetå¯¹è±¡çš„å½“å‰è¡Œçš„æŒ‡å®šåˆ—å€¼. å¦‚æœåˆ—å€¼ä¸ºnull,è¿”å›null   |
|     `getString()`     |   ä»¥å½¢å¼è·å–æ­¤ResultSetå¯¹è±¡çš„å½“å‰è¡Œçš„æŒ‡å®šåˆ—å€¼. å¦‚æœåˆ—å€¼ä¸ºnull,è¿”å›nul    |
|     `getObject()`     |   ä»¥å½¢å¼è·å–æ­¤ResultSetå¯¹è±¡çš„å½“å‰è¡Œçš„æŒ‡å®šåˆ—å€¼. å¦‚æœåˆ—å€¼ä¸ºnull,è¿”å›null   |
|       `first()`       |                  å°†æŒ‡é’ˆç§»åŠ¨åˆ°å½“å‰è®°å½•çš„ç¬¬ä¸€è¡Œ                  |
|       `last()`        |                 å°†æŒ‡é’ˆç§»åŠ¨åˆ°å½“å‰è®°å½•çš„æœ€åä¸€è¡Œ                  |
|       `next()`        |                     å°†æŒ‡é’ˆä¸‹ç§»ä¸€è¡Œ                      |
|    `beforeFirst()`    |                 å°†æŒ‡é’ˆç§»åˆ°é›†åˆçš„å¼€å¤´(ç¬¬ä¸€è¡Œ)                  |
|     `afterLast()`     |                 å°†æŒ‡é’ˆä¸€é“é›†åˆçš„æœ«å°¾(æœ€åä¸€è¡Œ)                 |
| `absolute(int index)` |               å°†æŒ‡é’ˆç§»åˆ°ResultSetç»™å®šç¼–å·çš„è¡Œ               |
|      `isFirst()`      |       åˆ¤æ–­æŒ‡é’ˆæ˜¯å¦ä½äºå½“å‰ResultSeté›†åˆçš„ç¬¬ä¸€è¡Œ.å¦‚æœæ˜¯åˆ™è¿”å›true       |
|      `isLast()`       |      åˆ¤æ–­æŒ‡é’ˆæ˜¯å¦ä½äºå½“å‰ResultSeté›†åˆçš„æœ€åä¸€è¡Œ.å¦‚æœæ˜¯åˆ™è¿”å›true       |
|     `updateInt()`     |                    ç”¨intå€¼æ›´æ–°æŒ‡å®šåˆ—                    |
|    `updateFloat()`    |                   ç”¨floatå€¼æ›´æ–°æŒ‡å®šåˆ—                   |
|    `updateLong()`     |                  ç”¨æŒ‡å®šçš„longå€¼æ›´æ–°æŒ‡å®šåˆ—                  |
|   `updateString()`    |                 ç”¨æŒ‡å®šçš„Stringå€¼æ›´æ–°æŒ‡å®šåˆ—                 |
|   `updateObject()`    |                  ç”¨Objectå€¼æ›´æ–°æŒ‡å®šåˆ—                   |
|    `updateNull()`     |                  å°†æŒ‡å®šçš„åˆ—å€¼ä¿®æ”¹ä¸ºnull                   |
|    `updateDate()`     |                  ç”¨æŒ‡å®šçš„dateå€¼æ›´æ–°æŒ‡å®šåˆ—                  |
|   `updateDouble()`    |                 ç”¨æŒ‡å®šçš„doubleå€¼æ›´æ–°æŒ‡å®šåˆ—                 |
|      `getrow()`       |                     æŸ¥çœ‹å½“å‰è¡Œçš„ç´¢å¼•                     |
|     `insertRow()`     |                  å°†æ’å…¥è¡Œçš„å†…å®¹æ’å…¥åˆ°æ•°æ®åº“ä¸­                  |
|     `updateRow()`     |                  å°†å½“å‰è¡Œçš„å†…å®¹åŒæ­¥åˆ°æ•°æ®è¡¨ä¸­                  |
|     `deleteRow()`     |      åˆ é™¤å½“å‰è¡Œä½†æ˜¯ä¸åŒæ­¥åˆ°æ•°æ®åº“ä¸­,è€Œæ˜¯åœ¨æ‰§è¡Œå®Œ`close()`æ–¹æ³•åè¿›è¡ŒåŒæ­¥      |

> [!tip] å°ç»“
> æŠŠJDBCç»„ä»¶æƒ³è±¡æˆ**å¿«é€’ç³»ç»Ÿ**â€‹ï¼š
> - â€‹**DriverManager**â€‹ = å¿«é€’æ€»å…¬å¸ï¼ˆåˆ†é…æœ€è¿‘çš„ç½‘ç‚¹)
> - â€‹**Connection**â€‹ = å¿«é€’ç½‘ç‚¹ï¼ˆå»ºç«‹ç‰©æµé€šé“ï¼‰
> - â€‹**Statement**â€‹ = æ‰‹å†™è¿å•ï¼ˆæ¯æ¬¡éƒ½è¦é‡æ–°å¡«å†™ï¼‰
> - â€‹**PreparedStatement**â€‹ = ç”µå­è¿å•æ¨¡æ¿ï¼ˆä¸€æ¬¡å¡«å†™ï¼Œå¤šæ¬¡ä½¿ç”¨ï¼‰
> - â€‹**ResultSet**â€‹ = å¿«é€’åŒ…è£¹ï¼ˆé‡Œé¢è£…ç€ä½ è¦çš„æ•°æ®ï¼‰


å…³ç³»å›¾:

```mermaid
graph TD
A[DriverManager] -->|æ ¸å¿ƒæ¢çº½ï¼Œåˆ›å»ºè¿æ¥ï¼›æ•°æ®åº“è¿æ¥ä¼šè¯ï¼Œåˆ›å»ºè¯­å¥å¯¹è±¡å·¥ç¨‹| B[Connection]

B -->
|ç›´æ¥æ‰§è¡Œå®Œæ•´çš„SQLè¯­å¥ï¼›
æ¯æ¬¡æ‰§è¡Œéƒ½éœ€è¦ç¼–è¯‘ï¼›
å­˜åœ¨SQLæ³¨å…¥é£é™©| C[Statement]

B -->
|é¢„ç¼–è¯‘SQLæ¨¡æ¿ï¼Œé˜²æ­¢æ³¨å…¥ï¼›
æ€§èƒ½ä¼˜åŒ–ï¼Œä¸€æ¬¡ç¼–è¯‘å¤šè¡Œï¼›
å‚æ•°åŒ–æŸ¥è¯¢| D[PreparedStatement]

C --> E[ResultSet
ï¼ˆç»“æœé›†åˆï¼Œéœ€è¦æ˜¾å¼å…³é—­é‡Šæ”¾èµ„æºï¼‰]
D --> E
```

### æ•°æ®åº“æ“ä½œ
> [!tip] æ¦‚è¿°
> è¦å¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œ,é¦–å…ˆéœ€è¦å»ºç«‹å’Œæ•°æ®åº“çš„è¿æ¥.
> JDBC APIä¸­æä¾›çš„å„ç§ç±»å¯å¯¹æ•°æ®è¡¨ä¸­çš„æ•°æ®è¿›è¡Œ*å¢åˆ æ”¹æŸ¥*ç­‰æ“ä½œ


#### è¿æ¥æ•°æ®åº“
> [!note] æ¦‚è¿°
> æƒ³è¦è®¿é—®æ•°æ®åº“,é¦–å…ˆéœ€è¦åŠ è½½æ•°æ®åº“çš„é©±åŠ¨ç¨‹åº(åªéœ€è¦åœ¨ç¬¬ä¸€æ¬¡è®¿é—®æ•°æ®åº“çš„æ—¶å€™åŠ è½½ä¾æ¬¡),ç„¶åæ¯æ¬¡è®¿é—®æ•°æ®æ—¶åˆ›å»ºä¸€ä¸ª*ä¸´æ—¶çš„Connectionå¯¹è±¡*,æ¥ç€æ‰§è¡Œæ“ä½œæ•°æ®åº“çš„SQLè¯­å¥,åœ¨æ‰§è¡Œå®Œæ“ä½œä¹‹åé”€æ¯è¿™ä¸ªä¸´æ—¶å¯¹è±¡,é‡Šæ”¾ä¸æ•°æ®åº“çš„è¿æ¥
```java
public class ConnectionDemo {  
    public static void main(String[] args) {  
        Connection con = null;  
        try {  
            Class.forName("com.mysql.cj.jdbc.Driver");  
            con = DriverManager.getConnection("jdbc:mysql://localhost:3306/stutest","root","123456");  
            if(con != null){  
                System.out.println("æ•°æ®åº“è¿æ¥æˆåŠŸ!");  
            }        }        catch (SQLException e){  
            e.printStackTrace();  
            System.out.println("æ•°æ®åº“è¿æ¥å¤±è´¥!");  
        }        catch (ClassNotFoundException e){  
            e.printStackTrace();  
            System.out.println("æœªæ‰¾åˆ°é©±åŠ¨ç±»!");  
        }
    }
}
```
#### å‘æ•°æ®åº“å‘é€SQLè¯­å¥
> [!note] æ¦‚è¿°
> åˆ›å»ºäº†å’Œæ•°æ®åº“çš„è¿æ¥ä¹‹å,éœ€è¦æ‰§è¡ŒSQLè¯­å¥. è¿™æ—¶å°±éœ€è¦åˆ›å»º*Statementå¯¹è±¡*.
```java
Statement stmt = con.createStatement();
```
#### å¤„ç†æŸ¥è¯¢ç»“æœé›†
> [!note] æ¦‚è¿°
> æœ‰äº†Statementå¯¹è±¡ä¹‹å,å°±å¯ä»¥è°ƒç”¨ç›¸åº”çš„æ–¹æ³•å®ç°å¯¹æ•°æ®åº“çš„æŸ¥è¯¢å’Œä¿®æ”¹,å¹¶*å°†æŸ¥è¯¢ç»“æœé›†å­˜å‚¨åˆ°ResultSetå¯¹è±¡ä¸­*.
```java
ResultSet = stmt.executeQuery("select * from student")
```
> [!tip] æç¤º
> è¿è¡Œç»“æœè¿”å›ä¸€ä¸ªResultSetå¯¹è±¡. ResultSetå¯¹è±¡ä¸€æ¬¡åªèƒ½çœ‹åˆ°ç»“æœé›†ä¸­çš„ä¸€è¡Œæ•°æ®,ä½¿ç”¨`next()`æ–¹æ³•å¯ä»¥å°†å…‰æ ‡ç§»åˆ°ä¸‹ä¸€è¡Œ
#### é¡ºåºæŸ¥è¯¢
> [!note] æ¦‚è¿°
> ResultSetç±»ä¸­çš„`next()`æ–¹æ³•æ˜¯è¿”å›å€¼ä¸ºbooleançš„æ•°æ®,å½“æŒ‡é’ˆç§»åŠ¨åˆ°æœ€åä¸€è¡Œæ•°æ®åä¼šè¿”å›false.


> [!example] ä¾‹:æŸ¥è¯¢æ•°æ®åº“ä¸­studentè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®
```java
// é¡ºåºæŸ¥è¯¢  
public class SequentialqueryDemo {  
    public static void main(String[] args) {  
        Connection con = null;  
        try {  
            // åŠ è½½é©±åŠ¨  
            Class.forName("com.mysql.cj.jdbc.Driver");  
            // è·å–è¿æ¥  
            con = DriverManager.getConnection("jdbc:mysql://localhost:3306/stutest","root","123456");  
            if(con != null){  
                System.out.println("æ•°æ®åº“è¿æ¥æˆåŠŸ!");  
            }  
            // æŸ¥è¯¢  
            Statement stmt = con.createStatement();  
            ResultSet rs = stmt.executeQuery("select * from student");  
            while (rs.next()){  
                String id = rs.getString("id");  
                String name = rs.getString("name");  
                System.out.println("ç¼–å·:"+id+" å§“å:"+name);  
            }        }        catch (SQLException e){  
            e.printStackTrace();  
            System.out.println("æ•°æ®åº“è¿æ¥å¤±è´¥!");  
        }        catch (ClassNotFoundException e){  
            e.printStackTrace();  
            System.out.println("æœªæ‰¾åˆ°é©±åŠ¨ç±»!");  
        }
    }
}
```
è¿è¡Œç»“æœ
```text
æ•°æ®åº“è¿æ¥æˆåŠŸ!
ç¼–å·:1 å§“å:å¼ ä¸‰
ç¼–å·:2 å§“å:æå››
ç¼–å·:3 å§“å:ç‹äº”
ç¼–å·:4 å§“å:èµµå…­
ç¼–å·:5 å§“å:å­™ä¸ƒ
```

#### æ¨¡ç³ŠæŸ¥è¯¢
> [!note] æ¦‚è¿°
> SQLè¯­å¥ä¸­æä¾›äº†LIKEæ“ä½œç¬¦ç”¨äºæ¨¡ç³ŠæŸ¥è¯¢,å¯ä½¿ç”¨`%`æ¥ä»£æ›¿0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦,ä½¿ç”¨`_`æ¥ä»£æ›¿å•ä¸ªå­—ç¬¦.
```java
// æ¨¡ç³ŠæŸ¥è¯¢  
public class FuzzyqueryDemo {  
    public static void main(String[] args) {  
        Connection con = null;  
        try {  
            // åŠ è½½é©±åŠ¨  
            Class.forName("com.mysql.cj.jdbc.Driver");  
            // è·å–è¿æ¥  
            con = DriverManager.getConnection("jdbc:mysql://localhost:3306/stutest","root","123456");  
            if(con != null){  
                System.out.println("æ•°æ®åº“è¿æ¥æˆåŠŸ!");  
            }  
            // æŸ¥è¯¢  
            Statement stmt = con.createStatement();  
            ResultSet rs = stmt.executeQuery("select * from student where name like 'å¼ %'");  
            while (rs.next()){  
                String id = rs.getString("id");  
                String name = rs.getString("name");  
                System.out.println("ç¼–å·:"+id+" å§“å:"+name);  
            }        }        catch (SQLException e){  
            e.printStackTrace();  
            System.out.println("æ•°æ®åº“è¿æ¥å¤±è´¥!");  
        }        catch (ClassNotFoundException e){  
            e.printStackTrace();  
            System.out.println("æœªæ‰¾åˆ°é©±åŠ¨ç±»!");  
        }
    }
}
```

#### é¢„å¤„ç†è¯­å¥
> [!note] æ¦‚è¿°
> å‘æ•°æ®åº“å‘é€ä¸€ä¸ªSQLå‘½ä»¤,æ•°æ®åº“ä¸­çš„è§£é‡Šå™¨è´Ÿè´£æŠŠSQLè¯­å¥ç”Ÿæˆä¸ºåº•å±‚çš„å†…éƒ¨å‘½ä»¤,ç„¶åæ‰§è¡Œè¯¥å‘½ä»¤,å®Œæˆç›¸å…³çš„æ•°æ®æ“ä½œ. å¦‚æœä¸æ–­å‘æ•°æ®åº“æäº¤SQLè¯­å¥,ä¼šå¢åŠ SQLè§£é‡Šå™¨çš„è´Ÿæ‹…,å½±å“æ‰§è¡Œé€Ÿåº¦
> 
> JDBCå¯ä»¥é€šè¿‡Connectionå¯¹è±¡çš„`preparedStatement(String sql)`æ–¹æ³•æ¥å¯¹SQLè¯­å¥è¿›è¡Œé¢„å¤„ç†,ç”Ÿæˆæ•°æ®åº“åº•å±‚çš„å†…éƒ¨å‘½ä»¤,å¹¶å°†è¯¥å¯¹è±¡å°è£…åœ¨PreparedStatementå¯¹è±¡ä¸­. é€šè¿‡è°ƒç”¨è¯¥å¯¹è±¡çš„ç›¸åº”æ–¹æ³•,ä½¿SQLå¯ä»¥æ‰§è¡Œåº•å±‚çš„å‘½ä»¤
> 
> å¯¹SQLè¿›è¡Œé¢„å¤„ç†æ—¶å¯ä»¥ä½¿ç”¨é€šé…ç¬¦`?`æ¥ä»£æ›¿ä»»ä½•å­—æ®µå€¼,å¦‚
> ```Java
> sql = con.prepareStatement("select * from tb_stu where id = ?")
> ```
> åœ¨æ‰§è¡Œé¢„å¤„ç†è¯­å¥ä¹‹å‰,å¿…é¡»ä½¿ç”¨ç›¸åº”çš„æ–¹æ³•æ¥è®¾ç½®é€šé…ç¬¦è¡¨ç¤ºçš„å€¼.ä¾‹å¦‚
> ```Java
> sql.setInt(1,16);
> ```
> è¯¥è¯­å¥ä¸­çš„1è¡¨ç¤ºä»å·¦å‘å³ç¬¬ä¸€ä¸ªé€šé…ç¬¦,16è¡¨ç¤ºè®¾ç½®çš„é€šé…ç¬¦çš„å€¼.
> 
> è™½ç„¶çœ‹èµ·æ¥éº»çƒ¦äº†ç‚¹,ä½†æ˜¯é¢„å¤„ç†è¯­å¥å¯ä»¥ä½¿åº”ç”¨ç¨‹åºåŠ¨æ€åœ°æ”¹å˜SQLè¯­å¥ä¸­å…³äºå­—æ®µå€¼æ¡ä»¶çš„è®¾ç½®

> [!example] ä¾‹:æ‰¾åˆ°ç¼–å·ä¸º3çš„åŒå­¦
```java
// é€šè¿‡é¢„å¤„ç†è¯­å¥æŸ¥æ‰¾æ•°æ®  
public class PreparedStmtDemo {  
    public static void main(String[] args) {  
        Connection con = null;  
        try {  
            // åŠ è½½é©±åŠ¨  
            Class.forName("com.mysql.cj.jdbc.Driver");  
            // è·å–è¿æ¥  
            con = DriverManager.getConnection("jdbc:mysql://localhost:3306/stutest", "root", "123456");  
            if (con != null) {  
                System.out.println("æ•°æ®åº“è¿æ¥æˆåŠŸ!");  
            }  
            // é¢„å¤„ç†è¯­å¥,åç»­åªéœ€è¯»å–é€šé…ç¬¦ä½ç½®çš„å†…å®¹å³å¯  
            PreparedStatement ps = con.prepareStatement("select * from student where id = ?");  
            ps.setInt(1, 3);  
            ResultSet rs = ps.executeQuery();  
            while (rs.next()) {  
                String id = rs.getString("id");  
                String name = rs.getString("name");  
                System.out.println("ç¼–å·:" + id + " å§“å:" + name);  
            }        } catch (SQLException e) {  
            e.printStackTrace();  
            System.out.println("æ•°æ®åº“è¿æ¥å¤±è´¥!");  
        } catch (ClassNotFoundException e) {  
            e.printStackTrace();  
            System.out.println("æœªæ‰¾åˆ°é©±åŠ¨ç±»!");  
        }
    }
}
```

#### å¢/åˆ /æ”¹è®°å½•
> [!note] æ¦‚è¿°
> SQLè¯­å¥å¯ä»¥å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„æ“ä½œ.
> å¯é€šè¿‡PreparedStatementç±»çš„æŒ‡å®šå‚æ•°æ¥åŠ¨æ€åœ°å¯¹æ•°æ®è¡¨ä¸­çš„åŸæœ‰æ•°æ®è¿›è¡Œæ›´æ”¹,å¹¶é€šè¿‡`executeUpdate()`æ–¹æ³•æ‰§è¡Œæ›´æ–°è¯­å¥çš„æ“ä½œ.

>[!example] ä¾‹:å¯¹å­¦ç”Ÿè¡¨è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œ
>- æ·»åŠ æ–°ç”Ÿ,å§“åä¸º: ç‹å¯Œè´µ
>- å°†ç¼–å·ä¸º2çš„å­¦ç”Ÿå§“åä¿®æ”¹ä¸º: æç¾ä¸½
>- åˆ é™¤ç¼–å·ä¸º3çš„å­¦ç”Ÿ
>
```java
// å¯¹æ•°æ®åº“ä¸­çš„å†…å®¹è¿›è¡Œå¢åˆ æ”¹æŸ¥  
public class UpdateDemo {  
    Connection con;  
  
    // åˆå§‹åŒ–æ•°æ®åº“(åˆ›å»ºè¿æ¥å¹¶æ£€æµ‹)  
    public void initConnection() {  
        try {  
            // åŠ è½½é©±åŠ¨  
            Class.forName("com.mysql.cj.jdbc.Driver");  
            // è·å–è¿æ¥  
            con = DriverManager.getConnection("jdbc:mysql://localhost:3306/stutest", "root", "123456");  
        } catch (SQLException e) {  
            handleException(e, "æ•°æ®åº“è¿æ¥å¤±è´¥!");  
        } catch (ClassNotFoundException e) {  
            handleException(e, "æœªæ‰¾åˆ°é©±åŠ¨ç±»!");  
        }
    }  
    /**  
     * æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿæ•°æ®  
     */  
    public void showAllStudents() {  
        String query = "select * from student";  
        try (Statement stmt = con.createStatement(); ResultSet rs = stmt.executeQuery(query)) {  
            while (rs.next()) {  
                String id = rs.getString("id");  
                String name = rs.getString("name");  
                System.out.println("ç¼–å·:" + id + " å§“å:" + name);  
            }        } catch (SQLException e) {  
            handleException(e, "æŸ¥è¯¢å­¦ç”Ÿæ•°æ®å¤±è´¥!");  
        }
    }  
    /**  
     * æ·»åŠ å­¦ç”Ÿæ•°æ®  
     */  
    public void addStudent(String name) {  
        if (name == null || name.trim().isEmpty()) {  
            System.out.println("å­¦ç”Ÿå§“åä¸èƒ½ä¸ºç©º!");  
            return;  
        }        String sql = "insert into student values(default, ?)";  
        try (PreparedStatement ps = con.prepareStatement(sql)) {  
            ps.setString(1, name); // ä¿®å¤ç´¢å¼•é”™è¯¯  
            ps.executeUpdate();  
        } catch (SQLException e) {  
            handleException(e, "æ·»åŠ å­¦ç”Ÿæ•°æ®å¤±è´¥!");  
        }
    }  
    /**  
     * åˆ é™¤å­¦ç”Ÿ  
     */  
    public void deleteStudent(int id) {  
        if (id <= 0) {  
            System.out.println("æ— æ•ˆçš„å­¦ç”Ÿç¼–å·!");  
            return;  
        }        String sql = "delete from student where id = ?";  
        try (PreparedStatement ps = con.prepareStatement(sql)) {  
            ps.setInt(1, id);  
            ps.executeUpdate();  
        } catch (SQLException e) {  
            handleException(e, "åˆ é™¤å­¦ç”Ÿæ•°æ®å¤±è´¥!");  
        }
    }  
    /**  
     * ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯  
     */  
    public void modifyStudent(int id, String name) {  
        if (id <= 0 || name == null || name.trim().isEmpty()) {  
            System.out.println("æ— æ•ˆçš„å­¦ç”Ÿç¼–å·æˆ–å§“å!");  
            return;  
        }        String sql = "update student set name = ? where id = ?";  
        try (PreparedStatement ps = con.prepareStatement(sql)) {  
            ps.setString(1, name);  
            ps.setInt(2, id);  
            ps.executeUpdate();  
        } catch (SQLException e) {  
            handleException(e, "ä¿®æ”¹å­¦ç”Ÿæ•°æ®å¤±è´¥!");  
        }    }  
    /**  
     * é€šç”¨å¼‚å¸¸å¤„ç†æ–¹æ³•  
     */  
    private void handleException(Exception e, String message) {  
        e.printStackTrace();  
        System.out.println(message);  
    }  
    public static void main(String[] args) {  
        UpdateDemo demo = new UpdateDemo();  
        // åˆå§‹åŒ–æ•°æ®åº“  
        demo.initConnection();  
        // æ˜¾ç¤ºæ‰€æœ‰å­¦ç”Ÿä¿¡æ¯  
        demo.showAllStudents();  
        // æ·»åŠ å­¦ç”Ÿä¿¡æ¯  
        System.out.println("æ·»åŠ æ–°åŒå­¦:");  
        demo.addStudent("å°ç‹");  
        demo.showAllStudents();  
        // åˆ é™¤å­¦ç”Ÿä¿¡æ¯  
        System.out.println("åˆ é™¤ç¼–å·æ˜¯2çš„åŒå­¦:");  
        demo.deleteStudent(2);  
        demo.showAllStudents();  
        // ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯  
        System.out.println("ä¿®æ”¹ç¼–å·æ˜¯3çš„åŒå­¦:");  
        demo.modifyStudent(3, "ç‰¢å¤§");  
        demo.showAllStudents();  
    }
}
    
```

> [!danger] ç‰¹åˆ«æ³¨æ„!
> 1. åœ¨å¤„ç†å¼‚å¸¸æ—¶åº”è¯¥å…¨é¢æ•è·,ä¸”åœ¨æ•è·äº†SQLExceptionä¹‹åæ–­å¼€ä¸æ•°æ®åº“çš„è¿æ¥
> 2. ä½¿ç”¨é¢„å¤„ç†çš„è¯­å¥æé«˜æ•°æ®åº“çš„æ“ä½œæ•ˆç‡,ä¸”èƒ½å¤Ÿé˜²æ³¨å…¥


---


## 3.10 GUIç¼–ç¨‹(JavaSwing)



---

## 3.11 å¤šçº¿ç¨‹(é‡ç‚¹)

### æ¦‚è¿°
> [!note] çº¿ç¨‹ç®€ä»‹
> ä¸–é—´æœ‰å¾ˆå¤šäº‹æƒ…æ˜¯å¯ä»¥åŒæ—¶å®Œæˆçš„. å¦‚: äººä½“å¯ä»¥åŒæ—¶å®Œæˆå‘¼å¸,è¡€æ¶²å¾ªç¯,æ€è€ƒé—®é¢˜ç­‰æ´»åŠ¨; ç”¨æˆ·å¯ä»¥ç”¨è®¡ç®—æœºå¬æ­Œä¹Ÿå¯ä»¥æ‰“å°æ–‡ä»¶. åŒæ ·çš„,è®¡ç®—æœºå®Œå…¨å¯ä»¥*å°†å„ç§æ´»åŠ¨åŒæ—¶è¿›è¡Œ*,è¿™ç§åšæ³•åœ¨Javaä¸­ç§°ä¸ºå¹¶å‘,è€Œå°†*å¹¶å‘å®Œæˆçš„æ¯ä¸€ä»¶äº‹æƒ…ç§°ä¸ºçº¿ç¨‹*.
> 
> åœ¨Javaä¸­,**å¹¶å‘**æœºåˆ¶ååˆ†é‡è¦. åœ¨ä»¥å¾€çš„ç¼–ç¨‹ä¸­,æˆ‘ä»¬éƒ½æ˜¯åœ¨ä¸€ä¸ªä»»åŠ¡ç»“æŸä¹‹åå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡,è¿™æ ·çš„è¯ä¸‹ä¸€ä¸ªä»»åŠ¡å¼€å§‹å¿…é¡»ç­‰å¾…å‰ä¸€ä¸ªä»»åŠ¡çš„å®Œæˆ. è€ŒJavaæä¾›äº†å¹¶å‘æœºåˆ¶,ç¨‹åºå‘˜å¯ä»¥åœ¨ç¨‹åºçš„è¿è¡Œä¸­æ‰§è¡Œå¤šä¸ªçº¿ç¨‹, *æ¯ä¸€ä¸ªçº¿ç¨‹ç‹¬ç«‹å®Œæˆä¸€ä¸ªåŠŸèƒ½*,å¹¶ä¸å…¶ä»–çº¿ç¨‹å¹¶å‘æ‰§è¡Œ, è¿™ç§æœºåˆ¶ç§°ä¸ºå¤šçº¿ç¨‹.
> 
> å¤šçº¿ç¨‹æ˜¯éå¸¸å¤æ‚çš„æŠ€æœ¯, åœ¨Windowsç³»ç»Ÿä¸­, ç³»ç»Ÿä»¥**è¿›ç¨‹**ä¸ºå•ä½. ä¸€ä¸ªè¿›ç¨‹æ˜¯ä¸€ä¸ªåŒ…å«è‡ªèº«åœ°å€çš„ç¨‹åº, *æ¯ä¸ªç‹¬ç«‹æ‰§è¡Œçš„ç¨‹åºè¢«ç§°ä¸ºè¿›ç¨‹*, ç³»ç»Ÿåˆ†é…ç»™æ¯ä¸ªè¿›ç¨‹ä¸€æ®µæœ‰é™çš„ä½¿ç”¨CPUçš„æ—¶é—´(ä¹Ÿç§°ä¸ºCPUçš„æ—¶é—´ç‰‡),CPUåœ¨è¿™æ®µæ—¶é—´ä¸­æ‰§è¡ŒæŸä¸ªè¿›ç¨‹,ç„¶åå®ƒä¼šåœ¨ä¸‹ä¸€æ®µæ—¶é—´è·³è½¬å¹¶æ‰§è¡Œå¦ä¸€ä¸ªè¿›ç¨‹. ç”±äºCPUè½¬æ¢å¾ˆå¿«, å› æ­¤çœ‹èµ·æ¥æ¯ä¸ªè¿›ç¨‹éƒ½åƒæ˜¯åœ¨åŒæ—¶æ‰§è¡Œä¸€æ ·.
> 
> ä¸€ä¸ªçº¿ç¨‹æ˜¯è¿›ç¨‹ä¸­çš„æ‰§è¡Œæµç¨‹,*ä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥åŒæ—¶åŒ…æ‹¬å¤šä¸ªçº¿ç¨‹*,æ¯ä¸ªçº¿ç¨‹ä¹Ÿå¯ä»¥å¾—åˆ°ä¸€å°æ®µç¨‹åºçš„æ‰§è¡Œæ—¶é—´, è¿™æ ·ä¸€ä¸ªè¿›ç¨‹å°±æ‹¥æœ‰å¤šä¸ªå¹¶å‘æ‰§è¡Œçš„çº¿ç¨‹. åœ¨å•çº¿ç¨‹ä¸­, ç¨‹åºä»£ç æŒ‰è°ƒç”¨çš„é¡ºåºä¾æ¬¡å¾€ä¸‹è¿›è¡Œ. å¦‚æœéœ€è¦ä¸€ä¸ªè¿›ç¨‹åŒæ—¶å®Œæˆå¤šæ®µä»£ç çš„æ“ä½œ,å°±éœ€è¦ä½¿ç”¨å¤šçº¿ç¨‹

### åˆ›å»ºçº¿ç¨‹
> [!note] æ¦‚è¿°
> åœ¨Javaä¸­,ä¸»è¦æä¾›ä¸¤ç§æ–¹å¼å®ç°çº¿ç¨‹
> - ç»§æ‰¿java.lang.Threadç±»
> - å®ç°java.lang.Runnableæ¥å£

#### ç»§æ‰¿Threadç±»
> [!note] æ¦‚è¿°
> Threadç±»æ˜¯java.langåŒ…ä¸­çš„ä¸€ä¸ªç±»,ä»è¿™ä¸ªç±»ä¸­å®ä¾‹åŒ–çš„å¯¹è±¡ä»£è¡¨çº¿ç¨‹, ç¨‹åºå‘˜è¦å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹éœ€è¦å»ºç«‹Threadå®ä¾‹,Threadå¸¸ç”¨çš„ä¸¤ç§æ„é€ æ–¹æ³•å¦‚ä¸‹
>- `public Thread()`
>- `public Thread(String threadName)`
>
>ç»§æ‰¿Threadç±»åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹çš„è¯­æ³•å¦‚ä¸‹
>```Java
>public class ThreadTest extends Thread{
>	...
>}
>```
>
>å®Œæˆçº¿ç¨‹çœŸæ­£åŠŸèƒ½çš„ä»£ç æ”¾åœ¨ç±»çš„`run()`æ–¹æ³•ä¸­,å½“ä¸€ä¸ªç±»ç»§æ‰¿äº†Threadç±»ä¹‹å,å°±å¯ä»¥åœ¨è¯¥ç±»ä¸­è¦†ç›–`run()`æ–¹æ³•. å…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹
>```Java
>public void run(){
>	...
>}
>```
>
>å½“æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹ç¨‹åºæ—¶,å°±ä¼šäº§ç”Ÿä¸€ä¸ªçº¿ç¨‹,ä¸»æ–¹æ³•å°±æ˜¯åœ¨è¿™ä¸ªçº¿ç¨‹ä¸Šè¿è¡Œçš„. å½“ä¸å†å¯ç”¨å…¶å®ƒçº¿ç¨‹æ—¶, è¯¥ç¨‹åºå°±æ˜¯å•çº¿ç¨‹ç¨‹åº. ä¸»æ–¹æ³•çš„çº¿ç¨‹å¯åŠ¨ç”±Javaè™šæ‹Ÿæœºè´Ÿè´£, ç¨‹åºå‘˜è´Ÿè´£å¯åŠ¨è‡ªå·±çš„çº¿ç¨‹

> [!example] ä¾‹:è®©çº¿ç¨‹å¾ªç¯è¾“å‡º1~10çš„æ•°å­—
```Java
public class ThreadTest extends Thread{  
    public void run(){  
        for (int i = 1; i <= 10; i++) {  
            System.out.print(i+" ");  
        }
    }  
    public static void main(String[] args) {  
        // å®ä¾‹åŒ–çº¿ç¨‹å¯¹è±¡  
        ThreadTest t = new ThreadTest();  
        // å¯åŠ¨çº¿ç¨‹  
        t.start();  
    }
}
```
è¿è¡Œç»“æœ
```text
1 2 3 4 5 6 7 8 9 10 
```
> [!warning] æ³¨æ„
> `start()`æ–¹æ³•ä¼šå¯åŠ¨çº¿ç¨‹,çº¿ç¨‹è‡ªåŠ¨æ‰§è¡Œ`run()`æ–¹æ³•ä¸­çš„ä»£ç .
> 
> å¦‚æœ`start()`æ–¹æ³•å·²ç»å¯åŠ¨äº†ä¸€ä¸ªçº¿ç¨‹,é‚£ä¹ˆè¿™æ—¶ç³»ç»Ÿä¼šæŠ›å‡º*IllegalThreadStateException*å¼‚å¸¸
> 
> åœ¨mainæ–¹æ³•ä¸­ï¼Œä½¿çº¿ç¨‹æ‰§è¡Œå°±è¦è°ƒç”¨ Thread ç±»ä¸­çš„ `start()`æ–¹æ³•ï¼Œ`start()`æ–¹æ³•è°ƒç”¨è¢«è¦†ç›–çš„`run()`æ–¹æ³•ï¼Œå¦‚æœä¸è°ƒç”¨`start()`æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹æ°¸è¿œä¸ä¼šè¢«å¯åŠ¨ã€‚åœ¨ä¸»æ–¹æ³•æ²¡æœ‰è°ƒç”¨`start()`æ–¹æ³•ä¹‹å‰ï¼ŒThreadå¯¹è±¡åªæ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œè€Œéä¸€ä¸ªçº¿ç¨‹

#### å®ç°Runnableæ¥å£
> [!note] æ¦‚è¿°
> ç¨‹åºå‘˜å¦‚æœè¦ç»§æ‰¿å…¶å®ƒéThreadç±»,è€Œä¸”è¿˜è¦ä½¿å½“å‰ç±»å®ç°å¤šçº¿ç¨‹, è¿™æ—¶å¯ä»¥é€šè¿‡***Runnableæ¥å£***æ¥å®ç°.
> å¦‚: ä¸€ä¸ªæ‰©å±•JFrameçš„GUIç¨‹åºæ— æ³•ç»§ç»­ç»§æ‰¿Threadç±»,è¿™æ—¶å°±éœ€è¦å®ç°Runnableæ¥å£ä¸­çš„æ–¹æ³•
> ```Java
> public class demo extends Object implements Runnable
> ```
> 
> å®ç°Runnableæ¥å£çš„ç¨‹åºä¼šåˆ›å»ºä¸€ä¸ªThreadå¯¹è±¡,å¹¶å°†Runnableå¯¹è±¡å’ŒThreadå¯¹è±¡ç›¸å…³è”. Threadç±»ä¸­æœ‰ä¸¤ä¸ªæ„é€ æ–¹æ³•:
> - `public Thread(Runnable target)`
> - `public Thread(Runnable target,String name)`
> 
> ä½¿ç”¨Runnableæ¥å£å¯åŠ¨æ–°çš„çº¿ç¨‹æ­¥éª¤å¦‚ä¸‹
> 1. å»ºç«‹Runnableå¯¹è±¡
> 2. ä½¿ç”¨å‚æ•°ä¸ºRunnableå¯¹è±¡çš„æ„é€ æ–¹æ³•åˆ›å»ºThreadå®ä¾‹
> 3. è°ƒç”¨`start()`æ–¹æ³•å¯åŠ¨çº¿ç¨‹

> [!tip] è¯´æ˜
> æŸ¥è¯¢APIå¯ä»¥å‘ç°,å®è´¨ä¸ŠThreadç±»å®ç°äº†Runnableæ¥å£,å…¶ä¸­çš„`run()`æ–¹æ³•å°±æ˜¯å¯¹Runnableæ¥å£ä¸­`run()`æ–¹æ³•çš„å…·ä½“å®ç°

> [!example] ä¾‹:è®©çª—ä½“ä¸­çš„å›¾æ ‡åŠ¨èµ·æ¥

```Java
public class SwingAndThread extends JFrame {  
    private volatile boolean running = true; // æ§åˆ¶çº¿ç¨‹è¿è¡ŒçŠ¶æ€  
    private static final int ANIMATION_DELAY = 500; // åŠ¨ç”»é—´éš”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰  
    int count = 0;  
  
    public SwingAndThread() {  
        setBounds(300, 200, 250, 100);  
        Container container = getContentPane(); // ä¸»å®¹å™¨  
        container.setLayout(null);  
  
        Icon icon = new ImageIcon("F:\\Codings\\Java Codings\\Trainning\\src\\ThreadDemo\\RunnableDemo\\img.png");  
        JLabel label = new JLabel(icon);  
        // è®¾ç½®æ ‡ç­¾ä½ç½®å’Œå¤§å°  
        label.setBounds(10, 10, 200, 50);  
        Thread t = new Thread(){  
            public void run(){  
                while (true){  
                    label.setBounds(count, 10, 200, 50);  
                    try {  
                        Thread.sleep(500);  
                    }catch (InterruptedException e){  
                        e.printStackTrace();  
                    }                    count += 4;  
                    if (count >= 200){  
                        count = 10;  
                    }
                } 
            }
        };        
        t.start(); // å¯åŠ¨çº¿ç¨‹  
        container.add(label); // æ·»åŠ æ ‡ç­¾  
        setVisible(true); // æ˜¾ç¤ºçª—ä½“  
        setDefaultCloseOperation(EXIT_ON_CLOSE);  
    }    
    public static void main(String[] args) {  
        new SwingAndThread();  
    }
}
```
#### å®ç°Callableæ¥å£
> [!note] æ¦‚è¿°
> é™¤äº†é€šè¿‡ç»§æ‰¿Threadç±»å’Œå®ç°Runnableæ¥å£,è¿˜æœ‰ä¸€ç§æ–¹å¼èƒ½å¤Ÿå®ç°çº¿ç¨‹--å®ç°Callableæ¥å£.
> 
> å®ç°Runnableæ¥å£å’Œå®ç°Callableæ¥å£çš„åŒºåˆ«åœ¨äºä»¥ä¸‹å‡ ç‚¹
> - å‰è€…é‡å†™çš„æ–¹æ³•çš„`run()`,åè€…é‡å†™çš„æ˜¯`call()`
> - å‰è€…æ— è¿”å›å€¼,åè€…æœ‰è¿”å›å€¼
> - å‰è€…ä¸éœ€è¦æŠ›å‡ºå¼‚å¸¸,åè€…éœ€è¦æŠ›å‡ºå¼‚å¸¸
> 
> å®ç°Callableæ¥å£çš„æ­¥éª¤å¦‚ä¸‹
> 1. åˆ›å»ºä¸€ä¸ªç±»å®ç°Callableæ¥å£
> 2. ä½¿ç”¨å‚æ•°ä¸ºCallableæ¥å£çš„FutureTaskç±»çš„æœ‰å‚æ„é€ æ–¹æ³•, åˆ›å»ºä¸€ä¸ªFutureTaskå¯¹è±¡
> 3. ä½¿ç”¨Threadç±»çš„æœ‰å‚æ„é€ æ–¹æ³•,åˆ›å»ºä¸€ä¸ªThreadç±»å¯¹è±¡
> 4. å¯åŠ¨çº¿ç¨‹å, é€šè¿‡`FutureTask.get()`æ–¹æ³•è·å–çº¿ç¨‹çš„è¿”å›å€¼
> 

> [!example] ç¤ºä¾‹ä»£ç 

```Java
public class CallableDemo {  
    public static void main(String[] args) {  
        // åˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°ä¸º1çš„çº¿ç¨‹æ±   
        ExecutorService executor = Executors.newSingleThreadExecutor();  
  
        // å®ç° Callable æ¥å£çš„ä»»åŠ¡  
        Callable<Integer> task = new Callable<>() {  
            @Override  
            public Integer call() throws Exception {  
                System.out.println("å­çº¿ç¨‹æ­£åœ¨æ‰§è¡Œ...");  
                Thread.sleep(2000); // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ  
                int result = 42; // å‡è®¾è®¡ç®—ç»“æœæ˜¯ 42                System.out.println("å­çº¿ç¨‹å®Œæˆè®¡ç®—ï¼Œç»“æœä¸º: " + result);  
                return result;  
            } 
        };  
        // æäº¤ä»»åŠ¡å¹¶è·å– Future å¯¹è±¡  
        Future<Integer> future = executor.submit(task);  
  
        try {  
            System.out.println("ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹å®Œæˆ...");  
            Integer result = future.get(); // é˜»å¡ç›´åˆ°ä»»åŠ¡å®Œæˆå¹¶è¿”å›ç»“æœ  
            System.out.println("ä¸»çº¿ç¨‹è·å–åˆ°å­çº¿ç¨‹çš„ç»“æœ: " + result);  
        } catch (InterruptedException | ExecutionException e) {  
            e.printStackTrace();  
        } finally {  
            executor.shutdown(); // å…³é—­çº¿ç¨‹æ±   
        }  
    }
}
```
è¿è¡Œç»“æœ
```text
ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹å®Œæˆ...
å­çº¿ç¨‹æ­£åœ¨æ‰§è¡Œ...
å­çº¿ç¨‹å®Œæˆè®¡ç®—ï¼Œç»“æœä¸º: 42
ä¸»çº¿ç¨‹è·å–åˆ°å­çº¿ç¨‹çš„ç»“æœ: 42
```

### çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ
> [!note] æ¦‚è¿°
> çº¿ç¨‹å…·æœ‰ç”Ÿå‘½å‘¨æœŸ, å…¶ä¸­åŒ…å«7ç§çŠ¶æ€--*å‡ºç”Ÿ,å°±ç»ª,è¿è¡Œ,ç­‰å¾…,ä¼‘çœ ,é˜»å¡,æ­»äº¡*.
> 
> - å‡ºç”ŸçŠ¶æ€å°±æ˜¯çº¿ç¨‹è¢«åˆ›å»ºæ—¶å¤„äºçš„çŠ¶æ€
> - å½“ç”¨æˆ·è°ƒç”¨äº†`start()`æ–¹æ³•å,çº¿ç¨‹å°±å¤„äºå°±ç»ªçŠ¶æ€, å½“çº¿ç¨‹å¾—åˆ°äº†ç³»ç»Ÿåˆ†é…çš„èµ„æºåå°±ä¼šè¿›å…¥è¿è¡ŒçŠ¶æ€. çº¿ç¨‹ä¸€æ—¦è¿›å…¥å¯æ‰§è¡ŒçŠ¶æ€,å°±ä¼šåœ¨è¿è¡Œå’Œå°±ç»ªä¸¤ç§çŠ¶æ€ä¹‹é—´åˆ‡æ¢,åŒæ—¶ä¹Ÿæœ‰å¯èƒ½è¿›å…¥ç­‰å¾…,ä¼‘çœ ,é˜»å¡,æ­»äº¡è¿™å››ç§çŠ¶æ€
> - å½“å¤„äºè¿è¡ŒçŠ¶æ€ä¸‹çš„çº¿ç¨‹è°ƒç”¨äº†Threadç±»çš„`wait()`æ–¹æ³•å, è¯¥çº¿ç¨‹å°±è¿›å…¥ç­‰å¾…çŠ¶æ€,è¿›å…¥ç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹å¿…é¡»è°ƒç”¨Threadç±»çš„`notify()`æ–¹æ³•æ‰èƒ½è¢«å”¤é†’.
> - å½“çº¿ç¨‹è°ƒç”¨Threadç±»çš„`sleep()`æ–¹æ³•æ—¶,å°±ä¼šè¿›å…¥ä¼‘çœ çŠ¶æ€.
> - å¦‚æœä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡ŒçŠ¶æ€ä¸‹å‘å‡ºäº†è¾“å…¥/è¾“å‡ºè¯·æ±‚,é‚£ä¹ˆè¯¥çº¿ç¨‹å°±ä¼šè¿›å…¥é˜»å¡çŠ¶æ€, åœ¨å…¶ç­‰å¾…è¾“å…¥/è¾“å‡ºç»“æŸçº¿ç¨‹çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€, å¯¹äºé˜»å¡çš„çº¿ç¨‹æ¥è¯´, å³ä½¿ç³»ç»Ÿèµ„æºç©ºé—²,çº¿ç¨‹ä¾ç„¶æ— æ³•å›åˆ°è¿è¡ŒçŠ¶æ€.
> - å½“çº¿ç¨‹çš„`run()`æ–¹æ³•æ‰§è¡Œå®Œæ¯•å,çº¿ç¨‹å°±ä¼šé™·å…¥æ­»äº¡çŠ¶æ€
> 
> ```mermaid
> graph TD
> A[å‡ºç”Ÿ] -->|t.start| B[å°±ç»ª]
> B -->|æ—¶é—´ç‰‡ç»“æŸï¼Œå¾—åˆ°ç³»ç»Ÿèµ„æº| C[è¿è¡Œ]
> C -->|t.wait| D[ç­‰å¾…]
> C -->|t.sleep| E[ä¼‘çœ ]
> C --> F[é˜»å¡]
> C --> G[æ­»äº¡]
> B --> 
> |t.notify
> t.notifyAll| D
> ```
> 
> è¦ä½¿çº¿ç¨‹å¤„äºå°±ç»ªçŠ¶æ€,æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•:
> - `sleep()`
> - `wait()`ç­‰å¾…è¾“å…¥/è¾“å‡ºå®Œæˆ
> 
> çº¿ç¨‹å¤„äºå°±ç»ªçŠ¶æ€æ—¶,å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹æ³•ä½¿çº¿ç¨‹å†æ¬¡è¿›å…¥è¿è¡ŒçŠ¶æ€
> - çº¿ç¨‹è°ƒç”¨`notify()`æ–¹æ³•
> - çº¿ç¨‹è°ƒç”¨`notifyAll()`æ–¹æ³•
> - çº¿ç¨‹è°ƒç”¨`interrupt()`æ–¹æ³•
> - çº¿ç¨‹çš„ä¼‘çœ æ—¶é—´ç»“æŸ
> - è¾“å…¥/è¾“å‡ºç»“æŸ


### æ“ä½œçº¿ç¨‹
> [!note] ç®€ä»‹
> æ“ä½œçº¿ç¨‹æœ‰å¾ˆå¤šæ–¹æ³•.è¿™äº›æ–¹æ³•å¯ä»¥ä½¿çº¿ç¨‹ä»æŸä¸€ç§çŠ¶æ€è¿‡æ¸¡åˆ°å¦ä¸€ç§çŠ¶æ€
#### çº¿ç¨‹çš„ä¼‘çœ 
> [!note] æ¦‚è¿°
> ä¸€ç§èƒ½æ§åˆ¶çº¿ç¨‹è¡Œä¸ºçš„æ–¹æ³•æ˜¯è°ƒç”¨`sleep()`æ–¹æ³•, è¯¥æ–¹æ³•éœ€è¦ä¸€ä¸ªå‚æ•°ç”¨äºæŒ‡å®šè¯¥çº¿ç¨‹ä¼‘çœ çš„æ—¶é—´,è¯¥æ—¶é—´ä»¥msä¸ºå•ä½.
> ```Java
> try{
> 	Thread.sleep(2000);
> }catch(InterruptedException e){
> 	e.printStackTrace();
> }
> ```
> ä¸Šè¿°ä»£ç ä¼šä½¿çº¿ç¨‹åœ¨2sä¹‹å†…ä¸ä¼šè¿›å…¥å°±ç»ªçŠ¶æ€. è™½ç„¶ä½¿ç”¨äº†`sleep()`æ–¹æ³•çš„çº¿ç¨‹ä¼šåœ¨ä¸€æ®µæ—¶é—´å†…é†’æ¥, ä½†æ˜¯ä¸èƒ½ä¿è¯å®ƒé†’æ¥åèƒ½å¤Ÿè¿›å…¥è¿è¡ŒçŠ¶æ€,åªèƒ½ä¿è¯è¿›å…¥å°±ç»ªçŠ¶æ€

> [!example] ä¾‹: æ¯0.1sç»˜åˆ¶ä¸€æ¡éšæœºå½©è‰²çš„çº¿æ¡
```Java
public class SleepDemo extends JFrame {  
    private static Color color[] = {  
            Color.red,  
            Color.orange,  
            Color.yellow,  
            Color.green,  
            Color.blue,  
            Color.cyan,  
            Color.magenta  
    };  
    private static final Random rd = new Random();  
  
    private static Color getColor(){  
        return color[rd.nextInt(color.length)];  
    }  
    public SleepDemo(){  
        Thread t = new Thread(new Runnable() {  
            int x1 = 30; // åˆå§‹èµ·ç‚¹ x åæ ‡  
            int y1 = 50; // åˆå§‹èµ·ç‚¹ y åæ ‡  
  
            @Override  
            public void run() {  
                while (true) {  
                    try {  
                        Thread.sleep(100); // æ¯ 0.1 ç§’ç»˜åˆ¶ä¸€æ¬¡  
                    } catch (InterruptedException e) {  
                        e.printStackTrace();  
                    }  
                    Graphics g = getGraphics(); // è·å–ç»˜å›¾å¯¹è±¡  
                    if (g != null) {  
                        g.setColor(getColor()); // è®¾ç½®éšæœºé¢œè‰²  
  
                        // è®¡ç®—ç»ˆç‚¹åæ ‡  
                        int x2 = x1 + 10; // æ¯æ¬¡å‘å³åç§» 10                        int y2 = y1 + (int) (Math.random() * 10 - 5); // éšæœºä¸Šä¸‹åç§»  
  
                        // ç»˜åˆ¶çº¿æ¡  
                        g.drawLine(x1, y1, x2, y2);  
  
                        // æ›´æ–°èµ·ç‚¹åæ ‡  
                        x1 = x2;  
                        y1 = y2;  
  
                        // å¦‚æœè¶…å‡ºçª—å£èŒƒå›´ï¼Œé‡ç½®èµ·ç‚¹  
                        if (x1 > getWidth()) {  
                            x1 = 30;  
                            y1 = 50;  
                        }
                    }
                }
            }
        });
        t.start();  
    }  
    public static void main(String[] args) {  
        init(new SleepDemo(), 300, 300);  
    }  
    public static void init(JFrame frame,int width,int height){  
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);  
        frame.setSize(width,height);  
        frame.setVisible(true);  
    }
}
```
#### çº¿ç¨‹çš„åŠ å…¥
> [!note] æ¦‚è¿°
> å¦‚æœå½“å‰çš„æŸç¨‹åºä¸ºå¤šçº¿ç¨‹ç¨‹åº,åŠ å…¥å­˜åœ¨ä¸€ä¸ªçº¿ç¨‹A,ç°åœ¨éœ€è¦åŠ å…¥çº¿ç¨‹B, å¹¶è¦æ±‚çº¿ç¨‹Bå…ˆæ‰§è¡Œå®Œæ¯•å†å»æ‰§è¡Œçº¿ç¨‹A,æ­¤æ—¶å¯ä»¥ä½¿ç”¨Threadç±»çš„`join()`æ–¹æ³•æ¥å®Œæˆ.

> [!example] ä¾‹: è®©è¿›åº¦æ¡Aç­‰å¾…è¿›åº¦æ¡B
```Java
public class JoinDemo extends JFrame{  
    private Thread threadA;  
    private Thread threadB;  
    private JProgressBar progressBarA = new JProgressBar();  
    private JProgressBar progressBarB = new JProgressBar();  
  
    public static void main(String[] args) {  
        JoinDemo j = new JoinDemo();  
        j.setVisible(true);  
    }  
  
    public JoinDemo() {  
        setDefaultCloseOperation(EXIT_ON_CLOSE);  
        setBounds(200,200,200,100);  
        getContentPane().add(progressBarA, BorderLayout.NORTH);  
        getContentPane().add(progressBarB, BorderLayout.SOUTH);  
        progressBarA.setStringPainted(true);  
        progressBarB.setStringPainted(true);  
  
        threadA = new Thread(new Runnable(){  
            int count = 0;  
            public void run(){  
                while (true){  
                    progressBarA.setValue(++count);  
                    try {  
                        Thread.sleep(100);  
                        threadB.join();  
                    }                    catch (InterruptedException e){  
                        e.printStackTrace();  
                    }
                }
            }
        });
        threadA.start();  
  
        threadB = new Thread(new Runnable() {  
            int count = 0;  
            @Override  
            public void run() {  
                while (true){  
                    progressBarB.setValue(++count);  
                    try {  
                        Thread.sleep(100);  
                    }                    catch (InterruptedException e){  
                        e.printStackTrace();  
                    }                    if(count == 100){  
                        break;  
                    }
                }
            }
        });
        threadB.start();  
    }
}
```
> [!attention] æ³¨æ„
> å‡å¦‚æˆ‘ä½¿ç”¨`t.join(3000)`, å¦‚æœåˆšè¿‡äº†1000ms, tçº¿ç¨‹å°±ç»“æŸäº†, æ­¤æ—¶joinä¼šç«‹åˆ»æ‰§è¡Œ, å¦‚æœè¶…è¿‡äº†3000ms, çº¿ç¨‹è¿˜æ²¡ç»“æŸ, æ­¤æ—¶ä¾ç„¶ä¼šæ‰§è¡Œjoinæ–¹æ³•
#### çº¿ç¨‹çš„ä¸­æ–­
> [!note] æ¦‚è¿°
>ä»¥å¾€çš„æ—¶å€™ä¼šä½¿ç”¨`stop()`æ–¹æ³•æ¥åœæ­¢çº¿ç¨‹,ä½†å½“å‰ç‰ˆæœ¬çš„JDKå·²ç»å¼ƒç”¨äº†è¯¥æ–¹æ³•. ç°åœ¨æå€¡åœ¨`run()`æ–¹æ³•ä¸­ä½¿ç”¨æ— é™å¾ªç¯(å¦‚`while(true)`)ç„¶åä½¿ç”¨ä¸€ä¸ªå¸ƒå°”æ ‡è®°æ§åˆ¶å¾ªç¯çš„è¿›è¡Œ.
>å¦‚æœçº¿ç¨‹æ˜¯å› ä¸ºä½¿ç”¨äº†`sleep()`æˆ–`wait()`æ–¹æ³•è¿›å…¥äº†å°±ç»ªçŠ¶æ€,é‚£ä¹ˆå¯ä»¥ä½¿ç”¨Threadç±»çš„`interrupt()`æ–¹æ³•ä½¿çº¿ç¨‹ç¦»å¼€`run()`æ–¹æ³•, åŒæ—¶ç»“æŸçº¿ç¨‹, ä½†ç¨‹åºä¼šæŠ›å‡º*InterruptedException*å¼‚å¸¸,ç”¨æˆ·å¯ä»¥åœ¨åƒåŠ›è¯¥å¼‚å¸¸æ—¶å®Œæˆçº¿ç¨‹ä¸­çš„ä¸­æ–­ä¸šåŠ¡å¤„ç†,å¦‚ç»ˆæ­¢whileå¾ªç¯

> [!example] ä¾‹: å•å‡»æŒ‰é’®ä½¿è¿›åº¦æ¡åœæ­¢æ»šåŠ¨
```Java
public class InterruptDemo extends JFrame {  
    public InterruptDemo(){  
        JProgressBar progressBar = new JProgressBar();  // è¿›åº¦æ¡  
        getContentPane().add(progressBar, BorderLayout.NORTH);  
  
        JButton button = new JButton("åœæ­¢!");  
        getContentPane().add(button, BorderLayout.SOUTH);  
        progressBar.setStringPainted(true);  
        Thread t = new Thread(new Runnable() {  
            int count = 0;  
            @Override  
            public void run() {  
                while (true){  
                    progressBar.setValue(++count);  
                    try {  
                        Thread.sleep(100);  
                    }catch (InterruptedException e){  
                        System.out.println("å­çº¿ç¨‹è¢«ä¸­æ–­");  
                        break;  
                    }
                }
            }
        });
        button.addActionListener(e -> {  
            t.interrupt();  
        });
        t.start();  
    }  
    public void init(){  
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  
        setSize(400, 200);  
        setVisible(true);  
    }  
    public static void main(String[] args) {  
        InterruptDemo demo = new InterruptDemo();  
        demo.init();  
    }
}
```

#### çº¿ç¨‹çš„ç¤¼è®©
> [!note] æ¦‚è¿°
> Threadç±»ä¸­æä¾›äº†ä¸€ç§ç¤¼è®©æ–¹æ³•--`yield()`. å®ƒåªæ˜¯ç»™å½“å‰æ­£å¤„äºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹ä¸€ä¸ªæé†’,å‘ŠçŸ¥å®ƒå¯ä»¥å°†èµ„æº"ç¤¼è®©"ç»™å…¶ä»–çº¿ç¨‹, ä½†è¿™ä»…æ˜¯ä¸€ç§æš—ç¤º,æ²¡æœ‰ä»»ä½•ä¸€ç§æœºåˆ¶ä¼šä¿è¯å½“å‰çº¿ç¨‹ä¼šå°†èµ„æºè¿›è¡Œç¤¼è®©
> 
> `yield()`æ–¹æ³•ä½¿å…·æœ‰åŒæ ·ä¼˜å…ˆçº§çš„çº¿ç¨‹æœ‰è¿›å…¥å¯æ‰§è¡ŒçŠ¶æ€çš„æœºä¼š,åœ¨å½“å‰çº¿ç¨‹ä¸­æ”¾å¼ƒæ‰§è¡Œæƒåä¼šå†åº¦å›åˆ°å°±ç»ªçŠ¶æ€,å¯¹äºæ”¯æŒå¤šä»»åŠ¡çš„æ“ä½œç³»ç»Ÿæ¥è¯´,ä¸éœ€è¦è°ƒç”¨`yield()`æ–¹æ³•,å› ä¸ºç³»ç»Ÿä¼šä¸ºçº¿ç¨‹è‡ªåŠ¨åˆ†é…CPUæ—¶é—´ç‰‡å»æ‰§è¡Œ

> [!example] ä¾‹: æ¨¡æ‹Ÿçº¢ç»¿ç¯å˜åŒ–åœºæ™¯,çº¢ç¯äº®8s,ç»¿ç¯5s,é»„ç¯1s
```Java
// é€šè¿‡çº¿ç¨‹ç¤¼è®©æ¨¡æ‹Ÿçº¢ç»¿ç¯  
public class yieldDemo extends JFrame {  
    private TrafficLightPanel lightPanel;  
    private TrafficLight light;  
  
    public yieldDemo() {  
        setTitle("çº¢ç»¿ç¯æ¨¡æ‹Ÿ");  
        setSize(300, 400);  
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  
        setLocationRelativeTo(null);  
  
        lightPanel = new TrafficLightPanel();  
        add(lightPanel, BorderLayout.CENTER);  
  
        light = new TrafficLight();  
        Thread thread = new Thread(light);  
        thread.start();  
    }  
    // å†…éƒ¨ç±»ï¼šç”¨äºç»˜åˆ¶çº¢ç»¿ç¯çš„é¢æ¿  
    private class TrafficLightPanel extends JPanel {  
        private String currentLight = "RED"; // å½“å‰äº®èµ·çš„ç¯  
  
        @Override  
        protected void paintComponent(Graphics g) {  
            super.paintComponent(g);  
            int width = getWidth();  
            int height = getHeight();  
  
            // ç»˜åˆ¶èƒŒæ™¯  
            g.setColor(Color.BLACK);  
            g.fillRect(0, 0, width, height);  
  
            // ä¿®æ”¹ä¸‰ä¸ªç¯çš„ä½ç½®ï¼Œä½¿çº¢ç¯åœ¨ç¬¬ä¸€ï¼Œé»„ç¯åœ¨ç¬¬äºŒï¼Œç»¿ç¯åœ¨æœ€å  
            drawLight(g, Color.RED, width / 2 - 50, 50, "RED".equals(currentLight));  
            drawLight(g, Color.YELLOW, width / 2 - 50, 150, "YELLOW".equals(currentLight));  
            drawLight(g, Color.GREEN, width / 2 - 50, 250, "GREEN".equals(currentLight));  
        }  
        // ç»˜åˆ¶å•ä¸ªç¯çš„æ–¹æ³•  
        private void drawLight(Graphics g, Color color, int x, int y, boolean isOn) {  
            g.setColor(color);  
            g.fillOval(x, y, 100, 100);  
            if (!isOn) {  
                g.setColor(Color.DARK_GRAY);  
                g.fillOval(x + 5, y + 5, 90, 90); // æš—è‰²è¦†ç›–  
            }  
        }  
        // æ›´æ–°å½“å‰ç¯çš„çŠ¶æ€  
        public void setCurrentLight(String light) {  
            currentLight = light;  
            repaint(); // è§¦å‘é‡ç»˜  
        }  
    }    
    // å†…éƒ¨ç±»ï¼šæ§åˆ¶çº¢ç»¿ç¯é€»è¾‘  
    private class TrafficLight implements Runnable {  
        private boolean isRunning = true;  
  
        @Override  
        public void run() {  
            while (isRunning) {  
                try {  
                    // ä¿®æ”¹äº®ç¯é¡ºåºï¼Œé»˜è®¤å…ˆäº®çº¢ç¯ç„¶åäº®é»„ç¯æœ€åäº®ç»¿ç¯  
                    lightPanel.setCurrentLight("RED");  
                    Thread.sleep(8000);  
                    Thread.yield();  
  
                    // é»„ç¯äº® 2 ç§’  
                    lightPanel.setCurrentLight("YELLOW");  
                    Thread.sleep(2000);  
                    Thread.yield();  
  
                    // ç»¿ç¯äº® 6 ç§’  
                    lightPanel.setCurrentLight("GREEN");  
                    Thread.sleep(6000);  
                    Thread.yield();  
                } catch (InterruptedException e) {  
                    System.out.println("äº¤é€šç¯è¢«ä¸­æ–­");  
                    isRunning = false; // åœæ­¢è¿è¡Œ  
                }  
            }        }    }  
    public static void main(String[] args) {  
        SwingUtilities.invokeLater(() -> {  
            yieldDemo frame = new yieldDemo();  
            frame.setVisible(true);  
        });
    }
}
```


### çº¿ç¨‹çš„ä¼˜å…ˆçº§
> [!note] æ¦‚è¿°
> æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰å…¶å„è‡ªçš„ä¼˜å…ˆçº§,*çº¿ç¨‹çš„ä¼˜å…ˆçº§å¯ä»¥è¡¨æ˜è¯¥çº¿ç¨‹åœ¨ç¨‹åºä¸­çš„é‡è¦æ€§*, å¦‚æœæœ‰å¾ˆå¤šçº¿ç¨‹å¤„äºå°±ç»ªçŠ¶æ€,é‚£ä¹ˆç³»ç»Ÿä¼šæ ¹æ®ä¼˜å…ˆçº§æ¥å†³å®šé¦–å…ˆä½¿å“ªä¸ªçº¿ç¨‹è¿›å…¥è¿è¡ŒçŠ¶æ€, ä½†è¿™ä¸æ„å‘³ç€ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹å¾—ä¸åˆ°è¿è¡Œ, è€Œæ˜¯å®ƒè¿è¡Œçš„æ¦‚ç‡æ¯”è¾ƒå°,å¦‚åƒåœ¾å›æ”¶çš„çº¿ç¨‹ä¼˜å…ˆçº§å°±è¾ƒä½.
> 
> Threadç±»çš„ä¸­åŒ…å«çš„æˆå‘˜å˜é‡ä»£è¡¨äº†çº¿ç¨‹çš„æŸäº›ä¼˜å…ˆçº§,å¦‚`Thread.MIN_PROPERTY`(å¸¸æ•°1),`Thread.MAX_PROPERTY`(å¸¸æ•°10),`Thread.NORMAL_PROPERTY`(å¸¸æ•°5). é»˜è®¤æƒ…å†µä¸‹æ¯ä¸ªçº¿ç¨‹çš„ä¼˜å…ˆçº§éƒ½æ˜¯`Thread.NORMAL_PROPERTY`,æ¯ä¸ªæ–°äº§ç”Ÿçš„çº¿ç¨‹éƒ½ç»§æ‰¿äº†çˆ¶ç±»çš„ä¼˜å…ˆçº§.
> 
> åœ¨å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿä¸­, æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå¾—åˆ°ä¸€å°æ®µCPUæ—¶é—´ç‰‡è¿è¡Œ, åœ¨æ—¶é—´ç»“æŸå,å°†è½®æ¢å¦ä¸€ä¸ªçº¿ç¨‹è¿›å…¥è¿è¡ŒçŠ¶æ€, è¿™æ—¶*ç³»ç»Ÿä¼šé€‰æ‹©ä¸å½“å‰çº¿ç¨‹ä¼˜å…ˆçº§ç›¸åŒçš„çº¿ç¨‹äºˆä»¥è¿è¡Œ*.
> 
> ç°æˆçš„ä¼˜å…ˆçº§å¯ä»¥ä½¿ç”¨`setProperty()`æ–¹æ³•è¿›è¡Œè°ƒæ•´, å¦‚æœä½¿ç”¨è¯¥æ–¹æ³•è®¾ç½®çš„ä¼˜å…ˆçº§ä¸æ˜¯1~10,å°†äº§ç”Ÿ`IllegalArgumentException`å¼‚å¸¸

> [!example] ä¾‹: è§‚å¯Ÿå°†ä¸åŒä¼˜å…ˆçº§çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•çš„é¡ºåº
> åˆ›å»ºpropertyTestç±»å¹¶å®ç°Runnableæ¥å£,åœ¨`run()`æ–¹æ³•ä¸­å®ç°5ä¸‡æ¬¡å­—ç¬¦ä¸²æ‹¼æ¥. åœ¨ä¸»æ–¹æ³•ä¸­ä»¥propertyTestå¯¹è±¡ä¸ºå‚æ•°è®¾ç½®å››ä¸ªçº¿ç¨‹,å¹¶åˆ†é…ä¸åŒçš„ä¼˜å…ˆçº§,ç„¶åå¯åŠ¨è¿™äº›çº¿ç¨‹

```Java
public class propertyTest implements Runnable{  
    String name;  
    public propertyTest(String name){  
        this.name = name;  
    }    public void run(){  
        String tmp = "";  
        for (int i = 0; i < 50000; i++) {  
            tmp += i;  
        }        System.out.println(name + "çº¿ç¨‹è¿è¡Œç»“æŸ");  
    }  
    public static void main(String[] args) {  
        Thread a = new Thread(new propertyTest("A"));  
        a.setPriority(1);  
        Thread b = new Thread(new propertyTest("B"));  
        b.setPriority(3);  
        Thread c = new Thread(new propertyTest("C"));  
        c.setPriority(7);  
        Thread d = new Thread(new propertyTest("D"));  
        d.setPriority(10);  
        a.start();  
        b.start();  
        c.start();  
        d.start();  
    }
}
```
è¿è¡Œç»“æœ
```text
Bçº¿ç¨‹è¿è¡Œç»“æŸ
Dçº¿ç¨‹è¿è¡Œç»“æŸ
Cçº¿ç¨‹è¿è¡Œç»“æŸ
Açº¿ç¨‹è¿è¡Œç»“æŸ
```
> [!warning] æ³¨æ„
> è™½ç„¶ Java æä¾›äº†çº¿ç¨‹ä¼˜å…ˆçº§ï¼ˆsetPriorityï¼‰ï¼Œä½†çº¿ç¨‹çš„å®é™…è°ƒåº¦æ˜¯ç”±æ“ä½œç³»ç»Ÿå†³å®šçš„ï¼ŒJava çš„çº¿ç¨‹ä¼˜å…ˆçº§åªæ˜¯ä¸€ä¸ªæç¤ºï¼ˆhintï¼‰ã€‚è¿™æ„å‘³ç€ï¼š
é«˜ä¼˜å…ˆçº§çº¿ç¨‹ä¸ä¸€å®šå…ˆæ‰§è¡Œå®Œï¼šå³ä½¿çº¿ç¨‹ d çš„ä¼˜å…ˆçº§æœ€é«˜ï¼ˆ10ï¼‰ï¼Œå®ƒä¹Ÿä¸ä¸€å®šä¼šæ¯”å…¶ä»–çº¿ç¨‹å…ˆå®Œæˆã€‚çº¿ç¨‹è°ƒåº¦å™¨å¯èƒ½ä¼šæ ¹æ®ç³»ç»Ÿèµ„æºåˆ†é…ã€å½“å‰è´Ÿè½½ç­‰å› ç´ å†³å®šå“ªä¸ªçº¿ç¨‹å…ˆè¿è¡Œã€‚
çº¿ç¨‹è¿è¡Œé¡ºåºä¸ç¡®å®šï¼šç”±äºå¤šçº¿ç¨‹æ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œçº¿ç¨‹ä¹‹é—´çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚ä¾‹å¦‚ï¼Œçº¿ç¨‹ a å’Œ b å¯èƒ½äº¤æ›¿è¿è¡Œï¼Œè€Œä¸æ˜¯ä¸¥æ ¼æŒ‰ç…§æŸç§é¡ºåºã€‚
å› æ­¤ï¼Œç¨‹åºçš„è¾“å‡ºé¡ºåºå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚
### çº¿ç¨‹åŒæ­¥

#### çº¿ç¨‹å®‰å…¨
>[!note] æ¦‚è¿°
>åœ¨å®é™…å¼€å‘ä¸­,ä½¿ç”¨å¤šçº¿ç¨‹çš„åœºæ™¯æœ‰å¾ˆå¤š,å¦‚é“¶è¡Œæ’å·ç³»ç»Ÿ, ç«è½¦ç«™å”®ç¥¨ç³»ç»Ÿç­‰. è¿™ç§å¤šçº¿ç¨‹çš„ç¨‹åºé€šå¸¸ä¼šå‘ç”Ÿé—®é¢˜. 
>
>ä»¥ç«è½¦ç«™å”®ç¥¨ç³»ç»Ÿä¸ºä¾‹: åœ¨ä»£ç ä¸­åˆ¤æ–­å½“å‰ç¥¨æ•°æ˜¯å¦å¤§äº0,å¦‚æœå¤§äº0åˆ™æ‰§è¡Œå°†è¯¥ç¥¨å”®å–ç»™ç”¨æˆ·çš„åŠŸèƒ½, ä½†æ˜¯å½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®(å‡å¦‚åªå‰©ä¸‹ä¸€å¼ ç¥¨), ç¬¬ä¸€ä¸ªçº¿ç¨‹å°†è¿™å¼ ç¥¨å”®å‡º, ä¸æ­¤åŒæ—¶ç¬¬äºŒä¸ªçº¿ç¨‹ä¹Ÿå®Œæˆåˆ¤å®š,å¹¶å¾—å‡ºç¥¨æ•°å¤§äº0çš„ç»“è®º, äºæ˜¯æ‰§è¡Œäº†å”®ç¥¨æ“ä½œ, è¿™æ—¶ç¥¨æ•°å°±ä¼šäº§ç”Ÿè´Ÿæ•°.
>
>å› æ­¤,åœ¨ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºæ—¶,åº”è¯¥è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜. å®è´¨ä¸Šçº¿ç¨‹é—®é¢˜æ¥æºäº*ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å­˜å–å•ä¸€å¯¹è±¡çš„æ•°æ®*.

> [!example] ä¾‹: åœ¨æœªè€ƒè™‘çº¿ç¨‹å®‰å…¨çš„æƒ…å†µä¸‹æ¨¡æ‹Ÿç«è½¦ç«™çš„å”®ç¥¨ç³»ç»Ÿçš„åŠŸèƒ½
```Java
public class ThreadSafetyDemo implements Runnable{  
    int num = 10;  
    public void run(){  
        while (true){  
            if(num > 0){  
                try {  
                    Thread.sleep(100);  
                }catch (InterruptedException e){  
                    e.printStackTrace();  
                }                System.out.println(Thread.currentThread().getName() + "ç¥¨æ•°: " + num--);  
            }
        }
    }  
    public static void main(String[] args) {  
        ThreadSafetyDemo t = new ThreadSafetyDemo();  
        Thread tA = new Thread(t,"çº¿ç¨‹1");  
        Thread tB = new Thread(t,"çº¿ç¨‹2");  
        Thread tC = new Thread(t,"çº¿ç¨‹3");  
        Thread tD = new Thread(t,"çº¿ç¨‹4");  
        tA.start();  
        tB.start();  
        tC.start();  
        tD.start();  
    }
}
```
è¿è¡Œç»“æœ
```text
çº¿ç¨‹2ç¥¨æ•°: 10
çº¿ç¨‹4ç¥¨æ•°: 8
çº¿ç¨‹3ç¥¨æ•°: 9
çº¿ç¨‹1ç¥¨æ•°: 7
çº¿ç¨‹2ç¥¨æ•°: 6
çº¿ç¨‹4ç¥¨æ•°: 4
çº¿ç¨‹1ç¥¨æ•°: 5
çº¿ç¨‹3ç¥¨æ•°: 3
çº¿ç¨‹2ç¥¨æ•°: 2
çº¿ç¨‹4ç¥¨æ•°: 0
çº¿ç¨‹1ç¥¨æ•°: 1
çº¿ç¨‹3ç¥¨æ•°: -1
çº¿ç¨‹2ç¥¨æ•°: -2
```
> [!question] æ€è€ƒ
> ä»ä¸Šè¿°çš„ä»£ç çš„è¿è¡Œç»“æœä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡º,ç¥¨æ•°å‡ºç°äº†è´Ÿæ•°.
> 
> äº§ç”ŸåŸå› : åœ¨numä¸º1,å››ä¸ªçº¿ç¨‹éƒ½å¯¹numæœ‰å­˜å‚¨åŠŸèƒ½, å½“çº¿ç¨‹1æ‰§è¡Œ`run()`æ—¶, è¿˜æ²¡æ¥å¾—åŠåšé€’å‡çš„æ“ä½œ,å°±æŒ‡å®šå®ƒè°ƒç”¨`sleep()`æ–¹æ³•è¿›å…¥å°±ç»ªçŠ¶æ€, è¿™æ—¶å¦å¤–ä¸‰ä¸ªçº¿ç¨‹éƒ½è¿›å…¥äº†`run()`æ–¹æ³•, å‘ç°numä»ç„¶å¤§äº0, ä½†æ­¤æ—¶çº¿ç¨‹1ä¼‘çœ æ—¶é—´å·²åˆ°, å°†numé€’å‡,åŒæ—¶å¦å¤–ä¸‰ä¸ªçº¿ç¨‹ä¹Ÿå¯¹å˜é‡è¿›è¡Œäº†é€’å‡,ä»è€Œäº§ç”Ÿäº†è´Ÿå€¼
> 
> é‚£ä¹ˆ,åº”è¯¥ç”¨ä»€ä¹ˆæ¥è§£å†³å‘¢?
#### çº¿ç¨‹çš„åŒæ­¥æœºåˆ¶
> [!note] æ¦‚è¿°
> æ‰€æœ‰è§£å†³å¤šçº¿ç¨‹èµ„æºå†²çªçš„æ–¹æ³•åŸºæœ¬ä¸Šéƒ½æ˜¯**é‡‡ç”¨ç»™å®šæ—¶é—´åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºçš„æ–¹æ³•**, è¿™æ—¶å°±è¦*ç»™å…±äº«èµ„æºä¸Šä¸€é“é”*. è¿™å°±å¥½æ¯”ä¸€ä¸ªäººä¸Šæ´—æ‰‹é—´çš„æ—¶å€™,ä»–è¿›å»ä¹‹åä¼šå°†é—¨é”ä½, å‡ºæ¥æ—¶å†æ‰“å¼€, ç„¶åå…¶ä»–äººæ‰èƒ½è¿›å…¥

1. åŒæ­¥å—
> [!note] æ¦‚è¿°
> Javaæä¾›äº†åŒæ­¥æœºåˆ¶,å¯ä»¥æœ‰æ•ˆåœ°é˜²æ­¢èµ„æºå†²çª. åŒæ­¥æœºåˆ¶ä½¿ç”¨`synchronized`å…³é”®å­—,ä½¿ç”¨è¯¥å…³é”®å­—åŒ…å«çš„ä»£ç å—ç§°ä¸ºåŒæ­¥å—,ä¹Ÿç§°ä¸ºä¸´ç•ŒåŒº. è¯­æ³•å¦‚ä¸‹
> ```Java
> synchronized (Object){
> 	...
> }
> ```
> é€šå¸¸å°†å…±äº«èµ„æºæ”¾åœ¨synchronizedå®šä¹‰çš„åŒºåŸŸå†…,è¿™æ ·å½“å…¶ä»–çº¿ç¨‹è·å–åˆ°è¿™ä¸ªé”æ—¶, å°±å¿…é¡»ç­‰å¾…è¿™ä¸ªé”è¢«é‡Šæ”¾æ‰å¯ä»¥è¿›å…¥è¯¥åŒºåŸŸ. Objectä¸ºä»»æ„å¯¹è±¡, æ¯ä¸ªå¯¹è±¡å­˜åœ¨ä¸€ä¸ªæ ‡å¿—ä½, å¹¶å…·æœ‰0å’Œ1ä¸¤ä¸ªå€¼. ä¸€ä¸ªçº¿ç¨‹è¿è¡Œåˆ°åŒæ­¥å—æ—¶é¦–å…ˆè¦æ£€æŸ¥å¯¹è±¡çš„æ ‡å¿—ä½, å¦‚æœæ˜¯0å°±è¯´æ˜è¿™ä¸ªåŒæ­¥å—å†…å­˜åœ¨å…¶ä»–çš„çº¿ç¨‹, è¿™æ—¶å½“æœŸçº¿ç¨‹å¤„äºå°±ç»ªçŠ¶æ€, ç›´åˆ°å¤„äºåŒæ­¥å—ä¸­çš„çº¿ç¨‹æ‰§è¡Œå®ŒåŒæ­¥å—ä¸­çš„ä»£ç å, è¿™æ—¶æ ‡å¿—æ›´æ”¹ä¸º1, å½“æœŸçº¿ç¨‹æ‰èƒ½å¼€å§‹æ‰§è¡ŒåŒæ­¥å—ä¸­çš„ä»£ç , å¹¶å°†Objectçš„æ ‡å¿—è®¾ç½®ä¸º0, é˜²æ­¢å…¶ä»–çº¿ç¨‹æ‰§è¡ŒåŒæ­¥å—ä¸­çš„ä»£ç 

> [!example] ä¾‹: å®Œå–„ä¹‹å‰çš„ç«è½¦ç«™å”®ç¥¨ç³»ç»Ÿ,ä¿è¯çº¿ç¨‹å®‰å…¨
```Java
public class ThreadSafetyDemo implements Runnable{  
    int num = 10;  
    public void run(){  
        while (true){  
            synchronized (this){  
                if(num > 0){  
                    try {  
                        Thread.sleep(100);  
                    }catch (InterruptedException e){  
                        e.printStackTrace();  
                    }                    System.out.println(Thread.currentThread().getName() + "ç¥¨æ•°: " + num--);  
                }
            }
        }
    }  
    public static void main(String[] args) {  
        ThreadSafetyDemo t = new ThreadSafetyDemo();  
        Thread tA = new Thread(t,"çº¿ç¨‹1");  
        Thread tB = new Thread(t,"çº¿ç¨‹2");  
        Thread tC = new Thread(t,"çº¿ç¨‹3");  
        Thread tD = new Thread(t,"çº¿ç¨‹4");  
        tA.start();  
        tB.start();  
        tC.start();  
        tD.start();  
    }
}
```
è¿è¡Œç»“æœ
```text
ç¬¬ä¸€æ¬¡è¿è¡Œ:                  ç¬¬äºŒæ¬¡è¿è¡Œ:
çº¿ç¨‹1ç¥¨æ•°: 10                çº¿ç¨‹1ç¥¨æ•°: 10
çº¿ç¨‹1ç¥¨æ•°: 9                 çº¿ç¨‹1ç¥¨æ•°: 9
çº¿ç¨‹1ç¥¨æ•°: 8                 çº¿ç¨‹1ç¥¨æ•°: 8
çº¿ç¨‹1ç¥¨æ•°: 7                 çº¿ç¨‹1ç¥¨æ•°: 7
çº¿ç¨‹1ç¥¨æ•°: 6                 çº¿ç¨‹1ç¥¨æ•°: 6
çº¿ç¨‹1ç¥¨æ•°: 5                 çº¿ç¨‹1ç¥¨æ•°: 5
çº¿ç¨‹1ç¥¨æ•°: 4                 çº¿ç¨‹1ç¥¨æ•°: 4
çº¿ç¨‹1ç¥¨æ•°: 3                 çº¿ç¨‹1ç¥¨æ•°: 3
çº¿ç¨‹4ç¥¨æ•°: 2                 çº¿ç¨‹1ç¥¨æ•°: 2
çº¿ç¨‹4ç¥¨æ•°: 1                 çº¿ç¨‹1ç¥¨æ•°: 1
```
> [!tip] æç¤º
> ä¸Šè¿°çš„è¿è¡Œç»“æœä¸­å‡ºç°äº†ä¸åŒçš„çº¿ç¨‹(å¦‚ç¬¬ä¸€æ¬¡è¿è¡Œæœ€åä¸¤æ¬¡å°±æœ‰çº¿ç¨‹4çš„ä»‹å…¥),è¿™æ˜¯ç”±äºå¤šçº¿ç¨‹è°ƒåº¦çš„ä¸ç¡®å®šæ€§å¯¼è‡´çš„ã€‚
> åªè¦æ»¡è¶³ï¼š
> - æ¯ä¸ªæ•°å­—åªå‡ºç°ä¸€æ¬¡
> - ä»10é€’å‡åˆ°1
> - æ²¡æœ‰é‡å¤æˆ–é—æ¼
> 
> é‚£ä¹ˆç¨‹åºå°±æ˜¯çº¿ç¨‹å®‰å…¨ä¸”æ­£ç¡®çš„ã€‚


2. åŒæ­¥æ–¹æ³•
> [!note] æ¦‚è¿°
> åŒæ­¥æ–¹æ³•å°±æ˜¯ç”¨`synchronized`å…³é”®å­—ä¿®é¥°çš„æ–¹æ³•,è¯­æ³•å¦‚ä¸‹
> ```Java
> synchronized void f(){
> 	...
> }
> ```

> [!example] ä¾‹:åˆ›å»ºä¸€ä¸ªå®¹é‡ä¸º100Lçš„æ°´æ± , è®¾ç½®ä¸‰ä¸ªå‡ºæ°´å£ABC, Aå£æ¯ç§’æ’å‡º1L, Bå£æ¯ç§’æ’å‡º2L, Cå£æ¯ç§’æ’å‡º3L, è®¡ç®—å‡ºå¤šå°‘sèƒ½æ’å‡ºæ‰€æœ‰çš„æ°´
```Java
public class synchronizedMethodDemo {  
    private int waterVolume = 100; // æ°´æ± åˆå§‹å®¹é‡ä¸º100L  
    private long startTime;       // å¼€å§‹æ—¶é—´  
  
    public static void main(String[] args) {  
        synchronizedMethodDemo tank = new synchronizedMethodDemo();  
  
        Thread outletA = new Thread(tank.new OutletTask("A", 1), "Outlet-A");  
        Thread outletB = new Thread(tank.new OutletTask("B", 2), "Outlet-B");  
        Thread outletC = new Thread(tank.new OutletTask("C", 3), "Outlet-C");  
  
        tank.startTime = System.currentTimeMillis(); // è®°å½•å¼€å§‹æ—¶é—´  
        outletA.start();  
        outletB.start();  
        outletC.start();  
    }  
    // å®šä¹‰å†…éƒ¨ç±»è¡¨ç¤ºå‡ºæ°´å£ä»»åŠ¡  
    private class OutletTask implements Runnable {  
        private final String name;  
        private final int rate; // æ’æ°´é€Ÿç‡ï¼ˆæ¯ç§’æ’å‡ºå¤šå°‘å‡ï¼‰  
  
        public OutletTask(String name, int rate) {  
            this.name = name;  
            this.rate = rate;  
        }  
        @Override  
        public void run() {  
            while (true) {  
                if (drainWater(name, rate)) { // è°ƒç”¨åŒæ­¥æ–¹æ³•æ’æ°´  
                    break; // å¦‚æœæ°´æ± å·²ç»æ’ç©ºï¼Œåˆ™é€€å‡ºå¾ªç¯  
                }  
  
                try {  
                    Thread.sleep(1000); // æ¨¡æ‹Ÿæ¯ç§’æ’æ°´ä¸€æ¬¡  
                } catch (InterruptedException e) {  
                    e.printStackTrace();  
                }
            }
        }
    }  
    // åŒæ­¥æ–¹æ³•ï¼šæ’æ°´é€»è¾‘  
    private synchronized boolean drainWater(String outletName, int rate) {  
        if (waterVolume <= 0) {  
            System.out.println("å‡ºæ°´å£" + outletName + "åœæ­¢å·¥ä½œï¼Œæ°´æ± å·²æ’ç©ºã€‚");  
            return true; // è¿”å› true è¡¨ç¤ºæ°´æ± å·²æ’ç©º  
        }  
  
        waterVolume -= rate; // å‡å°‘æ°´æ± ä¸­çš„æ°´é‡  
        if (waterVolume < 0) {  
            waterVolume = 0; // é˜²æ­¢è´Ÿæ•°å‡ºç°  
        }  
  
        System.out.println("å‡ºæ°´å£" + outletName + "æ’æ°´ " + rate + "Lï¼Œå‰©ä½™æ°´é‡ï¼š" + waterVolume + "L");  
  
        if (waterVolume == 0) { // å¦‚æœæ°´æ± åˆšæ’ç©º  
            long endTime = System.currentTimeMillis(); // è®°å½•ç»“æŸæ—¶é—´  
            long totalTime = (endTime - startTime) / 1000; // è®¡ç®—æ€»è€—æ—¶ï¼ˆç§’ï¼‰  
            System.out.println("æ°´æ± å·²å®Œå…¨æ’ç©ºï¼æ€»è€—æ—¶ï¼š" + totalTime + " ç§’");  
        }  
        return false; // è¿”å› false è¡¨ç¤ºæ°´æ± æœªæ’ç©º  
    }  
}
```


---

## 3.12 å¹¶å‘ç¼–ç¨‹

### æ¦‚è¿°
> [!note] å¹¶å‘ç¼–ç¨‹
> åœ¨ä»‹ç»å¹¶å‘ä¹‹å‰, éœ€è¦æ˜ç¡®"ä¸²è¡Œ", "å¹¶è¡Œ", "å¹¶å‘"ä¹‹é—´çš„åŒºåˆ«
>
>```mermaid
>flowchart TD
>    subgraph S1 [ä¸²è¡Œ]
>        direction LR
>        A1(çº¿ç¨‹1) --> A2(çº¿ç¨‹2) --> A3(çº¿ç¨‹3)
>    end
>
>    subgraph S2 [å¹¶è¡Œ]
>        direction LR
>        B1(çº¿ç¨‹1)
>        B2(çº¿ç¨‹2) 
>        B3(çº¿ç¨‹3)
>    end
>
>    subgraph S3 [å¹¶å‘]
>        direction LR
>        C1(çº¿ç¨‹1) --> C1_1(çº¿ç¨‹1)
>        C2(çº¿ç¨‹2) --> C2_1(çº¿ç¨‹2)
>        C3(çº¿ç¨‹3) --> C3_1(çº¿ç¨‹3)
>    end
>```
>    
>
>
> - ä¸²è¡Œ: é¡ºåºæ‰§è¡Œ, åªæœ‰åœ¨ä¸€ä¸ªçº¿ç¨‹è¢«CPUæ‰§è¡Œå®Œæ¯•ä¹‹å, å¦ä¸€ä¸ªçº¿ç¨‹æ‰å¯ä»¥è¢«CPUæ‰§è¡Œ
> - å¹¶è¡Œ: åŒæ—¶æ‰§è¡Œ, å¤šä¸ªCPUåŒæ—¶æ‰§è¡Œå¤šä¸ªçº¿ç¨‹
> - å¹¶å‘: **ç©¿æ’**æ‰§è¡Œ, ä¸€ä¸ªCPUåœ¨ä¸åŒçš„æ—¶é—´æ®µæ‰§è¡Œä¸åŒçš„çº¿ç¨‹, ä¹Ÿå°±æ˜¯è¯´å¤šä¸ªçº¿ç¨‹è½®æµç©¿æ’ç€è¢«æ‰§è¡Œ
> 
> æ‰€è°“å¹¶å‘ç¼–ç¨‹,æŒ‡çš„æ˜¯è®©CPUåœ¨æŸä¸€ä¸ªæ—¶é—´æ®µå†…æ‰§è¡Œä¸€ä¸ªå«æœ‰å¤šä¸ªçº¿ç¨‹çš„ç¨‹åº, å…¶ä¸­è¿™äº›çº¿ç¨‹è¢«è¿™ä¸ªCPUè½®æµç©¿æ’æ‰§è¡Œ.
> å¹¶å‘ç¼–ç¨‹çš„ä¼˜åŠ¿å°±åœ¨äºå½“ä¸€ä¸ªCPUæ‰§è¡Œå¤šä¸ªçº¿ç¨‹çš„ç¨‹åºæ—¶, å¦ä¸€ä¸ªçº¿ç¨‹ä¸å¿…ç­‰å¾…å½“å‰çº¿ç¨‹ç»“æŸåå†è¢«æ‰§è¡Œ, è¿›è€Œ*æé«˜äº†CPUçš„æ•ˆç‡*

### yield()æ–¹æ³•
> [!note] æ¦‚è¿°
> åœ¨çº¿ç¨‹ç« èŠ‚æˆ‘ä»¬å·²ç»æåˆ°äº†çº¿ç¨‹çš„ç¤¼è®©æ“ä½œ, å…¶ä¸­æåˆ°äº†è¿™ä¸ªå…³é”®æ–¹--`yield()`
> 
> `yield()`æ˜¯ `Thread`ç±»æä¾›çš„ä¸€ä¸ªé™æ€ï¼ˆ`static`ï¼‰åŸç”Ÿï¼ˆ`native`ï¼‰æ–¹æ³•ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯ï¼šâ€‹**å‘çº¿ç¨‹è°ƒåº¦å™¨å‘å‡ºä¸€ä¸ªæç¤ºï¼Œè¡¨æ˜å½“å‰çº¿ç¨‹æ„¿æ„â€œè®©å‡ºâ€è‡ªå·±å½“å‰ä½¿ç”¨çš„ CPU æ—¶é—´ç‰‡ï¼Œä½†å®ƒå¹¶éé˜»å¡è‡ªå·±ã€‚â€‹**
> 
> **å…³é”®ç‚¹åœ¨äºâ€œæç¤ºâ€äºŒå­—**â€‹ï¼šè°ƒç”¨ `yield()`åªæ˜¯å‘è°ƒåº¦å™¨æå‡ºä¸€ä¸ªå»ºè®®ï¼Œè°ƒåº¦å™¨å¯ä»¥è‡ªç”±é€‰æ‹©æ˜¯å¦é‡‡çº³è¿™ä¸ªå»ºè®®ã€‚
> - â€‹**å¦‚æœé‡‡çº³**â€‹ï¼šå½“å‰çº¿ç¨‹ä¼šä»â€œè¿è¡ŒçŠ¶æ€â€ï¼ˆRunningï¼‰è½¬ä¸ºâ€œå°±ç»ªçŠ¶æ€â€ï¼ˆRunnableï¼‰ï¼Œç„¶åè°ƒåº¦å™¨ä¼šä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰æ‹©å¦ä¸€ä¸ªå…·æœ‰ç›¸åŒæˆ–æ›´é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹æ¥æ‰§è¡Œã€‚
> - â€‹**å¦‚æœä¸é‡‡çº³**â€‹ï¼šå½“å‰çº¿ç¨‹å°†ç»§ç»­ä¿æŒè¿è¡ŒçŠ¶æ€ï¼Œ`yield()`è°ƒç”¨ç›¸å½“äºç©ºè½¬ï¼Œæ²¡æœ‰ä»»ä½•æ•ˆæœã€‚
>
> 

### çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ä¸æ­»é”
#### çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢
> [!note] æ¦‚è¿°
> åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­, çº¿ç¨‹ä¸ªæ•°ä¸€èˆ¬éƒ½å¤§äºCPUçš„ä¸ªæ•°, è€Œæ¯ä¸ªCPUåŒä¸€æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨, ä¸ºäº†è®©ç”¨æˆ·æ„Ÿè§‰å¤šä¸ªçº¿ç¨‹æ˜¯åœ¨è¢«åŒæ—¶æ‰§è¡Œçš„, CPUèµ„æºçš„åˆ†é…é‡‡ç”¨äº†æ—¶é—´æ®µè½®è½¬çš„ç­–ç•¥, ä¹Ÿå°±æ˜¯ç»™æ¯ä¸€ä¸ªçº¿ç¨‹åˆ†é…ä¸€ä¸ªæ—¶é—´æ®µ, çº¿ç¨‹åœ¨ç»™å®šçš„æ—¶é—´å†…å ç”¨CPUæ‰§è¡Œä»»åŠ¡
> 
> å½“å‰çº¿ç¨‹ä½¿ç”¨å®Œæ—¶é—´æ®µå, å°±ä¼š**å¤„äºå°±ç»ªçŠ¶æ€**å¹¶è®©å‡ºCPU, è®©å…¶ä»–çº¿ç¨‹å ç”¨, è¿™å°±æ˜¯**ä¸Šä¸‹æ–‡åˆ‡æ¢**, ä»å½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢åˆ°äº†å…¶ä»–çº¿ç¨‹ä¸­.
> 
> *æ€è€ƒ*: è®©å‡ºCPUçš„çº¿ç¨‹ç­‰ä¸‹æ¬¡è½®åˆ°è‡ªå·±å æœ‰CPUæ—¶, å¦‚ä½•çŸ¥é“è‡ªå·±ä¹‹å‰è¿è¡Œåˆ°äº†å“ªé‡Œ? å› æ­¤åœ¨åˆ‡æ¢çº¿ç¨‹ä¸Šä¸‹æ–‡æ—¶éœ€è¦ä¿å­˜å½“å‰çº¿ç¨‹çš„æ‰§è¡Œç°åœº,å½“å†æ¬¡æ‰§è¡Œæ—¶æ ¹æ®ä¿å­˜çš„æ‰§è¡Œç°åœºä¿¡æ¯æ¢å¤æ‰§è¡Œç°åœº
> 
> å½“å‰çº¿ç¨‹çš„CPUå ç”¨æ—¶é—´æ®µä½¿ç”¨å®Œæˆ–å½“å‰çº¿ç¨‹è¢«å…¶ä»–çº¿ç¨‹ä¸­æ–­æ—¶, å½“å‰çº¿ç¨‹å°±ä¼šé‡Šæ”¾æ‰§è¡Œæƒ. é‚£ä¹ˆæ­¤æ—¶æ‰§è¡Œæƒå°±ä¼šè¢«åˆ‡æ¢åˆ°å…¶ä»–çš„çº¿ç¨‹è¿›è¡Œä»»åŠ¡çš„æ‰§è¡Œ, **ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾æ‰§è¡Œæƒ, å¦ä¸€ä¸ªçº¿ç¨‹è·å–æ‰§è¡Œæƒ, è¿™å°±æ˜¯çº¿ç¨‹ä¸Šä¸‹æ–‡çš„åˆ‡æ¢æœºåˆ¶**

#### çº¿ç¨‹æ­»é”
> [!note] æ¦‚è¿°
> æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªåŠä»¥ä¸Šä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­, **å› äº‰å¤ºèµ„æºè€Œé€ æˆçš„äº’ç›¸ç­‰å¾…çš„ç°è±¡**, åœ¨æ²¡æœ‰å¤–ç•Œå¹²é¢„çš„æƒ…å†µä¸‹, è¿™äº›çº¿ç¨‹ä¼šä¸€ç›´è¿è¡Œä¸‹å»ä»è€Œä½¿å¾—ç¨‹åºæ— æ³•æ­£å¸¸è¿›è¡Œ
> ä¸¾ä¸€ä¸ªå¾ˆå½¢è±¡çš„ä¾‹å­, å¥½æ¯”ä¸¤ä¸ªäººåœ¨ä¸€æ¡ç‹­å°çš„å··å­ä¸­, éƒ½å¸Œæœ›å¯¹æ–¹è®©è·¯ä½†æ˜¯è°éƒ½ä¸æ„¿æ„å…ˆé€€ä¸€æ­¥, ç»“æœä¸¤ä¸ªäººéƒ½å¡åœ¨åŸåœ°

> [!tip] æ­»é”äº§ç”Ÿçš„å››ä¸ªå¿…è¦æ¡ä»¶
> 1. **äº’æ–¥æ¡ä»¶**
> 	- å†…å®¹: ä¸€æ®µæ—¶é—´å†…æŸèµ„æºä»…ä¸ºä¸€ä¸ªè¿›ç¨‹æ‰€å æœ‰, æ­¤æ—¶å¦‚æœæœ‰å…¶ä»–èµ„æºè¯·æ±‚è¯¥èµ„æº, åˆ™è¯¥è¯·æ±‚è¿›ç¨‹åªèƒ½ç­‰å¾…
> 	- ç†è§£: ä¸€å°æ‰“å°æœºåŒæ—¶åªèƒ½æ‰“å°ä¸€ç¯‡æ–‡æ¡£, è¿™æ˜¯**èµ„æºæœ¬èº«çš„ç‰¹æ€§**, é€šå¸¸æ— æ³•è¢«ç ´å
> 2. **ä¸å¯å‰¥å¤ºæ¡ä»¶**
> 	- å†…å®¹: è¿›ç¨‹æ‰€æ‹¥æœ‰çš„èµ„æºåœ¨æœªä½¿ç”¨å®Œæ¯•ä¹‹å‰, ä¸å¯ä»¥è¢«å…¶ä»–èµ„æºæŠ¢èµ°, åªèƒ½ç”±å®ƒæœ¬èº«é‡Šæ”¾
> 	- ç†è§£: åªæœ‰çº¿ç¨‹è‡ªå·±æ‰èƒ½é‡Šæ”¾å®ƒè·å¾—çš„é”, æ“ä½œç³»ç»Ÿæˆ–åˆ«çš„çº¿ç¨‹æ— æ³•å¼ºè¡ŒæŠŠé”æŠ¢èµ°
> 3. **è¯·æ±‚ä¸ä¿æŒæ¡ä»¶**
> 	- å†…å®¹: è¿›ç¨‹å·²ç»ä¿æŒäº†è‡³å°‘ä¸€ä¸ªèµ„æº, ä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚, è€Œè¯¥èµ„æºå·²è¢«å…¶ä»–èµ„æºå æœ‰, æ­¤æ—¶è¿›ç¨‹ä¼šè¢«é˜»å¡, ä½†å¯¹è‡ªå·±æ‰€æŒæœ‰çš„èµ„æºä¿æŒä¸æ”¾
> 	- ç†è§£: çº¿ç¨‹Aå·²ç»æ‹¿åˆ°äº†é”1, ä½†æ˜¯å®ƒè¿˜æƒ³è¦çº¿ç¨‹Bæ‰‹é‡Œçš„é”2, åœ¨æ‹¿åˆ°é”2ä¹‹å‰çº¿ç¨‹Aä¸ä¼šé‡Šæ”¾é”1
> 4. **å¾ªç¯ç­‰å¾…æ¡ä»¶**
> 	- å†…å®¹: è‹¥å¹²è¿›ç¨‹ä¹‹é—´å½¢æˆä¸€ç§å¤´å°¾ç›¸æ¥çš„å¾ªç¯èµ„æºç­‰å¾…å…³ç³»
> 	- ç†è§£: çº¿ç¨‹Aåœ¨ç­‰å¾…çº¿ç¨‹Bæ‹¥æœ‰çš„èµ„æº, çº¿ç¨‹Bä¹Ÿåœ¨ç­‰çº¿ç¨‹Açš„èµ„æº, è¿™å°±å½¢æˆäº†ä¸€ä¸ªAç­‰B, Bç­‰Açš„ç¯è·¯

> [!example] æ­»é”çš„å½¢æˆ
```Java
// æ­»é”çš„å®ç°  
public class DeadLockDemo {  
    private static Object resourceA = new Object();  
    private static Object resourceB = new Object();  
    public static void main(String[] args) throws  InterruptedException{  
        // åˆ›å»ºAçº¿ç¨‹  
        Thread tA = new Thread(new Runnable() {  
            @Override  
            public void run() {  
                synchronized (resourceA){  
                    System.out.println(Thread.currentThread().getName()+ "è·å–Aèµ„æº");  
                    try {  
                        Thread.sleep(1000);  
                    } catch (InterruptedException e) {  
                        throw new RuntimeException(e);  
                    }                    System.out.println(Thread.currentThread().getName()+ "å¼€å§‹ç”³è¯·Bèµ„æº");  
                    synchronized (resourceB){  
                        System.out.println(Thread.currentThread().getName()+ "è·å–Bèµ„æº");  
                    }
                }
            }
        });        
        tA.setName("çº¿ç¨‹A");  
  
        // åˆ›å»ºBçº¿ç¨‹  
        Thread tB = new Thread(new Runnable() {  
            @Override  
            public void run() {  
                synchronized (resourceB){  
                    System.out.println(Thread.currentThread().getName()+ "è·å–Bèµ„æº");  
                    try {  
                        Thread.sleep(1000);  
                    } catch (InterruptedException e) {  
                        throw new RuntimeException(e);  
                    }                    System.out.println(Thread.currentThread().getName()+ "å¼€å§‹ç”³è¯·Aèµ„æº");  
                    synchronized (resourceA){  
                        System.out.println(Thread.currentThread().getName()+ "è·å–Aèµ„æº");  
                    }
                }
            }
        });        
        tB.setName("çº¿ç¨‹B");  
  
        tA.start();  
        tB.start();  
    }
}
```
è¿è¡Œç»“æœ
```text
çº¿ç¨‹Aè·å–Aèµ„æº
çº¿ç¨‹Bè·å–Bèµ„æº
çº¿ç¨‹Aå¼€å§‹ç”³è¯·Bèµ„æº
çº¿ç¨‹Bå¼€å§‹ç”³è¯·Aèµ„æº
```
æœ€ç»ˆä¸¤ä¸ªèµ„æºå„è‡ªè¢«å¯¹åº”çš„çº¿ç¨‹æŒæœ‰, å‡æ— æ³•ç”³è¯·æˆåŠŸ, æœ€ç»ˆå½¢æˆæ­»é”

#### é¿å…æ­»é”
> [!question] å¦‚ä½•é¿å…æ­»é”?
> è¦é¿å…æ­»é”, åªéœ€è¦**è‡³å°‘ç ´åä¸€ä¸ªæ„æˆæ­»é”çš„å¿…è¦æ¡ä»¶**å³å¯. 
> 
> 1. ç ´å"è¯·æ±‚ä¸ä¿æŒæ¡ä»¶" --> ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰èµ„æº
> 2. ç ´å"ä¸å‰¥å¤ºæ¡ä»¶" --> å…è®¸æŠ¢å èµ„æº
> 3. ç ´å"å¾ªç¯ç­‰å¾…æ¡ä»¶" --> å¯¹èµ„æºè¿›è¡Œæ’åº, æŒ‰é¡ºåºç”³è¯· (æœ€é‡è¦æœ€å®ç”¨)

> [!example] è§£å†³ä¹‹å‰ä»£ç ä¸­çš„æ­»é”é—®é¢˜
> 
```Java
// æ­»é”è§£å†³  
public class DeadLockDefuse {  
    private static Object resourceA = new Object();  
    private static Object resourceB = new Object();  
  
    public static void main(String[] args) throws InterruptedException {  
        // åˆ›å»ºAçº¿ç¨‹  
        Thread tA = new Thread(new Runnable() {  
            @Override  
            public void run() {  
                // ã€è§£å†³æ­»é”ã€‘ç¡®ä¿æ‰€æœ‰çº¿ç¨‹æŒ‰ç›¸åŒé¡ºåºè·å–èµ„æº  
                // åŸå§‹ä»£ç ä¸­çº¿ç¨‹Aå…ˆè·å–resourceAï¼Œå†è·å–resourceB  
                // çº¿ç¨‹Bå…ˆè·å–resourceBï¼Œå†è·å–resourceAï¼Œå¯¼è‡´æ­»é”  
                // ä¿®æ”¹åä¸¤ä¸ªçº¿ç¨‹éƒ½æŒ‰resourceA -> resourceBçš„é¡ºåºè·å–  
                synchronized (resourceA) {  
                    System.out.println(Thread.currentThread().getName() + "è·å–Aèµ„æº");  
                    try {  
                        Thread.sleep(1000);  
                    } catch (InterruptedException e) {  
                        throw new RuntimeException(e);  
                    }                    System.out.println(Thread.currentThread().getName() + "å¼€å§‹ç”³è¯·Bèµ„æº");  
                    synchronized (resourceB) {  
                        System.out.println(Thread.currentThread().getName() + "è·å–Bèµ„æº");  
                    }
                }
            }
        });
        tA.setName("çº¿ç¨‹A");  
  
        // åˆ›å»ºBçº¿ç¨‹  
        Thread tB = new Thread(new Runnable() {  
            @Override  
            public void run() {  
                // ã€è§£å†³æ­»é”ã€‘ä¿®æ”¹èµ„æºè·å–é¡ºåº  
                // å°†åŸå…ˆæ˜¯resourceB -> resourceAçš„é¡ºåºæ”¹ä¸ºresourceA -> resourceB  
                // ä¿è¯ä¸¤ä¸ªçº¿ç¨‹è·å–èµ„æºçš„é¡ºåºä¸€è‡´ï¼Œé¿å…å¾ªç¯ç­‰å¾…  
                synchronized (resourceA) {  
                    System.out.println(Thread.currentThread().getName() + "è·å–Aèµ„æº");  
                    try {  
                        Thread.sleep(1000);  
                    } catch (InterruptedException e) {  
                        throw new RuntimeException(e);  
                    }                    System.out.println(Thread.currentThread().getName() + "å¼€å§‹ç”³è¯·Bèµ„æº");  
                    synchronized (resourceB) {  
                        System.out.println(Thread.currentThread().getName() + "è·å–Bèµ„æº");  
                    }
                }
            }
        });
        tB.setName("çº¿ç¨‹B");  
  
        tA.start();  
        tB.start();  
    }
}
```

### å®ˆæŠ¤çº¿ç¨‹å’Œç”¨æˆ·çº¿ç¨‹

#### å®ˆæŠ¤çº¿ç¨‹å’Œç”¨æˆ·çº¿ç¨‹çš„åŒºåˆ«
> [!note] æ¦‚è¿°
> Javaä¸­çš„çº¿ç¨‹åˆ†ä¸¤ç±»
> - **deamonçº¿ç¨‹(å®ˆæŠ¤çº¿ç¨‹)**
> 	- å®šä¹‰ï¼šå®ˆæŠ¤çº¿ç¨‹å°±æ˜¯åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™*åœ¨åå°æä¾›ä¸€ç§é€šç”¨æœåŠ¡*çš„çº¿ç¨‹ã€‚å¦‚åƒåœ¾å›æ”¶çº¿ç¨‹å°±æ˜¯ä¸€ä¸ªå¾ˆç§°èŒçš„å®ˆæŠ¤è€…ï¼Œå¹¶ä¸”è¿™ç§çº¿ç¨‹**å¹¶ä¸å±äºç¨‹åºä¸­ä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†**
> 	- å› æ­¤ï¼Œå½“æ‰€æœ‰çš„éå®ˆæŠ¤çº¿ç¨‹ç»“æŸåï¼Œç¨‹åºä¹Ÿå°±è¢«ç»ˆæ­¢ï¼ŒåŒæ—¶æ€æ­»æ‰€æœ‰çš„å®ˆæŠ¤çº¿ç¨‹ã€‚åè¿‡æ¥ï¼Œåªè¦ä»»ä½•éå®ˆæŠ¤çº¿ç¨‹æ­£åœ¨è¿è¡Œï¼Œç¨‹åºå°±ä¸ä¼šåœæ­¢
> - **userçº¿ç¨‹(ç”¨æˆ·çº¿ç¨‹)**
> 	- å®šä¹‰ï¼šæŸç§æ„ä¹‰ä¸Šçš„ä¸»è¦ç”¨æˆ·çº¿ç¨‹ï¼Œåªè¦æœ‰ç”¨æˆ·çº¿ç¨‹æœªæ‰§è¡Œå®Œæ¯•ï¼ŒJVMè™šæ‹Ÿæœºå°±ä¸ä¼šé€€å‡º
> 	- åŒºåˆ«ï¼šåœ¨æœ¬è´¨ä¸Šï¼Œç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹å¹¶æ²¡æœ‰ä»€ä¹ˆå¤ªå¤§çš„åŒºåˆ«ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯å½“æœ€åä¸€ä¸ªéå®ˆæŠ¤çº¿ç¨‹ç»“æŸæ—¶ï¼ŒJVMä¼šæ­£å¸¸é€€å‡ºï¼Œè€Œä¸ç®¡å½“å‰æ˜¯å¦æœ‰å®ˆæŠ¤çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´å®ˆæŠ¤çº¿ç¨‹çš„ç»“æŸå¹¶ä¸ä¼šå½±å“JVMçš„é€€å‡ºã€‚å¯¹äºç”¨æˆ·çº¿ç¨‹ï¼Œåªè¦æœ‰ä¸€ä¸ªçº¿ç¨‹è¿˜æ²¡ç»“æŸï¼Œæ­£å¸¸æƒ…å†µä¸‹JVMå°±ä¸ä¼šé€€å‡ºã€‚
> 
> 
> åœ¨JVMå¯åŠ¨æ—¶ï¼Œä¼šè°ƒç”¨mainå‡½æ•°ï¼Œmainå‡½æ•°æ‰€åœ¨çš„çº¿ç¨‹å°±æ˜¯ä¸€ä¸ªç”¨æˆ·çº¿ç¨‹ï¼Œå…¶å®åœ¨JVMå†…éƒ¨åŒæ—¶å¯åŠ¨äº†å¾ˆå¤šå®ˆæŠ¤çº¿ç¨‹ï¼Œå¦‚*åƒåœ¾å›æ”¶çº¿ç¨‹*
> 

#### å®ˆæŠ¤çº¿ç¨‹
> [!note] æ¦‚è¿°
> Javaä¸­çš„å®ˆæŠ¤çº¿ç¨‹å’ŒLinuxä¸­çš„å®ˆæŠ¤è¿›ç¨‹æœ‰æœ¬è´¨çš„åŒºåˆ«, Linuxçš„å®ˆæŠ¤è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿçº§åˆ«çš„ï¼Œå½“ç³»ç»Ÿé€€å‡ºåï¼Œæ‰ä¼šç»ˆæ­¢
> è€ŒJavaä¸­çš„å®ˆæŠ¤çº¿ç¨‹æ˜¯JVMçº§åˆ«çš„ï¼Œå½“JVMä¸­æ²¡æœ‰ä»»ä½•ç”¨æˆ·è¿›ç¨‹æ—¶ï¼Œå®ˆæŠ¤è¿›ç¨‹é”€æ¯ï¼ŒJVMé€€å‡ºï¼Œç¨‹åºç»ˆæ­¢ã€‚Javaä¸­çš„å®ˆæŠ¤çº¿ç¨‹æœ€ä¸»è¦çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š
> - å®ˆæŠ¤çº¿ç¨‹æ˜¯è¿è¡Œåœ¨ç¨‹åºåå°çš„çº¿ç¨‹
> - å®ˆæŠ¤çº¿ç¨‹åˆ›å»ºçš„çº¿ç¨‹ï¼Œä¾æ—§æ˜¯å®ˆæŠ¤çº¿ç¨‹
> - å®ˆæŠ¤çº¿ç¨‹ä¸ä¼šå½±å“JVMçš„é€€å‡ºï¼Œå½“JVMåªå‰©ä¸‹å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼ŒJVMé€€å‡º
> - å®ˆæŠ¤çº¿ç¨‹åœ¨JVMé€€å‡ºåï¼Œè‡ªåŠ¨é”€æ¯

> [!question] å¦‚ä½•åˆ›å»ºå®ˆæŠ¤çº¿ç¨‹ï¼Ÿ
> ç­”æ¡ˆæ˜¯**å°†çº¿ç¨‹è½¬æ¢ä¸ºå®ˆæŠ¤çº¿ç¨‹**ï¼Œå³é€šè¿‡è°ƒç”¨Threadå¯¹è±¡çš„`setDaemon(true)`æ–¹æ³•å®ç°

> [!attention] éœ€è¦æ³¨æ„
> - `thread.setDaemon(true)`å¿…é¡»åœ¨`thread.start()`ä¹‹å‰è¢«è®¾ç½®ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ª`IllegalThreadStateException`çš„å¼‚å¸¸ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ**ä¸èƒ½æŠŠæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹**ï¼Œåœ¨Deamonä¸­äº§ç”Ÿçš„æ–°çº¿ç¨‹ä¾æ—§æ˜¯Daemonçš„
> - åœ¨ç¨‹åºå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå®ˆæŠ¤çº¿ç¨‹ä¸åº”è¯¥è®¿é—®å›ºæœ‰èµ„æºï¼Œå¦‚æ–‡ä»¶ï¼Œæ•°æ®åº“ï¼Œå› ä¸ºå®ƒä¼šåœ¨ä»»ä½•æ—¶å€™ç”šè‡³åœ¨ä¸€ä¸ªæ“ä½œè¢«æ‰§è¡Œæ—¶è¢«ä¸­æ–­

> [!example] ç”¨æˆ·çº¿ç¨‹ç­‰å¾…å®ˆæŠ¤çº¿ç¨‹
> åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹åç§°ä¸º`threadOne`ï¼Œåœ¨`run()`æ–¹æ³•ä¸­ï¼Œçº¿ç¨‹ä¼‘çœ 1000msåï¼Œæ±‚è§£$\sum_{i=1}^{100}$
> å°†`threadOne`è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼›åŠ å…¥`join()`æ–¹æ³•ï¼Œå¼ºåˆ¶è®©ç”¨æˆ·ç­‰å¾…å®ˆæŠ¤çº¿ç¨‹ï¼Œæœ€ç»ˆè¾“å‡ºç»“æœ
```java
public class DaemonDemo {  
    public static void main(String[] args) {  
        Thread threadOne = new Thread(new Runnable() {  
            @Override  
            public void run() {  
                try {  
                    Thread.sleep(1000);  
                }                
                catch (InterruptedException e){  
                    e.printStackTrace();  
                }                int sum = 0;  
                for (int i = 1; i <= 100; i++) {  
                    sum += i;  
                }                
                System.out.println("å®ˆæŠ¤çº¿ç¨‹ï¼šæ±‚å’Œç»“æœä¸º" + sum);  
            }        
        });        
        threadOne.setDaemon(true);  
        threadOne.start();  
        try {  
            threadOne.join();  
        }        catch (InterruptedException e){  
            e.printStackTrace();  
        }        
        System.out.println("ä¸»çº¿ç¨‹ï¼ˆç”¨æˆ·çº¿ç¨‹ï¼‰ç»“æŸ");  
    }
}
```
è¿è¡Œç»“æœ
```text
å®ˆæŠ¤çº¿ç¨‹ï¼šæ±‚å’Œç»“æœä¸º5050
ä¸»çº¿ç¨‹ï¼ˆç”¨æˆ·çº¿ç¨‹ï¼‰ç»“æŸ
```

> [!danger] ç‰¹åˆ«æ³¨æ„
> å¦‚æœæ²¡æœ‰ä½¿ç”¨`join()`æ–¹æ³•ï¼Œé‚£ä¹ˆå®ˆæŠ¤çº¿ç¨‹è¿˜æ²¡æœ‰æ‰§è¡Œå°±éšç€ç”¨æˆ·çº¿ç¨‹ä¸€èµ·æ¶ˆäº¡äº†ã€‚ä½¿ç”¨äº†`join()`æ–¹æ³•åï¼Œå†æ‰§è¡Œç”¨æˆ·çº¿ç¨‹ã€‚
> ä½†æ˜¯ï¼Œè¿™æ ·çš„æ“ä½œæ˜¯ä¸è¢«å…è®¸çš„ï¼Œå› ä¸ºå®ˆæŠ¤çº¿ç¨‹é»˜è®¤å°±æ˜¯ä¸ºäº†æœåŠ¡äºç”¨æˆ·çº¿ç¨‹çš„ï¼Œæ˜¯ä¸éœ€è¦è¢«ç”¨æˆ·çº¿ç¨‹ç­‰å¾…çš„

> [!question] é‚£ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨å®ˆæŠ¤çº¿ç¨‹å‘¢ï¼Ÿ
> - ä¸ºå…¶ä»–çº¿ç¨‹æä¾›æœåŠ¡
> - æ ¹æ®å¼€å‘éœ€æ±‚ï¼Œç¨‹åºç»“æŸæ—¶ï¼Œè¿™ä¸ªçº¿ç¨‹å¿…é¡»æ­£å¸¸ä¸”ç«‹åˆ»è¢«å…³é—­
> - å¿ƒè·³ç›‘å¬ï¼Œåƒåœ¾å›æ”¶ï¼Œä¸´æ—¶æ•°æ®æ¸…ç†ç­‰é€šç”¨æœåŠ¡


### ThreadLocal


### ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ¨¡å¼
> [!note] æ¦‚è¿°
> ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ¨¡å¼æ˜¯ä¸€ç§ååˆ†ç»å…¸çš„å¤šçº¿ç¨‹å¹¶å‘åä½œçš„æ¨¡å¼ã€‚æ‰€è°“ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ¨¡å¼ï¼ŒæŒ‡çš„æ˜¯ä¸¤ç§çº¿ç¨‹ï¼š
> - ç”¨äºç”Ÿäº§æ•°æ®çš„ç”Ÿäº§è€…çº¿ç¨‹
> - ç”¨äºæ¶ˆè´¹æ•°æ®çš„æ¶ˆè´¹è€…çº¿ç¨‹
> åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸é‡‡ç”¨æ•°æ®å…±äº«çš„æ–¹å¼ï¼Œè§£è€¦äºŒè€…çš„å…³ç³»ï¼šç”Ÿäº§è€…ç”Ÿäº§æ•°æ®åï¼Œåªéœ€è¦å°†å…¶æ”¾åœ¨æ•°æ®å…±äº«çš„åŒºåŸŸä¸­ï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒæ¶ˆè´¹è€…çš„è¡Œä¸ºã€‚æ¶ˆè´¹è€…åªéœ€è¦ä»æ•°æ®å…±äº«çš„åŒºåŸŸä¸­è·å–æ•°æ®ï¼Œä¸éœ€è¦å…³å¿ƒç”Ÿäº§è€…çš„è¡Œä¸º
> 
> åœ¨å®ç°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼æ—¶ï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹çš„ä¸‰ç§æ–¹å¼ï¼š
> - ä½¿ç”¨`Object`çš„`wait()`æ–¹æ³•å’Œ`notify()`æ–¹æ³•å®ç°æ¶ˆæ¯é€šçŸ¥æœºåˆ¶
> - ä½¿ç”¨`Lock`çš„`Condition`çš„`await()`æ–¹æ³•å’Œ`signal()`æ–¹æ³•å®ç°æ¶ˆæ¯é€šçŸ¥æœºåˆ¶
> - ä½¿ç”¨`BlockingQueue`å®ç°æ¶ˆæ¯é€šçŸ¥æœºåˆ¶


####  wait()æ–¹æ³•å’Œnotify()æ–¹æ³•
> [!note] æ¦‚è¿°
> åœ¨çº¿ç¨‹ä¸­è°ƒç”¨`Object`çš„`wait()`æ–¹æ³•æ—¶ï¼Œå°†é˜»å¡å½“å‰çº¿ç¨‹ï¼Œå¹¶ä¸”é‡Šæ”¾é”ï¼Œç›´è‡³å…¶å®ƒçº¿ç¨‹è°ƒç”¨äº†`notify()`æ–¹æ³•æˆ–`notifyAll()`æ–¹æ³•åï¼Œå½“å‰çº¿ç¨‹æ‰ä¼šè¢«å”¤é†’ï¼Œç»§ç»­æ‰§è¡Œä¸‹é¢çš„æ“ä½œã€‚
> `notify()`æ–¹æ³•ç”¨äºå”¤é†’æ­£åœ¨å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œè¿™ä½¿å¾—è¯¥çº¿ç¨‹ä»ç­‰å¾…é˜Ÿåˆ—ä¸­ç§»å…¥åŒæ­¥é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡èƒ½å¤Ÿè·å–åˆ°å¯¹è±¡ç›‘è§†é”çš„æœºä¼š
> `notifyAll()`æ–¹æ³•ç”¨äºå”¤é†’å…¨éƒ¨æ­£åœ¨å¤„äºç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹ï¼Œä¸`notify()`æ–¹æ³•çš„ç”¨æ³•å¤§è‡´ç›¸åŒ

> [!example] ä½¿ç”¨Objectçš„ç›¸å…³æ–¹æ³•å®ç°ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…æ¨¡å¼
> - åˆ›å»ºä¸€ä¸ªå·¥å‚ç±»`ProductFactory`ï¼Œè¯¥ç±»åŒ…å«ä¸¤ä¸ªæ–¹æ³•ï¼š`produce()`ç”Ÿäº§æ–¹æ³•å’Œ`consume()`æ¶ˆè´¹æ–¹æ³•ã€‚å¯¹äº`produce()`æ–¹æ³•ï¼Œå½“æ²¡æœ‰åº“å­˜æˆ–åº“å­˜è¾¾åˆ°5æ—¶ï¼Œåœæ­¢ç”Ÿäº§ï¼Œä¸ºäº†æ›´ä¾¿äºè§‚å¯Ÿç»“æœï¼Œæ¯ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå½“å‰çº¿ç¨‹ä¼‘çœ 1000msï¼›å¯¹äº`consume()`æ–¹æ³•ï¼Œåªè¦æœ‰åº“å­˜å°±è¿›è¡Œæ¶ˆè´¹ï¼Œä¸ºäº†ä¾¿äºè§‚å¯Ÿç»“æœï¼Œæ¯æ¶ˆè´¹ä¸€ä»¶äº§å“ï¼Œå½“å‰çº¿ç¨‹ä¼‘çœ 1000msã€‚åº“å­˜ä½¿ç”¨`LinkedList`å®ç°ï¼Œæ­¤æ—¶`LinkedList`å³å…±äº«æ•°æ®å†…å­˜
> - åˆ›å»º`Producer`ç”Ÿäº§è€…ç±»ï¼Œè°ƒç”¨å·¥å‚ç±»ä¸­çš„`produce()`æ–¹æ³•ï¼Œç”Ÿäº§è¿‡ç¨‹ä¸­ä¸ºæ¯ä¸ªäº§å“ä»0å¼€å§‹è¿›è¡Œç¼–å·ã€‚
> - åˆ›å»ºä¸€ä¸ª`Consumer`æ¶ˆè´¹è€…ç±»ï¼Œè°ƒç”¨å·¥å‚ç±»ä¸­çš„`consume()`æ–¹æ³•
> - åˆ›å»ºä¸€ä¸ªDemoç±»ï¼Œåœ¨ä¸»å‡½æ•°ä¸­åˆ›å»º1ä¸ªç”Ÿäº§è€…å’Œ2ä¸ªæ¶ˆè´¹è€…ï¼Œè¿è¡Œç¨‹åºå¹¶è§‚å¯Ÿç»“æœ
> 
```java
import java.util.LinkedList;  
  
public class ProductFactory {  
    private LinkedList<String> products ;  
    private int stockNum = 5;  
    public ProductFactory(){  
        products = new LinkedList<>();  
    }  
    public synchronized void produce(String product){  
        while (products.size() == stockNum){  // ä¿®æ”¹æ¡ä»¶åˆ¤æ–­  
            try {  
                System.out.println("è­¦å‘Šï¼šçº¿ç¨‹ï¼ˆ"+Thread.currentThread().getName()+"ï¼‰å‡†å¤‡ç”Ÿäº§äº§å“ï¼Œä½†äº§å“æ± å·²æ»¡");  
                // åº“å­˜è¾¾åˆ°5ï¼Œç”Ÿäº§çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€  
                wait();  
            }            
            catch (InterruptedException e){  
                e.printStackTrace();  
            }
        }        
        products.add(product);  // ç§»åˆ°å¾ªç¯å¤–é¢  
        try {  
            Thread.sleep(1000);  
        }        
        catch (InterruptedException e){  
            e.printStackTrace();  
        }        
        System.out.println("çº¿ç¨‹ï¼ˆ"+Thread.currentThread().getName()+"ï¼‰å·²ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š"+products.size());  
        // å”¤é†’æ¶ˆè´¹è€…çº¿ç¨‹  
        notifyAll();  
    }  
    public synchronized String consume(){  
        while (products.size() == 0){  
            try {  
                System.out.println("è­¦å‘Šï¼šçº¿ç¨‹ï¼ˆ"+Thread.currentThread().getName()+"ï¼‰å‡†å¤‡æ¶ˆè´¹äº§å“ï¼Œä½†äº§å“æ± å·²ç©º");  
                // åº“å­˜ä¸º0ï¼Œæ¶ˆè´¹çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€  
                wait();  
            }            
            catch (InterruptedException e){  
                e.printStackTrace();  
            }
        }        
        String product = products.removeFirst();  
        try {  
            Thread.sleep(1000);  
        }        
        catch (InterruptedException e){  
            e.printStackTrace();  
        }        
        System.out.println("çº¿ç¨‹ï¼ˆ"+Thread.currentThread().getName()+"ï¼‰å·²æ¶ˆè´¹ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š"+products.size());  
        // é€šçŸ¥ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§  
        notifyAll();  
        return product;  
    }
}

public class Producer implements Runnable{  
    private ProductFactory productFactory;  
    public Producer(ProductFactory productFactory){  
        this.productFactory = productFactory;  
    }    @Override  
    public void run(){  
        int i = 0;  
        while (true){  
            productFactory.produce(String.valueOf(i));  
            i++;  
        }
    }
}


public class Consumer implements Runnable{  
    private ProductFactory productFactory;  
    public Consumer(ProductFactory productFactory){  
        this.productFactory = productFactory;  
    }    
    @Override  
    public void run() {  
        while (true){  
            productFactory.consume();  
        }
    }
}

public class Demo {  
    static void main() {  
        ProductFactory factory = new ProductFactory();  
        new Thread(new Producer(factory),"ç”Ÿäº§è€…").start();  
        new Thread(new Consumer(factory),"æ¶ˆè´¹è€…1").start();  
        new Thread(new Consumer(factory),"æ¶ˆè´¹è€…2").start();  
    }
}
```
è¿è¡Œç»“æœ
```text
çº¿ç¨‹ï¼ˆç”Ÿäº§è€…ï¼‰å·²ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š1
çº¿ç¨‹ï¼ˆç”Ÿäº§è€…ï¼‰å·²ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š2
çº¿ç¨‹ï¼ˆç”Ÿäº§è€…ï¼‰å·²ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š3
çº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…1ï¼‰å·²æ¶ˆè´¹ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š2
çº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…1ï¼‰å·²æ¶ˆè´¹ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š1
çº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…1ï¼‰å·²æ¶ˆè´¹ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š0
è­¦å‘Šï¼šçº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…1ï¼‰å‡†å¤‡æ¶ˆè´¹äº§å“ï¼Œä½†äº§å“æ± å·²ç©º
è­¦å‘Šï¼šçº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…2ï¼‰å‡†å¤‡æ¶ˆè´¹äº§å“ï¼Œä½†äº§å“æ± å·²ç©º
çº¿ç¨‹ï¼ˆç”Ÿäº§è€…ï¼‰å·²ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š1
çº¿ç¨‹ï¼ˆç”Ÿäº§è€…ï¼‰å·²ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š2
çº¿ç¨‹ï¼ˆç”Ÿäº§è€…ï¼‰å·²ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š3
....
```

#### await()æ–¹æ³•å’Œsignal()æ–¹æ³•
> [!note] æ¦‚è¿°
> `Condition`æ¥å£æä¾›äº†ç±»ä¼¼Objectçš„ç›‘å¬å™¨æ–¹æ³•ï¼Œä¸`Lock`é…åˆå¯ä»¥å®ç°æ¶ˆæ¯é€šçŸ¥æœºåˆ¶ã€‚
> åœ¨`Condition`æ¥å£ä¸­ï¼Œèƒ½å¤Ÿæ‰¾åˆ°Objectç±»ä¸­çš„`wait()`ï¼Œ`notify()`ï¼Œ`notifyAll()`çš„æ›¿ä»£æ–¹æ³•ã€‚Conditionè¯­æ³•æ ¼å¼å¦‚ä¸‹
> ```java
> public interface Condition{
> 	void await() throws InterruptedException;
> 	long awaitNanos(long nanosTimeout) throws InterruptedException;
> 	boolean await(long time,TimeUnit unit) throws InterruptedException;
> 	boolean awaitUntil(Date deadline) throws InterruptedException;
> 	void signal();
> 	void signalAll();
> }
> ```
> æ–¹æ³•è¯´æ˜ï¼š
> - `void await() throws InterruptedException;`ï¼šå½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°è¢«å…¶ä»–çº¿ç¨‹å”¤é†’æˆ–è¢«ä¸­æ–­
> - `long awaitNanos(long nanosTimeout) throws InterruptedException;`ï¼šå½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°è¢«å…¶ä»–çº¿ç¨‹å”¤æˆ–è€…è¢«ä¸­æ–­ï¼ŒæŠ‘æˆ–æ˜¯å¤„äºç­‰å¾…çŠ¶æ€ä¸€æ®µæ—¶é—´åç»“æŸã€‚`nanosTimeout`ä¸ºè¶…æ—¶æ—¶é—´ï¼Œè¿”å›å€¼æ˜¯è¶…æ—¶æ—¶é—´å‡å»å®é™…æ—¶é—´çš„ç»“æœ
> - `boolean await(long time,TimeUnit unit) throws InterruptedException;`ï¼šå½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ŒçŸ¥é“è¢«å…¶ä»–çº¿ç¨‹å”¤é†’æˆ–è€…è¢«ä¸­æ–­ï¼ŒæŠ‘æˆ–æ˜¯å¤„äºç­‰å¾…æ—¶é—´ä¸€æ®µæ—¶é—´åç»“æŸã€‚ä¸ä¸Šä¸ªæ–¹æ³•çš„åŒºåˆ«åœ¨äºå¯ä»¥è®¾ç½®æ—¶é—´ï¼Œæœªè¶…æ—¶è¢«å”¤é†’è¿”å›trueï¼Œè¶…æ—¶è¿”å›false
> - `boolean awaitUntil(Date deadline) throws InterruptedException;`ï¼šå½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ŒçŸ¥é“è¢«å…¶ä»–çº¿ç¨‹å”¤é†’æˆ–è€…è¢«ä¸­æ–­ï¼ŒæŠ‘æˆ–æ˜¯å¤„äºç­‰å¾…æ—¶é—´ä¸€æ®µæ—¶é—´åç»“æŸã€‚å¦‚æœå½“å‰çº¿ç¨‹åœ¨æˆªæ­¢æ—¶é—´ç»“æŸå‰è¢«å”¤é†’ï¼Œè¿”å›trueï¼Œåä¹‹è¿”å›false
> - `void signal();`ï¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹
> - `void signalAll();`ï¼šå”¤é†’æ‰€æœ‰çº¿ç¨‹
> 
> Conditionå¯¹è±¡æ˜¯ç”±Lockå¯¹è±¡è°ƒç”¨`newCondition()`æ–¹æ³•åˆ›å»ºçš„ï¼ˆå³`Lock.newContion()`ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒConditionæ˜¯ä¾èµ–Lockå¯¹è±¡çš„ã€‚åˆ›å»ºConditionå¯¹è±¡çš„ä»£ç å¦‚ä¸‹
> ```java
> Lock lock = new ReentrantLock();
> Condition condition = lock.newCondition();
> ```

> [!example] ä½¿ç”¨Conditionçš„ç›¸å…³æ–¹æ³•å®ç°ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼
> ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œåœ¨ä¹‹å‰ä¾‹å­å‰ææ¡ä»¶ä¸å˜çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨Conditionçš„ç›¸å…³æ–¹æ³•æ›¿æ¢Objectä¸­çš„`wait()`å’Œ`notify() | notifyAll()`æ–¹æ³•
```java
import java.util.LinkedList;  
import java.util.concurrent.locks.Condition;  
import java.util.concurrent.locks.Lock;  
import java.util.concurrent.locks.ReentrantLock;  
  
public class ProductFactory {  
    private LinkedList<String> products;  
    private int stockNum = 5;  
    private Lock lock = new ReentrantLock(false);  
    // ç”Ÿäº§è€…çº¿ç¨‹å¯¹åº”çš„Conditionå¯¹è±¡  
    private Condition p = lock.newCondition();  
    // æ¶ˆè´¹è€…çº¿ç¨‹å¯¹åº”çš„Conditionå¯¹è±¡  
    private Condition c = lock.newCondition();  
    public ProductFactory(){  
        products = new LinkedList<>();  
    }    // ç”Ÿäº§æ–¹æ³•  
    public void produce(String product){  
        try {  
            lock.lock();  
            while (stockNum == product.length()){  
                try {  
                    System.out.println("è­¦å‘Šï¼šçº¿ç¨‹ï¼ˆ"+Thread.currentThread().getName()+"ï¼‰å‡†å¤‡ç”Ÿäº§äº§å“ï¼Œä½†äº§å“æ± å·²æ»¡");  
                    p.await();  
                }                
                catch (InterruptedException e){  
                    e.printStackTrace();  
                }
            }            
            products.add(product);  
            System.out.println("çº¿ç¨‹ï¼ˆ"+Thread.currentThread().getName()+"ï¼‰å·²ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š"+products.size());  
            c.signalAll(); // å”¤é†’æ‰€æœ‰æ¶ˆè´¹è€…çº¿ç¨‹  
        }  
        finally {  
            lock.unlock();  
        }
    }  
    // æ¶ˆè´¹æ–¹æ³•  
    public String consume(){  
        try {  
            lock.lock();  
            while (products.size() == 0){  
                try {  
                    System.out.println("è­¦å‘Šï¼šçº¿ç¨‹ï¼ˆ"+Thread.currentThread().getName()+"ï¼‰å‡†å¤‡æ¶ˆè´¹äº§å“ï¼Œä½†äº§å“æ± å·²ç©º");  
                    c.await();  
                }                
                catch (InterruptedException e){  
                    e.printStackTrace();  
                }
            }
            String product = products.removeFirst();  
            System.out.println("çº¿ç¨‹ï¼ˆ"+Thread.currentThread().getName()+"ï¼‰å·²æ¶ˆè´¹ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š"+products.size());  
            p.signalAll();  
            return product;  
        }        
        finally {  
            lock.unlock();  
        }
    }
}


public class Producer implements Runnable{  
    private ProductFactory productFactory;  
    public Producer(ProductFactory productFactory){  
        this.productFactory = productFactory;  
    }    @Override  
    public void run(){  
        int i = 0;  
        while (true){  
            productFactory.produce(String.valueOf(i));  
            try {  
                Thread.sleep(1000);  
            }            
            catch (InterruptedException e){  
                e.printStackTrace();  
            }            
            i++;  
        }
    }
}


public class Consumer implements Runnable{  
    private ProductFactory productFactory;  
    public Consumer(ProductFactory productFactory){  
        this.productFactory = productFactory;  
    }  
    @Override  
    public void run(){  
        while (true){  
            productFactory.consume();  
            try {  
                Thread.sleep(1000);  
            }            
            catch (InterruptedException e){  
                e.printStackTrace();  
            }
        }
    }
}

public class Demo {  
    static void main() {  
        ProductFactory productFactory = new ProductFactory();  
        new Thread(new Producer(productFactory),"ç”Ÿäº§è€…").start();  
        new Thread(new Consumer(productFactory),"æ¶ˆè´¹è€…1").start();  
        new Thread(new Consumer(productFactory),"æ¶ˆè´¹è€…2").start();  
    }
}

```
è¿è¡Œç»“æœ
```text
çº¿ç¨‹ï¼ˆç”Ÿäº§è€…ï¼‰å·²ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š1
çº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…1ï¼‰å·²æ¶ˆè´¹ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š0
è­¦å‘Šï¼šçº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…2ï¼‰å‡†å¤‡æ¶ˆè´¹äº§å“ï¼Œä½†äº§å“æ± å·²ç©º
çº¿ç¨‹ï¼ˆç”Ÿäº§è€…ï¼‰å·²ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š1
çº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…2ï¼‰å·²æ¶ˆè´¹ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š0
è­¦å‘Šï¼šçº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…1ï¼‰å‡†å¤‡æ¶ˆè´¹äº§å“ï¼Œä½†äº§å“æ± å·²ç©º
è­¦å‘Šï¼šçº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…2ï¼‰å‡†å¤‡æ¶ˆè´¹äº§å“ï¼Œä½†äº§å“æ± å·²ç©º
çº¿ç¨‹ï¼ˆç”Ÿäº§è€…ï¼‰å·²ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š1
çº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…1ï¼‰å·²æ¶ˆè´¹ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š0
è­¦å‘Šï¼šçº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…2ï¼‰å‡†å¤‡æ¶ˆè´¹äº§å“ï¼Œä½†äº§å“æ± å·²ç©º
è­¦å‘Šï¼šçº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…1ï¼‰å‡†å¤‡æ¶ˆè´¹äº§å“ï¼Œä½†äº§å“æ± å·²ç©º
çº¿ç¨‹ï¼ˆç”Ÿäº§è€…ï¼‰å·²ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š1
çº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…2ï¼‰å·²æ¶ˆè´¹ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š0
è­¦å‘Šï¼šçº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…1ï¼‰å‡†å¤‡æ¶ˆè´¹äº§å“ï¼Œä½†äº§å“æ± å·²ç©º
è­¦å‘Šï¼šçº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…2ï¼‰å‡†å¤‡æ¶ˆè´¹äº§å“ï¼Œä½†äº§å“æ± å·²ç©º
çº¿ç¨‹ï¼ˆç”Ÿäº§è€…ï¼‰å·²ç”Ÿäº§ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š1
çº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…1ï¼‰å·²æ¶ˆè´¹ä¸€ä»¶äº§å“ï¼Œå½“å‰å‰©ä½™äº§å“æ•°ï¼š0
è­¦å‘Šï¼šçº¿ç¨‹ï¼ˆæ¶ˆè´¹è€…2ï¼‰å‡†å¤‡æ¶ˆè´¹äº§å“ï¼Œä½†äº§å“æ± å·²ç©º
......
```


> [!summary] æ€»ç»“å¯¹æ¯”ä¸¤ç§å®ç°ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼çš„æ–¹æ¡ˆ
> 1. wait-notifyæ–¹æ¡ˆ
> 	- ç‰¹ç‚¹ï¼š
> 		- åŸºäºObjectç±»çš„`wait()`, `notify()`, `notifyAll()`æ–¹æ³•
> 		- ä½¿ç”¨`synchronized`å…³é”®å­—ä¿è¯çº¿ç¨‹åŒæ­¥
> 		- éœ€è¦æ‰‹åŠ¨ç®¡ç†é”å’Œæ¡ä»¶åˆ¤æ–­
> 	- ä¼˜ç‚¹ï¼š
> 		- å®ç°ç®€å•ç›´è§‚ï¼Œä¾¿äºç†è§£
> 		- å…¼å®¹æ€§å¥½ï¼Œé€‚åˆæ‰€æœ‰Javaç‰ˆæœ¬
> 		- ä¸éœ€è¦é¢å¤–çš„ä¾èµ–
> 	- ç¼ºç‚¹
> 		- å®¹æ˜“å‡ºç°è™šå‡å”¤é†’çš„é—®é¢˜ï¼Œéœ€è¦å¾ªç¯æ£€æŸ¥æ¡ä»¶
> 		- ç²’åº¦è¾ƒç²—ï¼Œåªèƒ½éšæœºå”¤é†’ç­‰å¾…çº¿ç¨‹
> 		- ä»£ç é‡ç›¸å¯¹å¤§ï¼Œéœ€è¦å¤„ç†å¼‚å¸¸å’Œå¾ªç¯æ¡ä»¶
> 2. await-signalæ–¹æ¡ˆ
> 	- ç‰¹ç‚¹ï¼š
> 		- åŸºäº`java.util.concurrent.locks.ReentrantLock`å’ŒCondition
> 		- é€šè¿‡`lock()`å’Œ`unlock()`æ–¹æ³•æ§åˆ¶é”
> 		- é€šè¿‡Conditionçš„`await()`å’Œ`signal() | signalAll()`æ–¹æ³•è¿›è¡Œçº¿ç¨‹åè°ƒ
> 	- ä¼˜ç‚¹ï¼š
> 		- ç²¾å‡†æ§åˆ¶çº¿ç¨‹å”¤é†’ï¼Œå¯ä»¥æŒ‡å®šå”¤é†’ç‰¹å®šæ¡ä»¶çš„çº¿ç¨‹
> 		- æ”¯æŒå¤šä¸ªç­‰å¾…é˜Ÿåˆ—ï¼Œçµæ´»æ€§æ›´é«˜
> 		- æ€§èƒ½ç›¸å¯¹æ›´å¥½ï¼Œæ”¯æŒå…¬å¹³é”å’Œéå…¬å¹³é”
> 		- ä»£ç ç»“æ„æ›´æ¸…æ™°ï¼Œå¯è¯»æ€§æ›´å¼º
> 	- ç¼ºç‚¹ï¼š
> 		- ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†é”çš„è·å–å’Œé‡Šæ”¾
> 		- å¿…é¡»ç¡®ä¿åœ¨`finally`å—ä¸­é‡Šæ”¾é”
> 		- éœ€è¦Java 5+ ç‰ˆæœ¬çš„æ”¯æŒ

|   ç‰¹æ€§    | wait-notify |   await-signal    |
| :-----: | :---------: | :---------------: |
|  å®ç°å¤æ‚åº¦  |     ç®€å•      |        ä¸­ç­‰         |
| çº¿ç¨‹æ§åˆ¶ç²¾åº¦  |   ä½ï¼ˆéšæœºå”¤é†’ï¼‰   |     é«˜ï¼ˆå¯æŒ‡å®šå”¤é†’ï¼‰      |
|   æ€§èƒ½    |     ä¸€èˆ¬      |        è¾ƒå¥½         |
|   å…¼å®¹æ€§   |    æ‰€æœ‰ç‰ˆæœ¬     |      Java 5+      |
|   å¯è¯»æ€§   |     ä¸€èˆ¬      |        è¾ƒå¥½         |
| æ˜¯å¦æ”¯æŒå…¬å¹³é” |     ä¸æ”¯æŒ     | æ”¯æŒï¼ˆReentrantLock) |
| è™šå‡å”¤é†’å¤„ç†  |   éœ€è¦æ‰‹åŠ¨å¤„ç†    |       å†…ç½®æ”¯æŒ        |



### çº¿ç¨‹æ± 
> [!note] æ¦‚è¿°
> çº¿ç¨‹æ± å®è´¨ä¸Šæ˜¯ä¸€ç§**å¤šçº¿ç¨‹å¤„ç†å½¢å¼**ï¼Œå¤„ç†è¿‡ç¨‹ä¸­å¯ä»¥å…ˆå°†ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œåœ¨åˆ›å»ºçº¿ç¨‹åå†è‡ªåŠ¨å¯åŠ¨è¿™äº›ä»»åŠ¡
> ä½¿ç”¨çº¿ç¨‹æ± æœ€é‡è¦çš„å°±æ˜¯å¯ä»¥**æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚å’Œç¡¬ä»¶ç¯å¢ƒçµæ´»åœ°æ§åˆ¶çº¿ç¨‹æ•°é‡**ï¼Œå¹¶ä¸”å¯ä»¥**å¯¹æ‰€æœ‰çº¿ç¨‹è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†å’Œæ§åˆ¶ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„è¿è¡Œæ•ˆç‡**ï¼Œé™ä½ç³»ç»Ÿè¿è¡Œå‹åŠ›
> 
> ä½¿ç”¨çº¿ç¨‹æ± æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š
> - ä½¿çº¿ç¨‹å’Œä»»åŠ¡åˆ†ç¦»ï¼Œæå‡çº¿ç¨‹çš„é‡ç”¨æ€§
> - æç¤ºçº¿ç¨‹çš„å¹¶å‘æ•°é‡ï¼Œé™ä½æœåŠ¡å™¨å‹åŠ›ï¼Œç»Ÿä¸€ç®¡ç†æ‰€æœ‰çº¿ç¨‹
> - æå‡ç³»ç»Ÿç›¸åº”é€Ÿåº¦ã€‚å¦‚æœåˆ›å»ºçº¿ç¨‹çš„æ—¶é—´ä¸ºT1ï¼Œæ‰§è¡Œä»»åŠ¡çš„æ—¶é—´ä¸ºT2ï¼Œé”€æ¯çº¿ç¨‹çš„æ—¶é—´ä¸ºT3ï¼Œé‚£ä¹ˆä½¿ç”¨çº¿ç¨‹æ± å°±å…å»äº†T1å’ŒT3
> 
> åˆ›å»ºçº¿ç¨‹æ± æœ‰ä¸¤ç§æ–¹å¼ï¼š
> 1. ä½¿ç”¨`Executors`çš„é»˜è®¤æ–¹æ³•
> 2. é€šè¿‡`ThreadPoolExecutor`è¿›è¡Œè‡ªå®šä¹‰
> ä¸æ¨èå‰è€…ï¼Œå› ä¸ºå…¶é…ç½®å†…å®¹å¾ˆå¤šï¼Œè€Œä¸”éƒ½æ˜¯å–Integeræœ€å¤§å€¼ï¼Œå®¹æ˜“é€ æˆå†…å­˜æº¢å‡º
> 
> `ThreadPoolExecutor`è‡ªå®šä¹‰è¯­æ³•å¦‚ä¸‹
> ```java
> ThreadPoolExecutor tpe = new ThreadPoolExecutor(
> 	int corePoolSize,     // æ ¸å¿ƒçº¿ç¨‹æ•°
> 	int maximumPoolSize,  // æœ€å¤§çº¿ç¨‹æ•°
> 	long keepAliveTime,   // éæ ¸å¿ƒçº¿ç¨‹çš„é—²ç½®è¶…æ—¶æ—¶é—´
> 	TimeUnit unit,        // é‡Šæ”¾æ—¶é—´çš„å•ä½ï¼Œå¦‚mï¼ˆåˆ†é’Ÿï¼‰ã€hï¼ˆå°æ—¶ï¼‰ã€dï¼ˆå¤©ï¼‰ç­‰
> 	BlockingQueue<Runnable> workQueue,  // é˜»å¡æ¶ˆæ¯é˜Ÿåˆ—
> 	ThreadFactory threadFactory,        // çº¿ç¨‹å·¥å‚
> 	RejectedExecutionHandler handler    // æ‹’ç»ç­–ç•¥
> )
> ```

> [!summary] ä¸‹é¢å¯¹ä¸Šè¿°çš„7ä¸ªå‚æ•°ä¸­çš„5ä¸ªå…³é”®å‚æ•°è¿›è¡Œè¯¦è§£
> 1. æ ¸å¿ƒçº¿ç¨‹æ•°
> å½“çº¿ç¨‹æ˜¯IOå¯†é›†å‹æ—¶ï¼Œä¸»è¦æ¶ˆè€—ç£ç›˜çš„è¯»å†™æ€§èƒ½ï¼Œè®¾ç½®ä¸º$2*n$ï¼Œnä¸ºå½“å‰æœåŠ¡å™¨æ ¸æ•°ï¼ˆå¦‚8æ ¸16Gçš„æœåŠ¡å™¨è¢«è®¾ç½®ä¸º16ï¼Œç”±`Runtime.getRuntime().availableProcessors()`è¿›è¡Œè·å–
> 2. æœ€å¤§çº¿ç¨‹æ•°
> å½“æ ¸å¿ƒçº¿ç¨‹æ•°å’Œæ¶ˆæ¯é˜Ÿåˆ—éƒ½æ»¡äº†ä¹‹åï¼Œæ‰ä¼šåˆ›å»ºæœ€å¤§çº¿ç¨‹ï¼Œç›´åˆ°è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°ã€‚ä¹‹åçš„çº¿ç¨‹å°±ä¼šæ‰§è¡Œæ‹’ç»ç­–ç•¥
> 3. é˜»å¡æ¶ˆæ¯é˜Ÿåˆ—
> 	- `ArrayBlockingQueue`ï¼šåŸºäºæ•°ç»„çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ã€‚æ­¤é˜Ÿåˆ—åˆ›å»ºæ—¶å¿…é¡»æŒ‡å®šå¤§å°ï¼Œè¯»å†™ç”¨ä¸€æŠŠé”ï¼Œæ€§èƒ½è¾ƒå·®
> 	- `LinkedBlockingQueue`ï¼šåŸºäºé“¾è¡¨çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ã€‚å¦‚æœåˆ›å»ºæ—¶æ²¡æœ‰æŒ‡å®šæ­¤é˜Ÿåˆ—çš„å¤§å°ï¼Œåˆ™é»˜è®¤ä¸º`Integer.MAX_VALUE`ã€‚å†™å’Œè¯»ç”¨ä¸¤æŠŠé”è¿›è¡Œæ“ä½œï¼Œå› æ­¤æ€§èƒ½è¾ƒå¥½
> 	- `synchronousQueue`ï¼šè¿™ä¸ªé˜Ÿåˆ—æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒä¸ä¼šä¿å­˜æäº¤çš„ä»»åŠ¡ï¼Œè€Œæ˜¯ç›´æ¥æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œæ–°çš„ä»»åŠ¡
> éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå½“æ ¸å¿ƒçº¿ç¨‹æ»¡äº†ä¹‹åï¼Œæ–°çº¿ç¨‹ä¼šè¢«å­˜å‚¨åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼›å½“æ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿæ»¡äº†åï¼Œæ‰ä¼šåˆ›å»ºæœ€å¤§çº¿ç¨‹ï¼›ç›´åˆ°è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°ï¼Œä¹‹åçš„çº¿ç¨‹å°±ä¼šæ‰§è¡Œæ‹’ç»ç­–ç•¥
> 4. çº¿ç¨‹å·¥å‚
> åˆ›å»ºçº¿ç¨‹çš„ç±»ï¼Œæ—¢å¯ä»¥ä½¿ç”¨é»˜è®¤å·¥å‚ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰çº¿ç¨‹å·¥å‚å®ç°`ThreadFactory`æ¥å£ï¼Œé‡å†™`newThread()`æ–¹æ³•ã€‚è‡ªå®šä¹‰å·¥å‚çš„ä¼˜åŠ¿åœ¨äºå¯ä»¥è®¾ç½®çº¿ç¨‹åæˆ–è‡ªå®šä¹‰è¾…åŠ©çº¿ç¨‹
> 5. æ‹’ç»ç­–ç•¥
> 	- `ThreadPoolExecutor.AbortPolicy`ï¼šä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡º`RejectedExecutionException`å¼‚å¸¸
> 	- `ThreadPoolExecutor.DiscardPolicy`ï¼šä¸¢å¼ƒä»»åŠ¡ï¼Œä¸æŠ›å‡ºå¼‚å¸¸
> 	- `ThreadPoolExecutor.DiscardOldestPolicy`ï¼šä¸¢å¼ƒé˜Ÿåˆ—æœ€å‰é¢çš„ä»»åŠ¡ï¼Œç„¶åé‡æ–°æäº¤è¢«æ‹’ç»çš„ä»»åŠ¡
> 	- `ThreadPoolExecutorCallerRunsPolicy`ï¼šç”±è°ƒç”¨çº¿ç¨‹ï¼ˆæäº¤ä»»åŠ¡çš„çº¿ç¨‹ï¼‰å¤„ç†è¯¥ä»»åŠ¡
> 
> å½“è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥æ—¶ï¼Œéœ€è¦å®ç°`RejectedExecutionHandler`æ¥å£ï¼Œé‡å†™`rejectedExecution(Runnable r,ThreadPoolExecutor executor)`æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¸­å¯ä»¥é€šè¿‡ç±»å‹è½¬æ¢ç¡®å®šçº¿ç¨‹å…·ä½“ç±»å‹ï¼Œä»è€Œè·å–çº¿ç¨‹çš„ç›¸å…³ä¿¡æ¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªèƒ½è½¬æ¢çº¿ç¨‹æ± ä¸­é€šè¿‡`Runnable`å®ç°çš„çº¿ç¨‹ã€‚å¦‚æœçº¿ç¨‹æ± æ‰§è¡Œçš„çº¿ç¨‹ä¹Ÿæ˜¯é€šè¿‡`Callable`å®ç°çš„ï¼Œåœ¨æ‰§è¡Œå‰ä¼šæŠŠçº¿ç¨‹å°è£…æˆ`FutureTask`ï¼Œè¿™æ ·ç›¸å½“äºè½¬æ¢å†è½¬æ¢ï¼Œå°±æ²¡æ³•è½¬æ¢æˆåŸæ¥çš„å¯¹è±¡äº†ã€‚
> 

> [!tip] æç¤º
> - `execute`åªèƒ½æäº¤`Runnnable`çº¿ç¨‹
> - `submit`å¯ä»¥æäº¤æ‰€æœ‰çš„`Runnable`,`Callable`,`Thread`çº¿ç¨‹

> [!example] ä¸‹é¢å°†æ¼”ç¤ºå¦‚ä½•é€šè¿‡`ThreadPoolExecutor`è‡ªå®šä¹‰ä¸€ä¸ªçº¿ç¨‹æ± 
```java
public class ExecutorTest {  
    /**  
     * ThreadOne æ˜¯ä¸€ä¸ªå®ç°äº† Runnable æ¥å£çš„çº¿ç¨‹ç±»ã€‚  
     * è¯¥çº¿ç¨‹åœ¨æ‰§è¡Œæ—¶ä¼šæ‰“å°å½“å‰çº¿ç¨‹åç§°å’Œä¼ å…¥çš„æ•°å­—ï¼Œå¹¶ä¼‘çœ 1ç§’ã€‚  
     */  
    public static class ThreadOne implements Runnable{  
        private Integer number;  
  
        /**  
         * æ„é€ æ–¹æ³•ï¼Œåˆå§‹åŒ–çº¿ç¨‹éœ€è¦å¤„ç†çš„æ•°å­—ã€‚  
         *  
         * @param tmp è¦åœ¨çº¿ç¨‹ä¸­ä½¿ç”¨çš„æ•´æ•°å‚æ•°  
         */  
        public ThreadOne(Integer tmp){  
            this.number = tmp;  
        }  
        /**  
         * å®ç° Runnable æ¥å£çš„ run æ–¹æ³•ï¼Œåœ¨çº¿ç¨‹å¯åŠ¨åä¼šè¢«è°ƒç”¨ã€‚  
         * æ‰“å°å½“å‰çº¿ç¨‹åä¸ç¼–å·ï¼Œå¹¶æ¨¡æ‹Ÿè€—æ—¶æ“ä½œã€‚  
         */  
        @Override  
        public void run() {  
            System.out.println(Thread.currentThread().getName() + ":ThreadOne--" + number);  
            try {  
                Thread.sleep(1000);  
            } catch (InterruptedException e) {  
                e.printStackTrace();  
            }
        }
    }  
    /**  
     * ThreadTwo æ˜¯ç»§æ‰¿è‡ª Thread çš„çº¿ç¨‹ç±»ã€‚  
     * å½“å‰æœªå®ç°å…·ä½“é€»è¾‘ï¼Œä»…ä½œä¸ºç¤ºä¾‹å±•ç¤ºå¦ä¸€ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ã€‚  
     */  
    public static  class ThreadTwo extends Thread{  
        /**  
         * é‡å†™ Thread ç±»çš„ run æ–¹æ³•ï¼Œç›®å‰ä¸ºç©ºå®ç°ã€‚  
         */  
        @Override  
        public void run() {  
  
        }
    }  
    /**  
     * ThreadThree æ˜¯ä¸€ä¸ªå®ç°äº† Callable æ¥å£çš„çº¿ç¨‹ç±»ã€‚  
     * å¯ä»¥è¿”å›ç»“æœå¹¶æŠ›å‡ºå¼‚å¸¸ï¼Œé€‚ç”¨äºæœ‰è¿”å›å€¼çš„ä»»åŠ¡åœºæ™¯ã€‚  
     */  
    public static class ThreadThree implements Callable<Integer> {  
        Integer number;  
  
        /**  
         * æ„é€ æ–¹æ³•ï¼Œåˆå§‹åŒ–çº¿ç¨‹éœ€è¦å¤„ç†çš„æ•°å­—ã€‚  
         *  
         * @param tmp è¦åœ¨çº¿ç¨‹ä¸­ä½¿ç”¨çš„æ•´æ•°å‚æ•°  
         */  
        public ThreadThree(Integer tmp){  
            this.number = tmp;  
        }  
        /**  
         * å®ç° Callable æ¥å£çš„ call æ–¹æ³•ï¼Œå¯è¿”å›æ‰§è¡Œç»“æœã€‚  
         * åœ¨æ­¤æ–¹æ³•ä¸­æ‰“å°çº¿ç¨‹ä¿¡æ¯å¹¶ç­‰å¾…3ç§’åè¿”å›è¾“å…¥çš„æ•°å€¼ã€‚  
         *  
         * @return è¿”å›æ„é€ æ—¶ä¼ å…¥çš„æ•´æ•°å€¼  
         * @throws Exception å¦‚æœçº¿ç¨‹ä¸­æ–­æˆ–å…¶ä»–é”™è¯¯å‘ç”Ÿåˆ™æŠ›å‡ºå¼‚å¸¸  
         */  
        @Override  
        public Integer call() throws Exception {  
            System.out.println(Thread.currentThread().getName() + ":ThreadThree--" + number);  
            Thread.sleep(3000);  
            return number;  
        }
    }  
    /**  
     * Factory æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„çº¿ç¨‹å·¥å‚ç±»ï¼Œç”¨äºåˆ›å»ºå…·æœ‰ç‰¹å®šå‘½åè§„åˆ™çš„æ–°çº¿ç¨‹ã€‚  
     * æ¯ä¸ªæ–°çº¿ç¨‹éƒ½ä¼šè¢«èµ‹äºˆå”¯ä¸€çš„é€’å¢ç¼–å·ã€‚  
     */  
    public static class Factory implements ThreadFactory{  
        private AtomicInteger count = new AtomicInteger(0);  
  
        /**  
         * æ ¹æ®ç»™å®šçš„ Runnable å¯¹è±¡åˆ›å»ºæ–°çš„çº¿ç¨‹å®ä¾‹ã€‚  
         * æ–°çº¿ç¨‹å°†æŒ‰ç…§â€œFactory--ç¼–å·â€çš„æ ¼å¼è¿›è¡Œå‘½åã€‚  
         *  
         * @param r å°†ç”±æ–°çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡å¯¹è±¡  
         * @return åˆ›å»ºå¥½çš„æ–°çº¿ç¨‹å¯¹è±¡  
         */  
        @Override  
        public Thread newThread(Runnable r) {  
            Thread thd = new Thread(r);  
            String threadName = "Factory--" + count.addAndGet(1);  
            thd.setName(threadName);  
            System.out.println("çº¿ç¨‹" + threadName + "åˆ›å»ºæˆåŠŸ");  
            return thd;  
        }
    }  
    /**  
     * Handler æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„æ‹’ç»ç­–ç•¥å¤„ç†å™¨ã€‚  
     * å½“çº¿ç¨‹æ± æ— æ³•æ¥å—æ›´å¤šä»»åŠ¡æ—¶ï¼Œå°†ä¼šè°ƒç”¨æ­¤å¤„ç†å™¨æ¥å¤„ç†è¢«æ‹’ç»çš„ä»»åŠ¡ã€‚  
     */  
    public static class Handler implements RejectedExecutionHandler{  
        /**  
         * å¤„ç†å› çº¿ç¨‹æ± å·²æ»¡è€Œè¢«æ‹’ç»æ‰§è¡Œçš„ä»»åŠ¡ã€‚  
         * è¾“å‡ºæç¤ºä¿¡æ¯è¡¨æ˜å“ªä¸ªä»»åŠ¡è¢«æ‹’ç»äº†ã€‚  
         *  
         * @param r è¢«æ‹’ç»æ‰§è¡Œçš„ä»»åŠ¡  
         * @param executor æäº¤ä»»åŠ¡çš„ç›®æ ‡çº¿ç¨‹æ±   
         */  
        @Override  
        public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {  
            ThreadOne thdOne = (ThreadOne)r;  
            System.out.println("çº¿ç¨‹" + thdOne.number + "è¢«é˜»å¡");  
        }
    }  
    /**  
     * main æ–¹æ³•æ˜¯ç¨‹åºå…¥å£ç‚¹ï¼Œæ¼”ç¤ºå¦‚ä½•é…ç½®å’Œä½¿ç”¨ä¸€ä¸ªå¸¦æœ‰è‡ªå®šä¹‰å‚æ•°çš„çº¿ç¨‹æ± ã€‚  
     * å‘çº¿ç¨‹æ± æäº¤å¤šä¸ªä»»åŠ¡ï¼Œå¹¶ç¡®ä¿æœ€ç»ˆå…³é—­çº¿ç¨‹æ± èµ„æºã€‚  
     */  
    static void main() {  
        // åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çº¿ç¨‹æ± ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°3ï¼Œæœ€å¤§çº¿ç¨‹æ•°10ï¼Œç©ºé—²æ—¶é—´10ç§’ï¼Œé˜Ÿåˆ—å®¹é‡5  
        ExecutorService es = new ThreadPoolExecutor(  
                3,10,10,TimeUnit.SECONDS,  
                new LinkedBlockingQueue<Runnable>(5),  
                new Factory(),  
                new Handler()  
        );  
        try {  
            // æäº¤11ä¸ªä»»åŠ¡åˆ°çº¿ç¨‹æ± æ‰§è¡Œ  
            for (int i = 0; i <= 30; i++) {  
                es.execute(new ThreadOne(i));  
            }
        }
        finally {  
            // å…³é—­çº¿ç¨‹æ± ï¼Œä¸å†æ¥æ”¶æ–°ä»»åŠ¡ï¼Œä½†ä¼šç»§ç»­æ‰§è¡Œå®Œå·²æœ‰ä»»åŠ¡  
            es.shutdown();  
        }
    }
}
```
è¿è¡Œç»“æœï¼ˆä¸å”¯ä¸€ï¼‰
```text
çº¿ç¨‹Factory--1åˆ›å»ºæˆåŠŸ
çº¿ç¨‹Factory--2åˆ›å»ºæˆåŠŸ
çº¿ç¨‹Factory--3åˆ›å»ºæˆåŠŸ
çº¿ç¨‹Factory--4åˆ›å»ºæˆåŠŸ
çº¿ç¨‹Factory--5åˆ›å»ºæˆåŠŸ
çº¿ç¨‹Factory--6åˆ›å»ºæˆåŠŸ
çº¿ç¨‹Factory--7åˆ›å»ºæˆåŠŸ
çº¿ç¨‹Factory--8åˆ›å»ºæˆåŠŸ
çº¿ç¨‹Factory--9åˆ›å»ºæˆåŠŸ
çº¿ç¨‹Factory--10åˆ›å»ºæˆåŠŸ
çº¿ç¨‹15è¢«é˜»å¡
çº¿ç¨‹16è¢«é˜»å¡
çº¿ç¨‹17è¢«é˜»å¡
çº¿ç¨‹18è¢«é˜»å¡
çº¿ç¨‹19è¢«é˜»å¡
çº¿ç¨‹20è¢«é˜»å¡
çº¿ç¨‹21è¢«é˜»å¡
çº¿ç¨‹22è¢«é˜»å¡
çº¿ç¨‹23è¢«é˜»å¡
çº¿ç¨‹24è¢«é˜»å¡
çº¿ç¨‹25è¢«é˜»å¡
çº¿ç¨‹26è¢«é˜»å¡
çº¿ç¨‹27è¢«é˜»å¡
çº¿ç¨‹28è¢«é˜»å¡
çº¿ç¨‹29è¢«é˜»å¡
çº¿ç¨‹30è¢«é˜»å¡
Factory--8:ThreadOne--12
Factory--4:ThreadOne--8
Factory--7:ThreadOne--11
Factory--6:ThreadOne--10
Factory--5:ThreadOne--9
Factory--2:ThreadOne--1
Factory--9:ThreadOne--13
Factory--3:ThreadOne--2
Factory--10:ThreadOne--14
Factory--1:ThreadOne--0
Factory--2:ThreadOne--3
Factory--4:ThreadOne--4
Factory--8:ThreadOne--5
Factory--3:ThreadOne--7
Factory--9:ThreadOne--6
```

> [!summary] çº¿ç¨‹æ± çš„è®¾è®¡æ€è·¯ä»¥åŠä¸åŒæäº¤æ–¹æ³•çš„æƒè¡¡
> 1. çº¿ç¨‹æ± çš„æœ€ä½³å®è·µæ–¹æ¡ˆï¼š
> 	1. æ ¸å¿ƒå‚æ•°é…ç½®
> 		- **æ ¸å¿ƒçº¿ç¨‹æ•°**
> 			- æ¨èï¼šé€šå¸¸è®¾ç½®ä¸ºCPUæ ¸å¿ƒæ•°çš„ä¸¤å€
> 			- è®¡ç®—æ–¹å¼ï¼š`Runtime.getRuntime.availableProcessors()`è·å–CPUæ ¸å¿ƒæ•°
> 			- ä½œç”¨ï¼šä¿æŒæœ€å°çº¿ç¨‹æ•°ï¼Œé¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹
> 		- **æœ€å¤§çº¿ç¨‹æ•°**
> 			- æ¨èå€¼ï¼šæ ¸å¿ƒçº¿ç¨‹æ•° + 5
> 			- ä½œç”¨ï¼šå½“ä»»åŠ¡é˜Ÿåˆ—æ»¡æ—¶ï¼ŒåŠ¨æ€æ‰©å±•å¸çº³æˆç†Ÿï¼Œä½†æ˜¯*éœ€è¦é¿å…è¿‡åº¦æ¶ˆè€—èµ„æº*
> 		- **ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´**
> 			- æ¨èå€¼ï¼šéæ ¸å¿ƒçº¿ç¨‹çš„ç©ºé—²æ—¶é—´è®¾ç½®ä¸º10sï¼ˆæ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´ï¼‰
> 			- ä½œç”¨ï¼š è¶…æ—¶åå›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œé‡Šæ”¾èµ„æº
> 		- **ä»»åŠ¡é˜Ÿåˆ—**
> 			- é€‰æ‹©ä¾æ®ï¼š
> 				- `ArrayBlockingQueue`ï¼šä»»åŠ¡é‡å¯æ§ï¼ŒåŸºäºæ•°ç»„çš„æœ‰ç•Œé˜Ÿåˆ—ï¼Œæ€§èƒ½è¾ƒä½
> 				- `LinkedBlockingQueue`ï¼šä»»åŠ¡é‡ä¸ç¡®å®šï¼Œæ— ç•Œé˜Ÿåˆ—ï¼ˆé»˜è®¤å®¹é‡ä¸º`Integer.MAX_VALUE`ï¼šæ€§èƒ½è¾ƒå¥½
> 				- `SynchronousQueue`ï¼šä»»åŠ¡éœ€è¦ç«‹å³æ‰§è¡Œï¼Œä¸ä¿å­˜ä»»åŠ¡ï¼Œç›´æ¥æäº¤ç»™çº¿ç¨‹æ‰§è¡Œï¼Œ***é€‚åˆé«˜å¹¶å‘åœºæ™¯***
> 			- å»ºè®®ï¼šæ ¹æ®ä»»åŠ¡ç±»å‹é€‰æ‹©é˜Ÿåˆ—ï¼Œé¿å…*æ— ç•Œé˜Ÿåˆ—å¯¼è‡´å†…å­˜æº¢å‡º*ã€‚
> 		- **æ‹’ç»ç­–ç•¥**
> 			- å¸¸ç”¨ç­–ç•¥ï¼š
> 				- `AbortPolicy`ï¼šæ‹’ç»ä»»åŠ¡å¹¶æŠ›å‡ºå¼‚å¸¸ï¼Œä»»åŠ¡éœ€è¦ç«‹å³å¤„ç†
> 				- `DiscardPolicy`ï¼šæ‹’ç»ä»»åŠ¡ä¸”ä¸æŠ›å‡ºå¼‚å¸¸ï¼Œä»»åŠ¡å¯ä¸¢å¼ƒ
> 				- `DiscardOldestPolicy`ï¼šä¸¢å¼ƒé˜Ÿåˆ—æœ€æ—§çš„ä»»åŠ¡ï¼Œä»»åŠ¡éœ€ä¼˜å…ˆå¤„ç†æ–°ä»»åŠ¡
> 				- `CallerRunsPolicy`ï¼šç”±è°ƒç”¨çº¿ç¨‹å¤„ç†ä»»åŠ¡ï¼Œå¹³è¡¡è´Ÿè½½
> 			- å»ºè®®ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©ç­–ç•¥ï¼Œé¿å…é»˜è®¤çš„`AbortPolicy`å¯¼è‡´ç¨‹åºå´©æºƒã€‚
> 	2. åˆ›å»ºæ–¹å¼
> 		- **æ¨èæ–¹å¼**ï¼šä½¿ç”¨`ThreadPoolExecutor`è‡ªå®šä¹‰é…ç½®ï¼Œè€Œé`Executors`é»˜è®¤æ–¹æ³•ã€‚
> 			- åŸå› ï¼š`Executors`çš„é»˜è®¤é…ç½®ï¼ˆå¦‚`newFixedThreadPool`ï¼‰å¯èƒ½å¯¼è‡´èµ„æºè€—å°½ï¼ˆå¦‚`LinkedBlockingQueue`çš„æ— ç•Œé˜Ÿåˆ—ï¼‰ã€‚
> 		- **çº¿ç¨‹å·¥å‚**
> 			- è‡ªå®šä¹‰éœ€æ±‚ï¼š
> 				- è®¾ç½®çº¿ç¨‹åç§°ï¼Œä¾¿äºæ’æŸ¥é—®é¢˜
> 				- ä¸ºçº¿ç¨‹åˆ†é…ç‰¹å®šçš„ä¼˜å…ˆçº§æˆ–å‚æ•°
> 	3. ä½¿ç”¨è§„èŒƒ
> 		- **é¿å…èµ„æºç«äº‰**
> 			- ä½¿ç”¨`ReentrantLock`æˆ–`synchronized`ç¡®ä¿å…±äº«èµ„æºçš„çº¿ç¨‹å®‰å…¨
> 		- **åˆç†è®¾ç½®é˜Ÿåˆ—å®¹é‡**
> 			- ä»»åŠ¡é‡é¢„æµ‹ï¼šæ ¹æ®ç³»ç»Ÿè´Ÿè½½å’Œä»»åŠ¡æ‰§è¡Œæ—¶é—´ï¼Œè®¾ç½®é˜Ÿåˆ—å®¹é‡ï¼ˆå¦‚`LinkedBlockingQueue`å®¹é‡ä¸º1000ï¼‰
> 			- é¿å…æ— ç•Œé˜Ÿåˆ—ï¼šé˜²æ­¢å†…å­˜æº¢å‡ºï¼Œå°¤å…¶æ˜¯åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹
> 		- **ç›‘æ§çº¿ç¨‹æ± çŠ¶æ€**
> 			- å…³é”®æŒ‡æ ‡
> 				- `getQueue().size()`ï¼šå½“å‰ä»»åŠ¡é˜Ÿåˆ—é•¿åº¦
> 				- `getActiveCount()`ï¼šæ´»è·ƒçº¿ç¨‹æ•°
> 				- `getLargestPoolSize()`ï¼šå³°å€¼çº¿ç¨‹æ•°
> 			- å»ºè®®ï¼šé€šè¿‡`ThreadPoolExecutor`çš„`getTaskCount()`ã€`getCompletedTaskCount()`ç›‘æ§ä»»åŠ¡æ‰§è¡Œæƒ…å†µã€‚
> 		- **å…³é—­çº¿ç¨‹æ± **
> 			- æ­£ç¡®æ–¹å¼ï¼š
> 				- `es.shutdown();` å…³é—­çº¿ç¨‹æ± ï¼Œä¸å†æ¥å—æ–°ä»»åŠ¡
> 				- `es.awaitTermination(timeout,unit);`  ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ
> 				- `es.shutdownNow();`  å¼ºåˆ¶å…³é—­ï¼Œä¸­æ–­æ‰€æœ‰ä»»åŠ¡
> 			- æ³¨æ„é¿å…åœ¨ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ç›´æ¥è°ƒç”¨`close()`ï¼Œéœ€è¦é€šè¿‡`shutdown()`ç®¡ç†
> 	4. å…¸å‹åœºæ™¯
> 		- **IOå¯†é›†å‹ä»»åŠ¡**
> 			- çº¿ç¨‹æ± é…ç½®ï¼š`corePoolSize = 2 * æ ¸å¿ƒçº¿ç¨‹æ•°`
> 			- è¯´æ˜ï¼šä¿æŒçº¿ç¨‹å¸¸é©»ï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢
> 		- **CPUå¯†é›†å‹ä»»åŠ¡**
> 			- çº¿ç¨‹æ± é…ç½®ï¼š`corePoolSize = CPUæ ¸å¿ƒæ•°`
> 			- è¯´æ˜ï¼šé¿å…çº¿ç¨‹ç«äº‰CPUèµ„æº
> 		- **é«˜å¹¶å‘çŸ­ä»»åŠ¡**
> 			- çº¿ç¨‹æ± é…ç½®ï¼š`maximumPoolSize = CPUæ ¸å¿ƒæ•° + 5`
> 			- è¯´æ˜ï¼šåŠ¨æ€æ‰©å±•çº¿ç¨‹æ•°ï¼Œå¿«é€Ÿå“åº”
> 		- **ä»»åŠ¡éœ€è¦è¿”å›ç»“æœ**
> 			- çº¿ç¨‹æ± é…ç½®ï¼šä½¿ç”¨`submit() + Future`
> 			- è¯´æ˜ï¼šé€šè¿‡`get()`è·å–ç»“æœï¼Œéœ€è¦å¤„ç†é˜»å¡
> 		- **ä»»åŠ¡éœ€è¦ä¼˜å…ˆçº§æ§åˆ¶**
> 			- çº¿ç¨‹æ± é…ç½®ï¼šè‡ªå®šä¹‰çº¿ç¨‹å·¥å‚
> 			- è¯´æ˜ï¼šä¸ºçº¿ç¨‹åˆ†é…ä¼˜å…ˆçº§ï¼ˆå¦‚`setPriority(Thread.MAX_PRIORITY)`)
> 	5. å¸¸è§é™·é˜±
> 		- **æ‹’ç»ç­–ç•¥è¯¯ç”¨**ï¼šè‹¥ä»»åŠ¡é‡è¶…è¿‡çº¿ç¨‹æ± çš„å¤„ç†èƒ½åŠ›ï¼Œéœ€è¦é€‰æ‹©åˆé€‚çš„æ‹’ç»ç­–ç•¥
> 		- **çº¿ç¨‹æ³„æ¼**ï¼šç¡®ä¿ä»»åŠ¡ä¸­é‡Šæ”¾èµ„æºï¼ˆå¦‚æ•°æ®åº“è¿æ¥ï¼Œç½‘ç»œè¯·æ±‚ï¼‰ï¼Œé¿å…çº¿ç¨‹é˜»å¡
> 		- **ä»»åŠ¡å †ç§¯**ï¼šç›‘æ§é˜Ÿåˆ—é•¿åº¦ï¼Œè‹¥æŒç»­å¢é•¿éœ€è¦è°ƒæ•´æ ¸å¿ƒçº¿ç¨‹æ•°æˆ–è€…é˜Ÿåˆ—å®¹é‡
> 		- **çº¿ç¨‹æ± å¤ç”¨**ï¼šé€šè¿‡`ThreadPoolExecutor`çš„`prestartCoreThread()`æå‰å¯åŠ¨æ ¸å¿ƒçº¿ç¨‹ï¼Œå‡å°‘å»¶è¿Ÿã€‚
> 	6. è¿›é˜¶ä¼˜åŒ–
> 		- **åŠ¨æ€è°ƒæ•´å‚æ•°**ï¼šæ ¹æ®ç³»ç»Ÿè´Ÿè½½å®æ—¶è°ƒæ•´çº¿ç¨‹æ± å‚æ•°ï¼ˆå¦‚`setCorePoolSize`)
> 		- **åˆ†å‰²çº¿ç¨‹æ± **ï¼š
> 			- æ ¸å¿ƒæ± ï¼šå¤„ç†å¸¸è§„ä»»åŠ¡ï¼ˆå¦‚`corePoolSize = 5`ï¼‰
> 			- æ‰©å±•æ± ï¼šå¤„ç†çªå‘ä»»åŠ¡ï¼ˆå¦‚`maximumPoolSize = 20`)
> 		- **ç»“åˆç›‘æ§å·¥å…·**
> 2. `execute`å’Œ`submit`æ–¹æ³•çš„æƒè¡¡
> 	1. executeæ–¹æ³•
> 		- ä¼˜åŠ¿
> 			- ç®€å•ç›´æ¥ï¼šç›´æ¥æ‰§è¡Œ Runnable ä»»åŠ¡ï¼Œæ— éœ€è¿”å›å€¼
> 			- ä½å¼€é”€ï¼šä¸æ¶‰åŠ Future å°è£…ï¼Œæ‰§è¡Œæ•ˆç‡æ›´é«˜
> 			- é€‚åˆåœºæ™¯ï¼šæ—¥å¿—è®°å½•ã€æ•°æ®æ¸…æ´—ç­‰æ— è¿”å›å€¼çš„åå°ä»»åŠ¡
> 		- åŠ£åŠ¿
> 			- æ— è¿”å›å€¼ï¼šæ— æ³•è·å–ä»»åŠ¡æ‰§è¡Œç»“æœ
> 			- å¼‚å¸¸å¤„ç†å›°éš¾ï¼šå¼‚å¸¸åªèƒ½åœ¨ä»»åŠ¡å†…éƒ¨å¤„ç†ï¼Œéš¾ä»¥ç»Ÿä¸€æ•è·
> 	2. submitæ–¹æ³•
> 		- ä¼˜åŠ¿
> 			- æ”¯æŒè¿”å›å€¼ï¼šå¯ä»¥é€šè¿‡ Future è·å–ä»»åŠ¡çš„æ‰§è¡Œç»“æœ
> 			- æ›´å¥½çš„å¼‚å¸¸å¤„ç†ï¼šå¯åœ¨ä¸»çº¿ç¨‹ä¸­ç»Ÿä¸€å¤„ç†ä»»åŠ¡å¼‚å¸¸
> 			- æ”¯æŒRunnableå’ŒCallableä¸¤ç§ä»»åŠ¡
> 		- åŠ£åŠ¿
> 			- é¢å¤–å¼€é”€ï¼šéœ€è¦åˆ›å»º Future å¯¹è±¡å°è£…ä»»åŠ¡
> 			- å¤æ‚åº¦é«˜ï¼šéœ€è¦è€ƒè™‘Futureçš„ç®¡ç†å’Œå¼‚å¸¸å¤„ç†


---

## 3.13 ç½‘ç»œé€šä¿¡
### ç½‘ç»œåŸºç¡€
#### å±€åŸŸç½‘ä¸äº’è”ç½‘
> [!note] æ¦‚è¿°
> ä¸ºäº†å®ç°ä¸¤å°è®¡ç®—æœºçš„é€šä¿¡ï¼Œå¿…é¡»ä½¿ç”¨ä¸€ä¸ªç½‘ç»œçº¿è·¯è¿æ¥ä¸¤å°è®¡ç®—æœºï¼Œå¦‚ä¸‹å›¾
> ```mermaid
> graph LR
> A[æœåŠ¡å™¨] --> B[ç½‘ç»œ]
>
>B --> C[å®¢æˆ·æœº]
>
>C --> B
>
>B --> A
> ```
> æœåŠ¡å™¨æ˜¯æŒ‡*æä¾›ä¿¡æ¯çš„è®¡ç®—æœºæˆ–ç¨‹åº*ï¼Œå®¢æˆ·æœºæ˜¯æŒ‡è¯·æ±‚ä¿¡æ¯çš„è®¡ç®—æœºæˆ–ç¨‹åºã€‚ç½‘ç»œè´Ÿè´£è¿æ¥æœåŠ¡å™¨å’Œå®¢æˆ·æœºï¼Œå®ç°äºŒè€…ä¹‹é—´çš„ç›¸äº’é€šä¿¡ã€‚ä½†æ˜¯ï¼Œæœ‰çš„æ—¶å€™åœ¨æŸä¸ªç½‘ç»œä¸­å¾ˆéš¾å°†æœåŠ¡å™¨å’Œå®¢æˆ·æœºåŒºåˆ†å¼€ã€‚æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„å±€åŸŸç½‘ï¼ˆ*L*ocal *A*rea *N*etworkï¼ŒLANï¼‰å°±æ˜¯ä¸€ç¾¤é€šè¿‡ä¸€å®šå½¢å¼è¿æ¥èµ·æ¥çš„è®¡ç®—æœºï¼Œå®ƒå¯ä»¥æœ‰ä¸¤å°è®¡ç®—æœºç»„æˆï¼Œä¹Ÿå¯ä»¥ç”±åŒä¸€åŒºåŸŸå†…çš„è‹¥å¹²å°è®¡ç®—æœºç»„æˆã€‚å°†LANå»¶ä¼¸åˆ°æ›´å¤§çš„èŒƒå›´ï¼Œè¿™æ ·çš„ç½‘ç»œæˆä¸ºå¹¿åŸŸç½‘ï¼ˆ*W*ide *A*rea *N*etworkï¼ŒWANï¼‰ã€‚æˆ‘ä»¬ç†Ÿæ‚‰çš„äº’è”ç½‘ï¼Œå°±æ˜¯ç”±æ— æ•°çš„LANå’ŒWANç»„æˆçš„ã€‚

#### ç½‘ç»œåè®®
##### IPåè®®
> [!note] æ¦‚è¿°
> IPåè®®æ˜¯ç½‘ç»œé€šä¿¡ä¸­çš„æ ¸å¿ƒåè®®ï¼Œè´Ÿè´£å°†æ•°æ®åŒ…ä»æºåœ°å€ä¼ è¾“åˆ°ç›®æ ‡åœ°å€ã€‚å®ƒå®šä¹‰äº†æ•°æ®åŒ…çš„æ ¼å¼å’Œå¯»å€è§„åˆ™ï¼Œç¡®ä¿æ•°æ®èƒ½å¤Ÿé€šè¿‡ç½‘ç»œè¿›è¡Œè·¯ç”±å’Œä¼ è¾“ã€‚IPåè®®æ˜¯æ— è¿æ¥çš„ï¼Œå³æ•°æ®ä¼ è¾“å‰ä¸éœ€è¦å»ºç«‹è¿æ¥ï¼Œä½†å…¶æœ¬èº«ä¸ä¿è¯æ•°æ®çš„å¯é æ€§å’Œé¡ºåºæ€§ã€‚
> åœ¨Internetä¸Šæœ‰æ•°ä»¥äº¿è®¡çš„ä¸»æœºï¼Œæ¯å°ä¸»æœºéƒ½ç”¨ç½‘ç»œä¸ºå…¶åˆ†é…çš„Internetåœ°å€ä»£è¡¨è‡ªå·±ï¼Œè¿™ä¸ªåœ°å€å°±æ˜¯IPåœ°å€ã€‚ç›®å‰å¸¸ç”¨çš„åœ°å€æœ‰ï¼š
> - IPv4ï¼šIPv4åœ°å€ç”±32ä½ç»„æˆï¼ˆå¦‚192.168.1.1ï¼‰
> - IPv6ï¼šIPv6åœ°å€ç”±128ä½ç»„æˆï¼ˆå¦‚2001:db8::1ï¼‰
> 
> Internetç½‘ç»œé‡‡ç”¨çš„åè®®æ˜¯**TCP/IPåè®®**ï¼ŒTCP/IPæ¨¡å¼æ˜¯ä¸€ç§å±‚æ¬¡ç»“æ„ï¼Œå…±åˆ†ä¸ºå››å±‚ï¼Œåˆ†åˆ«ä¸ºåº”ç”¨å±‚ï¼Œä¼ è¾“å±‚ï¼Œäº’è”ç½‘å±‚ï¼Œç½‘ç»œå±‚ã€‚å„å±‚å®ç°ç‰¹å®šçš„åŠŸèƒ½ï¼Œæä¾›ç‰¹å®šçš„æœåŠ¡å’Œè®¿é—®æ¥å£ï¼Œå¹¶å…·æœ‰ç›¸å¯¹çš„ç‹¬ç«‹æ€§ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º
> 
> ```mermaid
>graph TD
>
>Â  Â  subgraph å‘é€æ–¹
>
>Â  Â  Â  Â  A[åº”ç”¨å±‚æ•°æ®] -->|æ·»åŠ TCP/UDPå¤´éƒ¨| T[ä¼ è¾“å±‚ï¼š å½¢æˆæ•°æ®æ®µ]
>
>Â  Â  Â  Â  T -->|æ·»åŠ IPå¤´éƒ¨| I[ç½‘ç»œå±‚ï¼š å½¢æˆæ•°æ®åŒ…]
>
>Â  Â  Â  Â  I -->|æ·»åŠ å¸§å¤´å¸§å°¾| N[ç½‘ç»œæ¥å£å±‚ï¼š å½¢æˆå¸§]
>
>Â  Â  Â  Â  N -->|è½¬æ¢ä¸ºæ¯”ç‰¹æµ| P[ç‰©ç†ç½‘ç»œä¼ è¾“]
>
>Â  Â  end
>
>  
>
>Â  Â  P --> P2[ç‰©ç†ç½‘ç»œä¼ è¾“]
>
>  
>
>Â  Â  subgraph æ¥æ”¶æ–¹
>
>Â  Â  Â  Â  P2 -->|è½¬æ¢æ¯”ç‰¹æµ| N2[ç½‘ç»œæ¥å£å±‚ï¼š æ‹†è§£å¸§]
>
>Â  Â  Â  Â  N2 -->|ç§»é™¤å¸§å¤´å¸§å°¾| I2[ç½‘ç»œå±‚ï¼š æ‹†è§£IPå¤´éƒ¨]
>
>Â  Â  Â  Â  I2 -->|ç§»é™¤IPå¤´éƒ¨| T2[ä¼ è¾“å±‚ï¼š æ‹†è§£TCP/UDPå¤´éƒ¨]
>
>Â  Â  Â  Â  T2 -->|é‡ç»„æ•°æ®| A2[åº”ç”¨å±‚ï¼š è·å¾—åŸå§‹æ•°æ®]
>
>Â  Â  end
>
>  
>
>Â  Â  style A fill:#cde4ff,stroke:#333,stroke-width:2px
>
>Â  Â  style T fill:#b4f0b4,stroke:#333,stroke-width:2px
>
>Â  Â  style I fill:#fff0b3,stroke:#333,stroke-width:2px
>
>Â  Â  style N fill:#ffd1b3,stroke:#333,stroke-width:2px
>
>Â  Â  style A2 fill:#cde4ff,stroke:#333,stroke-width:2px
>
>Â  Â  style T2 fill:#b4f0b4,stroke:#333,stroke-width:2px
>
>Â  Â  style I2 fill:#fff0b3,stroke:#333,stroke-width:2px
>
>Â  Â  style N2 fill:#ffd1b3,stroke:#333,stroke-width:2px
>```

##### TCPä¸UDPåè®®
> [!note] æ¦‚è¿°
> TCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰å’ŒUDPï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰æ˜¯åŸºäºIPåè®®çš„ä¼ è¾“å±‚åè®®ï¼Œå®ƒä»¬åœ¨æ•°æ®ä¼ è¾“æ–¹å¼ä¸Šæœ‰æ˜¾è‘—å·®å¼‚ï¼š
> - **TCP**Â æ˜¯*é¢å‘è¿æ¥*çš„åè®®ï¼Œé€šä¿¡å‰éœ€è¦*å…ˆå»ºç«‹è¿æ¥*ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰ï¼Œæ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ä¼šè¿›è¡Œæµé‡æ§åˆ¶å’Œé”™è¯¯æ£€æŸ¥ï¼Œç¡®ä¿æ•°æ®å¯é ã€æœ‰åºã€æ— å·®é”™åœ°åˆ°è¾¾ç›®æ ‡ã€‚**é€‚åˆéœ€è¦é«˜å¯é æ€§çš„åœºæ™¯**ï¼Œå¦‚æ–‡ä»¶ä¼ è¾“ã€ç½‘é¡µæµè§ˆç­‰ã€‚
> - **UDP**Â æ˜¯*æ— è¿æ¥*çš„åè®®ï¼Œæ•°æ®ä»¥æ•°æ®æŠ¥å½¢å¼å‘é€ï¼Œä¸ä¿è¯å¯é æ€§ï¼Œä½†ä¼ è¾“æ•ˆç‡æ›´é«˜ï¼Œ**é€‚åˆå®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯**ï¼Œå¦‚åœ¨çº¿æ¸¸æˆã€è§†é¢‘æµåª’ä½“ç­‰ã€‚

#### ç«¯å£ä¸å¥—æ¥å­—
> [!note] åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œ**ç«¯å£**å’Œ**å¥—æ¥å­—**æ˜¯å®ç°é€šä¿¡çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå®ƒä»¬å…±åŒæ„æˆäº†ç½‘ç»œæ•°æ®ä¼ è¾“çš„â€œåœ°å€â€å’Œâ€œé€šé“â€æœºåˆ¶ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„è¯¦ç»†è¯´æ˜ï¼š
> - ç«¯å£ï¼šä¸€èˆ¬è€Œè¨€ï¼Œä¸€å°è®¡ç®—æœºåªæœ‰å•ä¸€çš„è¿åˆ°ç½‘ç»œçš„ç‰©ç†è¿æ¥ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½é€šè¿‡æ­¤è¿æ¥å¯¹å†…ã€å¤–é€è¾¾ç‰¹å®šçš„è®¡ç®—æœºï¼Œè¿™å°±æ˜¯ç«¯å£ã€‚ è€Œç½‘ç»œç¨‹åºè®¾è®¡ä¸­çš„ç«¯å£å¹¶éçœŸå®çš„ç‰©ç†å­˜åœ¨ï¼Œè€Œæ˜¯ä¸€ä¸ªå‡æƒ³çš„è¿æ¥è£…ç½®ã€‚ç«¯å£è¢«è§„å®šä¸ºä¸€ä¸ªä»0~65535çš„æ•´æ•°ã€‚HTTPæœåŠ¡ä¸€èˆ¬ä½¿ç”¨80ç«¯å£ï¼ŒFTPæœåŠ¡ä¸€èˆ¬ä½¿ç”¨21ç«¯å£ã€‚å¦‚æœä¸€å°è®¡ç®—æœºæä¾›äº†HTTPï¼ŒFTPç­‰å¤šç§æœåŠ¡ï¼Œé‚£ä¹ˆå®¢æˆ·æœºä¼šé€šè¿‡ä¸åŒçš„ç«¯å£æ¥ç¡®å®šè¿æ¥åˆ°æœåŠ¡å™¨çš„å“ªä¸€é¡¹æœåŠ¡ä¸Šã€‚
>```mermaid
>graph LR
>A[å®¢æˆ·æœº1] <--> B[80ç«¯å£]
>B <--> C
>D[å®¢æˆ·æœº2] <--> E[21ç«¯å£]
>E <--> F
>	subgraph æœåŠ¡å™¨
>		C[HTTPæœåŠ¡å™¨]
>		F[FTPæœåŠ¡å™¨]
>	end
>```
> - å¥—æ¥å­—ï¼šå¥—æ¥å­—æ˜¯ç½‘ç»œé€šä¿¡çš„**ç«¯ç‚¹**ï¼Œç”¨äºå»ºç«‹å’Œç®¡ç†é€šä¿¡è¿æ¥ã€‚å¥—æ¥å­—æ˜¯ä¸€ä¸ªå‡æƒ³çš„è¿æ¥è£…ç½®ï¼Œå°±åƒæ’åº§ä¸€æ ·å¯ä»¥è¿æ¥ç”µå™¨ä¸ç”µçº¿
> ```mermaid
> flowchart LR
> 	subgraph å®¢æˆ·ç«¯
> 		A1[åº”ç”¨ç¨‹åº] --> B1[Socket]
> 		B1 --> A1
> 		B1 --> C1[Port]
> 		C1 --> B1
> 	end
> 	
> 	subgraph æœåŠ¡å™¨
> 		A2[åº”ç”¨ç¨‹åº] --> B2[Socket]
> 		B2 --> A2
> 		B2 --> C2[Port]
> 		C2 --> B2
> 	end
> 	C1 <--é€šä¿¡è¿æ¥--> C2
> ```


### TCPç¨‹åº
> [!note] æ¦‚è¿°
> TCPç½‘ç»œç¨‹åºè®¾è®¡æŒ‡çš„æ˜¯åˆ©ç”¨**Socket**ç±»ç¼–å†™é€šä¿¡ç¨‹åºã€‚åˆ©ç”¨TCPåè®®è¿›è¡Œé€šä¿¡çš„ä¸¤ä¸ªåº”ç”¨ç¨‹åºæ˜¯æœ‰ä¸»æ¬¡ä¹‹åˆ†çš„ï¼Œä¸€ä¸ªè¢«ç§°ä¸ºæœåŠ¡å™¨ç¨‹åºï¼Œå¦ä¸€ä¸ªç§°ä¸ºå®¢æˆ·æœºç¨‹åºï¼ŒäºŒè€…çš„åŠŸèƒ½å’Œç¼–å†™æ–¹æ³•å¤§ä¸ç›¸åŒï¼Œäº¤äº’è¿‡ç¨‹å¦‚ä¸‹
> - è¿æ¥å»ºç«‹é˜¶æ®µï¼šä¸‰æ¬¡æ¡æ‰‹
> 	1. SYNï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚
> 	2. SYN-ACKï¼šæœåŠ¡å™¨ç¡®è®¤è¿æ¥è¯·æ±‚
> 	3. ACKï¼šå®¢æˆ·ç«¯ç¡®è®¤æœåŠ¡å™¨çš„ç¡®è®¤
> - æ•°æ®ä¼ è¾“é˜¶æ®µ
> 	- å®¢æˆ·ç«¯å‘é€æ•°æ®è¯·æ±‚
> 	- æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å›å“åº”
> 	- è¯¥è¿‡ç¨‹å¯ä»¥é‡å¤å¤šæ¬¡
> - è¿æ¥å…³é—­é˜¶æ®µï¼šå››æ¬¡æŒ¥æ‰‹
> 	1. FINï¼šå®¢æˆ·ç«¯è¯·æ±‚æ–­å¼€è¿æ¥
> 	2. ACKï¼šæœåŠ¡å™¨ç¡®è®¤æ”¶åˆ°æ–­å¼€è¯·æ±‚
> 	3. FINï¼šæœåŠ¡å™¨å‘é€æ–­å¼€è¯·æ±‚
> 	4. ACKï¼šå®¢æˆ·ç«¯ç¡®è®¤æ–­å¼€
> 
> å…·ä½“è¿‡ç¨‹å¦‚ä¸‹å›¾
> ```mermaid
>sequenceDiagram
>    participant Client as å®¢æˆ·ç«¯(Client)
>    participant Server as æœåŠ¡å™¨(Server)
>
>    Note over Server: æœåŠ¡å™¨å¯åŠ¨
>    Server->>Server: åˆ›å»ºServerSocket<br>ç»‘å®šç«¯å£
>    Server->>Server: ç›‘å¬å®¢æˆ·ç«¯è¿æ¥
>    
>    Note over Client: å®¢æˆ·ç«¯å¯åŠ¨
>    Client->>Server: è¯·æ±‚è¿æ¥(SYN)
>    Server->>Client: ç¡®è®¤è¿æ¥(SYN-ACK)
>    Client->>Server: ç¡®è®¤(ACK)
>    
>    Note right of Client: TCPä¸‰æ¬¡æ¡æ‰‹å®Œæˆ<br>è¿æ¥å»ºç«‹
>    
>    loop æ•°æ®ä¼ è¾“
>        Client->>Server: å‘é€æ•°æ®è¯·æ±‚
>        Server->>Server: å¤„ç†è¯·æ±‚
>        Server->>Client: è¿”å›å“åº”æ•°æ®
>    end
>    
>    Client->>Server: è¯·æ±‚æ–­å¼€è¿æ¥(FIN)
>    Server->>Client: ç¡®è®¤æ–­å¼€(ACK)
>    Server->>Client: è¯·æ±‚æ–­å¼€è¿æ¥(FIN)
>    Client->>Server: ç¡®è®¤æ–­å¼€(ACK)
>    
>    Note right of Client: TCPå››æ¬¡æŒ¥æ‰‹å®Œæˆ<br>è¿æ¥å…³é—­
>```

#### InetAddressç±»
> [!note] æ¦‚è¿°
> *java.net*åŒ…ä¸­çš„`InetAddress`ç±»æ˜¯ä¸IPåœ°å€ç›¸å…³çš„ç±»ï¼Œåˆ©ç”¨è¯¥ç±»å¯ä»¥è·å–IPåœ°å€ï¼Œä¸»æœºåœ°å€ç­‰ä¿¡æ¯ï¼Œå¸¸ç”¨æ–¹æ³•å¦‚ä¸‹è¡¨

|            æ–¹æ³•            |     è¿”å›å€¼     |            è¯´æ˜            |
| :----------------------: | :---------: | :----------------------: |
| `getByName(String host)` | InetAddress | è·å–ä¸Hostç›¸å¯¹åº”çš„InetAddresså¯¹è±¡ |
|    `getHostAddress()`    |   String    |  è·å–InetAddresså¯¹è±¡åŒ…å«çš„IPåœ°å€  |
|     `getHostName()`      |   String    |       è·å–æ­¤IPåœ°å€çš„ä¸»æœºå        |
|     `getLocalHost()`     | InetAddress |   è¿”å›æœ¬åœ°ä¸»æœºçš„InetAddresså¯¹è±¡   |
> [!example] è·å–è®¡ç®—æœºçš„æœ¬æœºåä¸IPåœ°å€
```java
public class Address {  
    static void main() {  
        InetAddress ip;  
        try {  
            ip = InetAddress.getLocalHost();  
            String localName = ip.getHostName();  
            String localIP = ip.getHostAddress();  
            System.out.println("æœ¬æœºåï¼š" + localName);  
            System.out.println("æœ¬æœºIPï¼š" + localIP);  
        }        
        catch (UnknownHostException e){  
            e.printStackTrace();  
        }
    }
}
```
è¿è¡Œç»“æœåœ¨ä¸åŒçš„ç³»ç»Ÿï¼Œä¸åŒçš„ç½‘ç»œç¯å¢ƒä¸‹ç»“æœä¼šä¸åŒ
> [!attention] æ³¨æ„
> `InetAddress`ç±»çš„æ–¹æ³•ä¼šæŠ›å‡º`UnknownHostException`å¼‚å¸¸ï¼Œå› æ­¤å¿…é¡»è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œè¯¥å¼‚å¸¸ä¼šåœ¨ä¸»æœºä¸å­˜åœ¨æˆ–ç½‘ç»œè¿æ¥é”™è¯¯æ—¶å‘ç”Ÿ

#### ServerSocketç±»
> [!note] æ¦‚è¿°
> *java.net*åŒ…ä¸‹çš„`ServerSocket`ç±»ç”¨äºè¡¨ç¤ºæœåŠ¡å™¨å¥—æ¥å­—ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯ç­‰å¾…æ¥è‡ªç½‘ç»œä¸Šçš„â€œè¯·æ±‚â€ï¼Œå®ƒå¯ä»¥é€šè¿‡æŒ‡å®šçš„ç«¯å£æ¥ç­‰å¾…è¿æ¥çš„å¥—æ¥å­—ã€‚æœåŠ¡å™¨å¥—æ¥å­—ä¸€æ¬¡å¯ä»¥ä¸ä¸€ä¸ªå¥—æ¥å­—è¿æ¥ã€‚å¦‚æœå¤šå°å®¢æˆ·æœºåŒæ—¶å‘å‡ºè¿æ¥è¯·æ±‚ï¼Œåˆ™æœåŠ¡å™¨å¥—æ¥å­—ä¼šå°†è¯·æ±‚è¿æ¥çš„å®¢æˆ·æœºå­˜å…¥é˜Ÿåˆ—ä¸­ï¼Œç„¶åä»ä¸­å–å‡ºä¸€ä¸ªå¥—æ¥å­—ï¼Œä¸æœåŠ¡å™¨æ–°å»ºçš„å¥—æ¥å­—è¿æ¥åœ¨ä¸€èµ·ã€‚å¦‚æœè¯·æ±‚æ•°å¤§äºæœ€å¤§å®¹çº³æ•°ï¼Œåˆ™å¤šå‡ºçš„è¿æ¥è¯·æ±‚è¢«æ‹’ç»ã€‚é˜Ÿåˆ—çš„é»˜è®¤å¤§å°æ˜¯50ã€‚
> 
> `ServerSocket`ç±»çš„æ„é€ å‡½æ•°ä¼šæŠ›å‡º`IOException`å¼‚å¸¸ï¼Œå…·ä½“æœ‰ä»¥ä¸‹å‡ ç§å½¢å¼
> - `ServerSocket()`ï¼šåˆ›å»ºéç»‘å®šæœåŠ¡å™¨å¥—æ¥å­—
> - `ServerSocket(int port)`ï¼šåˆ›å»ºç»‘å®šåˆ°ç‰¹å®šç«¯å£çš„æœåŠ¡å™¨å¥—æ¥å­—
> - `ServerSocket(int port,int backlog)`ï¼šåˆ©ç”¨æŒ‡å®šçš„backlogåˆ›å»ºæœåŠ¡å™¨å¥—æ¥å­—ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°æŒ‡å®šçš„æœ¬åœ°ç«¯å£å·ä¸Šã€‚
> - `ServerSocket(int port,int backlog,InetAddress bindAddress)`ï¼šä½¿ç”¨æŒ‡å®šçš„ç«¯å£ï¼Œä¾¦å¬backlogå’Œè¦ç»‘å®šåˆ°æœ¬åœ°IPåœ°å€åˆ›å»ºæœåŠ¡å™¨ã€‚è¿™ç§æƒ…å†µé€‚ç”¨äºè®¡ç®—æœºä¸Šæœ‰å¤šå—ç½‘å¡å’Œå¤šä¸ªIPåœ°å€çš„æƒ…å†µï¼Œç”¨æˆ·å¯ä»¥æ˜ç¡®è§„å®šServerSocketåœ¨å“ªå—ç½‘å¡æˆ–å“ªä¸ªIPåœ°å€ä¸Šç­‰å¾…å®¢æˆ·çš„è¿æ¥è¯·æ±‚
> 
> ServerSocketç±»çš„å¸¸ç”¨æ–¹æ³•å¦‚ä¸‹

|               æ–¹æ³•               |     è¿”å›å€¼     |               è¯´æ˜                |
| :----------------------------: | :---------: | :-----------------------------: |
|           `accept()`           |   Socket    |      ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ï¼Œå¦‚è‹¥è¿æ¥ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªå¥—æ¥å­—      |
|          `isBound()`           |   boolean   |       åˆ¤æ–­ServerSocketçš„ç»‘å®šçŠ¶æ€       |
|       `getInetAddress()`       | InetAddress |          è¿”å›æœåŠ¡å™¨å¥—æ¥å­—çš„æœ¬åœ°åœ°å€          |
|          `isClosed()`          |   boolean   |          è¿”å›æœåŠ¡å™¨å¥—æ¥å­—çš„å…³é—­çŠ¶æ€          |
|           `close()`            |    void     |            å…³é—­æœåŠ¡å™¨å¥—æ¥å­—             |
| `bind(SocketAddress endpoint)` |    void     | å°†ServerSocketç»‘å®šåˆ°ç‰¹å®šåœ°å€ï¼ˆIPåœ°å€å’Œç«¯å£å·ï¼‰ä¸Š |
|       `getInetAddress()`       |     int     |         è¿”å›æœåŠ¡å™¨å¥—æ¥å­—ç­‰å¾…çš„ç«¯å£å·          |
> [!tip] è¯´æ˜
> è°ƒç”¨ServerSocketç±»çš„`accept()`æ–¹æ³•ï¼Œä¼šè¿”å›ä¸€ä¸ªå’Œå®¢æˆ·ç«¯ Socket å¯¹è±¡ç›¸è¿æ¥çš„**Socketå¯¹è±¡**ã€‚æœåŠ¡å™¨ç«¯çš„ Socket å¯¹è±¡é€šè¿‡Â `getOutputStream()`Â è·å–è¾“å‡ºæµï¼Œå®¢æˆ·ç«¯çš„ Socket å¯¹è±¡é€šè¿‡Â `getInputStream()`Â è·å–è¾“å…¥æµï¼›åä¹‹ï¼ŒæœåŠ¡å™¨ç«¯çš„ Socket å¯¹è±¡é€šè¿‡Â `getInputStream()`Â è·å–çš„è¾“å…¥æµï¼Œå¯¹åº”å®¢æˆ·ç«¯çš„ Socket å¯¹è±¡é€šè¿‡Â `getOutputStream()`Â è·å–çš„è¾“å‡ºæµã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æœåŠ¡å™¨å‘è¾“å‡ºæµä¸­å†™å…¥ä¿¡æ¯æ—¶ï¼Œå®¢æˆ·ç«¯é€šè¿‡ç›¸åº”çš„è¾“å…¥æµå°±èƒ½å¤Ÿè¯»å–ï¼Œåä¹‹äº¦ç„¶ã€‚

> [!attention] æ³¨æ„
>  ```java
>  yu = server.accept();
>  System.out.println("è¿æ¥ä¸­");
>  ```
>  `accept()`æ–¹æ³•ä¼šé˜»å¡çº¿ç¨‹çš„ç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°æœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·çš„å‘¼å«ã€‚å¦‚æœå®¢æˆ·æ²¡æœ‰å‘¼å«æœåŠ¡å™¨ï¼Œé‚£ä¹ˆè¾“å‡ºçš„è¯­å¥å°±ä¸ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœæœåŠ¡å™¨æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œ`accept()`æ–¹æ³•å°±æ²¡æœ‰å‘ç”Ÿé˜»å¡ï¼Œé‚£å°±è‚¯å®šæ˜¯ç¨‹åºå‡ºl é—®é¢˜ã€‚é€šå¸¸æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªè¢«å…¶ä»–ç¨‹åºå ç”¨çš„ç«¯å£å·ï¼ŒServerSocket ç»‘å®šæ²¡æœ‰æˆåŠŸ

#### TCPç½‘ç»œç¨‹åºè®¾è®¡

> [!example] åˆ›å»ºTCP/IPåè®®æœåŠ¡å™¨
```java
import java.io.BufferedReader;  
import java.io.IOException;  
import java.io.InputStreamReader;  
import java.net.ServerSocket;  
import java.net.Socket;  
  
public class MyServer {  
    private ServerSocket serverSocket;  // æœåŠ¡å™¨å¥—æ¥å­—  
    private Socket socket; // å®¢æˆ·ç«¯å¥—æ¥å­—  
  
    void start(){  
        try {  
            serverSocket = new ServerSocket(8888);  
            System.out.println("æœåŠ¡å™¨å¥—æ¥å­—åˆ›å»ºæˆåŠŸï¼");  
            while (true){  
                System.out.println("ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...");  
                serverSocket.accept();  // æœåŠ¡å™¨ç›‘å¬å®¢æˆ·ç«¯è¿æ¥  
                // æ ¹æ®å¥—æ¥å­—å­—èŠ‚æµåˆ›å»ºå­—ç¬¦è¾“å…¥æµ  
                BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));  
                while (true){  
                    String message = reader.readLine();  
                    if("exet".equals(message)){  
                        System.out.println("å®¢æˆ·ç«¯å·²é€€å‡ºï¼");  
                        break;  
                    }                    
                    System.out.println("å®¢æˆ·ç«¯ï¼š" + message);  
                }                
                reader.close(); // å…³é—­æµ  
                socket.close(); // å…³é—­å¥—æ¥å­—  
            }  
        }        
        catch (IOException e){  
            e.printStackTrace();  
        }
    }  
    static void main() {  
        MyServer server = new MyServer();  
        server.start();  
    }
}
```
è¿è¡Œç»“æœ
```text
æœåŠ¡å™¨å¥—æ¥å­—åˆ›å»ºæˆåŠŸï¼
ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...
```

> [!example] ç¼–å†™å®¢æˆ·ç«¯ç¨‹åºï¼Œå°†ç”¨æˆ·åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥çš„ä¿¡æ¯å‘é€è‡³æœåŠ¡å™¨ç«¯ï¼Œå¹¶å°†æ–‡æœ¬æ¡†ä¸­è¾“å…¥çš„ä¿¡æ¯æ˜¾ç¤ºåœ¨å®¢æˆ·ç«¯çš„æ–‡æœ¬åŸŸä¸­
```java
import javax.swing.*;  
import java.awt.*;  
import java.awt.event.ActionEvent;  
import java.awt.event.ActionListener;  
import java.io.IOException;  
import java.io.PrintWriter;  
import java.net.InetAddress;  
import java.net.Socket;

public class MyClient extends JFrame {  
    private PrintWriter writer; // æ ¹æ®å¥—æ¥å­—å­—èŠ‚æµåˆ›å»ºçš„å­—ç¬¦è¾“å‡ºæµ  
    Socket socket; // å®¢æˆ·ç«¯å¥—æ¥å­—  
    private JTextArea area = new JTextArea();   // å±•ç¤ºä¿¡æ¯çš„æ–‡æœ¬åŸŸ  
    private JTextField text = new JTextField(); // è¾“å…¥ä¿¡æ¯çš„æ–‡æœ¬æ¡†  
  
    /**  
     * æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–å®¢æˆ·ç«¯ç•Œé¢  
     * è®¾ç½®çª—å£æ ‡é¢˜ã€å…³é—­æ“ä½œã€å¸ƒå±€ç®¡ç†å™¨  
     * æ·»åŠ æ–‡æœ¬åŒºåŸŸå’Œæ–‡æœ¬æ¡†ç»„ä»¶  
     * æ³¨å†Œæ–‡æœ¬æ¡†çš„å›è½¦äº‹ä»¶ç›‘å¬å™¨  
     */  
    public MyClient() {  
        setTitle("å‘æœåŠ¡å™¨é€æ•°æ®");  
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  
        Container c = getContentPane(); // ä¸»å®¹å™¨  
        JScrollPane scrollPane = new JScrollPane(area);  
        getContentPane().add(scrollPane, BorderLayout.CENTER);  
        c.add(text, BorderLayout.SOUTH);  
        // ä¸ºæ–‡æœ¬æ¡†æ·»åŠ å›è½¦äº‹ä»¶ç›‘å¬å™¨ï¼Œç”¨äºå‘é€æ¶ˆæ¯  
        text.addActionListener(new ActionListener() {  
            @Override  
            public void actionPerformed(ActionEvent e) {  
                writer.println(text.getText());  
                area.append(text.getText()+"\n");  
                text.setText("");  
            }
        });
    }  
    /**  
     * è¿æ¥æœåŠ¡å™¨æ–¹æ³•  
     * åˆ›å»ºå¥—æ¥å­—è¿æ¥åˆ°æœ¬åœ°ä¸»æœºçš„8888ç«¯å£  
     * åˆå§‹åŒ–è¾“å‡ºæµç”¨äºå‘æœåŠ¡å™¨å‘é€æ•°æ®  
     * å¦‚æœè¿æ¥å¤±è´¥ï¼Œæ‰“å°å¼‚å¸¸å †æ ˆä¿¡æ¯  
     */  
    private void connect() {  
        try {  
            String ip = InetAddress.getLocalHost().getHostAddress();  
            socket = new Socket(ip, 8888);  
            writer = new PrintWriter(socket.getOutputStream(), true);  
            area.append("å·²è¿æ¥æœåŠ¡å™¨\n");  
        }        
        catch (IOException e){  
            e.printStackTrace();  
        }
    }  
    /**  
     * ç¨‹åºå…¥å£ç‚¹  
     * åˆ›å»ºå®¢æˆ·ç«¯å®ä¾‹ï¼Œè®¾ç½®çª—å£å¤§å°å’Œå¯è§æ€§  
     * è°ƒç”¨è¿æ¥æ–¹æ³•è¿æ¥æœåŠ¡å™¨  
     */  
    static void main() {  
        MyClient client = new MyClient();  
        client.setSize(400, 300);  
        client.setVisible(true);  
        client.connect();  
    }
}
```

> [!tip] æ“ä½œè¯´æ˜
> å…ˆè¿è¡ŒæœåŠ¡å™¨ç«¯ç¨‹åºï¼Œç„¶åè¿è¡Œå®¢æˆ·ç«¯ç¨‹åº
### UDPç¨‹åº
> [!note] æ¦‚è¿°
> ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆUDPï¼‰æ˜¯ç½‘ç»œä¿¡æ¯ä¼ è¾“çš„å¦ä¸€ç§æ¨¡å¼ã€‚åŸºäºUDPçš„é€šä¿¡å’ŒåŸºäºTCPçš„é€šä¿¡ä¸åŒï¼ŒåŸºäºUDPçš„ä¿¡æ¯ä¼ è¾“*æ›´å¿«*ï¼Œä½†æ˜¯ä¸æä¾›å¯é æ€§ä¿è¯ã€‚ä½¿ç”¨UDPè¿›è¡Œæ•°æ®ä¼ è¾“æ—¶ï¼Œç”¨æˆ·æ— æ³•çŸ¥é“æ•°æ®èƒ½å¦æ­£ç¡®åˆ°è¾¾ä¸»æœºï¼Œä¹Ÿä¸èƒ½ç¡®å®šåˆ°è¾¾ç›®çš„åœ°çš„é¡ºåºå’Œå‘é€é¡ºåºæ˜¯å¦ç›¸åŒã€‚è™½ç„¶UDPæ˜¯ä¸€ç§ä¸å¯é çš„åè®®ï¼Œä½†æ˜¯å¦‚æœéœ€è¦è¾ƒå¿«çš„ä¼ è¾“ä¿¡æ¯ï¼Œå¹¶ä¸”èƒ½å®¹å¿å°é”™è¯¯ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨UDP
> 
> åŸºäºUDPçš„é€šä¿¡åŸºæœ¬æ¨¡å¼å¦‚ä¸‹
> - å°†æ•°æ®åŒ…è¿›è¡Œæ‰“åŒ…ï¼ˆæ•°æ®åŒ…ï¼‰ï¼Œç„¶åå°†æ•°æ®åŒ…å‘å¾€ç›®çš„åœ°ã€‚å‘é€æ•°æ®åŒ…çš„æ­¥éª¤å¦‚ä¸‹
> 	1. ä½¿ç”¨`DatagramSocket()`åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…å¥—æ¥å­—
> 	2. ä½¿ç”¨`DatagramPacket(byre[] buf,int offset,int length,InetAddress.int port)`åˆ›å»ºè¦å‘é€çš„æ•°æ®åŒ…
> 	3. ä¼¼ä¹ç”¨`DatagramSocket`ç±»çš„`send()`æ–¹æ³•å‘é€æ•°æ®åŒ…
> - æ¥å—åˆ«äººå‘æ¥çš„æ•°æ®åŒ…ï¼Œç„¶åæŸ¥çœ‹æ•°æ®åŒ…ã€‚æ¥æ”¶æ•°æ®åŒ…çš„æ­¥éª¤å¦‚ä¸‹ï¼š
> 	1. ä½¿ç”¨`DatagramSocket(int port)`åˆ›å»ºæ•°æ®åŒ…å¥—æ¥å­—ï¼Œç»‘å®šåˆ°æŒ‡å®šçš„ç«¯å£ä¸Š
> 	2. ä½¿ç”¨`DatagramPacket(byte[] buf,int length)`åˆ›å»ºå­—èŠ‚æ•°ç»„æ¥æ”¶æ•°æ®åŒ…
> 	3. ä½¿ç”¨`DatagramPacket`ç±»çš„`receive()`æ–¹æ³•æ¥æ”¶ UDP åŒ…
> 

> [!attention] æ³¨æ„
> DatagramSocket ç±»çš„`receive()`æ–¹æ³•æ¥æ”¶æ•°æ®æ—¶ï¼Œå¦‚æœè¿˜æ²¡æœ‰å¯ä»¥æ¥æ”¶çš„æ•°æ®ï¼Œé‚£ä¹ˆåœ¨æ­£å¸¸æƒ…å†µä¸‹`receive()`æ–¹æ³•è¢«é˜»å¡ï¼Œä¸€ç›´ç­‰åˆ°ç½‘ç»œä¸Šæœ‰æ•°æ®ä¼ æ¥ï¼Œ`receive()`æ–¹æ³•æ¥æ”¶è¯¥æ•°æ®å¹¶è¿”å›ã€‚å¦‚æœç½‘ç»œä¸Šæ²¡æœ‰æ•°æ®å‘è¿‡æ¥ï¼Œ`receive()`æ–¹æ³•ä¹Ÿæ²¡æœ‰è¢«é˜»å¡ï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯ç¨‹åºæœ‰é—®é¢˜ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å› ä¸ºä½¿ç”¨äº†ä¸€ä¸ªè¢«å…¶ä»–ç¨‹åºå ç”¨çš„ç«¯å£å·

#### DatagramPacketç±»
> [!note] æ¦‚è¿°
> *java.net*åŒ…çš„ `DatagramPacket`ç±»ç”¨æ¥è¡¨ç¤ºæ•°æ®åŒ…ï¼Œå…¶æ„é€ å‡½æ•°å¦‚ä¸‹
> - `DatagramPacket(byte[] buf,int length)`ï¼šåˆ›å»ºå¯¹è±¡æ—¶ï¼ŒæŒ‡å®šäº†æ•°æ®åŒ…çš„å†…å­˜ç©ºé—´å’Œå¤§å°
> - `DatagramPacket(byte[] buf,int length,InetAddress address,int port)`ï¼šä¸ä»…æŒ‡å®šæ•°æ®åŒ…çš„å†…å­˜ç©ºé—´å’Œå¤§å°ï¼Œè¿˜æŒ‡å®šäº†æ•°æ®åŒ…çš„ç›®æ ‡åœ°å€å’Œç«¯å£

#### DatagramSocketç±»
> [!note] æ¦‚è¿°
> *java.net*åŒ…ä¸‹çš„`DatagramSocket`ç±»ç”¨äºå‘é€å’Œæ¥æ”¶æ•°æ®åŒ…çš„å¥—æ¥å­—ï¼Œå…¶æ„é€ å‡½æ•°å¦‚ä¸‹
> - `DatagramSocket()`ï¼šåˆ›å»º DatagramSocket å¯¹è±¡ï¼Œæ„é€ æ•°æ®æŠ¥å¥—æ¥å­—ï¼Œå°†å…¶ç»‘å®šåˆ°æœ¬åœ°ä¸»æœºä»»ä½•å¯ç”¨çš„ç«¯å£ä¸Š
> - `DatagramSocket(int port)`ï¼šåˆ›å»º DatagramSocket å¯¹è±¡ï¼Œåˆ›å»ºæ•°æ®æŠ¥å¥—æ¥å­—ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°æœ¬åœ°ä¸»æœºçš„æŒ‡å®šç«¯å£ä¸Š
> - `DatagramSocket(int port,InetAddress addr)`ï¼šåˆ›å»º DatagramSocket å¯¹è±¡ï¼Œåˆ›å»ºæ•°æ®æŠ¥å¥—æ¥å­—ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°æœ¬åœ°ä¸»æœºçš„æŒ‡å®šç«¯å£å’ŒæŒ‡å®šçš„æœ¬åœ°åœ°å€ä¸Šï¼Œè¯¥æ„é€ å‡½æ•°é€‚ç”¨äºæœ‰å¤šå—ç½‘å¡å’Œå¤šä¸ªIPåœ°å€ æƒ…å†µ
> å¦‚æœæ¥æ”¶æ•°æ®æ—¶å¿…é¡»æŒ‡å®šä¸€ä¸ªç«¯å£å·ï¼Œä¸å…è®¸ç³»ç»Ÿéšæœºäº§ç”Ÿï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ç¬¬äºŒç§æ„é€ ã€‚æ¯”å¦‚æœ‰ä¸ªæœ‹å‹è¦ä½ ç»™ä»–å†™ä¿¡ï¼Œé‚£ä»–çš„åœ°å€å°±å¿…é¡»ç¡®å®šã€‚åœ¨å‘é€æ•°æ®æ—¶é€šå¸¸ä½¿ç”¨ç¬¬ä¸€ç§æ„é€ ï¼Œä¸æŒ‡å®šç«¯å£å·ï¼Œè€Œæ˜¯ç”±ç³»ç»Ÿä¸ºæˆ‘ä»¬åˆ†é…ä¸€ä¸ªç«¯å£å·ï¼Œå°±åƒå¯„ä¿¡ä¸éœ€è¦åˆ°æŒ‡å®šçš„é‚®å±€é‚®å¯„ä¸€æ ·ã€‚

#### UDPç½‘ç»œç¨‹åºè®¾è®¡
> [!example] åˆ›å»º UDP åè®®å¹¿æ’­ç”µå°ç¨‹åº
```java
// å¹¿æ’­ä¸»æœºç¨‹åº
import java.io.IOException;  
import java.net.DatagramPacket;  
import java.net.InetAddress;  
import java.net.MulticastSocket;  
  
public class Notification extends Thread{  
    String weather = "èŠ‚ç›®é¢„æŠ¥ï¼šä»Šæ™š8ç‚¹æœ‰å¤§å‹æ™šä¼šï¼Œæ•¬è¯·æ”¶å¬ï¼";  
    int port = 9898;  
    InetAddress address = null;  
    MulticastSocket socket = null;  
  
    Notification(){  
        try {  
            address = InetAddress.getByName("172.16.17.32");  
            socket = new MulticastSocket(port);  
            socket.setTimeToLive(1);  // æŒ‡å®šå‘é€èŒƒå›´ä¸ºæœ¬åœ°ç½‘ç»œ  
            socket.joinGroup(address); // åŠ å…¥å¹¿æ’­ç»„  
        }  
        catch (IOException e){  
            e.printStackTrace();  
        }
    }  
    public void run(){  
        while (true){  
            DatagramPacket packet = null;  
            byte[] data = weather.getBytes();  
            packet = new DatagramPacket(data, data.length, address, port);  
            System.out.println(weather);  
            try {  
                socket.send(packet);  
                sleep(3000);  
            }            
            catch (IOException e){  
                e.printStackTrace();  
            }            
            catch (InterruptedException e){  
                e.printStackTrace();  
            }
        }
    }    
    public static void main(String[] args) {  
        new Notification().start();  
    }
}
```

> [!example] ç¼–å†™æ¥æ”¶å¹¿æ’­ç¨‹åº
```java
import javax.swing.*;  
import java.awt.*;  
import java.awt.event.ActionEvent;  
import java.awt.event.ActionListener;  
import java.io.IOException;  
import java.net.DatagramPacket;  
import java.net.InetAddress;  
import java.net.MulticastSocket;  
  
/**  
 * æ¥æ”¶UDPå¤šæ’­æ•°æ®çš„å›¾å½¢ç•Œé¢ç¨‹åº  
 * è¯¥ç±»ç»§æ‰¿è‡ªJFrameå¹¶å®ç°äº†Runnableå’ŒActionListeneræ¥å£ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªå¯ä»¥æ¥æ”¶å¤šæ’­æ•°æ®æŠ¥çš„çª—å£åº”ç”¨  
 */  
public class Receive extends JFrame implements Runnable, ActionListener {  
    // ç«¯å£  
    int port;  
    // å¹¿æ’­ç»„åœ°å€  
    InetAddress group = null;  
    // å¤šç‚¹å¹¿æ’­å¥—æ¥å­—å¯¹è±¡  
    MulticastSocket socket = null;  
  
    JButton inceBtn = new JButton("å¼€å§‹æ¥æ”¶");  
    JButton stopBtn = new JButton("åœæ­¢æ¥æ”¶");  
    JTextArea inceAr = new JTextArea(10,10);  
    JTextArea inced = new JTextArea(10,10);  
    Thread thread;  
    boolean stop = false;  
  
    /**  
     * æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–å›¾å½¢ç•Œé¢ç»„ä»¶å¹¶è®¾ç½®å¤šæ’­socketè¿æ¥  
     */  
    public Receive(){  
        setTitle("å¹¿æ’­æ•°æ®æŠ¥");  
        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);  
        thread = new Thread(this);  
        inceBtn.addActionListener(this);  
        stopBtn.addActionListener(this);  
        inceAr.setForeground(Color.blue);  
        JPanel north = new JPanel();  
        north.add(inceBtn);  
        north.add(stopBtn);  
        add(north,BorderLayout.NORTH);  
        JPanel center = new JPanel();  
        center.setLayout(new GridLayout(1,2));  
        center.add(inceAr);  
        center.add(inced);  
        add(center,BorderLayout.CENTER);  
        validate();  
        port = 9898;  
        // åˆå§‹åŒ–å¤šæ’­socketå¹¶åŠ å…¥å¤šæ’­ç»„  
        try {  
            group = InetAddress.getByName("172.16.17.32");  
            socket = new MulticastSocket(port);  
            socket.joinGroup(group);  
        }        
        catch (IOException e){  
            e.printStackTrace();  
        }        setBounds(100,50,360,380);  
        setVisible(true);  
    }  
    /**  
     * å¤„ç†æŒ‰é’®ç‚¹å‡»äº‹ä»¶  
     * @param e ActionEventäº‹ä»¶å¯¹è±¡  
     */  
    @Override  
    public void actionPerformed(ActionEvent e) {  
        // å¼€å§‹æ¥æ”¶æŒ‰é’®äº‹ä»¶å¤„ç†  
        if(e.getSource() == inceBtn){  
            inceBtn.setBackground(Color.RED);  
            stopBtn.setBackground(Color.yellow);  
            if(!thread.isAlive()){  
                thread = new Thread(this);  
            }            thread.start();  
            stop = false;  
        }  
        // åœæ­¢æ¥æ”¶æŒ‰é’®äº‹ä»¶å¤„ç†  
        if(e.getSource() == stopBtn){  
            inceBtn.setBackground(Color.yellow);  
            stopBtn.setBackground(Color.RED);  
            stop = true;  
        }
    }  
    /**  
     * çº¿ç¨‹æ‰§è¡Œæ–¹æ³•ï¼Œå¾ªç¯æ¥æ”¶å¤šæ’­æ•°æ®æŠ¥å¹¶åœ¨ç•Œé¢æ˜¾ç¤º  
     */  
    @Override  
    public void run() {  
        // å¾ªç¯æ¥æ”¶æ•°æ®ç›´åˆ°stopæ ‡å¿—è¢«è®¾ç½®ä¸ºtrue  
        while (!stop){  
            byte[] data = new byte[1024];  
            DatagramPacket packet = new DatagramPacket(data, data.length, group, port);  
            try {  
                socket.receive(packet);  
                String message = new String(packet.getData(), 0, packet.getLength());  
                inceAr.setText("æ­£åœ¨æ¥æ”¶å†…å®¹ï¼š\n" + message);  
                inced.append(message + "\n");  
            }            
            catch (IOException e){  
                e.printStackTrace();  
            }
        }
    }  
    /**  
     * ç¨‹åºå…¥å£ç‚¹  
     */  
    static void main() {  
        Receive receive = new Receive();  
        receive.setSize(460,200);  
    }
}
```


### NIOåŒæ­¥éé˜»å¡ç½‘ç»œç¼–ç¨‹
> [!note] æ¦‚è¿°
> NIO çš„å…¨ç§°æ˜¯ *non-blocking IO*ã€‚ä»JDK1.4å¼€å§‹ï¼ŒJavaæä¾›äº†ä¸€ç³»åˆ—æ”¹è¿›çš„è¾“å…¥è¾“å‡ºçš„æ–°ç‰¹æ€§ï¼Œç»Ÿç§°ä¸º NIOã€‚NIOæ˜¯**åŒæ­¥éé˜»å¡**çš„ã€‚NIOçš„ç›¸å…³ç±»è¢«å­˜å‚¨åœ¨`java.nio`åŒ…åŠå…¶å­åŒ…ä¸‹ï¼Œå…·æœ‰ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š
> 1. Bufferï¼ˆç¼“å†²åŒºï¼‰
> 2. Channelï¼ˆé€šé“ï¼‰
> 3. Selectorï¼ˆé€‰æ‹©å™¨ï¼‰


### AIOå¼‚æ­¥éé˜»å¡ç½‘ç»œç¼–ç¨‹
> [!note] æ¦‚è¿°
> AIO çš„å…¨ç§°æ˜¯ *asynchronized IO*ï¼Œä»JDK7å¼€å§‹æ”¯æŒã€‚AIOä¸æ˜¯åœ¨IOå‡†å¤‡å¥½æ—¶å†é€šçŸ¥çº¿ç¨‹çš„ï¼Œè€Œæ˜¯åœ¨IOæ“ä½œå·²ç»å®Œæˆåå†ç»™çº¿ç¨‹å‘å‡ºé€šçŸ¥çš„ã€‚å› æ­¤ï¼ŒAIOæ˜¯å®Œå…¨ä¸ä¼šé˜»å¡çš„ã€‚AIOçš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š
> - è¯»å®Œäº†å†é€šçŸ¥çº¿ç¨‹
> - ä¸ä¼šåŠ å¿«IOï¼Œåªæ˜¯åœ¨è¯»å®Œåè¿›è¡Œé€šçŸ¥
> - ä½¿ç”¨å›è°ƒå‡½æ•°è¿›è¡Œä¸šåŠ¡å¤„ç†
> 
> AIOéœ€è¦ä½¿ç”¨å¼‚æ­¥é€šé“ï¼Œå³*AsynchronousServerSocketChannel*ã€‚å…¶ä¸­ï¼Œ`accept()`æ–¹æ³•ä¸»è¦è´Ÿè´£ä¸¤ä»¶äº‹ï¼š
> 1. å‘èµ· accept è¯·æ±‚ï¼Œå‘Šè¯‰æˆ‘ä»¬ç³»ç»Ÿå¼€å§‹ç›‘å¬ç«¯å£
> 2. æ³¨å†Œ`CompletionHandler`å®ä¾‹ï¼Œå½“æœ‰å®¢æˆ·ç«¯è¿æ¥æ—¶ï¼š
> 	- å¦‚æœè¿æ¥æˆåŠŸï¼Œæ‰§è¡Œ`CompletionHandler.completed()`æ–¹æ³•
> 	- å¦‚æœè¿æ¥å¤±è´¥ï¼Œæ‰§è¡Œ`CompletionHandler.failed()`æ–¹æ³•
> å› æ­¤ **accept ä¸ä¼šè¢«é˜»å¡**



---
